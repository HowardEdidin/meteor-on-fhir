{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-person/lib/Persons.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-person/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-person/client/react/Glass.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-person/client/react/PersonDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-person/client/react/PersonsPage.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-person/client/react/PersonsTable.jsx"],"names":["SimpleSchema","module","link","v","get","Person","BaseModel","extend","prototype","_collection","Persons","Package","Mongo","Collection","Meteor","connection","_transform","document","PersonSchema","type","String","defaultValue","optional","Array","IdentifierSchema","HumanNameSchema","ContactPointSchema","Code","Date","AddressSchema","AttachmentSchema","ReferenceSchema","Boolean","Object","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","PersonsPage","PersonsTable","PersonDetail","Session","Glass","getOpacity","setOpacity","opacity","set","blur","style","filter","WebkitFilter","backgroundBlur","backdropFilter","darkroom","color","background","defaultStyle","CardActions","CardText","has","insertPerson","removePersonById","updatePerson","Bert","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","defaultPerson","url","identifier","setDefault","getMeteorData","data","personId","person","console","log","selectedPerson","findOne","_id","birthDate","moment","add","format","process","env","NODE_ENV","render","props","id","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","field","event","value","personUpdate","TRACE","name","text","gender","toLowerCase","photo","resourceType","update","$set","error","result","alert","reason","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","Component","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","index","username","email","given","family","tab","borderBottom","borderRight","tabIndex","personSearchFilter","currentPerson","appbar","handleTabChange","onNewTab","version","handleActive","Avatar","FlatButton","HTTP","Table","TableNoData","flattenPerson","active","mrn","initials","hideOnPhone","visibility","display","cellHideOnPhone","paddingTop","maxWidth","cell","avatar","backgroundColor","userSelect","borderRadius","height","width","selected","persons","query","options","limit","length","forEach","push","find","map","imgError","avatarId","refs","src","absoluteUrl","rowClick","renderRowAvatarHeader","showAvatars","renderRowAvatar","avatarStyle","renderSendButtonHeader","showSendButton","renderSendButton","onSend","i","httpEndpoint","post","selectPersonRow","onRowClick","tableRows","footer","noDataPadding","cursor","minWidth"],"mappings":"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","file":"/packages/clinical_hl7-resource-person.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\nimport { get } from 'lodash';\n\n// create the object using our BaseModel\nPerson = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nPerson.prototype._collection = Persons;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Persons === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Persons = new Mongo.Collection('Persons');\n  } else if(get(Meteor, 'settings.public.guests.allowDataCollection') === true){\n      Persons = new Mongo.Collection('Persons');\n  } else {\n    Persons = new Mongo.Collection('Persons', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nPersons._transform = function (document) {\n  return new Person(document);\n};\n\n\n\nPersonSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Person\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"name\" : {\n    optional: true,\n    type: Array\n  },\n  \"name.$\" : {\n    optional: true,\n    type: HumanNameSchema \n  },\n  \"telecom\" : {\n    optional: true,\n    type: Array\n  },\n  \"telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  },\n  \"gender\" : {\n    optional: true,\n    type: Code\n  },\n  \"birthDate\" : {\n    optional: true,\n    type: Date\n  },\n  \"address\" : {\n    optional: true,\n    type: Array\n  },\n  \"address.$\" : {\n    optional: true,\n    type: AddressSchema\n  },\n  \"photo\" : {\n    optional: true,\n    type: AttachmentSchema\n  },\n  \"managingOrganization\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"active\" : {\n    optional: true,\n    type: Boolean\n  },\n\n  \"link\" : {\n    optional: true,\n    type:  Array\n    },\n  \"link.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"link.$.target\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"link.$.assurance\" : {\n    optional: true,\n    type: Code\n  }\n});\nBaseSchema.extend(PersonSchema);\nDomainResourceSchema.extend(PersonSchema);\n\nPersons.attachSchema(PersonSchema);\n\nexport default { Person, Persons, PersonSchema };","\n\nimport PersonsPage from './client/react/PersonsPage';\nimport PersonsTable from './client/react/PersonsTable';\nimport PersonDetail from './client/react/PersonDetail';\n\nvar DynamicRoutes = [{\n  'name': 'PersonPage',\n  'path': '/persons',\n  'component': PersonsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Persons',\n  'to': '/persons',\n  'href': '/persons'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  PersonsPage,\n  PersonsTable,\n  PersonDetail\n};\n\n\n","import { Session } from 'meteor/session';\n\nexport default Glass = {\n  getOpacity: function(){\n    return Session.get('globalOpacity');\n  },\n  setOpacity: function(opacity){\n    return Session.set('globalOpacity', opacity);\n  },\n  blur: function(style){\n    if (style) {\n      if (Session.get('glassBlurEnabled')) {\n        style.filter = 'blur(3px)';\n        style.WebkitFilter = 'blur(3px)';\n      }\n    }\n    return style;\n  },\n  backgroundBlur: function(style){\n    if (style) {\n      if (Session.get('backgroundBlurEnabled')) {\n        style.backdropFilter = 'blur(5px)';\n      }\n    }\n    return style;\n  },\n  darkroom: function(style){\n    if (!style) {\n      style = {};\n    }\n    if (Session.get('darkroomEnabled')) {\n      style.color = 'black';\n      style.background = 'white';\n    } else {\n      style.color = 'white';\n      style.background = 'black';\n    }\n    return style;\n  },\n  defaultStyle: function(style){\n    if (!style) {\n      style = {};\n    }\n    this.blur(style);\n    this.darkroom(style);\n    return style;\n  }\n};\n","import { CardActions, CardText } from 'material-ui/Card';\nimport { get, has, set } from 'lodash';\n// import { insertPerson, removePersonById, updatePerson } from '/imports/ui/workflows/persons/methods';\n// import { insertPerson, removePersonById, updatePerson } from 'meteor/clinical:hl7-resource-person';\nimport { insertPerson, removePersonById, updatePerson } from 'meteor/clinical:hl7-resource-person';\n\n\nimport { Bert } from 'meteor/clinical:alert';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\n\nimport { Persons } from '../../lib/Persons';\nimport { Session } from 'meteor/session';\n\n\nlet defaultPerson = {\n  \"resourceType\" : \"Person\",\n  \"name\" : [{\n    \"text\" : \"\",\n    \"resourceType\" : \"HumanName\"\n  }],\n  \"active\" : true,\n  \"gender\" : \"\",\n  \"birthDate\" : '',\n  \"photo\" : [{\n    url: \"\"\n  }],\n  identifier: [{\n    \"use\": \"usual\",\n    \"type\": {\n      \"coding\": [\n        {\n          \"system\": \"http://hl7.org/fhir/v2/0203\",\n          \"code\": \"MR\"\n        }\n      ]\n    },\n    \"value\": \"\"\n  }],\n  \"test\" : false\n};\n\n\nSession.setDefault('personUpsert', false);\nSession.setDefault('selectedPerson', false);\n\nexport default class PersonDetail extends React.Component {\n  getMeteorData() {\n    let data = {\n      personId: false,\n      person: defaultPerson\n    };\n\n    if (Session.get('personUpsert')) {\n      data.person = Session.get('personUpsert');\n    } else {\n      if (Session.get('selectedPerson')) {\n        data.personId = Session.get('selectedPerson');\n        console.log(\"selectedPerson\", Session.get('selectedPerson'));\n\n        let selectedPerson = Persons.findOne({_id: Session.get('selectedPerson')});\n        console.log(\"selectedPerson\", selectedPerson);\n\n        if (selectedPerson) {\n          data.person = selectedPerson;\n\n          if (typeof selectedPerson.birthDate === \"object\") {\n            data.person.birthDate = moment(selectedPerson.birthDate).add(1, 'day').format(\"YYYY-MM-DD\");\n          }\n        }\n      } else {\n        data.person = defaultPerson;\n      }\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"PersonDetail[data]\", data);\n    return data;\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} className=\"personDetail\">\n        <CardText>\n          <TextField\n            id='nameInput'\n            ref='name'\n            name='name'\n            floatingLabelText='name'\n            value={ get(this, 'data.person.name[0].text', '')}\n            onChange={ this.changeState.bind(this, 'name')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='genderInput'\n            ref='gender'\n            name='gender'\n            floatingLabelText='gender'\n            hintText='male | female | other | indeterminate | unknown'\n            value={ get(this, 'data.person.gender', '')}\n            onChange={ this.changeState.bind(this, 'gender')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='birthdateInput'\n            ref='birthdate'\n            name='birthdate'\n            floatingLabelText='birthdate'\n            hintText='YYYY-MM-DD'\n            value={ get(this, 'data.person.birthDate', '')}\n            onChange={ this.changeState.bind(this, 'birthDate')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='photoInput'\n            ref='photo'\n            name='photo'\n            floatingLabelText='photo'\n            value={ get(this, 'data.person.photo[0].url', '')}\n            onChange={ this.changeState.bind(this, 'photo')}\n            floatingLabelFixed={false}\n            fullWidth\n            /><br/>\n          <TextField\n            id='mrnInput'\n            ref='mrn'\n            name='mrn'\n            floatingLabelText='medical record number'\n            value={ get(this, 'data.person.identifier[0].value', '')}\n            onChange={ this.changeState.bind(this, 'mrn')}\n            fullWidth\n            /><br/>\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.personId) }\n        </CardActions>\n      </div>\n    );\n  }\n  determineButtons(personId){\n    if (personId) {\n      return (\n        <div>\n          <RaisedButton id='savePersonButton' className='savePersonButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id='savePersonButton'  className='savePersonButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  changeState(field, event, value){\n    let personUpdate;\n\n    if(process.env.TRACE) console.log(\"personDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new person\n    if (Session.get('personUpsert')) {\n      personUpdate = Session.get('personUpsert');\n    } else {\n      personUpdate = defaultPerson;\n    }\n\n\n\n    // if there's an existing person, use them\n    if (Session.get('selectedPerson')) {\n      personUpdate = this.data.person;\n    }\n\n    switch (field) {\n      case \"name\":\n        personUpdate.name[0].text = value;\n        break;\n      case \"gender\":\n        personUpdate.gender = value.toLowerCase();\n        break;\n      case \"birthDate\":\n        personUpdate.birthDate = value;\n        break;\n      case \"photo\":\n        personUpdate.photo[0].url = value;\n        break;\n      case \"mrn\":\n        personUpdate.identifier[0].value = value;\n        break;\n      default:\n\n    }\n    // personUpdate[field] = value;\n    process.env.TRACE && console.log(\"personUpdate\", personUpdate);\n\n    Session.set('personUpsert', personUpdate);\n  }\n\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('handleSaveButton()');\n    let personUpdate = Session.get('personUpsert', personUpdate);\n\n\n    if (personUpdate.birthDate) {\n      personUpdate.birthDate = new Date(personUpdate.birthDate);\n    }\n    if(process.env.NODE_ENV === \"test\") console.log(\"personUpdate\", personUpdate);\n\n    if (Session.get('selectedPerson')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating person...\");\n\n      delete personUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      personUpdate.resourceType = 'Person';\n\n      Persons.update({_id: Session.get('selectedPerson')}, {$set: personUpdate }, function(error, result){\n        if (error) {\n          if(process.env.NODE_ENV === \"test\") console.log(\"Persons.insert[error]\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Persons\", recordId: Session.get('selectedPerson')});\n          // Session.set('personUpdate', defaultPerson);\n          Session.set('personUpsert', false);\n          Session.set('selectedPerson', false);\n          Session.set('personPageTabIndex', 1);\n          Bert.alert('Person added!', 'success');\n        }\n      });\n    } else {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Creating a new person...\", personUpdate);\n\n      Persons.insert(personUpdate, function(error, result) {\n        if (error) {\n          if(process.env.NODE_ENV === \"test\")  console.log('Persons.insert[error]', error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Persons\", recordId: result});\n          Session.set('personPageTabIndex', 1);\n          Session.set('selectedPerson', false);\n          Session.set('personUpsert', false);\n          Bert.alert('Person added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('personPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    Persons.remove({_id: Session.get('selectedPerson')}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Persons.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Persons\", recordId: Session.get('selectedPerson')});\n        // Session.set('personUpdate', defaultPerson);\n        Session.set('personUpsert', false);\n        Session.set('personPageTabIndex', 1);\n        Session.set('selectedPerson', false);\n        Bert.alert('Person removed!', 'success');\n      }\n    });\n  }\n}\n\n\nReactMixin(PersonDetail.prototype, ReactMeteorData);\n","import { CardText, CardTitle } from 'material-ui/Card';\nimport { Tab, Tabs } from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas } from 'meteor/clinical:glass-ui';\n\nimport Glass from './Glass';\n//import GlassCard from './GlassCard';\nimport PersonDetail from './PersonDetail';\nimport PersonsTable from './PersonsTable';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\n//import { VerticalCanvas } from './VerticalCanvas';\n\n// import { Persons } from '../lib/Persons';\nimport { Session } from 'meteor/session';\n\nlet defaultPerson = {\n  index: 2,\n  id: '',\n  username: '',\n  email: '',\n  given: '',\n  family: '',\n  gender: ''\n};\nSession.setDefault('personFormData', defaultPerson);\nSession.setDefault('personSearchFilter', '');\n\nexport class PersonsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('personPageTabIndex'),\n      person: defaultPerson,\n      personSearchFilter: '',\n      currentPerson: null\n    };\n\n    if (Session.get('personFormData')) {\n      data.person = Session.get('personFormData');\n    }\n    if (Session.get('personSearchFilter')) {\n      data.personSearchFilter = Session.get('personSearchFilter');\n    }\n    if (Session.get(\"selectedPerson\")) {\n      data.currentPerson = Session.get(\"selectedPerson\");\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"PersonsPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('personPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedPerson', false);\n    Session.set('personUpsert', false);\n  }\n\n  render() {\n    console.log('React.version: ' + React.version);\n    return (\n      <div id=\"personsPage\">\n        <VerticalCanvas>\n          <GlassCard height=\"auto\">\n            <CardTitle\n              title=\"Persons\"\n            />\n            <CardText>\n              <Tabs id='personsPageTabs' default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n                 <Tab className=\"newPersonTab\" label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                   <PersonDetail id='newPerson' />\n                 </Tab>\n                 <Tab className=\"personListTab\" label='Persons' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                   <PersonsTable showBarcodes={true} showAvatars={true} />\n                 </Tab>\n                 <Tab className=\"personDetailTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                   <PersonDetail id='personDetails' currentPerson={this.data.currentPerson} />\n                 </Tab>\n             </Tabs>\n\n\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(PersonsPage.prototype, ReactMeteorData);\n\nexport default PersonsPage;","import Avatar from 'material-ui/Avatar';\nimport FlatButton from 'material-ui/FlatButton';\nimport { HTTP } from 'meteor/http';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { Session } from 'meteor/session';\nimport { has, get } from 'lodash';\nimport { TableNoData } from 'meteor/clinical:glass-ui'\n\n\nflattenPerson = function(person){\n  let result = {\n    _id: person._id,\n    id: person.id,\n    active: true,\n    gender: person.gender,\n    name: '',\n    mrn: '',\n    birthDate: '',\n    photo: \"/thumbnail-blank.png\",\n    initials: 'abc'\n  };\n\n  // there's an off-by-1 error between momment() and Date() that we want\n  // to account for when converting back to a string\n  result.birthDate = moment(person.birthDate).add(1, 'days').format(\"YYYY-MM-DD\")\n  result.photo = get(person, 'photo[0].url', '');\n  result.mrn = get(person, 'identifier[0].value', '');\n\n  if(has(person, 'name[0].text')){\n    result.name = get(person, 'name[0].text');    \n  } else {\n    result.name = get(person, 'name[0].given[0]') + ' ' + get(person, 'name[0].family[0]');\n  }\n\n  return result;\n}\n\nexport class PersonsTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getMeteorData() {\n    let data = {\n      style: {\n        hideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n        },\n        cellHideOnPhone: {\n          visibility: 'visible',\n          display: 'table',\n          paddingTop: '16px',\n          maxWidth: '120px'\n        },\n        cell: {\n          paddingTop: '16px'\n        },\n        avatar: {\n          // color: rgb(255, 255, 255);\n          backgroundColor: 'rgb(188, 188, 188)',\n          userSelect: 'none',\n          borderRadius: '2px',\n          height: '40px',\n          width: '40px'\n        }\n      },\n      selected: [],\n      persons: []\n    };\n\n    let query = {};\n    let options = {};\n\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      options.limit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n    // but can be over-ridden by props being more explicit\n    if(this.props.limit){\n      options.limit = this.props.limit;      \n    }\n\n    if(this.props.data){\n      // console.log('this.props.data', this.props.data);\n\n      if(this.props.data.length > 0){              \n        this.props.data.forEach(function(person){\n          data.persons.push(flattenPerson(person));\n        });  \n      }\n    } else {\n      data.persons = Persons.find().map(function(person){\n        return flattenPerson(person);\n      });\n    }\n\n\n    if (Session.get('appWidth') < 768) {\n      data.style.hideOnPhone.visibility = 'hidden';\n      data.style.hideOnPhone.display = 'none';\n      data.style.cellHideOnPhone.visibility = 'hidden';\n      data.style.cellHideOnPhone.display = 'none';\n    } else {\n      data.style.hideOnPhone.visibility = 'visible';\n      data.style.hideOnPhone.display = 'table-cell';\n      data.style.cellHideOnPhone.visibility = 'visible';\n      data.style.cellHideOnPhone.display = 'table-cell';\n    }\n\n    // console.log(\"PersonsTable[data]\", data);\n    return data;\n  }\n  imgError(avatarId) {\n    this.refs[avatarId].src = Meteor.absoluteUrl() + 'noAvatar.png';\n  }\n  rowClick(id){\n    Session.set('personsUpsert', false);\n    Session.set('selectedPerson', id);\n    Session.set('personPageTabIndex', 2);\n  }\n  renderRowAvatarHeader(){\n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <th className='avatar'>photo</th>\n      );\n    }\n  }\n  renderRowAvatar(person, avatarStyle){\n    console.log('renderRowAvatar', person, avatarStyle)\n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <td className='avatar'>\n          <img src={person.photo} ref={person._id} onError={ this.imgError.bind(this, person._id) } style={avatarStyle}/>\n        </td>\n      );\n    }\n  }\n  renderSendButtonHeader(){\n    if (this.props.showSendButton === true) {\n      return (\n        <th className='sendButton' style={this.data.style.hideOnPhone}></th>\n      );\n    }\n  }\n  renderSendButton(person, avatarStyle){\n    if (this.props.showSendButton === true) {\n      return (\n        <td className='sendButton' style={this.data.style.hideOnPhone}>\n          <FlatButton label=\"send\" onClick={this.onSend.bind('this', this.data.persons[i]._id)}/>\n        </td>\n      );\n    }\n  }\n  onSend(id){\n    let person = Persons.findOne({_id: id});\n\n    console.log(\"PersonsTable.onSend()\", person);\n\n    var httpEndpoint = \"http://localhost:8080\";\n    if (get(Meteor, 'settings.public.interfaces.default.channel.endpoint')) {\n      httpEndpoint = get(Meteor, 'settings.public.interfaces.default.channel.endpoint');\n    }\n    HTTP.post(httpEndpoint + '/Person', {\n      data: person\n    }, function(error, result){\n      if (error) {\n        console.log(\"error\", error);\n      }\n      if (result) {\n        console.log(\"result\", result);\n      }\n    });\n  }\n  selectPersonRow(personId){\n    if(typeof(this.props.onRowClick) === \"function\"){\n      this.props.onRowClick(personId);\n    }\n  }\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.data.persons.length === 0){\n      footer = <TableNoData noDataPadding={ this.props.noDataPadding } />\n    } else {\n      for (var i = 0; i < this.data.persons.length; i++) {\n        tableRows.push(\n          <tr key={i} className=\"personRow\" style={{cursor: \"pointer\"}} onClick={this.selectPersonRow.bind(this, this.data.persons[i].id )} >\n  \n            { this.renderRowAvatar(this.data.persons[i], this.data.style.avatar) }\n  \n            <td className='name' onClick={ this.rowClick.bind('this', this.data.persons[i]._id)} style={this.data.style.cell}>{this.data.persons[i].name }</td>\n            <td className='gender' onClick={ this.rowClick.bind('this', this.data.persons[i]._id)} style={this.data.style.cell}>{this.data.persons[i].gender}</td>\n            <td className='birthDate' onClick={ this.rowClick.bind('this', this.data.persons[i]._id)} style={{minWidth: '100px', paddingTop: '16px'}}>{this.data.persons[i].birthDate }</td>\n            <td className='isActive' onClick={ this.rowClick.bind('this', this.data.persons[i]._id)} style={this.data.style.cellHideOnPhone}>{this.data.persons[i].active}</td>\n            <td className='mrn' style={this.data.style.cellHideOnPhone}>{this.data.persons[i].mrn}</td>\n            <td className='id' onClick={ this.rowClick.bind('this', this.data.persons[i].id)} style={this.data.style.cellHideOnPhone}><span className=\"barcode\">{this.data.persons[i].id}</span></td>            \n\n              { this.renderSendButton(this.data.persons[i], this.data.style.avatar) }\n          </tr>\n        );\n      }\n    }\n    \n\n\n    return(\n      <div>\n        <Table id='personsTable' hover >\n          <thead>\n            <tr>\n              { this.renderRowAvatarHeader() }\n\n              <th className='name'>name</th>\n              <th className='gender'>gender</th>\n              <th className='birthdate' style={{minWidth: '100px'}}>birthdate</th>\n              <th className='isActive' style={this.data.style.hideOnPhone}>active</th>\n              <th className='mrn' style={this.data.style.hideOnPhone}>mrn</th>\n              <th className='id' style={this.data.style.hideOnPhone}>_id</th>\n              \n              { this.renderSendButtonHeader() }\n            </tr>\n          </thead>\n          <tbody>\n            { tableRows }\n          </tbody>\n        </Table>\n        { footer }\n      </div>\n    );\n  }\n}\n\n\nReactMixin(PersonsTable.prototype, ReactMeteorData);\nexport default PersonsTable;"]}