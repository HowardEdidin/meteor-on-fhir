{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-provenance/lib/hl7-resource-provenance.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-provenance/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-provenance/client/ProvenanceDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-provenance/client/ProvenanceTable.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-provenance/client/ProvenancesPage.jsx"],"names":["SimpleSchema","module","link","v","Provenance","BaseModel","extend","prototype","_collection","Provenances","Mongo","Collection","_transform","document","Meteor","isClient","subscribe","isServer","publish","argument","userId","find","ProvenanceSchema","type","String","defaultValue","optional","Array","ReferenceSchema","PeriodSchema","Date","CodingSchema","Object","CodeableConceptSchema","Code","IdentifierSchema","SignatureSchema","attachSchema","export","AdminSidebarElements","DynamicRoutes","ProvenancesPage","ProvenanceTable","ProvenanceDetail","CardActions","CardText","SelectField","MenuItem","TextField","RaisedButton","get","has","set","Bert","React","ReactMeteorData","ReactMixin","Session","defaultProvenance","url","identifier","setDefault","getMeteorData","data","customWidth","width","provenanceId","provenance","console","log","selectedProvenance","findOne","_id","birthDate","moment","add","format","process","env","NODE_ENV","render","props","id","determineButtons","handleSaveButton","bind","marginRight","handleDeleteButton","handleCancelButton","changeState","field","event","value","provenanceUpdate","TRACE","name","text","gender","toLowerCase","photo","resourceType","update","$set","error","result","alert","reason","HipaaLogger","logEvent","eventType","userName","user","fullName","collectionName","recordId","insert","remove","Component","exportDefault","FlatButton","Table","TableNoData","PropTypes","style","hideOnPhone","visibility","display","cellHideOnPhone","cell","paddingTop","selected","provenances","query","options","sort","issued","limit","map","csiGuid","targetReference","signatureDate","signatureBlob","signatureReference","disableBarcodes","rowClick","handleVerify","onVerify","renderIssuedDate","hideIssuedDate","minWidth","renderIssuedDateHeader","renderVerify","hideVerify","renderVerifyHeader","marginLeft","tableRows","footer","length","noDataMessage","noDataMessagePadding","i","push","cursor","onConsentClick","substring","propTypes","string","fhirVersion","bool","number","func","CardTitle","Tab","Tabs","GlassCard","Glass","VerticalCanvas","FullPageCanvas","index","username","email","given","family","opacity","tab","borderBottom","borderRight","tabIndex","provenanceSearchFilter","currentProvenance","blur","appbar","darkroom","handleTabChange","onNewTab","version"],"mappings":"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","file":"/packages/clinical_hl7-resource-provenance.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n\n// create the object using our BaseModel\nProvenance = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nProvenance.prototype._collection = Provenances;\n\n// Create a persistent data store for addresses to be stored.\n// HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\nProvenances = new Mongo.Collection('Provenances');\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nProvenances._transform = function (document) {\n  return new Provenance(document);\n};\n\n\nif (Meteor.isClient){\n  Meteor.subscribe('Provenances');\n}\n\nif (Meteor.isServer){\n  Meteor.publish('Provenances', function (argument){\n    if (this.userId) {\n      return Provenances.find();\n    } else {\n      return [];\n    }\n  });\n}\n\n\n\nProvenanceSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: 'Provenance'\n  },\n  \"target\" : { \n\t  optional:true,\n\t  type:  Array\n  }, \n  \"target.$\" : { \n\t  optional:true,\n\t  type:  ReferenceSchema \n  }, \n  \"period\" : { \n\t  optional:true,\n\t  type:  PeriodSchema \n  }, \n  \"recorded\" : {\n\t  optional:true,\n    type:  Date\n  },\n  \"policy\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"policy.$\" : { \n\t  optional:true,\n\t  type:  String \n  }, \n  \"location\" : { \n\t  optional:true,\n    type:  ReferenceSchema \n  },\n  \"reason\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"reason.$\" : { \n\t  optional:true,\n\t  type:  CodingSchema \n  }, \n  \"activity\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"activity.$\" : { \n\t  optional:true,\n\t  type:  CodingSchema \n  }, \n  \"agent\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"agent.$\" : { \n\t  optional:true,\n\t  type:  Object \n  }, \n  \"agent.$.role\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"agent.$.role.$\" : { \n\t  optional:true,\n\t  type:  CodeableConceptSchema \n  }, \n  \"agent.$.whoUri\" : {\n\t  optional:true,\n\t  type: String\n  },\n  \"agent.$.whoReference\" : { \n\t  optional:true,\n\t  type: ReferenceSchema \n  },\n  \"agent.$.onBehalfOfUri\" : {\n\t  optional:true,\n\t  type: String\n  },\n  \"agent.$.onBehalfOfReference\" : { \n\t  optional:true,\n\t  type: ReferenceSchema \n  },\n  \"agent.$.relatedAgentType\" : { \n\t  optional:true,\n\t  type: CodeableConceptSchema \n  },\n  \"entity\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"entity.$\" : { \n\t  optional:true,\n\t  type:  Object \n  }, \n\n  \"entity.$.role\" : {\n\t  optional:true,\n\t  type: Code\n  },\n  \"entity.$.whatUri\" : {\n\t  optional:true,\n\t  type: String\n  },\n  \"entity.$.whatReference\" : { \n\t  optional:true,\n\t  type:  ReferenceSchema \n  },\n  \"entity.$.whatIdentifier\" : { \n\t  optional:true,\n\t  type:  IdentifierSchema \n  },\n  \"entity.$.agent\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"entity.$.agent.$\" : { \n\t  optional:true,\n\t  type:  Object \n  }, \n  \"signature\" : { \n\t  optional:true,\n\t  type:  Array \n  }, \n  \"signature.$\" : { \n\t  optional:true,\n\t  type:  SignatureSchema \n  }\n});\nProvenances.attachSchema(ProvenanceSchema);\n","\nimport ProvenancesPage from './client/ProvenancesPage';\nimport ProvenanceTable from './client/ProvenanceTable';\nimport ProvenanceDetail from './client/ProvenanceDetail';\n\nvar DynamicRoutes = [{\n  'name': 'ProvenancePage',\n  'path': '/provenances',\n  'component': ProvenancesPage,\n  'requireAuth': true\n}];\n\nvar AdminSidebarElements = [{\n  'primaryText': 'Provenances',\n  'to': '/provenances',\n  'href': '/provenances'\n}];\n\nexport { \n  AdminSidebarElements,\n  DynamicRoutes, \n\n  ProvenancesPage,\n  ProvenanceTable\n};\n\n\n","import { CardActions, CardText, SelectField, MenuItem, TextField, RaisedButton } from 'material-ui';\n\nimport { get, has, set } from 'lodash';\n\nimport { Bert } from 'meteor/clinical:alert';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\n\nimport { Session } from 'meteor/session';\n\n\nlet defaultProvenance = {\n  \"resourceType\" : \"Provenance\",\n  \"name\" : [{\n    \"text\" : \"\",\n    \"resourceType\" : \"HumanName\"\n  }],\n  \"active\" : true,\n  \"gender\" : \"\",\n  \"birthDate\" : '',\n  \"photo\" : [{\n    url: \"\"\n  }],\n  identifier: [{\n    \"use\": \"usual\",\n    \"type\": {\n      \"coding\": [\n        {\n          \"system\": \"http://hl7.org/fhir/v2/0203\",\n          \"code\": \"MR\"\n        }\n      ]\n    },\n    \"value\": \"\"\n  }],\n  \"test\" : false\n};\n\n\nSession.setDefault('provenanceUpsert', false);\nSession.setDefault('selectedProvenance', false);\n\nexport class ProvenanceDetail extends React.Component {\n  getMeteorData() {\n    let data = {\n      customWidth: {\n        width: 150\n      },\n      provenanceId: false,\n      provenance: defaultProvenance\n    };\n\n    if (Session.get('provenanceUpsert')) {\n      data.provenance = Session.get('provenanceUpsert');\n    } else {\n      if (Session.get('selectedProvenance')) {\n        data.provenanceId = Session.get('selectedProvenance');\n        console.log(\"selectedProvenance\", Session.get('selectedProvenance'));\n\n        let selectedProvenance = Provenances.findOne({_id: Session.get('selectedProvenance')});\n        console.log(\"selectedProvenance\", selectedProvenance);\n\n        if (selectedProvenance) {\n          data.provenance = selectedProvenance;\n\n          if (typeof selectedProvenance.birthDate === \"object\") {\n            data.provenance.birthDate = moment(selectedProvenance.birthDate).add(1, 'day').format(\"YYYY-MM-DD\");\n          }\n        }\n      } else {\n        data.provenance = defaultProvenance;\n      }\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"ProvenanceDetail[data]\", data);\n    return data;\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} className=\"provenanceDetail\">\n        <CardText>\n          <SelectField\n            floatingLabelText=\"Type\"\n            value={1}\n            fullWidth\n          >\n            <MenuItem value={1} primaryText=\"Power of Attorney\" />\n          </SelectField><br/>\n          <TextField\n            id='subjectInput'\n            ref='subject'\n            name='subject'\n            floatingLabelText='Full Name of Subject (i.e. Patient)'\n            hintText='Jason Argonaut'\n            // value={ get(this, 'data.provenance.name[0].text', '')}\n            // onChange={ this.changeState.bind(this, 'name')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='agentNameInput'\n            ref='agentName'\n            name='agentName'\n            floatingLabelText='Full Name of Agent'\n            hintText='agent name'\n            // value={ get(this, 'data.provenance.gender', '')}\n            // onChange={ this.changeState.bind(this, 'gender')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='issuedDateInput'\n            ref='issuedDate'\n            name='issuedDate'\n            floatingLabelText='Issued Date'\n            hintText='YYYY-MM-DD'\n            // value={ get(this, 'data.provenance.birthDate', '')}\n            // onChange={ this.changeState.bind(this, 'birthDate')}\n            fullWidth\n            /><br/>       \n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.provenanceId) }\n        </CardActions>\n      </div>\n    );\n  }\n  determineButtons(provenanceId){\n    if (provenanceId) {\n      return (\n        <div>\n          <RaisedButton id='saveProvenanceButton' className='saveProvenanceButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <div>\n          <RaisedButton id='previewProvenanceButton'  className='saveProvenanceButton' label=\"Preview\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton id='cancelProvenanceButton'  className='saveProvenanceButton' label=\"Cencel\" primary={false} onClick={this.handleCancelButton.bind(this)} />\n        </div>\n      );\n    }\n  }\n\n  changeState(field, event, value){\n    let provenanceUpdate;\n\n    if(process.env.TRACE) console.log(\"provenanceDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new provenance\n    if (Session.get('provenanceUpsert')) {\n      provenanceUpdate = Session.get('provenanceUpsert');\n    } else {\n      provenanceUpdate = defaultProvenance;\n    }\n\n\n\n    // if there's an existing provenance, use them\n    if (Session.get('selectedProvenance')) {\n      provenanceUpdate = this.data.provenance;\n    }\n\n    switch (field) {\n      case \"name\":\n        provenanceUpdate.name[0].text = value;\n        break;\n      case \"gender\":\n        provenanceUpdate.gender = value.toLowerCase();\n        break;\n      case \"birthDate\":\n        provenanceUpdate.birthDate = value;\n        break;\n      case \"photo\":\n        provenanceUpdate.photo[0].url = value;\n        break;\n      case \"mrn\":\n        provenanceUpdate.identifier[0].value = value;\n        break;\n      default:\n\n    }\n    // provenanceUpdate[field] = value;\n    process.env.TRACE && console.log(\"provenanceUpdate\", provenanceUpdate);\n\n    Session.set('provenanceUpsert', provenanceUpdate);\n  }\n\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('handleSaveButton()');\n    let provenanceUpdate = Session.get('provenanceUpsert', provenanceUpdate);\n\n\n    if (provenanceUpdate.birthDate) {\n      provenanceUpdate.birthDate = new Date(provenanceUpdate.birthDate);\n    }\n    if(process.env.NODE_ENV === \"test\") console.log(\"provenanceUpdate\", provenanceUpdate);\n\n    if (Session.get('selectedProvenance')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating provenance...\");\n\n      delete provenanceUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      provenanceUpdate.resourceType = 'Provenance';\n\n      Provenances._collection.update({_id: Session.get('selectedProvenance')}, {$set: provenanceUpdate }, function(error, result){\n        if (error) {\n          if(process.env.NODE_ENV === \"test\") console.log(\"Provenances.insert[error]\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Provenances\", recordId: Session.get('selectedProvenance')});\n          // Session.set('provenanceUpdate', defaultProvenance);\n          Session.set('provenanceUpsert', false);\n          Session.set('selectedProvenance', false);\n          Session.set('provenancePageTabIndex', 1);\n          Bert.alert('Provenance added!', 'success');\n        }\n      });\n    } else {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Creating a new provenance...\", provenanceUpdate);\n\n      Provenances._collection.insert(provenanceUpdate, function(error, result) {\n        if (error) {\n          if(process.env.NODE_ENV === \"test\")  console.log('Provenances.insert[error]', error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Provenances\", recordId: result});\n          Session.set('provenancePageTabIndex', 1);\n          Session.set('selectedProvenance', false);\n          Session.set('provenanceUpsert', false);\n          Bert.alert('Provenance added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('provenancePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    Provenances._collection.remove({_id: Session.get('selectedProvenance')}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Provenances.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Provenances\", recordId: Session.get('selectedProvenance')});\n        // Session.set('provenanceUpdate', defaultProvenance);\n        Session.set('provenanceUpsert', false);\n        Session.set('provenancePageTabIndex', 1);\n        Session.set('selectedProvenance', false);\n        Bert.alert('Provenance removed!', 'success');\n      }\n    });\n  }\n}\n\n\nReactMixin(ProvenanceDetail.prototype, ReactMeteorData);\nexport default ProvenanceDetail;","\nimport FlatButton from 'material-ui/FlatButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\n\nimport { Session } from 'meteor/session';\nimport { get } from 'lodash';\nimport { TableNoData } from 'meteor/clinical:glass-ui'\nimport PropTypes from 'prop-types';\n\n\nSession.setDefault('csiGuid', '')\nexport class ProvenanceTable extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        hideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n        },\n        cellHideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n          //paddingTop: '16px'\n        },\n        cell: {\n          paddingTop: '16px'\n        }\n      },\n      selected: [],\n      provenances: []\n    };\n\n    let query = {};\n    let options = {\n      sort: { issued: -1 }\n    };\n\n    if(this.props.sort){\n\n      switch (this.props.sort) {\n        case \"issued\":\n          options.sort = { issued: -1 }\n          break;\n        case \"signatureDate\":\n          options.sort = { 'signature.0.when': -1 }\n          break;      \n        default:\n          break;\n      }\n    }\n\n    if(this.props.query){\n      query = this.props.query;\n    }\n\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      options.limit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n    // but can be over-ridden by props being more explicit\n    if(this.props.limit){\n      options.limit = this.props.limit;  \n    }\n\n    // data.provenances = [];\n    data.provenances = Provenances.find(query, options).map(function(document){\n      let result = {\n        _id: document._id,\n        csiGuid: get(document, 'entity.0.whatReference.id', ''),\n        issued: moment(get(document, 'issued', null)).format(\"YYYY-MM-DD hh:mm:ss\"),\n        targetReference: get(document, 'target.0.reference', ''),\n        signatureDate: get(document, 'signature.0.when', ''),\n        signatureBlob: get(document, 'signature.0.blob', ''),\n        signatureReference: get(document, 'signature.0.whoReference.reference', ''),\n      };\n\n      return result;\n    });\n\n    if (Session.get('appWidth') < 768) {\n      data.style.hideOnPhone.visibility = 'hidden';\n      data.style.hideOnPhone.display = 'none';\n      data.style.cellHideOnPhone.visibility = 'hidden';\n      data.style.cellHideOnPhone.display = 'none';\n    } else {\n      data.style.hideOnPhone.visibility = 'visible';\n      data.style.hideOnPhone.display = 'table-cell';\n      data.style.cellHideOnPhone.visibility = 'visible';\n      data.style.cellHideOnPhone.display = 'table-cell';\n    }\n\n\n\n    if(this.props.disableBarcodes){\n      data.signatureBlob = \"signatureBlob\"\n    } else {\n      data.signatureBlob = \"signatureBlob barcode\"\n    }\n\n\n    return data;\n  }\n  rowClick(id){\n    Session.set('provenancesUpsert', false);\n    Session.set('selectedProvenance', id);\n    Session.set('provenancePageTabIndex', 2);\n  }\n  handleVerify(provenance){\n    console.log('handleVerify', provenance);\n\n    if(this.props.onVerify){\n      this.props.onVerify(provenance);\n    } \n    \n    // HTTP.post('https://poc-node-1.fhirblocks.io/smoac/audit/validate', {\n    //   headers: {\n    //     'Accept': 'application/json',\n    //     'Content-Type': 'application/json',\n    //     'Access-Control-Allow-Origin': '*'\n    //   },\n    //   data: {\n    //     \"csiGuid\": get(provenance, 'csiGuid', '/').split('csi/')[1],\n    //     \"signature\": get(provenance, 'signatureBlob')\n    //   }\n    // }, function(error, result){\n    //   if(error){\n    //     alert('Error!  Something wrong happened.  :( /nThis is extremely likely a 500 Internal Server Error')\n    //   }\n    //   if(result){\n    //     console.log('result', result)\n    //     let validation = JSON.parse(result.content);\n    //     if(validation.valid === true){\n    //       alert('Valid!  This signature was found matched to this self-soverign identifier on the blockchain.')\n    //     } else if (validation.valid === false){\n    //       alert(\"Not valid.  Either the signature or the self-soverign identifier weren't found.  A match couldn't be made. \")\n    //     }\n    //   }\n    // })\n    \n  }\n  renderIssuedDate(provenance){\n    if (!this.props.hideIssuedDate) {\n      return (\n        <td className='issued' onClick={ this.rowClick.bind(this, provenance._id)} style={{minWidth: '100px', paddingTop: '16px'}}>{ provenance.issued }</td>\n      );\n    }\n  }\n  renderIssuedDateHeader(){\n    if (!this.props.hideIssuedDate) {\n      return (\n        <th className='issued' style={{minWidth: '100px'}}>Issued Date</th>\n      );\n    }\n  }\n  renderVerify(provenance){\n    if (!this.props.hideVerify) {\n      return (\n        <td className='revoke'>\n          <FlatButton label=\"Verify\" onClick={this.handleVerify.bind(this, provenance)} />\n        </td>\n      );\n    }\n  }\n  renderVerifyHeader(){\n    if (!this.props.hideVerify) {\n      return (\n        <th className='end' style={{minWidth: '100px', marginLeft: '20px'}}> Verify </th>\n      );\n    }\n  }\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.data.provenances.length === 0){\n      if(!(this.props.noDataMessage === false)){\n        footer = <TableNoData noDataPadding={ this.props.noDataMessagePadding } />\n      }\n    } else {\n      for (var i = 0; i < this.data.provenances.length; i++) {\n        tableRows.push(\n          <tr key={i} className=\"provenanceRow\" style={{cursor: \"pointer\"}}>\n            {this.renderIssuedDate(this.data.provenances[i]) }\n\n            <td className='targetReference' onClick={ this.onConsentClick.bind(this, this.data.provenances[i]._id, this.data.provenances[i].targetReference )} style={this.data.style.cell}>{this.data.provenances[i].targetReference }</td>\n            <td className='signatureDate' style={this.data.style.cellHideOnPhone}>{ moment(this.data.provenances[i].signatureDate).format(\"YYYY MM DD hh:mm:ss\") }</td>\n            <td className={this.data.signatureBlob} style={this.data.style.cellHideOnPhone}>{this.data.provenances[i].signatureBlob.substring(0,64) + '...' }</td>\n            <td className='signatureReference' style={this.data.style.cellHideOnPhone}>{this.data.provenances[i].signatureReference}</td>\n\n            {this.renderVerify(this.data.provenances[i]) }\n          </tr>\n        );\n      }\n    }\n\n    return(\n      <div>\n        <Table id='provenancesTable' hover >\n          <thead>\n            <tr>\n              {this.renderIssuedDateHeader() }\n              <th className='targetReference' style={this.data.style.cellHideOnPhone}>Target</th>\n              <th className='signatureDate' style={this.data.style.cellHideOnPhone} >Signature Date</th>\n              <th className='signatureDate' style={this.data.style.cellHideOnPhone} >Signature Blob</th>\n              <th className='signatureDate' style={this.data.style.cellHideOnPhone} >Signature Reference</th>\n              {this.renderVerifyHeader() }\n            </tr>\n          </thead>\n          <tbody>\n            { tableRows }\n          </tbody>\n        </Table>\n        { footer }\n      </div>\n    );\n  }\n  onConsentClick(id, targetReference){\n    if(typeof this.props.onConsentClick === \"function\"){\n      this.props.onConsentClick(targetReference);\n    } else {\n      Session.set('provenancesUpsert', false);\n      Session.set('selectedProvenance', id);\n      Session.set('provenancePageTabIndex', 2); \n    }\n  }\n}\n\nProvenanceTable.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  hideVerify: PropTypes.bool,\n  limit: PropTypes.number,\n  onConsentClick: PropTypes.func\n};\n\n\nReactMixin(ProvenanceTable.prototype, ReactMeteorData);\nexport default ProvenanceTable;","import { CardText, CardTitle } from 'material-ui/Card';\nimport { Tab, Tabs } from 'material-ui/Tabs';\nimport { GlassCard, Glass, VerticalCanvas, FullPageCanvas } from 'meteor/clinical:glass-ui';\nimport ProvenanceDetail from './ProvenanceDetail';\nimport ProvenanceTable from './ProvenanceTable';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\n\nimport { Session } from 'meteor/session';\n\nlet defaultProvenance = {\n  index: 2,\n  id: '',\n  username: '',\n  email: '',\n  given: '',\n  family: '',\n  gender: ''\n};\nSession.setDefault('provenanceFormData', defaultProvenance);\nSession.setDefault('provenanceSearchFilter', '');\n\nexport class ProvenancesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('provenancePageTabIndex'),\n      provenance: defaultProvenance,\n      provenanceSearchFilter: '',\n      currentProvenance: null\n    };\n\n    if (Session.get('provenanceFormData')) {\n      data.provenance = Session.get('provenanceFormData');\n    }\n    if (Session.get('provenanceSearchFilter')) {\n      data.provenanceSearchFilter = Session.get('provenanceSearchFilter');\n    }\n    if (Session.get(\"selectedProvenance\")) {\n      data.currentProvenance = Session.get(\"selectedProvenance\");\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"ProvenancesPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('provenancePageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedProvenance', false);\n    Session.set('provenanceUpsert', false);\n  }\n\n  render() {\n    console.log('React.version: ' + React.version);\n    return (\n      <div id=\"provenancesPage\">\n        <FullPageCanvas>\n          <GlassCard height=\"auto\">\n            <CardTitle\n              title=\"Provenances\"\n            />\n            <CardText>\n              <ProvenanceTable                 \n                showBarcodes={true} \n                sort=\"signatureDate\"\n                />\n\n              {/* <Tabs id='provenancesPageTabs' default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n                 <Tab className=\"newProvenanceTab\" label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                   <ProvenanceDetail id='newProvenance' />\n                 </Tab>\n                 <Tab className=\"provenanceListTab\" label='Provenances' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                   <ProvenanceTable showBarcodes={true} />\n                 </Tab>\n                 <Tab className=\"provenanceDetailTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                   <ProvenanceDetail id='provenanceDetails' currentProvenance={this.data.currentProvenance} />\n                 </Tab>\n             </Tabs> */}\n\n\n            </CardText>\n          </GlassCard>\n        </FullPageCanvas>\n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(ProvenancesPage.prototype, ReactMeteorData);\n\nexport default ProvenancesPage;"]}