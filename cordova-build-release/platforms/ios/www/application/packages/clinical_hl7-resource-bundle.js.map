{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/lib/Bundles.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/lib/methods.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/client/BundleDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/client/BundleTable.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/client/BundlesPage.jsx"],"names":["module","export","Bundle","Bundles","BundleSchema","BaseModel","link","v","Mongo","SimpleSchema","BaseSchema","DomainResourceSchema","HumanNameSchema","IdentifierSchema","ContactPointSchema","AddressSchema","ReferenceSchema","SignatureSchema","Package","console","log","extend","prototype","_collection","Collection","Meteor","isClient","subscribe","isServer","publish","argument","userId","find","_transform","document","type","String","defaultValue","optional","Code","allowedValues","Number","Array","Object","blackbox","Date","attachSchema","generate","data","bundle","resourceType","entry","forEach","resource","resourceUrl","absoluteUrl","_id","id","_document","push","fullUrl","total","length","methods","newBundle","Random","call","check","insert","validate","filter","remove","SidebarElements","AdminSidebarElements","DynamicRoutes","BundlesPage","BundleTable","BundleDetail","CardActions","CardText","DatePicker","Toggle","RaisedButton","TextField","get","has","set","Row","Col","moment","React","ReactMeteorData","ReactMixin","PropTypes","Session","styles","block","maxWidth","toggle","marginTop","thumbOff","backgroundColor","trackOff","thumbSwitched","trackSwitched","labelStyle","color","props","state","bundleId","name","text","prefix","family","given","suffix","active","gender","birthDate","photo","url","identifier","use","coding","system","code","value","deceasedBoolean","multipleBirthBoolean","maritalStatus","contact","animal","species","communication","language","careProvider","display","reference","managingOrganization","form","deceased","multipleBirth","dehydrateFhirResource","formData","assign","format","shouldComponentUpdate","nextProps","process","env","NODE_ENV","shouldUpdate","setState","getMeteorData","bundelContent","displayBirthdate","bundleContent","JSON","stringify","findOne","render","changeState","bind","maxHeight","width","height","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateBundle","bundleData","event","self","fhirBundleData","bundleValidator","newContext","isValid","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userName","user","fullName","collectionName","recordId","handleCancelButton","animalremove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","exportDefault","Avatar","FlatButton","HTTP","Table","TableNoData","flattenBundle","person","subject","author","title","date","toString","style","hideOnPhone","visibility","cellHideOnPhone","paddingTop","cell","avatar","userSelect","borderRadius","selected","bundles","query","options","limit","map","imgError","avatarId","refs","src","rowClick","renderRowAvatarHeader","showAvatars","renderRowAvatar","avatarStyle","renderSpeciesHeader","displaySpecies","renderSpeciesRow","renderSendButtonHeader","showSendButton","renderSendButton","onSend","i","httpEndpoint","post","selectBundleRow","onRowClick","tableRows","footer","noDataMessagePadding","cursor","minWidth","number","CardTitle","Tab","Tabs","Glass","GlassCard","VerticalCanvas","FullPageCanvas","Grid","defaultBundle","index","username","email","setDefault","opacity","tab","borderBottom","borderRight","tabIndex","bundleSearchFilter","selectedBundleId","selectedBundle","blur","appbar","darkroom","handleTabChange","onNewTab","version"],"mappings":"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","file":"/packages/clinical_hl7-resource-bundle.js","sourcesContent":["if(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"\");  \n}\nimport { BaseModel } from 'meteor/clinical:base-model';\nimport { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\nimport { BaseSchema, DomainResourceSchema, HumanNameSchema, IdentifierSchema, ContactPointSchema, AddressSchema, ReferenceSchema, SignatureSchema } from 'meteor/clinical:hl7-resource-datatypes';\n\n\n// create the object using our BaseModel\nBundle = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nBundle.prototype._collection = Bundles;\n\n\nif(typeof Bundles === 'undefined'){\n  if(Package['autopublish']){\n    Bundles = new Mongo.Collection('Bundles');\n  } else if(Package['clinical:autopublish']){\n    Bundles = new Mongo.Collection('Bundles');\n  } else if(Package['clinical:desktop-publish']){\n    Bundles = new Mongo.Collection('Bundles');\n  } else {\n    Bundles = new Mongo.Collection('Bundles');\n    // Bundles = new Mongo.Collection('Bundles', {connection: null});\n  }\n}\n\nif (Meteor.isClient){\n  Meteor.subscribe(\"Bundles\");\n}\n\nif (Meteor.isServer){\n  Meteor.publish(\"Bundles\", function (argument){\n    if (this.userId) {\n      return Bundles.find();\n    } else {\n      return [];\n    }\n  });\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nBundles._transform = function (document) {\n  return new Bundle(document);\n};\n\nBundleSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Bundle\"\n  },\n  \"type\" : {\n    optional: true,\n    type: Code,\n    allowedValues: [  'document' , 'message' , 'transaction' , 'transaction-response' , 'batch' , 'batch-response' , 'history' , 'searchset' , 'collection' ],\n    defaultValue: 'searchset'\n  },\n  \"total\" : {\n    optional: true,\n    type: Number\n  },\n  \"link\" : {\n    optional: true,\n    type: Array\n  },\n  \"link.$\" : {\n    optional: true,\n    type: Object\n  },\n  \"link.$.relation\" : {\n    optional: true,\n    type: String\n  },\n  \"link.$.url\" : {\n    optional: true,\n    type: String\n  },\n\n  \"entry\" : {\n    optional: true,\n    type: Array\n  },\n  \"entry.$\" : {\n    optional: true,\n    type: Object\n  },\n\n  \"entry.$.link\" : {\n    optional: true,\n    type: Array\n  },\n  \"entry.$.link.$\" : {\n    optional: true,\n    type: String \n  },  \n  \"entry.$.fullUrl\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.resource\" : {\n    optional: true,\n    type: Object,\n    blackbox: true\n  },\n\n  \"entry.$.search\" : {\n    optional: true,\n    type: Object\n  },\n\n  \"entry.$.search.mode\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.search.score\" : {\n    optional: true,\n    type: Number\n  },\n\n  \"entry.$.request\" : {\n    optional: true,\n    type: Object\n  },\n\n  \"entry.$.request.method\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.url\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.ifNoneMatch\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.ifModifiedSince\" : {\n    optional: true,\n    type: Date\n  },\n  \"entry.$.request.ifMatch\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.ifNoneExist\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response\" : {\n    optional: true,\n    type: Object\n  },\n  \"entry.$.response.status\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response.location\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response.etag\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response.lastModified\" : {\n    optional: true,\n    type: Date\n  },\n  \"signature\" : {\n    optional: true,\n    type: SignatureSchema\n  }\n});\n\n// BaseSchema.extend(BundleSchema);\n// DomainResourceSchema.extend(BundleSchema);\nBundles.attachSchema(BundleSchema);\n\nBundle.generate = function(data, type){\n  var bundle = {\n    resourceType: \"Bundle\",\n    type: 'searchset',\n    entry: []\n  };\n\n  if (type) {\n    bundle.type = type;\n  }\n\n  // we may want to check whether the data is an array or object\n  // and whether we need to push the object into the array\n  // for now, we're assuming the data is coming in as an array\n  if (data) {\n    data.forEach(function(resource){\n      var resourceUrl = Meteor.absoluteUrl() + 'fhir-3.0.0/' + resource.resourceType + \"/\" + resource._id;\n\n      resource.id = resource._id;\n\n      //delete resource.resourceType;\n      delete resource._document;\n      delete resource._id;\n\n      bundle.entry.push({\n        fullUrl: resourceUrl,\n        resource: resource\n      });\n    });\n\n    bundle.total = data.length;\n  }\n\n  return bundle;\n};\n\n\n\nexport { Bundle, Bundles, BundleSchema };","\n\nMeteor.methods({\n    'Bundle/initialize': function(){\n        console.log('Initializing a default bundle...')\n        let newBundle = {\n          \"resourceType\": \"Bundle\",\n          \"entry\": [\n            {\n              \"fullUrl\": \"/Composition/\" + Random.id(),\n              \"resource\": {\n                \"resourceType\": \"Composition\",\n                \"identifier\": {\n                  \"value\": Random.id()\n                },\n                \"status\": \"preliminary\",\n                \"type\": {},\n                \"class\": {},\n                \"subject\": {\n                  \"display\": \"System Admin\",\n                  \"reference\": Random.id()\n                },\n                \"encounter\": {\n                  \"display\": \"\",\n                  \"reference\": \"\"\n                },\n                \"date\": \"<dateTime>\",\n                \"author\": [\n                  {\n                    \"display\": \"System Admin\",\n                    \"reference\": Random.id()\n                  }\n                ],\n                \"title\": \"Continuity of Care Document\",\n                \"confidentiality\": \"0\",\n                \"attester\": [],\n                \"custodian\": {\n                  \"display\": \"\",\n                  \"reference\": \"\"\n                },\n                \"relatesTo\": [],\n                \"event\": [],\n                \"section\": []\n              }\n            }\n          ]\n        }\n          Meteor.call('Bundle/create', newBundle)\n    },\n    'Bundle/create': function(newBundle){\n      console.log('Creating bundle...')\n      check(newBundle, Object);\n\n      Bundles.insert(newBundle, {validate: false, filter: false});          \n    },\n    'Bundle/drop': function(){\n      console.log('Dropping bundles...')\n      Bundles.remove({});\n    }\n})","\n\nimport BundlesPage from './client/BundlesPage';\nimport BundleTable from './client/BundleTable';\nimport BundleDetail from './client/BundleDetail';\n\nimport { Bundle, Bundles, BundleSchema } from './lib/Bundles';\n\nvar DynamicRoutes = [{\n  'name': 'BundlePage',\n  'path': '/bundles',\n  'component': BundlesPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n    'primaryText': 'Bundles',\n    'to': '/bundles',\n    'href': '/bundles'\n  }];\n  \nvar AdminSidebarElements = [{\n  'primaryText': 'Bundles',\n  'to': '/bundles',\n  'href': '/bundles'\n}];\n\nexport { \n  SidebarElements,\n  AdminSidebarElements, \n  DynamicRoutes, \n\n  BundlesPage,\n  BundleTable,\n  BundleDetail,\n\n  Bundle,\n  Bundles,\n  BundleSchema\n};\n\n\n","import { CardActions, CardText, DatePicker, Toggle, RaisedButton, TextField } from 'material-ui';\nimport { get, has, set } from 'lodash';\nimport { Row, Col } from 'react-bootstrap';\nimport moment from 'moment';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport PropTypes from 'prop-types';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\n\nconst styles = {\n  block: {\n    maxWidth: 250,\n  },\n  toggle: {\n    marginTop: 16,\n  },\n  thumbOff: {\n    backgroundColor: '#ffcccc',\n  },\n  trackOff: {\n    backgroundColor: '#ff9d9d',\n  },\n  thumbSwitched: {\n    backgroundColor: 'red',\n  },\n  trackSwitched: {\n    backgroundColor: '#ff9d9d',\n  },\n  labelStyle: {\n    color: 'red',\n  },\n};\n\nexport class BundleDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bundleId: false,\n      bundle: {\n        resourceType : 'Bundle',\n        name : [{\n          text : '',\n          prefix: [''],\n          family: [''],\n          given: [''],\n          suffix: [''],\n          resourceType : 'HumanName'\n        }],\n        active : true,\n        gender : \"\",\n        birthDate : '',\n        photo : [{\n          url: \"\"\n        }],\n        identifier: [{\n          use: 'usual',\n          type: {\n            coding: [\n              {\n                system: 'http://hl7.org/fhir/v2/0203',\n                code: 'MR'\n              }\n            ]\n          },\n          value: ''\n        }],\n        deceasedBoolean: false,\n        multipleBirthBoolean: false,\n        maritalStatus: {\n          text: ''\n        },\n        contact: [],\n        animal: {\n          species: {\n            text: 'Human'\n          }\n        },\n        communication: [{\n          language: {\n            text: 'English'\n          }\n        }],\n        careProvider: [{\n          display: '',\n          reference: ''\n        }],\n        managingOrganization: {\n          reference: '',\n          display: ''\n        }\n      },\n      form: {\n        prefix: '',\n        family: '',\n        given: '',\n        suffix: '',\n        identifier: '',\n        deceased: false,\n        multipleBirth: false,\n        maritalStatus: '',\n        species: '',\n        language: ''\n      }\n    }\n  }\n  dehydrateFhirResource(bundle) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.prefix = get(bundle, 'name[0].prefix[0]')\n    formData.family = get(bundle, 'name[0].family[0]')\n    formData.given = get(bundle, 'name[0].given[0]')\n    formData.suffix = get(bundle, 'name[0].suffix[0]')\n    formData.identifier = get(bundle, 'identifier[0].value')\n    formData.deceased = get(bundle, 'deceasedBoolean')\n    formData.gender = get(bundle, 'gender')\n    formData.multipleBirth = get(bundle, 'multipleBirthBoolean')\n    formData.maritalStatus = get(bundle, 'maritalStatus.text')\n    formData.species = get(bundle, 'animal.species.text')\n    formData.language = get(bundle, 'communication[0].language.text')\n    formData.birthDate = moment(bundle.birthDate).format(\"YYYY-MM-DD\")\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('BundleDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.bundle === this.state.bundle){\n      shouldUpdate = false;\n    }\n\n    // received an bundle from the table; okay lets update again\n    if(nextProps.bundleId !== this.state.bundleId){\n      this.setState({bundleId: nextProps.bundleId})\n      \n      if(nextProps.bundle){\n        this.setState({bundle: nextProps.bundle})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.bundle)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      bundleId: this.props.bundleId,\n      bundle: false,\n      bundelContent: '',\n      form: this.state.form\n    };\n\n    if(this.props.bundle){\n      data.bundle = this.props.bundle;\n    }\n    if(this.props.displayBirthdate){\n      data.displayBirthdate = this.props.displayBirthdate;\n    }\n\n    data.bundleContent = JSON.stringify(Bundles.findOne(this.props.bundleId), null, 2);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail[data]\", data);\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('BundleDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"bundleDetail\">\n        <CardText>\n\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='identifier'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'\n                value={ get(formData, 'identifier', '')}\n                onChange={ this.changeState.bind(this, 'identifier')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={8}>\n              <TextField\n                  id='title'\n                  ref='title'\n                  name='title'\n                  floatingLabelText='Title'\n                  value={ get(formData, 'title', '')}\n                  onChange={ this.changeState.bind(this, 'title')}\n                  floatingLabelFixed={true}\n                  fullWidth\n                  /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <pre style={{maxHeight: '500px', width: '100%', height: '100%'}}>\n              {this.data.bundleContent}              \n            </pre>\n          </Row>\n\n          {/* \n          <Row>\n            <Col md={1}>\n              <TextField\n                id='prefixInput'\n                ref='prefix'\n                name='prefix'\n                floatingLabelText='Prefix'\n                value={ get(formData, 'prefix', '')}\n                onChange={ this.changeState.bind(this, 'prefix')}\n                hintText=''\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={5}>\n              <TextField\n                id='givenInput'\n                ref='given'\n                name='given'\n                floatingLabelText='Given Name'\n                hintText='Jane'\n                value={ get(formData, 'given', '')}\n                onChange={ this.changeState.bind(this, 'given')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='familyInput'\n                ref='family'\n                name='family'\n                floatingLabelText='Family Name'\n                hintText='Doe'\n                value={ get(formData, 'family', '')}\n                onChange={ this.changeState.bind(this, 'family')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='suffixInput'\n                ref='suffix'\n                name='suffix'\n                floatingLabelText='Suffix / Maiden'\n                hintText=''\n                value={ get(formData, 'suffix', '')}\n                onChange={ this.changeState.bind(this, 'suffix')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={3}>\n              <TextField\n                id='maritalStatusInput'\n                ref='maritalStatus'\n                name='maritalStatus'\n                floatingLabelText='Marital Status'\n                hintText='single | maried | other'\n                value={ get(formData, 'maritalStatus', '')}\n                onChange={ this.changeState.bind(this, 'maritalStatus')}\n                floatingLabelFixed={false}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='genderInput'\n                ref='gender'\n                name='gender'\n                floatingLabelText='Gender'\n                hintText='male | female | unknown'\n                value={ get(formData, 'gender', '')}\n                onChange={ this.changeState.bind(this, 'gender')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n\n              <TextField\n                id='birthDateInput'\n                ref='birthDate'\n                name='birthDate'\n                type='date'\n                floatingLabelText='Birthdate'\n                value={ get(formData, 'birthDate', '')}\n                onChange={ this.changeState.bind(this, 'birthDate')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3} >\n              <br />\n              <Toggle\n                label=\"Multiple Birth\"\n                defaultToggled={false}\n                labelPosition=\"right\"\n                style={styles.toggle}\n              />              \n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>\n              <TextField\n                id='photoInput'\n                ref='photo'\n                name='photo'\n                floatingLabelText='Photo'\n                hintText='http://somewhere.com/image.jpg'\n                value={ get(formData, 'photo', '')}\n                onChange={ this.changeState.bind(this, 'photo')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='speciesInput'\n                ref='species'\n                name='species'\n                floatingLabelText='Species'\n                value={ get(formData, 'species', '')}\n                hintText='Human'\n                onChange={ this.changeState.bind(this, 'species')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='languageInput'\n                ref='language'\n                name='language'\n                floatingLabelText='Language'\n                value={ get(formData, 'language', '')}\n                onChange={ this.changeState.bind(this, 'language')}\n                hintText='English'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row> */}\n\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.bundleId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(bundleId){\n    if (bundleId) {\n      return (\n        <div>\n          <RaisedButton id='updateBundleButton' className='updateBundleButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton id='deleteBundleButton' label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id='saveBundleButton'  className='saveBundleButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"title\":\n        set(formData, 'title', textValue)\n        break;\n      case \"identifier\":\n        set(formData, 'identifier', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateBundle(bundleData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail.updateBundle\", bundleData, field, textValue);\n\n    switch (field) {\n      case \"title\":\n        set(bundleData, 'title', textValue)\n        break;\n      case \"identifier\":\n        set(bundleData, 'identifier[0].value', textValue)\n        break;\n    }\n    return bundleData;\n  }\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let bundleData = Object.assign({}, this.state.bundle);\n\n    formData = this.updateFormData(formData, field, textValue);\n    bundleData = this.updateBundle(bundleData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"bundleData\", bundleData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({bundle: bundleData})\n    this.setState({form: formData})\n  }\n\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Bundle...', this.state)\n\n    let self = this;\n    let fhirBundleData = Object.assign({}, this.state.bundle);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirBundleData', fhirBundleData);\n\n\n    let bundleValidator = BundleSchema.newContext();\n    console.log('bundleValidator', bundleValidator)\n    bundleValidator.validate(fhirBundleData)\n\n    console.log('IsValid: ', bundleValidator.isValid())\n    // console.log('ValidationErrors: ', bundleValidator.validationErrors());\n\n    if (this.state.bundleId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating bundle...\");\n\n      delete fhirBundleData._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      fhirBundleData.resourceType = 'Bundle';\n\n      Bundles._collection.update({_id: this.state.bundleId}, {$set: fhirBundleData }, function(error, result){\n        if (error) {\n          if(process.env.NODE_ENV === \"test\") console.log(\"Bundles.insert[error]\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Bundles\", recordId: self.state.bundleId});\n          Session.set('selectedBundleId', false);\n          Session.set('bundlePageTabIndex', 1);\n          Bert.alert('Bundle added!', 'success');\n        }\n      });\n    } else {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Creating a new bundle...\", fhirBundleData);\n\n      Bundles._collection.insert(fhirBundleData, function(error, result) {\n        if (error) {\n          if(process.env.NODE_ENV === \"test\")  console.log('Bundles.insert[error]', error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Bundles\", recordId: self.state.bundleId});\n          Session.set('bundlePageTabIndex', 1);\n          Session.set('selectedBundleId', false);\n          Bert.alert('Bundle added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('bundlePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Bundles._collection.animalremove({_id: this.state.bundleId}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Bundles.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Bundles\", recordId: self.state.bundleId});\n        Session.set('bundlePageTabIndex', 1);\n        Session.set('selectedBundleId', false);\n        Bert.alert('Bundle removed!', 'success');\n      }\n    });\n  }\n}\n\nBundleDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  bundleId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  bundle: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(BundleDetail.prototype, ReactMeteorData);\nexport default BundleDetail;","import Avatar from 'material-ui/Avatar';\nimport FlatButton from 'material-ui/FlatButton';\nimport { HTTP } from 'meteor/http';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { Session } from 'meteor/session';\nimport { has, get } from 'lodash';\nimport { TableNoData } from 'meteor/clinical:glass-ui'\nimport PropTypes from 'prop-types';\n\nflattenBundle = function(person){\n  let result = {\n    _id: person._id,\n    id: person.id,\n    active: true,\n    subject: '',\n    author: '',\n    title: '',\n    date: ''\n  };\n\n  result.subject = get(person, 'entry[0].resource.subject.display', true).toString();\n  result.author = get(person, 'entry[0].resource.author[0].display', true).toString();\n  result.title = get(person, 'entry[0].resource.title', true).toString();\n\n  // there's an off-by-1 error between momment() and Date() that we want\n  // to account for when converting back to a string\n  result.date = moment(person.date).format(\"YYYY-MM-DD\")\n\n  return result;\n}\n\nexport class BundleTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getMeteorData() {\n    let data = {\n      style: {\n        hideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n        },\n        cellHideOnPhone: {\n          visibility: 'visible',\n          display: 'table',\n          paddingTop: '16px',\n          maxWidth: '120px'\n        },\n        cell: {\n          paddingTop: '16px'\n        },\n        avatar: {\n          // color: rgb(255, 255, 255);\n          backgroundColor: 'rgb(188, 188, 188)',\n          userSelect: 'none',\n          borderRadius: '2px',\n          height: '40px',\n          width: '40px'\n        }\n      },\n      selected: [],\n      bundles: []\n    };\n\n    let query = {};\n    let options = {};\n\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      options.limit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n    // but can be over-ridden by props being more explicit\n    if(this.props.limit){\n      options.limit = this.props.limit;      \n    }\n\n    if(this.props.data){\n      // console.log('this.props.data', this.props.data);\n\n      if(this.props.data.length > 0){              \n        this.props.data.forEach(function(bundle){\n          data.bundles.push(flattenBundle(bundle));\n        });  \n      }\n    } else {\n      data.bundles = Bundles.find().map(function(bundle){\n        return flattenBundle(bundle);\n      });\n    }\n\n    console.log(\"BundleTable[data]\", data);\n    return data;\n  }\n  imgError(avatarId) {\n    this.refs[avatarId].src = Meteor.absoluteUrl() + 'noAvatar.png';\n  }\n  rowClick(id){\n    Session.set('bundlesUpsert', false);\n    Session.set('selectedBundleId', id);\n    // Session.set('bundlePageTabIndex', 2);\n\n    console.log('rowClick', Bundles.findOne(id));\n\n    // Session.set('dataContent', dataContent);   \n  }\n  renderRowAvatarHeader(){\n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <th className='avatar'>photo</th>\n      );\n    }\n  }\n  renderRowAvatar(bundle, avatarStyle){\n    //console.log('renderRowAvatar', bundle, avatarStyle)\n    \n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <td className='avatar'>\n          <img src={bundle.photo} ref={bundle._id} onError={ this.imgError.bind(this, bundle._id) } style={avatarStyle}/>\n        </td>\n      );\n    }\n  }\n  renderSpeciesHeader(displaySpecies){\n    if(displaySpecies){\n      return (\n        <th className='species'>Species</th>\n      );\n    }\n  }\n  renderSpeciesRow(displaySpecies, bundle){\n    if(displaySpecies){\n      return (\n        <td className='species' style={this.data.style.cellHideOnPhone}>\n          {bundle.species}\n        </td>\n      );\n    }\n\n  }\n  renderSendButtonHeader(){\n    if (this.props.showSendButton === true) {\n      return (\n        <th className='sendButton' style={this.data.style.hideOnPhone}></th>\n      );\n    }\n  }\n  renderSendButton(bundle, avatarStyle){\n    if (this.props.showSendButton === true) {\n      return (\n        <td className='sendButton' style={this.data.style.hideOnPhone}>\n          <FlatButton label=\"send\" onClick={this.onSend.bind('this', this.data.bundles[i]._id)}/>\n        </td>\n      );\n    }\n  }\n  onSend(id){\n    let bundle = Bundles.findOne({_id: id});\n\n    console.log(\"BundleTable.onSend()\", bundle);\n\n    var httpEndpoint = \"http://localhost:8080\";\n    if (get(Meteor, 'settings.public.interfaces.default.channel.endpoint')) {\n      httpEndpoint = get(Meteor, 'settings.public.interfaces.default.channel.endpoint');\n    }\n    HTTP.post(httpEndpoint + '/Bundle', {\n      data: bundle\n    }, function(error, result){\n      if (error) {\n        console.log(\"error\", error);\n      }\n      if (result) {\n        console.log(\"result\", result);\n      }\n    });\n  }\n  selectBundleRow(bundleId){\n    if(typeof(this.props.onRowClick) === \"function\"){\n      this.props.onRowClick(bundleId);\n    }\n  }\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.data.bundles.length === 0){\n      footer = <TableNoData noDataPadding={ this.props.noDataMessagePadding } />\n    } else {\n      for (var i = 0; i < this.data.bundles.length; i++) {\n        tableRows.push(\n          <tr key={i} className=\"bundleRow\" style={{cursor: \"pointer\"}} onClick={this.selectBundleRow.bind(this, this.data.bundles[i].id )} >\n            <td className='identifier' style={this.data.style.cell}>{this.data.bundles[i].identifier}</td>\n            <td className='title' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={this.data.style.cell}>{this.data.bundles[i].title }</td>\n            <td className='subject' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={this.data.style.cell}>{this.data.bundles[i].subject }</td>\n            <td className='author' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={this.data.style.cell}>{this.data.bundles[i].author }</td>\n            <td className='birthDate' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={{minWidth: '100px', paddingTop: '16px'}}>{this.data.bundles[i].birthDate }</td>\n          </tr>\n        );\n      }\n    }\n    \n\n\n    return(\n      <div>\n        <Table id='bundlesTable' hover >\n          <thead>\n            <tr>\n              <th className='identifier'>Identifier</th>\n              <th className='author'>Title</th>\n              <th className='subject'>Subject</th>\n              <th className='author'>Author</th>\n              <th className='birthdate' style={{minWidth: '100px'}}>Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            { tableRows }\n          </tbody>\n        </Table>\n        { footer }\n      </div>\n    );\n  }\n}\n\nBundleTable.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  showSendButton: PropTypes.bool,\n  displaySpecies: PropTypes.bool,\n  noDataMessagePadding: PropTypes.number\n};\n\nReactMixin(BundleTable.prototype, ReactMeteorData);\nexport default BundleTable;","import { CardText, CardTitle, Tab, Tabs } from 'material-ui';\nimport { Glass, GlassCard, VerticalCanvas, FullPageCanvas } from 'meteor/clinical:glass-ui';\n\nimport BundleDetail from './BundleDetail';\nimport BundleTable from './BundleTable';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport PropTypes from 'prop-types';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { Bundles, BundleSchema } from '../lib/Bundles.js';\nimport { Grid, Col, Row } from 'react-bootstrap';\n\nlet defaultBundle = {\n  index: 2,\n  id: '',\n  username: '',\n  email: '',\n  given: '',\n  family: '',\n  gender: ''\n};\nSession.setDefault('bundleFormData', defaultBundle);\nSession.setDefault('bundleSearchFilter', '');\nSession.setDefault('selectedBundleId', false);\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class BundlesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('bundlePageTabIndex'),\n      bundleSearchFilter: Session.get('bundleSearchFilter'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedBundleId: Session.get(\"selectedBundleId\"),\n      selectedBundle: false\n    };\n\n    \n    if (Session.get('selectedBundleId')){\n      data.selectedBundle = Bundles.findOne({_id: Session.get('selectedBundleId')});\n    } else {\n      data.selectedBundle = false;\n    }\n\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundlesPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('bundlePageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedBundleId', false);\n    Session.set('bundleUpsert', false);\n  }\n\n\n  render() {\n    console.log('React.version: ' + React.version);\n    return (\n      <div id=\"bundlesPage\">\n        <FullPageCanvas>\n          <Col md={6}>\n            <GlassCard height=\"auto\">\n              <CardTitle\n                title=\"Bundles\"\n              />\n              <CardText>\n                <BundleTable \n                  showBarcodes={true} \n                  showAvatars={true} \n                  noDataMessagePadding={100}\n                  />\n              </CardText>\n            </GlassCard>\n          </Col>\n          <Col md={6}>\n            <GlassCard height=\"auto\">\n              {/* <CardTitle\n                title=\"Bundles\"\n              /> */}\n              <CardText>\n                <BundleDetail \n                  id='bundleDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  bundle={ this.data.selectedBundle }\n                  bundleId={ this.data.selectedBundleId }\n                />\n              </CardText>\n            </GlassCard>\n\n          </Col>\n        </FullPageCanvas>\n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(BundlesPage.prototype, ReactMeteorData);\nexport default BundlesPage;"]}