{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-order/lib/MedicationOrders.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-order/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-order/client/MedicationOrderDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-order/client/MedicationOrdersPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-order/client/MedicationOrdersTable.js"],"names":["SimpleSchema","module","link","v","MedicationOrder","BaseModel","extend","prototype","_collection","MedicationOrders","Package","Mongo","Collection","connection","_transform","document","MedicationOrderSchema","type","String","defaultValue","optional","Array","IdentifierSchema","Date","CodeableConceptSchema","ReferenceSchema","Object","TimingSchema","Boolean","RangeSchema","QuantitySchema","RatioSchema","PeriodSchema","Number","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","MedicationOrdersPage","MedicationOrdersTable","MedicationOrderDetail","CardActions","CardText","Bert","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","PropTypes","get","set","defaultMedicationOrder","Session","setDefault","props","state","observationId","observation","form","dateWritten","disageInstruction","medicationCode","note","patient","prescriber","status","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","console","log","shouldUpdate","medicationOrderId","medicationOrder","setState","getMeteorData","data","displayDatePicker","setHint","text","showHints","render","id","determineButtons","handleSaveButton","bind","marginRight","handleDeleteButton","changeState","field","event","value","medicationOrderUpdate","display","asserter","clinicalStatus","code","coding","evidence","detail","_id","resourceType","update","$set","error","result","alert","reason","HipaaLogger","logEvent","eventType","userId","Meteor","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","showPatientInputs","onInsert","func","onUpdate","onRemove","onCancel","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","style","opacity","tab","borderBottom","borderRight","isLoggedIn","tabIndex","medicationOrderSearchFilter","currentMedicationOrder","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Checkbox","Table","moment","_","FaTags","FaCode","FaPuzzlePiece","FaLock","GoTrashcan","styles","hideOnPhone","visibility","cellHideOnPhone","paddingTop","maxWidth","cell","flattenMedicationOrder","newRow","identifier","patientDisplay","prescriberDisplay","asserterDisplay","snomedCode","snomedDisplay","evidenceDisplay","barcode","dosageInstructionText","medicationCodeableConcept","medication","format","selected","medicationOrders","forEach","order","push","find","map","displayOnMobile","width","includes","window","navigator","platform","rowClick","renderCheckboxHeader","hideCheckboxes","renderCheckbox","renderActionIconsHeader","hideActionIcons","renderActionIcons","iconStyle","marginLeft","marginTop","fontSize","showSecurityDialog","removeRecord","renderPatientNameHeader","hidePatientName","renderPatientName","minWidth","renderPrescriberNameHeader","hidePrescriberName","renderPrescriberName","renderIdentifierHeader","hideIdentifier","renderIdentifier","findOne","tableRows","footer","appWidth","medicationOrdersToRender","length","i","rowStyle","cursor","color","array","showSendButton","hidePatient","hidePrescriber","noDataMessagePadding","number","onCellClick","onRowClick","onMetaClick","onRemoveRecord","onActionButtonClick","actionButtonLabel"],"mappings":"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","file":"/packages/clinical_hl7-resource-medication-order.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nMedicationOrder = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nMedicationOrder.prototype._collection = MedicationOrders;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof MedicationOrders === 'undefined'){\n  if(Package['clinical:autopublish']){\n    MedicationOrders = new Mongo.Collection('MedicationOrders');\n  } else if(Package['clinical:desktop-publish']){    \n    MedicationOrders = new Mongo.Collection('MedicationOrders');\n  } else {\n    MedicationOrders = new Mongo.Collection('MedicationOrders', {connection: null});\n  }\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nMedicationOrders._transform = function (document) {\n  return new MedicationOrder(document);\n};\n\n\nMedicationOrderSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"MedicationOrder\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"dateWritten\" : {\n    optional: true,\n    type: Date\n  },\n  \"status\" : {\n    optional: true,\n    type: String\n  },\n  \"dateEnded\" : {\n    optional: true,\n    type: Date\n  },\n  \"reasonEnded\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"patient\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"prescriber\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n\n  \"reasonCodeableConceptSchema\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reasonReferenceSchema\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"note\" : {\n    optional: true,\n    type: String\n  },\n\n  \"medicationCodeableConceptSchema\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"medicationReferenceSchema\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n\n  \"dosageInstruction\" : {\n    optional: true,\n    type: Array\n  },\n  \"dosageInstruction.$\" : {\n    optional: true,\n    type: Object\n  },  \n  \"dosageInstruction.$.text\" : {\n    optional: true,\n    type: String\n  },\n  \"dosageInstruction.$.additionalInstructions\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"dosageInstruction.$.timing\" : {\n    optional: true,\n    type: TimingSchema\n  },\n\n  \"dosageInstruction.$.asNeededBoolean\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"dosageInstruction.$.asNeededCodeableConceptSchema\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n\n  \"dosageInstruction.$.siteCodeableConceptSchema\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"dosageInstruction.$.siteReferenceSchema\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"dosageInstruction.$.route\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"dosageInstruction.$.method\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n\n  \"dosageInstruction.$.doseRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"dosageInstruction.$.doseQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n\n  \"dosageInstruction.$.rateRatio\" : {\n    optional: true,\n    type: RatioSchema\n  },\n  \"dosageInstruction.$.rateRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"dosageInstruction.$.maxDosePerPeriodSchema\" : {\n    optional: true,\n    type: RatioSchema\n  },\n\n  \"dispenseRequest\" : {\n    optional: true,\n    type: Object\n    },\n\n  \"dispenseRequest.medicationCodeableConceptSchema\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"dispenseRequest.medicationReferenceSchema\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"dispenseRequest.validityPeriodSchema\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"dispenseRequest.numberOfRepeatsAllowed\" : {\n    optional: true,\n    type: Number\n  },\n  \"dispenseRequest.quantity\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n  \"dispenseRequest.expectedSupplyDuration\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n\n  \"substitution\" : {\n    optional: true,\n    type:  Array\n    },\n  \"substitution.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"substitution.type\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"substitution.reason\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"priorPrescription\" : {\n    optional: true,\n    type: ReferenceSchema\n  }\n});\n\nBaseSchema.extend(MedicationOrderSchema);\nDomainResourceSchema.extend(MedicationOrderSchema);\nMedicationOrders.attachSchema(MedicationOrderSchema);\n\nexport default { MedicationOrder, MedicationOrders, MedicationOrderSchema };","\n\nimport MedicationOrdersPage from './client/MedicationOrdersPage';\nimport MedicationOrdersTable from './client/MedicationOrdersTable';\nimport MedicationOrderDetail from './client/MedicationOrderDetail';\nimport { MedicationOrder, MedicationOrders, MedicationOrderSchema } from './lib/MedicationOrders';\n\nvar DynamicRoutes = [{\n  'name': 'MedicationOrdersPage',\n  'path': '/medication-orders',\n  'component': MedicationOrdersPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Medication Orders',\n  'to': '/medication-orders',\n  'href': '/medication-orders'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  MedicationOrdersPage,\n  MedicationOrdersTable,\n  MedicationOrderDetail\n};\n\n\n","import { CardActions, CardText } from 'material-ui/Card';\n\nimport { Bert } from 'meteor/clinical:alert';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { get, set } from 'lodash';\n\nlet defaultMedicationOrder = {\n  \"resourceType\": \"MedicationOrder\",\n  \"patient\": {\n    \"reference\": \"\",\n    \"display\": \"\"\n  },\n  \"asserter\": {\n    \"reference\": \"\",\n    \"display\": \"\"\n  },\n  \"dateRecorded\": \"\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"\",\n        \"display\": \"\"\n      }\n    ]\n  },\n  \"clinicalStatus\": \"\",\n  \"verificationStatus\": \"confirmed\",\n  \"severity\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"\",\n        \"display\": \"\"\n      }\n    ]\n  },\n  \"onsetDateTime\": \"\",\n  \"evidence\": [\n    {\n      \"detail\": [\n        {\n          \"reference\": \"\",\n          \"display\": \"\"\n        }\n      ]\n    }\n  ]\n};\n\n\n\nSession.setDefault('medicationOrderUpsert', false);\nSession.setDefault('selectedMedicationOrder', false);\n\n\nexport class MedicationOrderDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      observationId: false,\n      observation: {\n        \"resourceType\": \"MedicationOrder\",\n        \"patient\": {\n          \"reference\": \"\",\n          \"display\": \"\"\n        },\n        \"asserter\": {\n          \"reference\": \"\",\n          \"display\": \"\"\n        },\n        \"dateRecorded\": \"\",\n        \"code\": {\n          \"coding\": [\n            {\n              \"system\": \"http://snomed.info/sct\",\n              \"code\": \"\",\n              \"display\": \"\"\n            }\n          ]\n        },\n        \"clinicalStatus\": \"\",\n        \"verificationStatus\": \"confirmed\",\n        \"severity\": {\n          \"coding\": [\n            {\n              \"system\": \"http://snomed.info/sct\",\n              \"code\": \"\",\n              \"display\": \"\"\n            }\n          ]\n        },\n        \"onsetDateTime\": \"\",\n        \"evidence\": [\n          {\n            \"detail\": [\n              {\n                \"reference\": \"\",\n                \"display\": \"\"\n              }\n            ]\n          }\n        ]\n      },\n      form: {\n        dateWritten: '',\n        disageInstruction: '',\n        medicationCode: '',\n        note: '',\n        patient: '',\n        prescriber: '',\n        status: ''        \n      }\n    }\n  }\n  dehydrateFhirResource(observation) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.dateWritten = get(observation, 'dateWritten')\n    formData.disageInstruction = get(observation, 'disageInstruction[0].text')\n    formData.medicationCode = get(observation, 'medicationCode.text')\n    formData.note = get(observation, 'note')\n    formData.patient = get(observation, 'patient.display')\n    formData.prescriber = get(observation, 'prescriber.display')\n    formData.status = get(observation, 'status')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('MedicationOrderDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // received an observation from the table; okay lets update again\n    if(nextProps.medicationOrderId !== this.state.medicationOrderId){\n\n      if(nextProps.medicationOrder){\n        this.setState({medicationOrder: nextProps.medicationOrder})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.medicationOrder)})       \n      }\n\n      this.setState({medicationOrderId: nextProps.medicationOrderId})      \n      shouldUpdate = true;\n    }\n\n    // both false; don't take any more updates\n    if(nextProps.medicationOrder === this.state.medicationOrder){\n      shouldUpdate = false;\n    }\n    \n    return shouldUpdate;\n  }\n\n\n  getMeteorData() {\n    let data = {\n      medicationOrderId:  this.props.medicationOrderId,\n      medicationOrder: false,\n      form: this.state.form,\n      displayDatePicker: false\n    };\n\n    if(this.props.displayDatePicker){\n      data.displayDatePicker = this.props.displayDatePicker\n    }\n    \n    if(this.props.medicationOrder){\n      data.medicationOrder = this.props.medicationOrder;\n      data.form = this.dehydrateFhirResource(this.props.medicationOrder);\n    }\n\n    // if (Session.get('medicationOrderUpsert')) {\n    //   data.medicationOrder = Session.get('medicationOrderUpsert');\n    // } else {\n    //   if (Session.get('selectedMedicationOrder')) {\n    //     data.medicationOrderId = Session.get('selectedMedicationOrder');\n    //     console.log(\"selectedMedicationOrder\", Session.get('selectedMedicationOrder'));\n\n    //     let selectedMedicationOrder = MedicationOrders.findOne({_id: Session.get('selectedMedicationOrder')});\n    //     console.log(\"selectedMedicationOrder\", selectedMedicationOrder);\n\n    //     if (selectedMedicationOrder) {\n    //       data.medicationOrder = selectedMedicationOrder;\n    //     }\n    //   } else {\n    //     data.medicationOrder = defaultMedicationOrder;\n    //   }\n\n    // }\n\n    console.log('MedicationOrderDetail[data]', data);\n    return data;\n  }\n  setHint(text){\n    if(this.props.showHints !== false){\n      return text;\n    } else {\n      return '';\n    }\n  }\n  render() {\n    return (\n      <div id={this.props.id} className=\"medicationOrderDetail\">\n        <CardText>\n          {/* <TextField\n            id='patientDisplayInput'\n            ref='patientDisplay'\n            name='patientDisplay'\n            floatingLabelText='Patient'\n            value={this.data.medicationOrder.patient ? this.data.medicationOrder.patient.display : ''}\n            onChange={ this.changeState.bind(this, 'patientDisplay')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='asserterDisplayInput'\n            ref='asserterDisplay'\n            name='asserterDisplay'\n            floatingLabelText='Asserter'\n            value={this.data.medicationOrder.asserter ? this.data.medicationOrder.asserter.display : ''}\n            onChange={ this.changeState.bind(this, 'asserterDisplay')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='clinicalStatusInput'\n            ref='clinicalStatus'\n            name='clinicalStatus'\n            floatingLabelText='Clinical Status'\n            value={this.data.medicationOrder.clinicalStatus ? this.data.medicationOrder.clinicalStatus : ''}\n            onChange={ this.changeState.bind(this, 'clinicalStatus')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='snomedCodeInput'\n            ref='snomedCode'\n            name='snomedCode'\n            floatingLabelText='SNOMED Code'\n            value={this.data.medicationOrder.code.coding[0] ? this.data.medicationOrder.code.coding[0].code : ''}\n            onChange={ this.changeState.bind(this, 'snomedCode')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='snomedDisplayInput'\n            ref='snomedDisplay'\n            name='snomedDisplay'\n            floatingLabelText='SNOMED Display'\n            value={this.data.medicationOrder.code.coding[0] ? this.data.medicationOrder.code.coding[0].display : ''}\n            onChange={ this.changeState.bind(this, 'snomedDisplay')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='evidenceDisplayInput'\n            ref='evidenceDisplay'\n            name='evidenceDisplay'\n            floatingLabelText='Evidence (Observation)'\n            value={this.data.medicationOrder.evidence[0].detail[0] ? this.data.medicationOrder.evidence[0].detail[0].display : ''}\n            onChange={ this.changeState.bind(this, 'evidenceDisplay')}\n            fullWidth\n            /><br/> */}\n\n\n\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.medicationOrderId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n\n  determineButtons(medicationOrderId){\n    if (medicationOrderId) {\n      return (\n        <div>\n          <RaisedButton id=\"saveMedicationOrderButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteMedicationOrderButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveMedicationOrderButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n\n  // this could be a mixin\n  changeState(field, event, value){\n    let medicationOrderUpdate;\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"MedicationOrderDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new medicationOrder\n    if (Session.get('medicationOrderUpsert')) {\n      medicationOrderUpdate = Session.get('medicationOrderUpsert');\n    } else {\n      medicationOrderUpdate = defaultMedicationOrder;\n    }\n\n\n\n    // if there's an existing medicationOrder, use them\n    if (Session.get('selectedMedicationOrder')) {\n      medicationOrderUpdate = this.data.medicationOrder;\n    }\n\n    switch (field) {\n      case \"patientDisplay\":\n        medicationOrderUpdate.patient.display = value;\n        break;\n      case \"asserterDisplay\":\n        medicationOrderUpdate.asserter.display = value;\n        break;\n      case \"clinicalStatus\":\n        medicationOrderUpdate.clinicalStatus = value;\n        break;\n      case \"snomedCode\":\n        medicationOrderUpdate.code.coding[0].code = value;\n        break;\n      case \"snomedDisplay\":\n        medicationOrderUpdate.code.coding[0].display = value;\n        break;\n      case \"evidenceDisplay\":\n        medicationOrderUpdate.evidence[0].detail[0].display = value;\n        break;\n      default:\n\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"medicationOrderUpdate\", medicationOrderUpdate);\n    Session.set('medicationOrderUpsert', medicationOrderUpdate);\n  }\n\n  handleSaveButton(){\n    let medicationOrderUpdate = Session.get('medicationOrderUpsert', medicationOrderUpdate);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"medicationOrderUpdate\", medicationOrderUpdate);\n\n\n    if (Session.get('selectedMedicationOrder')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating medicationOrder...\");\n      delete medicationOrderUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      medicationOrderUpdate.resourceType = 'MedicationOrder';\n\n      MedicationOrders.update(\n        {_id: Session.get('selectedMedicationOrder')}, {$set: medicationOrderUpdate }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"MedicationOrders\", recordId: Session.get('selectedMedicationOrder')});\n            Session.set('medicationOrderPageTabIndex', 1);\n            Session.set('selectedMedicationOrder', false);\n            Session.set('medicationOrderUpsert', false);\n            Bert.alert('MedicationOrder updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new medicationOrder\", medicationOrderUpdate);\n\n      MedicationOrders.insert(medicationOrderUpdate, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"MedicationOrders\", recordId: result});\n          Session.set('medicationOrderPageTabIndex', 1);\n          Session.set('selectedMedicationOrder', false);\n          Session.set('medicationOrderUpsert', false);\n          Bert.alert('MedicationOrder added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('medicationOrderPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    MedicationOrder.remove({_id: Session.get('selectedMedicationOrder')}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"MedicationOrders\", recordId: Session.get('selectedMedicationOrder')});\n        Session.set('medicationOrderPageTabIndex', 1);\n        Session.set('selectedMedicationOrder', false);\n        Session.set('medicationOrderUpsert', false);\n        Bert.alert('MedicationOrder removed!', 'success');\n      }\n    });\n  }\n}\n\n\nMedicationOrderDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  medicationOrderId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  medicationOrder: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n  showPatientInputs: PropTypes.bool,\n  showHints: PropTypes.bool,\n  onInsert: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onRemove: PropTypes.func,\n  onCancel: PropTypes.func\n};\n\nReactMixin(MedicationOrderDetail.prototype, ReactMeteorData);\nexport default MedicationOrderDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport MedicationOrderDetail from './MedicationOrderDetail';\nimport MedicationOrdersTable from './MedicationOrdersTable';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nexport class MedicationOrdersPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      state: {\n        isLoggedIn: false\n      },\n      tabIndex: Session.get('medicationOrderPageTabIndex'),\n      medicationOrderSearchFilter: Session.get('medicationOrderSearchFilter'),\n      currentMedicationOrder: Session.get('selectedMedicationOrder')\n    };\n\n    if (Meteor.user()) {\n      data.state.isLoggedIn = true;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('medicationOrderPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedMedicationOrder', false);\n    Session.set('medicationOrderUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In MedicationOrdersPage render');\n    return (\n      <div id='medicationOrdersPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='MedicationOrders' />\n            <CardText>\n              <Tabs id=\"medicationOrdersPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newMedicationOrderTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <MedicationOrderDetail id='newMedicationOrder' />\n               </Tab>\n               <Tab className=\"medicationOrderListTab\" label='MedicationOrders' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <MedicationOrdersTable />\n               </Tab>\n               <Tab className=\"medicationOrderDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <MedicationOrderDetail id='medicationOrderDetails' />\n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(MedicationOrdersPage.prototype, ReactMeteorData);\n\nexport default MedicationOrdersPage;","import React from 'react';\nimport PropTypes from 'prop-types';\n\n\n// import { ReactMeteorData } from 'meteor/react-meteor-data';\n// import ReactMixin from 'react-mixin';\n\nimport { CardText, Checkbox } from 'material-ui';\nimport { Table } from 'react-bootstrap';\n\nimport moment from 'moment-es6'\nimport _ from 'lodash';\nlet get = _.get;\nlet set = _.set;\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\nimport { GoTrashcan } from 'react-icons/go'\n\nlet styles = {\n  hideOnPhone: {\n    visibility: 'visible',\n    display: 'table'\n  },\n  cellHideOnPhone: {\n    visibility: 'visible',\n    display: 'table',\n    paddingTop: '16px',\n    maxWidth: '120px'\n  },\n  cell: {\n    paddingTop: '16px'\n  }\n}\n\nflattenMedicationOrder = function(medicationOrder){\n  // console.log('flattenMedicationOrder', medicationOrder)\n\n  let newRow = {\n    _id: medicationOrder._id,\n    status: '',\n    identifier: '',\n    patientDisplay: '',\n    prescriberDisplay: '',\n    asserterDisplay: '',\n    clinicalStatus: '',\n    snomedCode: '',\n    snomedDisplay: '',\n    evidenceDisplay: '',\n    barcode: '',\n    dateWritten: '',\n    dosageInstructionText: '',\n    medicationCodeableConcept: ''\n  };\n\n  newRow.medication = get(medicationOrder, 'medicationReference.display');\n  newRow.status = get(medicationOrder, 'status');\n  newRow.identifier = get(medicationOrder, 'identifier[0].value');\n  newRow.patientDisplay = get(medicationOrder, 'patient.display');\n  newRow.prescriberDisplay = get(medicationOrder, 'prescriber.display');\n  newRow.dateWritten = moment(get(medicationOrder, 'dateWritten')).format(\"YYYY-MM-DD\");\n  newRow.dosageInstructionText = get(medicationOrder, 'dosageInstruction[0].text');\n  newRow.medicationCodeableConcept = get(medicationOrder, 'medicationCodeableConcept.text');\n  newRow.barcode = get(medicationOrder, '_id');\n\n  // newRow.asserterDisplay = get(medicationOrder, 'asserter.display');\n  // newRow.clinicalStatus = get(medicationOrder, 'clinicalStatus');\n  // newRow.snomedCode = get(medicationOrder, 'code.coding[0].code');\n  // newRow.snomedDisplay = get(medicationOrder, 'code.coding[0].display');\n  // newRow.evidenceDisplay = get(medicationOrder, 'evidence[0].detail[0].display');\n\n  return newRow;\n}\n\nexport class MedicationOrdersTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: [],\n      medicationOrders: []\n    }\n  }\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      medicationOrders: []\n    }\n    \n    if(this.props.data){\n      // console.log('this.props.data', this.props.data)\n      this.props.data.forEach(function(order){\n        // console.log('order', order)\n        data.medicationOrders.push(flattenMedicationOrder(order));\n      })\n    } else {\n      data.medicationOrders = MedicationOrders.find().map(flattenMedicationOrder);\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"MedicationOrdersTable.data\", data);\n    return data;\n  };\n  displayOnMobile(width){\n    let style = {};\n    if(['iPhone'].includes(window.navigator.platform)){\n      style.display = \"none\";\n    }\n    if(width){\n      style.width = width;\n    }\n    return style;\n  }\n\n  rowClick(id){\n    Session.set('medicationOrdersUpsert', false);\n    Session.set('selectedMedicationOrder', id);\n    Session.set('medicationOrderPageTabIndex', 2);\n  };\n\n  renderCheckboxHeader(){\n    if (!this.props.hideCheckboxes) {\n      return (\n        <th className=\"toggle\" style={{width: '60px'}} >Checkbox</th>\n      );\n    }\n  }\n  renderCheckbox(){\n    if (!this.props.hideCheckboxes) {\n      return (\n        <td className=\"toggle\" style={{width: '60px'}}>\n            <Checkbox\n              defaultCheckbox={true}\n            />\n          </td>\n      );\n    }\n  }\n  renderActionIconsHeader(){\n    if (!this.props.hideActionIcons) {\n      return (\n        <th className='actionIcons'>Actions</th>\n      );\n    }\n  }\n  renderActionIcons( medicationOrder ){\n    if (!this.props.hideActionIcons) {\n\n      let iconStyle = {\n        marginLeft: '4px', \n        marginRight: '4px', \n        marginTop: '4px', \n        fontSize: '120%'\n      }\n\n      return (\n        <td className='actionIcons' style={{width: '100px'}}>\n          <FaTags style={iconStyle} onClick={this.showSecurityDialog.bind(this, medicationOrder)} />\n          <GoTrashcan style={iconStyle} onClick={this.removeRecord.bind(this, medicationOrder._id)} />  \n        </td>\n      );\n    }\n  } \n\n\n  // renderActionIconsHeader(){\n  //   if (!this.props.hideActionIcons) {\n  //     return (\n  //       <th className='actionIcons' style={{width: '100px'}}>Actions</th>\n  //     );\n  //   }\n  // }\n  // renderActionIcons(actionIcons ){\n  //   if (!this.props.hideActionIcons) {\n  //     return (\n  //       <td className='actionIcons' style={{minWidth: '120px'}}>\n  //         <FaLock style={{marginLeft: '2px', marginRight: '2px'}} />\n  //         <FaTags style={{marginLeft: '2px', marginRight: '2px'}} />\n  //         <FaCode style={{marginLeft: '2px', marginRight: '2px'}} />\n  //         <FaPuzzlePiece style={{marginLeft: '2px', marginRight: '2px'}} />          \n  //       </td>\n  //     );\n  //   }\n  // } \n  renderPatientNameHeader(){\n    if (!this.props.hidePatientName) {\n      return (\n        <th className='patientDisplay'>Patient</th>\n      );\n    }\n  }\n  renderPatientName(patientDisplay ){\n    if (!this.props.hidePatientName) {\n      return (\n        <td className='patientDisplay' style={{minWidth: '140px'}}>{ patientDisplay }</td>\n      );\n    }\n  }\n  renderPrescriberNameHeader(){\n    if (!this.props.hidePrescriberName) {\n      return (\n        <th className='prescriberDisplay'>Prescriber</th>\n      );\n    }\n  }\n  renderPrescriberName(prescriberDisplay ){\n    if (!this.props.hidePrescriberName) {\n      return (\n        <td className='prescriberDisplay' style={{minWidth: '140px'}}>{ prescriberDisplay }</td>\n      );\n    }\n  }\n  renderIdentifierHeader(){\n    if (!this.props.hideIdentifier) {\n      return (\n        <th className='identifier'>Identifier</th>\n      );\n    }\n  }\n  renderIdentifier(identifier ){\n    if (!this.props.hideIdentifier) {\n      return (\n        <td className='identifier'>{ identifier }</td>\n      );\n    }\n  } \n  removeRecord(_id){\n    console.log('Remove medication order ', _id)\n    MedicationOrders._collection.remove({_id: _id})\n  }\n  showSecurityDialog(medicationOrder){\n    console.log('showSecurityDialog', medicationOrder)\n\n    Session.set('securityDialogResourceJson', MedicationOrders.findOne(get(medicationOrder, '_id')));\n    Session.set('securityDialogResourceType', 'MedicationOrder');\n    Session.set('securityDialogResourceId', get(medicationOrder, '_id'));\n    Session.set('securityDialogOpen', true);\n  }\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.props.appWidth){\n      if (this.props.appWidth < 768) {\n        styles.hideOnPhone.visibility = 'hidden';\n        styles.hideOnPhone.display = 'none';\n        styles.cellHideOnPhone.visibility = 'hidden';\n        styles.cellHideOnPhone.display = 'none';\n      } else {\n        styles.hideOnPhone.visibility = 'visible';\n        styles.hideOnPhone.display = 'table-cell';\n        styles.cellHideOnPhone.visibility = 'visible';\n        styles.cellHideOnPhone.display = 'table-cell';\n      }  \n    }\n\n    let medicationOrdersToRender = [];\n    if(this.props.medicationOrders){\n      if(this.props.medicationOrders.length > 0){              \n        this.props.medicationOrders.forEach(function(medicationOrder){\n          medicationOrdersToRender.push(flattenMedicationOrder(medicationOrder));\n        });  \n      }\n    }\n\n\n    if(medicationOrdersToRender.length === 0){\n      console.log('No medication orders to render');\n      // footer = <TableNoData noDataPadding={ this.props.noDataMessagePadding } />\n    } else {\n      for (var i = 0; i < medicationOrdersToRender.length; i++) {\n        var newRow = medicationOrdersToRender[i];\n  \n        let rowStyle = {\n          cursor: 'pointer'\n        }\n        if(get(medicationOrdersToRender[i], 'modifierExtension[0]')){\n          rowStyle.color = \"orange\";\n        }\n  \n        tableRows.push(\n          <tr key={i} className=\"medicationOrderRow\" onClick={ this.rowClick.bind('this', newRow._id)} >\n  \n            { this.renderCheckbox() }\n            { this.renderActionIcons(newRow) }\n            { this.renderIdentifier(newRow.identifier) }\n  \n            {/* <td className='identifier' style={ this.displayOnMobile()} >{ newRow.identifier }</td> */}\n            <td className='medication' style={ this.displayOnMobile()}>{ newRow.medication }</td>\n            <td className='status' style={ this.displayOnMobile()}>{ newRow.status }</td>\n            { this.renderPatientName(newRow.patientDisplay ) } \n            { this.renderPrescriberName(newRow.prescriberDisplay ) } \n            {/* <td className='patientDisplay' style={ this.displayOnMobile('140px')} >{ newRow.patientDisplay }</td> */}\n            {/* <td className='prescriberDisplay' style={{minWidth: '200px'}}>{ newRow.prescriberDisplay }</td> */}\n            <td className='dateWritten'>{ newRow.dateWritten }</td>\n            <td className='dosageInstructionText'>{ newRow.dosageInstructionText }</td>\n            {/* <td><span className=\"barcode\">{ newRow.barcode }</span></td> */}\n          </tr>\n        )\n      }\n    }\n\n    return(\n      <Table id='medicationOrdersTable' hover >\n        <thead>\n          <tr>\n            { this.renderCheckboxHeader() }\n            { this.renderActionIconsHeader() }\n            { this.renderIdentifier() }\n\n            {/* <th className='identifier' style={ this.displayOnMobile()} >Identifier</th> */}\n            <th className='medication' style={ this.displayOnMobile()} >Medication</th>\n            <th className='status' style={ this.displayOnMobile()} >Status</th>\n            { this.renderPatientNameHeader() }\n            { this.renderPrescriberNameHeader() }\n            {/* <th className='patientDisplay' style={ this.displayOnMobile('140px')} >Patient</th> */}\n            {/* <th className='prescriberDisplay' style={{minWidth: '200px'}}>Prescriber</th> */}\n            <th className='dateWritten' style={{minWidth: '100px'}}>Date Written</th>\n            <th className='dosageInstructionText'>Dosage</th>\n            {/* <th>_id</th> */}\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nMedicationOrdersTable.propTypes = {\n  id: PropTypes.string,\n  medicationOrders: PropTypes.array,\n  fhirVersion: PropTypes.string,\n  showSendButton: PropTypes.bool,\n  hideCheckboxes: PropTypes.bool,\n  hideActionIcons: PropTypes.bool,\n  hidePatient: PropTypes.bool,\n  hidePrescriber: PropTypes.bool,\n  noDataMessagePadding: PropTypes.number,\n  onCellClick: PropTypes.func,\n  onRowClick: PropTypes.func,\n  onMetaClick: PropTypes.func,\n  onRemoveRecord: PropTypes.func,\n  onActionButtonClick: PropTypes.func,\n  actionButtonLabel: PropTypes.string\n};\n\nexport default MedicationOrdersTable;"]}