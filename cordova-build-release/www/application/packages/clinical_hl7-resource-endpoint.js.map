{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-endpoint/lib/Endpoints.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-endpoint/lib/methods.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-endpoint/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-endpoint/client/EndpointDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-endpoint/client/EndpointsPage.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-endpoint/client/EndpointsTable.jsx"],"names":["SimpleSchema","module","link","v","Endpoint","BaseModel","extend","prototype","_collection","Endpoints","Package","Mongo","Collection","connection","_transform","document","EndpointSchema","type","String","defaultValue","optional","Array","IdentifierSchema","CodingSchema","ReferenceSchema","ContactPointSchema","PeriodSchema","CodeableConceptSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","get","Meteor","methods","console","log","HTTP","absoluteUrl","err","result","entries","forEach","endpoint","call","endpointData","check","Object","newEndpoint","status","payloadType","coding","code","text","connectionType","display","name","OrganizationName","address","FHIRPatientFacingURI","managingOrganization","contact","isClient","insert","error","isServer","remove","export","AdminSidebarElements","SidebarElements","DynamicRoutes","EndpointsPage","EndpointsTable","EndpointDetail","CardActions","CardText","has","set","insertEndpoint","removeEndpointById","updateEndpoint","Bert","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","Session","defaultEndpoint","url","identifier","setDefault","getMeteorData","data","endpointId","selectedEndpoint","findOne","_id","birthDate","moment","add","format","process","env","NODE_ENV","render","props","id","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","field","event","value","endpointUpdate","TRACE","gender","toLowerCase","photo","Date","resourceType","update","$set","alert","reason","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","handleCancelButton","Component","CardTitle","Tab","Tabs","GlassCard","Glass","VerticalCanvas","EndpointTable","index","username","email","given","family","style","opacity","tab","borderBottom","borderRight","tabIndex","endpointSearchFilter","currentEndpoint","blur","appbar","darkroom","handleTabChange","onNewTab","initializeTab","initSixNodes","width","initTwelveNodes","initEpicNodes","initMedicareHospitalNodes","initChicagoHospitalNodes","initAppleHealthkitNodes","handleActive","FlatButton","Toggle","Table","TableNoData","hideOnPhone","visibility","cellHideOnPhone","paddingTop","cell","selected","query","patient","options","limit","find","map","rowClick","toggleEndpointStatus","tableRows","footer","length","noDataMessage","i","push","cursor"],"mappings":"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","file":"/packages/clinical_hl7-resource-endpoint.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// if(Package['clinical:autopublish']){\n//   console.log(\"*****************************************************************************\")\n//   console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n//   console.log(\"Any protected health information (PHI) stored in this app should be audited.\"); \n//   console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");  \n//   console.log(\"\");  \n//   console.log(\"meteor remove clinical:autopublish\");  \n//   console.log(\"\");  \n// }\n// if(Package['autopublish']){\n//   console.log(\"*****************************************************************************\")\n//   console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");  \n//   console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n//   console.log(\"\");  \n//   console.log(\"meteor remove autopublish\");  \n//   console.log(\"meteor add clinical:autopublish\");  \n//   console.log(\"\");  \n// }\n\n\n\n\n// create the object using our BaseModel\nEndpoint = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nEndpoint.prototype._collection = Endpoints;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Endpoints = new Mongo.Collection('HL7.Resources.Endpoints');\n\nif(typeof Endpoints === 'undefined'){\n  if(Package['autopublish']){\n    Endpoints = new Mongo.Collection('Endpoints');\n  } else if(Package['clinical:autopublish']){    \n    Endpoints = new Mongo.Collection('Endpoints');\n  } else if(Package['clinical:desktop-publish']){    \n    Endpoints = new Mongo.Collection('Endpoints');\n  } else {\n    Endpoints = new Mongo.Collection('Endpoints', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nEndpoints._transform = function (document) {\n  return new Endpoint(document);\n};\n\nEndpointSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Endpoint\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    optional: true,\n    type: String\n  }, \n  \"connectionType\" : {\n    optional: true,\n    type: CodingSchema \n  }, \n  \"name\" : {\n    optional: true,\n    type: String\n  }, \n  \"managingOrganization\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, \n  \"contact\" : {\n    optional: true,\n    type: Array\n  }, \n  \"contact.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, \n  \"period\" : {\n    optional: true,\n    type: PeriodSchema \n  }, \n  \"payloadType\" : {\n    optional: true,\n    type: Array\n  }, \n  \"payloadType.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  }, \n  \"payloadMimeType\" : {\n    optional: true,\n    type: Array\n  }, \n  \"payloadMimeType.$\" : {\n    optional: true,\n    type: String \n  }, \n  \"address\" : {\n    optional: true,\n    type: String\n  }, \n  \"header\" : {\n    optional: true,\n    type: Array\n  },\n  \"header.$\" : {\n    optional: true,\n    type: String \n  }\n\n});\n\nBaseSchema.extend(EndpointSchema);\nDomainResourceSchema.extend(EndpointSchema);\n\nEndpoints.attachSchema(EndpointSchema);\n\nexport default { Endpoint, Endpoints, EndpointSchema };","// import {epicEndpoints} from '../data/epic.json';\n// import {cernerEndpoints} from '../data/cerner.json';\n\nimport { get } from 'lodash';\n\nMeteor.methods({\n  'Endpoint/initialize': function(){\n    console.log('Endpoint/initialize')\n\n    HTTP.get(Meteor.absoluteUrl() + 'packages/clinical_hl7-resource-endpoint/data/epic.json', function(err, result){\n      console.log('Fetching dataset: ', Meteor.absoluteUrl() + 'data/epic.json');\n      var entries = get(result, 'data.Entries');\n      \n      if(entries){\n        entries.forEach(function(endpoint){\n          // console.log('endpoint.OrganizationName', endpoint.OrganizationName);\n          Meteor.call('Endpoint/create', endpoint);\n        });\n      }\n    });\n\n\n  },\n  'Endpoint/create': async function(endpointData){\n    console.log('Endpoint/create');\n\n    check(endpointData, Object);\n\n    var newEndpoint = {\n      status: 'off',\n      payloadType: [{\n        coding: [{\n          code: 'urn:ihe:pcc:xphr:2007'\n        }],\n        text: 'urn:ihe:pcc:xphr:2007'\n      }],\n      connectionType: {\n        display: \"FHIR Base\",\n        code: 'oauth'\n      }, \n      name: endpointData.OrganizationName,\n      address: endpointData.FHIRPatientFacingURI\n    }\n\n    if(endpointData.status){\n      newEndpoint.status = endpointData.status;\n    }\n    if(endpointData.managingOrganization){\n      newEndpoint.managingOrganization = endpointData.managingOrganization;\n    }\n    if(endpointData.contact){\n      newEndpoint.contact = endpointData.contact;\n    }\n\n    console.log('Creating Endpoint...', newEndpoint);\n    if(Meteor.isClient){\n      Endpoints._collection.insert(newEndpoint, function(error, result){\n        if (error) {\n          console.log(error);\n        }\n        if (result) {\n          console.log('Endpoint created: ' + result);\n        }\n      });  \n    }\n    if(Meteor.isServer){\n      Endpoints.insert(newEndpoint, function(error, result){\n        if (error) {\n          console.log(error);\n        }\n        if (result) {\n          console.log('Endpoint created: ' + result);\n        }\n      });  \n    }\n  },\n  'Endpoint/drop': function(){\n      console.log('-----------------------------------------');\n      console.log('Endpoint/drop');\n\n      Endpoints.remove({});\n    }\n});\n","\nimport EndpointsPage from './client/EndpointsPage';\nimport EndpointsTable from './client/EndpointsTable';\n\nvar DynamicRoutes = [{\n  'name': 'EndpointPage',\n  'path': '/endpoints',\n  'component': EndpointsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Endpoints',\n  'to': '/endpoints',\n  'href': '/endpoints'\n}];\nvar AdminSidebarElements = [{\n  'primaryText': 'Endpoints',\n  'to': '/endpoints',\n  'href': '/endpoints'\n}];\n\nexport { \n  AdminSidebarElements,\n  SidebarElements, \n  DynamicRoutes, \n\n  EndpointsPage,\n  EndpointsTable\n};\n\n\n","import { CardActions, CardText } from 'material-ui/Card';\nimport { get, has, set } from 'lodash';\nimport { insertEndpoint, removeEndpointById, updateEndpoint } from 'meteor/clinical:hl7-resource-endpoint';\n\n\nimport { Bert } from 'meteor/clinical:alert';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\n\nimport { Endpoints } from '../lib/Endpoints';\nimport { Session } from 'meteor/session';\n\n\nlet defaultEndpoint = {\n  \"resourceType\" : \"Endpoint\",\n  \"name\" : [{\n    \"text\" : \"\",\n    \"resourceType\" : \"HumanName\"\n  }],\n  \"active\" : true,\n  \"gender\" : \"\",\n  \"birthDate\" : '',\n  \"photo\" : [{\n    url: \"\"\n  }],\n  identifier: [{\n    \"use\": \"usual\",\n    \"type\": {\n      \"coding\": [\n        {\n          \"system\": \"http://hl7.org/fhir/v2/0203\",\n          \"code\": \"MR\"\n        }\n      ]\n    },\n    \"value\": \"\"\n  }],\n  \"test\" : false\n};\n\n\nSession.setDefault('endpointUpsert', false);\nSession.setDefault('selectedEndpoint', false);\n\nexport class EndpointDetail extends React.Component {\n  getMeteorData() {\n    let data = {\n      endpointId: false,\n      endpoint: defaultEndpoint\n    };\n\n    if (Session.get('endpointUpsert')) {\n      data.endpoint = Session.get('endpointUpsert');\n    } else {\n      if (Session.get('selectedEndpoint')) {\n        data.endpointId = Session.get('selectedEndpoint');\n        console.log(\"selectedEndpoint\", Session.get('selectedEndpoint'));\n\n        let selectedEndpoint = Endpoints.findOne({_id: Session.get('selectedEndpoint')});\n        console.log(\"selectedEndpoint\", selectedEndpoint);\n\n        if (selectedEndpoint) {\n          data.endpoint = selectedEndpoint;\n\n          if (typeof selectedEndpoint.birthDate === \"object\") {\n            data.endpoint.birthDate = moment(selectedEndpoint.birthDate).add(1, 'day').format(\"YYYY-MM-DD\");\n          }\n        }\n      } else {\n        data.endpoint = defaultEndpoint;\n      }\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"EndpointDetail[data]\", data);\n    return data;\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} className=\"endpointDetail\">\n        <CardText>\n          <TextField\n            id='nameInput'\n            ref='name'\n            name='name'\n            floatingLabelText='name'\n            value={ get(this, 'data.endpoint.name[0].text', '')}\n            onChange={ this.changeState.bind(this, 'name')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='genderInput'\n            ref='gender'\n            name='gender'\n            floatingLabelText='gender'\n            hintText='male | female | other | indeterminate | unknown'\n            value={ get(this, 'data.endpoint.gender', '')}\n            onChange={ this.changeState.bind(this, 'gender')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='birthdateInput'\n            ref='birthdate'\n            name='birthdate'\n            floatingLabelText='birthdate'\n            hintText='YYYY-MM-DD'\n            value={ get(this, 'data.endpoint.birthDate', '')}\n            onChange={ this.changeState.bind(this, 'birthDate')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='photoInput'\n            ref='photo'\n            name='photo'\n            floatingLabelText='photo'\n            value={ get(this, 'data.endpoint.photo[0].url', '')}\n            onChange={ this.changeState.bind(this, 'photo')}\n            floatingLabelFixed={false}\n            fullWidth\n            /><br/>\n          <TextField\n            id='mrnInput'\n            ref='mrn'\n            name='mrn'\n            floatingLabelText='medical record number'\n            value={ get(this, 'data.endpoint.identifier[0].value', '')}\n            onChange={ this.changeState.bind(this, 'mrn')}\n            fullWidth\n            /><br/>\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.endpointId) }\n        </CardActions>\n      </div>\n    );\n  }\n  determineButtons(endpointId){\n    if (endpointId) {\n      return (\n        <div>\n          <RaisedButton id='saveEndpointButton' className='saveEndpointButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id='saveEndpointButton'  className='saveEndpointButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  changeState(field, event, value){\n    let endpointUpdate;\n\n    if(process.env.TRACE) console.log(\"endpointDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new endpoint\n    if (Session.get('endpointUpsert')) {\n      endpointUpdate = Session.get('endpointUpsert');\n    } else {\n      endpointUpdate = defaultEndpoint;\n    }\n\n\n\n    // if there's an existing endpoint, use them\n    if (Session.get('selectedEndpoint')) {\n      endpointUpdate = this.data.endpoint;\n    }\n\n    switch (field) {\n      case \"name\":\n        endpointUpdate.name[0].text = value;\n        break;\n      case \"gender\":\n        endpointUpdate.gender = value.toLowerCase();\n        break;\n      case \"birthDate\":\n        endpointUpdate.birthDate = value;\n        break;\n      case \"photo\":\n        endpointUpdate.photo[0].url = value;\n        break;\n      case \"mrn\":\n        endpointUpdate.identifier[0].value = value;\n        break;\n      default:\n\n    }\n    // endpointUpdate[field] = value;\n    process.env.TRACE && console.log(\"endpointUpdate\", endpointUpdate);\n\n    Session.set('endpointUpsert', endpointUpdate);\n  }\n\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('handleSaveButton()');\n    let endpointUpdate = Session.get('endpointUpsert', endpointUpdate);\n\n\n    if (endpointUpdate.birthDate) {\n      endpointUpdate.birthDate = new Date(endpointUpdate.birthDate);\n    }\n    if(process.env.NODE_ENV === \"test\") console.log(\"endpointUpdate\", endpointUpdate);\n\n    if (Session.get('selectedEndpoint')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating endpoint...\");\n\n      delete endpointUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      endpointUpdate.resourceType = 'Endpoint';\n\n      Endpoints.update({_id: Session.get('selectedEndpoint')}, {$set: endpointUpdate }, function(error, result){\n        if (error) {\n          if(process.env.NODE_ENV === \"test\") console.log(\"Endpoints.insert[error]\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Endpoints\", recordId: Session.get('selectedEndpoint')});\n          // Session.set('endpointUpdate', defaultEndpoint);\n          Session.set('endpointUpsert', false);\n          Session.set('selectedEndpoint', false);\n          Session.set('endpointPageTabIndex', 1);\n          Bert.alert('Endpoint added!', 'success');\n        }\n      });\n    } else {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Creating a new endpoint...\", endpointUpdate);\n\n      Endpoints.insert(endpointUpdate, function(error, result) {\n        if (error) {\n          if(process.env.NODE_ENV === \"test\")  console.log('Endpoints.insert[error]', error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Endpoints\", recordId: result});\n          Session.set('endpointPageTabIndex', 1);\n          Session.set('selectedEndpoint', false);\n          Session.set('endpointUpsert', false);\n          Bert.alert('Endpoint added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('endpointPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    Endpoints.remove({_id: Session.get('selectedEndpoint')}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Endpoints.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Endpoints\", recordId: Session.get('selectedEndpoint')});\n        // Session.set('endpointUpdate', defaultEndpoint);\n        Session.set('endpointUpsert', false);\n        Session.set('endpointPageTabIndex', 1);\n        Session.set('selectedEndpoint', false);\n        Bert.alert('Endpoint removed!', 'success');\n      }\n    });\n  }\n}\n\n\nReactMixin(EndpointDetail.prototype, ReactMeteorData);\nexport default EndpointDetail;","import { CardText, CardTitle, CardActions, Tab, Tabs, RaisedButton } from 'material-ui';\nimport { GlassCard, Glass, VerticalCanvas } from 'meteor/clinical:glass-ui';\n\nimport EndpointDetail from './EndpointDetail';\nimport EndpointTable from './EndpointsTable';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\n\nlet defaultEndpoint = {\n  index: 2,\n  id: '',\n  username: '',\n  email: '',\n  given: '',\n  family: '',\n  gender: ''\n};\nSession.setDefault('endpointFormData', defaultEndpoint);\nSession.setDefault('endpointSearchFilter', '');\n\nexport class EndpointsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('endpointPageTabIndex'),\n      endpoint: defaultEndpoint,\n      endpointSearchFilter: '',\n      currentEndpoint: null\n    };\n\n    if (Session.get('endpointFormData')) {\n      data.endpoint = Session.get('endpointFormData');\n    }\n    if (Session.get('endpointSearchFilter')) {\n      data.endpointSearchFilter = Session.get('endpointSearchFilter');\n    }\n    if (Session.get(\"selectedEndpoint\")) {\n      data.currentEndpoint = Session.get(\"selectedEndpoint\");\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"EndpointsPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('endpointPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedEndpoint', false);\n    Session.set('endpointUpsert', false);\n  }\n  // initSixNodes(){\n  //   Meteor.call('initSixNodes')\n  //   Meteor.setTimeout(function(){\n  //     Session.set('endpointPageTabIndex', 1);\n  //   }, 500)\n  // }\n  // initTwelveNodes(){\n  //   Meteor.call('initTwelveNodes')    \n  //   Meteor.setTimeout(function(){\n  //     Session.set('endpointPageTabIndex', 1);\n  //   }, 500)\n  // }\n  // initEpicNodes(){\n  //   Meteor.call('initEpicNodes')    \n  //   Meteor.setTimeout(function(){      \n  //     Session.set('endpointPageTabIndex', 1);\n  //   }, 500)\n  // }\n  // initMedicareHospitalNodes(){\n  //   Meteor.call('initMedicareHospitalNodes')    \n  //   Meteor.setTimeout(function(){\n  //     Session.set('endpointPageTabIndex', 1);\n  //   }, 500)\n  // }\n  // initChicagoHospitalNodes(){ \n  //   Meteor.call('initChicagoHospitalNodes')       \n  //   Meteor.setTimeout(function(){\n  //     Session.set('endpointPageTabIndex', 1);\n  //   }, 500)\n  // }\n  // initAppleHealthkitNodes(){\n  //   Meteor.call('initAppleHealthkitNodes')    \n  //   Meteor.setTimeout(function(){\n  //     Session.set('endpointPageTabIndex', 1);\n  //   }, 500)\n  // }\n  render() {\n    //console.log('React.version: ' + React.version);\n    var initializeTab;\n    if(this.props.initializeTab){\n      initializeTab = <Tab className=\"newEndpointTab\" label='Initialize' style={this.data.style.tab} onActive={ this.onNewTab } value={1}>\n      <CardText>\n        <RaisedButton primary={true} label=\"6 Nodes\" onClick={this.initSixNodes } style={{width: '256px'}} /><br /><br />\n        <RaisedButton primary={true} label=\"12 Nodes\" onClick={this.initTwelveNodes } style={{width: '256px'}} /><br /><br />\n        <RaisedButton primary={true} label=\"Epic Nodes\" onClick={this.initEpicNodes } style={{width: '256px'}} /><br /><br />\n        <RaisedButton primary={true} label=\"Medicare Hospital Nodes\" onClick={this.initMedicareHospitalNodes } style={{width: '256px'}} /><br /><br />\n        <RaisedButton primary={true} label=\"Chicago Hospital Nodes\" onClick={this.initChicagoHospitalNodes } style={{width: '256px'}} /><br /><br />\n        <RaisedButton primary={true} label=\"Apple HealthKit Nodes\" onClick={this.initAppleHealthkitNodes } style={{width: '256px'}} /><br /><br />\n      </CardText>\n     </Tab>\n    }\n    return (\n      <div id=\"endpointsPage\">\n        <VerticalCanvas>\n          <GlassCard height=\"auto\">\n            <CardTitle\n              title=\"Endpoints\"\n            />\n            <CardText>\n              <Tabs id='endpointsPageTabs' default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={0}>\n                 <Tab className=\"endpointListTab\" label='Endpoints' onActive={this.handleActive} style={this.data.style.tab} value={0}>\n                   <EndpointTable showBarcodes={true} />\n                 </Tab>\n                 { initializeTab }\n             </Tabs>\n\n\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(EndpointsPage.prototype, ReactMeteorData);\nexport default EndpointsPage;","import { FlatButton, Toggle } from 'material-ui';\nimport { HTTP } from 'meteor/http';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\n\n//import { Endpoints } from '../../lib/Endpoints';\nimport { Session } from 'meteor/session';\nimport { has, get } from 'lodash';\nimport { TableNoData } from 'meteor/clinical:glass-ui';\n\nexport class EndpointTable extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        hideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n        },\n        cellHideOnPhone: {\n          visibility: 'visible',\n          display: 'table',\n          paddingTop: '16px'\n        },\n        cell: {\n          paddingTop: '16px'\n        }\n      },\n      selected: [],\n      endpoint: []\n    };\n\n    let query = {};\n    if(this.props.patient){\n      query['patient.display'] = this.props.patient;\n    }\n\n    let options = {};\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      options.limit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n\n    // but can be over-ridden by props being more explicit\n    if(this.props.limit){\n      options.limit = this.props.limit;      \n    }\n\n\n    data.endpoint = Endpoints.find(query, options).map(function(document){\n      let result = {\n        _id: document._id,\n        status: get(document, 'status', ''),\n        name: get(document, 'name', ''),\n        address: get(document, 'address', ''),\n        // start: get(document, 'period.start', ''),\n        // end: get(document, 'period.end', '')\n      };\n      return result;\n    });\n\n    if (Session.get('appWidth') < 768) {\n      data.style.hideOnPhone.visibility = 'hidden';\n      data.style.hideOnPhone.display = 'none';\n      data.style.cellHideOnPhone.visibility = 'hidden';\n      data.style.cellHideOnPhone.display = 'none';\n    } else {\n      data.style.hideOnPhone.visibility = 'visible';\n      data.style.hideOnPhone.display = 'table-cell';\n      data.style.cellHideOnPhone.visibility = 'visible';\n      data.style.cellHideOnPhone.display = 'table-cell';\n    }\n\n    return data;\n  }\n  rowClick(id){\n    Session.set('endpointUpsert', false);\n    Session.set('selectedEndpoint', id);\n    Session.set('subscriptionPageTabIndex', 2);\n  }\n  toggleEndpointStatus(){\n    console.log('toggleEndpointStatus')\n  }\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.data.endpoint.length === 0){\n      // don't try to simplifiy the double negative in this expression\n      // it's handling a boolean property, and also serving up instructions/help/warning\n      // it's klunky to reason through; but it's not hurting anything\n      if(!(this.props.noDataMessage === false)){\n        footer = <TableNoData />\n      }\n    } else {\n      for (var i = 0; i < this.data.endpoint.length; i++) {\n        tableRows.push(\n          <tr key={i} className=\"subscriptionRow\" style={{cursor: \"pointer\"}}>\n  \n            <td className='status' style={this.data.style.cell}>\n              <Toggle onToggle={this.toggleEndpointStatus.bind(this, this.data.endpoint[i]._id) } toggled={get(this, 'data.endpoint[i].status')} />\n            </td>\n            <td className='name' onClick={ this.rowClick.bind('this', this.data.endpoint[i]._id)} style={this.data.style.cell} >{this.data.endpoint[i].name }</td>\n            <td className='address' onClick={ this.rowClick.bind('this', this.data.endpoint[i]._id)} style={this.data.style.cell} >{this.data.endpoint[i].address}</td>\n          </tr>\n        );\n      }  \n    }\n\n    return(\n      <div>\n        <Table id='endpointTable' hover >\n        <thead>\n          <tr>\n            <th className='status'>status</th>\n            <th className='name'>name</th>\n            <th className='address' >address</th>\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n      { footer }\n      </div>\n    );\n  }\n}\n\n\nReactMixin(EndpointTable.prototype, ReactMeteorData);\nexport default EndpointTable;"]}