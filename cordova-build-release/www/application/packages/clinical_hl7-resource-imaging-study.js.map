{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-imaging-study/lib/hl7-resource-imaging-study.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-imaging-study/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-imaging-study/client/ImagingStudiesPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-imaging-study/client/ImagingStudiesTable.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-imaging-study/client/ImagingStudyDetail.js"],"names":["SimpleSchema","module","link","v","Package","console","log","ImagingStudy","BaseModel","extend","prototype","_collection","ImagingStudies","Goals","Mongo","Collection","connection","_transform","document","ImagingStudySchema","type","String","defaultValue","optional","IdentifierSchema","Array","Code","CodingSchema","ReferenceSchema","Date","Number","CodeableConceptSchema","Object","allowedValues","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","ImagingStudiesPage","ImagingStudiesTable","CardText","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","Meteor","Session","ProcedureDetail","React","ReactMeteorData","ReactMixin","getMeteorData","data","style","opacity","get","tab","borderBottom","borderRight","tabIndex","imagingStudiesSearchFilter","currentProcedure","blur","appbar","darkroom","handleTabChange","index","set","onNewTab","render","process","env","NODE_ENV","Component","Card","CardActions","CardMedia","Table","Toggle","selected","imagingStudies","displayToggle","displayDates","props","displayToggles","find","count","fetch","renderTogglesHeader","renderToggles","patientId","renderDateHeader","renderDate","newDate","moment","format","rowClick","id","tableRows","i","length","newRow","identifier","status","code","value","text","push","cursor","bind","_id","performedDateTime","ImagingStudyDetail","Bert","DatePicker","RaisedButton","TextField","browserHistory","PropTypes","defaultImagingStudy","setDefault","imagingStudyId","imagingStudy","showDatePicker","selectedImagingStudy","findOne","renderDatePicker","datePickerValue","changeState","determineButtons","addToContinuityOfCareDoc","imagingStudyUpsert","newImagingStudy","users","update","userId","$addToSet","error","result","handleSaveButton","marginRight","handleDeleteButton","field","event","imagingStudyUpdate","use","resourceType","$set","alert","reason","HipaaLogger","logEvent","eventType","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","propTypes","hasUser","object"],"mappings":"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","file":"/packages/clinical_hl7-resource-imaging-study.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\nif(Package['clinical:autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n  console.log(\"Any protected health information (PHI) stored in this app should be audited.\"); \n  console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");  \n  console.log(\"\");  \n  console.log(\"meteor remove clinical:autopublish\");  \n  console.log(\"\");  \n}\nif(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");  \n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"meteor add clinical:autopublish\");  \n  console.log(\"\");  \n}\n\n\n// create the object using our BaseModel\nImagingStudy = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nImagingStudy.prototype._collection = ImagingStudies;\n\n\nif(typeof Goals === 'undefined'){\n  if(Package['clinical:autopublish']){\n    ImagingStudies = new Mongo.Collection('ImagingStudies');\n  } else if(Package['clinical:desktop-publish']){    \n    ImagingStudies = new Mongo.Collection('ImagingStudies');\n  } else {\n    ImagingStudies = new Mongo.Collection('ImagingStudies', {connection: null});\n  }\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nImagingStudies._transform = function (document) {\n  return new ImagingStudy(document);\n};\n\n\n\nImagingStudySchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"ImagingStudy\"\n  },\n  \"uid\" : {\n    optional: true,\n    type: String\n  },\n  \"accession\" : {\n    optional: true,\n    type: IdentifierSchema\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"availability\" : {\n    optional: true,\n    type: Code\n  },\n  \"modalityList\" : {\n    optional: true,\n    type: Array\n  },\n  \"modalityList.$\" : {\n    optional: true,\n    type: CodingSchema \n  },\n  \"patient\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"started\" : {\n    optional: true,\n    type: Date\n  },\n  \"basedOn\" : {\n    optional: true,\n    type: Array\n  },\n  \"basedOn.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"referrer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"interpreter\" : {\n    optional: true,\n    type: Array\n  },\n  \"interpreter.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"endpoint\" : {\n    optional: true,\n    type: Array\n  },\n  \"endpoint.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"numberOfSeries\" : {\n    optional: true,\n    type: Number\n  },\n  \"numberOfInstances\" : {\n    optional: true,\n    type: Number\n  },\n  \"procedureReference\" : {\n    optional: true,\n    type: Array\n  },\n  \"procedureReference.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"procedureCode\" : {\n    optional: true,\n    type: Array\n  },\n  \"procedureCode.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reason\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"description\" : {\n    optional: true,\n    type: String\n  },\n\n\n  \"series\" : {\n    optional: true,\n    type:  Array\n    },\n  \"series.$\" : {\n    optional: true,\n    type:  Object \n    },\n\n  \"series.$.uid\" : {\n    optional: true,\n    type: String\n  },\n  \"series.$.number\" : {\n    optional: true,\n    type: Number\n  },\n  \"series.$.modality\" : {\n    optional: true,\n    type: CodingSchema\n  },\n  \"series.$.uid\" : {\n    optional: true,\n    type: String\n  },\n  \"series.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"series.$.numberOfInstances\" : {\n    optional: true,\n    type: Number\n  },\n  \"series.$.availability\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['ONLINE', 'OFFLINE', 'NEARLINE', 'UNAVAILBLE']\n  },\n  \"series.$.endpoint\" : {\n    optional: true,\n    type: Array\n  },\n  \"series.$.endpoint.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"series.$.bodySite\" : {\n    optional: true,\n    type: CodingSchema\n  },\n  \"series.$.laterality\" : {\n    optional: true,\n    type: CodingSchema\n  },\n  \"series.$.started\" : {\n    optional: true,\n    type: Date\n  },\n  \"series.$.performer\" : {\n    optional: true,\n    type: Array\n  },\n  \"series.$.performer.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \n\n  \"series.$.instance\" : {\n    optional: true,\n    type:  Array\n    },\n  \"series.$.instance.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"series.$.instance.$.number\" : {\n    optional: true,\n    type: Number\n  },\n  \"series.$.instance.$.uid\" : {\n    optional: true,\n    type: String\n  },\n  \"series.$.instance.$.sopClass\" : {\n    optional: true,\n    type: String\n  },\n  \"series.$.instance.$.title\" : {\n    optional: true,\n    type: String\n  }\n});\n\nBaseSchema.extend(ImagingStudySchema);\nDomainResourceSchema.extend(ImagingStudySchema);\nImagingStudies.attachSchema(ImagingStudySchema);\n\nexport default { ImagingStudy, ImagingStudies, ImagingStudySchema };","\n\nimport ImagingStudiesPage from './client/ImagingStudiesPage';\nimport ImagingStudiesTable from './client/ImagingStudiesTable';\n\nvar DynamicRoutes = [{\n  'name': 'ImagingStudiesPage',\n  'path': '/imaging-studies',\n  'component': ImagingStudiesPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'ImagingStudies',\n  'to': '/imaging-studies',\n  'href': '/imaging-studies'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  ImagingStudiesPage,\n  ImagingStudiesTable\n};\n\n\n","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport ProcedureDetail from './ImagingStudyDetail';\nimport ImagingStudiesTable from './ImagingStudiesTable';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nexport class ImagingStudiesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('imagingStudiesPageTabIndex'),\n      imagingStudiesSearchFilter: Session.get('imagingStudiesSearchFilter'),\n      currentProcedure: Session.get('selectedProcedure')\n    };\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('imagingStudiesPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedProcedure', false);\n    Session.set('imagingStudiesUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In ImagingStudiesPage render');\n    return (\n      <div id='imagingStudiessPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='ImagingStudies' />\n            <CardText>\n              <ImagingStudiesTable />\n              {/* <Tabs id=\"imagingStudiessPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newProcedureTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <ProcedureDetail id='newProcedure' />\n               </Tab>\n               <Tab className=\"imagingStudiesListTab\" label='ImagingStudies' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <ImagingStudiesTable />\n               </Tab>\n               <Tab className=\"imagingStudiesDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <ProcedureDetail \n                  id='imagingStudiesDetails'\n                  showDatePicker={true} \n                 />\n               </Tab> \n             </Tabs>*/}\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(ImagingStudiesPage.prototype, ReactMeteorData);\n\nexport default ImagingStudiesPage;","import { Card, CardActions, CardMedia, CardText, CardTitle } from 'material-ui/Card';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport Toggle from 'material-ui/Toggle';\n\nexport default class ImagingStudiesTable extends React.Component {\n\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      imagingStudies: [],\n      displayToggle: false,\n      displayDates: false\n    }\n\n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n    if(this.props.data){\n      data.imagingStudies = this.props.data;\n    } else {\n      if(ImagingStudies.find().count() > 0){\n        data.imagingStudies = ImagingStudies.find().fetch();\n      }  \n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImagingStudiesTable[data]\", data);\n    return data;\n  };\n\n  renderTogglesHeader(displayToggle){\n    if (displayToggle) {\n      return (\n        <th className=\"toggle\">toggle</th>\n      );\n    }\n  }\n  renderToggles(displayToggle, patientId ){\n    if (displayToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n              //style={styles.toggle}\n            />\n          </td>\n      );\n    }\n  }\n  renderDateHeader(displayDates){\n    if (displayDates) {\n      return (\n        <th className='date'>date</th>\n      );\n    }\n  }\n  renderDate(displayDates, newDate ){\n    if (displayDates) {\n      return (\n        <td className='date'>{ moment(newDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n  rowClick(id){\n    Session.set('imagingStudiesUpsert', false);\n    Session.set('selectedProcedure', id);\n    Session.set('procedurePageTabIndex', 2);\n  };\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.imagingStudies.length; i++) {\n      var newRow = {\n        identifier: '',\n        status: '',\n        code: ''        \n      };\n      if (this.data.imagingStudies[i]){\n        if(this.data.imagingStudies[i].identifier){\n          newRow.identifier = this.data.imagingStudies[i].identifier[0].value;\n        }\n        if(this.data.imagingStudies[i].code && this.data.imagingStudies[i].code.text){\n          newRow.code = this.data.imagingStudies[i].code.text;\n        }     \n        if(this.data.imagingStudies[i].status){\n          newRow.status = this.data.imagingStudies[i].status;\n        }\n      }\n\n      tableRows.push(\n        <tr key={i} className=\"procedureRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.imagingStudies[i]._id)} >\n          { this.renderToggles(this.data.displayToggle, this.data.imagingStudies[i]) }\n          <td className='identifier'>{ newRow.identifier }</td>\n          <td className='code'>{ newRow.code }</td>\n          <td className='status'>{ newRow.status }</td>\n          { this.renderDate(this.data.displayDates, this.data.imagingStudies[i].performedDateTime) }\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='imagingStudiesTable' hover >\n        <thead>\n          <tr>\n            { this.renderTogglesHeader(this.data.displayToggle) }\n            <th className='identifier'>identifier</th>\n            <th className='code'>code</th>\n            <th className='status'>status</th>\n            { this.renderDateHeader(this.data.displayDates) }\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(ImagingStudiesTable.prototype, ReactMeteorData);","import { CardActions, CardText } from 'material-ui/Card';\n\nimport { Bert } from 'meteor/clinical:alert';\nimport DatePicker from 'material-ui/DatePicker';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport { browserHistory } from 'react-router';\nimport { get } from 'lodash';\nimport PropTypes from 'prop-types';\n\nlet defaultImagingStudy = {\n  'resourceType': 'ImagingStudy',\n  'status': 'unknown',\n  'identifier': [{\n    'use': 'official',\n    'value': ''\n  }],\n  'code': {\n    'text': ''\n  }\n};\n\n\n\nSession.setDefault('imagingStudyUpsert', false);\nSession.setDefault('selectedImagingStudy', false);\n\n\nexport default class ImagingStudyDetail extends React.Component {\n  getMeteorData() {\n    let data = {\n      imagingStudyId: false,\n      imagingStudy: defaultImagingStudy,\n      showDatePicker: false\n    };\n\n    if(this.props.showDatePicker){\n      data.showDatePicker = this.props.showDatePicker\n    }\n\n    if (Session.get('imagingStudyUpsert')) {\n      data.imagingStudy = Session.get('imagingStudyUpsert');\n    } else {\n      // if (Session.get('selectedImagingStudy')) {\n      //   data.imagingStudyId = Session.get('selectedImagingStudy');\n        console.log(\"selectedImagingStudy\", Session.get('selectedImagingStudy'));\n\n        let selectedImagingStudy = ImagingStudies.findOne({_id: Session.get('selectedImagingStudy')});\n        console.log(\"selectedImagingStudy\", selectedImagingStudy);\n\n        if (selectedImagingStudy) {\n          data.imagingStudy = selectedImagingStudy;\n        }\n      // } else {\n      //   data.imagingStudy = defaultImagingStudy;\n      // }\n    }\n\n    if (Session.get('selectedImagingStudy')) {\n      data.imagingStudyId = Session.get('selectedImagingStudy');\n    }      \n\n    return data;\n  }\n\n  renderDatePicker(showDatePicker, datePickerValue){\n    if (showDatePicker) {\n      return (\n        <DatePicker \n          name='performedDateTime'\n          hintText=\"Performed Date/Time\" \n          container=\"inline\" \n          mode=\"landscape\"\n          value={ datePickerValue ? datePickerValue : ''}    \n          onChange={ this.changeState.bind(this, 'performedDateTime')}      \n          />\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} className=\"imagingStudyDetail\">\n        <CardText>\n        <TextField\n            id='identifierInput'\n            ref='identifier'\n            name='identifier'\n            floatingLabelText='Identifier'\n            value={ get(this, 'data.imagingStudy.identifier[0].value') ? get(this, 'data.imagingStudy.identifier[0].value') : ''}\n            onChange={ this.changeState.bind(this, 'identifier')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='codeInput'\n            ref='code'\n            name='code'\n            floatingLabelText='Code'\n            value={this.data.imagingStudy.code ? this.data.imagingStudy.code.text : ''}\n            onChange={ this.changeState.bind(this, 'code')}\n            fullWidth\n            /><br/>\n          <TextField\n            id='statusInput'\n            ref='status'\n            name='status'\n            floatingLabelText='Status'\n            value={this.data.imagingStudy.status ? this.data.imagingStudy.status : ''}\n            onChange={ this.changeState.bind(this, 'status')}\n            fullWidth\n            /><br/>\n\n\n            <br/>\n          { this.renderDatePicker(this.data.showDatePicker, get(this, 'data.imagingStudy.performedDateTime') ) }\n          <br/>\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.imagingStudyId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n\n  addToContinuityOfCareDoc(){\n    console.log('addToContinuityOfCareDoc', Session.get('imagingStudyUpsert'));\n\n    var imagingStudyUpsert = Session.get('imagingStudyUpsert');\n\n    var newImagingStudy = {\n      'resourceType': 'ImagingStudy',\n      'status': imagingStudyUpsert.status,\n      'identifier': imagingStudyUpsert.identifier,\n      'code': {\n        'text': imagingStudyUpsert.code.text\n      },\n      'performedDateTime': imagingStudyUpsert.performedDateTime  \n    }\n\n    console.log('Lets write this to the profile... ', newImagingStudy);\n\n    Meteor.users.update({_id: Meteor.userId()}, {$addToSet: {\n      'profile.continuityOfCare.imagingStudys': newImagingStudy\n    }}, function(error, result){\n      if(error){\n        console.log('error', error);\n      }\n      if(result){\n        browserHistory.push('/continuity-of-care');\n      }\n    });\n  }\n  determineButtons(imagingStudyId){\n    if (imagingStudyId) {\n      return (\n        <div>\n          <RaisedButton id=\"saveImagingStudyButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteImagingStudyButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n\n          <RaisedButton id=\"addImagingStudyToContinuityCareDoc\" label=\"Add to CCD\" primary={true} onClick={this.addToContinuityOfCareDoc.bind(this)} style={{float: 'right'}} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveImagingStudyButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n\n  // this could be a mixin\n  changeState(field, event, value){\n    let imagingStudyUpdate;\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImagingStudyDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new imagingStudy\n    if (Session.get('imagingStudyUpsert')) {\n      imagingStudyUpdate = Session.get('imagingStudyUpsert');\n    } else {\n      imagingStudyUpdate = defaultImagingStudy;\n    }\n\n\n\n    // if there's an existing imagingStudy, use them\n    if (Session.get('selectedImagingStudy')) {\n      imagingStudyUpdate = this.data.imagingStudy;\n    }\n\n    switch (field) {\n      case \"identifier\":\n        imagingStudyUpdate.identifier = [{\n          use: 'official',\n          value: value\n        }];\n        break;\n      case \"code\":\n        imagingStudyUpdate.code.text = value;\n        break;\n      case \"status\":\n        imagingStudyUpdate.status = value;\n        break;\n      case \"performedDateTime\":\n        imagingStudyUpdate.performedDateTime = value;\n        break;\n\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"imagingStudyUpdate\", imagingStudyUpdate);\n    Session.set('imagingStudyUpsert', imagingStudyUpdate);\n  }\n\n  handleSaveButton(){\n    let imagingStudyUpdate = Session.get('imagingStudyUpsert', imagingStudyUpdate);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"imagingStudyUpdate\", imagingStudyUpdate);\n\n\n    if (Session.get('selectedImagingStudy')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating imagingStudy...\");\n      delete imagingStudyUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      imagingStudyUpdate.resourceType = 'ImagingStudy';\n\n      ImagingStudies.update(\n        {_id: Session.get('selectedImagingStudy')}, {$set: imagingStudyUpdate }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"ImagingStudies\", recordId: Session.get('selectedImagingStudy')});\n            Session.set('imagingStudyPageTabIndex', 1);\n            Session.set('selectedImagingStudy', false);\n            Session.set('imagingStudyUpsert', false);\n            Bert.alert('ImagingStudy updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new imagingStudy\", imagingStudyUpdate);\n\n      ImagingStudies.insert(imagingStudyUpdate, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"ImagingStudies\", recordId: result});\n          Session.set('imagingStudyPageTabIndex', 1);\n          Session.set('selectedImagingStudy', false);\n          Session.set('imagingStudyUpsert', false);\n          Bert.alert('ImagingStudy added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('imagingStudyPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    ImagingStudy.remove({_id: Session.get('selectedImagingStudy')}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"ImagingStudies\", recordId: Session.get('selectedImagingStudy')});\n        Session.set('imagingStudyPageTabIndex', 1);\n        Session.set('selectedImagingStudy', false);\n        Session.set('imagingStudyUpsert', false);\n        Bert.alert('ImagingStudy removed!', 'success');\n      }\n    });\n  }\n}\n\n\nImagingStudyDetail.propTypes = {\n  hasUser: PropTypes.object\n};\nReactMixin(ImagingStudyDetail.prototype, ReactMeteorData);"]}