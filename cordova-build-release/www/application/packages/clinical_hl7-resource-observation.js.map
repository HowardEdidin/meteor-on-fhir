{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/lib/Observations.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/server/methods.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/client/HealthLog.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/client/ObservationDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/client/ObservationsPage.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/client/ObservationsTable.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-observation/client/VitalMeasurements.jsx"],"names":["SimpleSchema","module","link","v","Observation","BaseModel","extend","prototype","_collection","Observations","Package","Mongo","Collection","connection","_transform","document","ObservationDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","Code","allowedValues","CodeableConceptSchema","ReferenceSchema","Date","PeriodSchema","QuantitySchema","RangeSchema","RatioSchema","SampledDataSchema","AttachmentSchema","Object","ObservationStu3","ObservationSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","Meteor","methods","createObservation","observationObject","check","process","env","NODE_ENV","console","log","insert","error","result","initializeObservation","observationValue","deviceId","Number","find","count","defaultObservation","resourceType","status","category","text","effectiveDateTime","subject","display","reference","performer","device","valueQuantity","value","unit","system","userId","user","users","findOne","_id","profile","name","call","removeObservationById","observationId","remove","dropObservations","forEach","observation","id","err","export","SidebarElements","DynamicRoutes","ObservationsPage","ObservationsTable","ObservationDetail","VitalMeasurements","HealthLog","Healthlog","React","ReactMeteorData","ReactMixin","GlassCard","VerticalCanvas","DynamicSpacer","PropTypes","getMeteorData","data","style","state","isLoggedIn","renderAuthenticatedUserControls","props","routeParams","render","Component","propTypes","children","any","CardActions","CardText","RaisedButton","DatePicker","TextField","Glass","Row","Col","get","set","valueString","form","code","quantity","deviceDisplay","subjectDisplay","subjectReference","loincCode","loincCodeText","loincCodeDisplay","dehydrateFhirResource","formData","assign","comparator","shouldComponentUpdate","nextProps","shouldUpdate","setState","displayDatePicker","renderDatePicker","moment","setHint","changeState","bind","showHints","patientInputs","showPatientInputs","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateObservation","observationData","event","self","onUpsert","handleCancelButton","onCancel","onDelete","string","fhirVersion","oneOfType","bool","object","onInsert","func","onRemove","CardTitle","Tab","Tabs","FullPageCanvas","Session","setDefault","opacity","tab","borderBottom","borderRight","tabIndex","observationSearchFilter","selectedObservationId","paginationLimit","selectedObservation","selected","observations","fetch","blur","appbar","darkroom","handleTabChange","index","handleActive","onNewTab","onCancelUpsertObservation","context","onDeleteObservation","Bert","alert","reason","HipaaLogger","logEvent","eventType","userName","fullName","collectionName","recordId","onUpsertObservation","fhirObservationData","observationValidator","newContext","validate","isValid","validationErrors","update","$set","onTableRowClick","onTableCellClick","tableActionButtonClick","httpEndpoint","HTTP","post","onUpdate","pagnationLimit","Checkbox","Table","_","FaTags","FaCode","FaPuzzlePiece","FaLock","GoTrashcan","styles","hideOnPhone","visibility","cellHideOnPhone","paddingTop","maxWidth","cell","flattenObservation","meta","subjectId","createdBy","issued","format","length","push","query","hideEnteredInError","$nin","map","handleChange","row","key","source","displayOnMobile","width","includes","window","navigator","platform","handleSelect","getDate","noChange","rowClick","renderActionIconsHeader","hideActionIcons","renderActionIcons","iconStyle","marginLeft","marginTop","fontSize","minWidth","onMetaClick","removeRecord","onRemoveRecord","onActionButtonClick","cellClick","onCellClick","patient","renderBarcode","hideBarcodes","renderBarcodeHeader","renderSubject","hideSubjects","renderSubjectHeader","renderDevice","hideDevices","renderDeviceHeader","renderValue","hideValue","renderValueHeader","renderCodeHeader","hideCode","renderCode","multiline","fontWeight","renderCategoryHeader","renderCategory","renderValueString","renderValueStringHeader","renderComparator","hideComparator","renderComparatorHeader","renderToggleHeader","hideCheckboxes","renderToggle","tableRows","footer","appWidth","observationsToRender","i","barcodes","array","number","hideIdentifier","enteredInError","onRowClick","actionButtonLabel","Grid","ListGroupItem","FormControl","Button","browserHistory","IoIosHeartEmpty","IoMdPulse","FiThermometer","FaStethoscope","FontAwesome","require","pulse","temperature","respiration","bloodPressure","notes","borderTop","borderLeft","onActive","spoonCounter","changePost","color","minHeight","position","top","handleInsertObservations","lastUpdated","pulseObservation","respirationObservation","temperatureObservation","bloodPressureObservation","vitalsForm"],"mappings":"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","file":"/packages/clinical_hl7-resource-observation.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nObservation = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nObservation.prototype._collection = Observations;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Observations === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Observations = new Mongo.Collection('Observations');\n  } else if(Package['clinical:desktop-publish']){    \n    Observations = new Mongo.Collection('Observations');\n  } else {\n    Observations = new Mongo.Collection('Observations', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nObservations._transform = function (document) {\n  return new Observation(document);\n};\n\n\n\n\nObservationDstu2 = new SimpleSchema({\n  'resourceType' : {\n    type: String,\n    defaultValue: 'Observation'\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  'status' : {\n    type: Code,\n    allowedValues: ['registered', 'preliminary', 'final', 'amended', 'cancelled', 'entered-in-error', 'unknown']\n  }, // R!  registered | partial | final | corrected | appended | cancelled | entered-in-error\n  'category' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Service category\n  'code' : {\n    type: CodeableConceptSchema\n  }, // R!  Name/Code for this diagnostic report\n  'subject' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // R!  The subject of the report, usually, but not always, the patient\n  'encounter' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Health care event when test ordered\n  'effectiveDateTime' : {\n    optional: true,\n    type: Date\n  },\n  'effectivePeriod' : {\n    optional: true,\n    type: PeriodSchema\n  },\n  'issued' : {\n    optional: true,\n    type: Date\n  }, // R!  DateTime this version was released\n  'performer' : {\n    optional: true,\n    type: Array\n  }, // R!  Responsible Diagnostic Service\n  'performer.$' : {\n    optional: true,\n    type: ReferenceSchema \n  }, // R!  Responsible Diagnostic Service\n\n  'valueQuantity' : {\n    optional: true,\n    type: QuantitySchema\n  },\n  'valueCodeableConcept' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'valueString' : {\n    optional: true,\n    type: String\n  },\n  'valueRange' : {\n    optional: true,\n    type: RangeSchema\n  },\n  'valueRatio' : {\n    optional: true,\n    type: RatioSchema\n  },\n  'valueSampledData' : {\n    optional: true,\n    type: SampledDataSchema\n  },\n  'valueAttachment' : {\n    optional: true,\n    type: AttachmentSchema\n  },\n  'valueTime' : {\n    optional: true,\n    type: Date\n  },\n  'valueDateTime' : {\n    optional: true,\n    type: Date\n  },\n  'valuePeriod' : {\n    optional: true,\n    type: PeriodSchema\n  },\n  'dataAbsentReason' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // C? Why the result is missing\n  'interpretation' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // High, low, normal, etc.\n  'comments' : {\n    optional: true,\n    type: String\n  }, // Comments about result\n  'bodySite' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Observed body part\n  'method' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // How it was done\n  'specimen' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Specimen used for this observation\n  'device' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Measurement) Device\n\n\n  \"referenceRange\" : {\n    optional: true,\n    type:  Array\n    },\n  \"referenceRange.$\" : {\n    optional: true,\n    type:  Object \n    },\n  'referenceRange.$.low' : {\n    optional: true,\n    type: QuantitySchema\n  }, // C? Low Range, if relevant\n  'referenceRange.$.high' : {\n    optional: true,\n    type: QuantitySchema\n  }, // C? High Range, if relevant\n  'referenceRange.$.meaning' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Indicates the meaning/use of this range of this range\n  'referenceRange.$.age' : {\n    optional: true,\n    type: RangeSchema\n  }, // Applicable age range, if relevant\n  'referenceRange.$.text' : {\n    optional: true,\n    type: String\n  }, // Text based reference range in an observation\n\n  \"related\" : {\n    optional: true,\n    type:  Array\n    },\n  \"related.$\" : {\n    optional: true,\n    type:  Object \n    },\n  'related.$.type' : {\n    optional: true,\n    type: Code\n  }, // has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by\n  'related.$.target' : {\n    type: ReferenceSchema\n  }, // R!  Resource that is related to this one\n\n\n  \"component\" : {\n    optional: true,\n    type:  Array\n    },\n  \"component.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  'component.$.code' : {\n    type: CodeableConceptSchema\n  }, // C? R!  Type of component observation (code / type)\n  'component.$.valueQuantity' : {\n    optional: true,\n    type: QuantitySchema\n  },\n  'component.$.valueCodeableConcept' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'component.$.valueString' : {\n    optional: true,\n    type: String\n  },\n  'component.$.valueRange' : {\n    optional: true,\n    type: RangeSchema\n  },\n  'component.$.valueRatio' : {\n    optional: true,\n    type: RatioSchema\n  },\n  'component.$.valueSampledData' : {\n    optional: true,\n    type: SampledDataSchema\n  },\n  'component.$.valueAttachment' : {\n    optional: true,\n    type: AttachmentSchema\n  },\n  'component.$.valueTime' : {\n    optional: true,\n    type: Date\n  },\n  'component.$.valueDateTime' : {\n    optional: true,\n    type: Date\n  },\n  'component.$.valuePeriod' : {\n    optional: true,\n    type: PeriodSchema\n  },\n  'component.$.dataAbsentReason' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }\n\n});\n\n\n\n\nObservationStu3 = new SimpleSchema({\n  'resourceType' : {\n    type: String,\n    defaultValue: 'Observation'\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  'basedOn' : {\n    optional: true,\n    type: ReferenceSchema\n  }, \n  'status' : {\n    type: Code,\n    allowedValues: ['registered', 'preliminary', 'final', 'amended', 'corrected', 'cancelled', 'entered-in-error', 'unknown'],\n    defaultValue: 'preliminary'\n  }, // R!  registered | partial | final | corrected | appended | cancelled | entered-in-error\n  'category' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Service category\n  'code' : {\n    type: CodeableConceptSchema\n  }, // R!  Name/Code for this diagnostic report\n  'subject' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // R!  The subject of the report, usually, but not always, the patient\n  'context' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Health care event when test ordered\n  'effectiveDateTime' : {\n    optional: true,\n    type: Date\n  },\n  'effectivePeriod' : {\n    optional: true,\n    type: PeriodSchema\n  },\n  'issued' : {\n    optional: true,\n    type: Date\n  }, // R!  DateTime this version was released\n  'performer' : {\n    optional: true,\n    type: Array\n  }, // R!  Responsible Diagnostic Service\n  'performer.$' : {\n    optional: true,\n    type: ReferenceSchema \n  }, // R!  Responsible Diagnostic Service\n\n  'valueQuantity' : {\n    optional: true,\n    type: QuantitySchema\n  },\n  'valueCodeableConcept' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'valueString' : {\n    optional: true,\n    type: String\n  },\n  'valueRange' : {\n    optional: true,\n    type: RangeSchema\n  },\n  'valueRatio' : {\n    optional: true,\n    type: RatioSchema\n  },\n  'valueSampledData' : {\n    optional: true,\n    type: SampledDataSchema\n  },\n  'valueAttachment' : {\n    optional: true,\n    type: AttachmentSchema\n  },\n  'valueTime' : {\n    optional: true,\n    type: Date\n  },\n  'valueDateTime' : {\n    optional: true,\n    type: Date\n  },\n  'valuePeriod' : {\n    optional: true,\n    type: PeriodSchema\n  },\n  'dataAbsentReason' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // C? Why the result is missing\n  'interpretation' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // High, low, normal, etc.\n  'comments' : {\n    optional: true,\n    type: String\n  }, // Comments about result\n  'bodySite' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Observed body part\n  'method' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // How it was done\n  'specimen' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Specimen used for this observation\n  'device' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Measurement) Device\n\n\n  \"referenceRange\" : {\n    optional: true,\n    type:  Array\n    },\n  \"referenceRange.$\" : {\n    optional: true,\n    type:  Object \n    },\n  'referenceRange.$.low' : {\n    optional: true,\n    type: QuantitySchema\n  }, // C? Low Range, if relevant\n  'referenceRange.$.high' : {\n    optional: true,\n    type: QuantitySchema\n  }, // C? High Range, if relevant\n  'referenceRange.$.type' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Indicates the meaning/use of this range of this range\n  'referenceRange.$.appliesTo' : {\n    optional: true,\n    type: Array\n  }, // Indicates the meaning/use of this range of this range\n  'referenceRange.$.appliesTo.$' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Indicates the meaning/use of this range of this range\n  'referenceRange.$.age' : {\n    optional: true,\n    type: RangeSchema\n  }, // Applicable age range, if relevant\n  'referenceRange.$.text' : {\n    optional: true,\n    type: String\n  }, // Text based reference range in an observation\n\n  \"related\" : {\n    optional: true,\n    type:  Array\n    },\n  \"related.$\" : {\n    optional: true,\n    type:  Object \n    },\n  'related.$.type' : {\n    optional: true,\n    type: Code\n  }, // has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by\n  'related.$.target' : {\n    type: ReferenceSchema\n  }, // R!  Resource that is related to this one\n\n\n  \"component\" : {\n    optional: true,\n    type:  Array\n    },\n  \"component.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  'component.$.code' : {\n    type: CodeableConceptSchema\n  }, // C? R!  Type of component observation (code / type)\n  'component.$.valueQuantity' : {\n    optional: true,\n    type: QuantitySchema\n  },\n  'component.$.valueCodeableConcept' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'component.$.valueString' : {\n    optional: true,\n    type: String\n  },\n  'component.$.valueRange' : {\n    optional: true,\n    type: RangeSchema\n  },\n  'component.$.valueRatio' : {\n    optional: true,\n    type: RatioSchema\n  },\n  'component.$.valueSampledData' : {\n    optional: true,\n    type: SampledDataSchema\n  },\n  'component.$.valueAttachment' : {\n    optional: true,\n    type: AttachmentSchema\n  },\n  'component.$.valueTime' : {\n    optional: true,\n    type: Date\n  },\n  'component.$.valueDateTime' : {\n    optional: true,\n    type: Date\n  },\n  'component.$.valuePeriod' : {\n    optional: true,\n    type: PeriodSchema\n  },\n  'component.$.dataAbsentReason' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'component.$.interpretation' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'component.$.referenceRange' : {\n    optional: true,\n    type: Array\n  },\n  'component.$.referenceRange.$' : {\n    optional: true,\n    type: Object\n  }\n});\n\n\n\nObservationSchema = ObservationDstu2;\n\n\nBaseSchema.extend(ObservationSchema);\nDomainResourceSchema.extend(ObservationSchema);\nObservations.attachSchema(ObservationSchema);\n\nexport default { Observation, Observations, ObservationSchema, ObservationDstu2, ObservationStu3 };","\nMeteor.methods({\n  createObservation:function(observationObject){\n    check(observationObject, Object);\n\n    if (process.env.NODE_ENV === 'test') {\n      console.log('Creating Observation...');\n      Observations.insert(observationObject, function(error, result){\n        if (error) {\n          console.log(error);\n        }\n        if (result) {\n          console.log('Observation created: ' + result);\n        }\n      });\n    } else {\n      console.log('This command can only be run in a test environment.');\n      console.log('Try setting NODE_ENV=test');\n    }\n  },\n  initializeObservation:function(observationValue, deviceId){\n    check(observationValue, Number);\n    check(deviceId, String);\n\n    if (Observations.find().count() === 0) {\n      console.log('No records found in Observations collection.  Lets create some...');\n\n      var defaultObservation = {\n        resourceType: 'Observation',\n        status: 'final',\n        category: {\n          text: 'Weight'\n        },\n        effectiveDateTime: new Date(),\n        subject: {\n          display: 'Jane Doe',\n          reference: ''\n        },\n        performer: {\n          display: '',\n          reference: ''\n        },\n        device: {\n          display: 'Withings Weight Scale',\n          reference: deviceId\n        },\n        valueQuantity: {\n          value: observationValue,\n          unit: 'kg',\n          system: 'http://unitsofmeasure.org'\n        }\n      };\n\n      if (this.userId) {\n        let user = Meteor.users.findOne({_id: this.userId});\n        if (user && user.profile && user.profile.name && user.profile.name.text) {\n\n          //   display: Patients.findByUserId(this.userId).fullName(),\n          //   reference: 'Patients/' + Patients.findByUserId(this.userId).patientId()\n\n          defaultObservation.subject.display = user.profile.name.text;\n          defaultObservation.subject.reference = 'Meteor.users/' + this.userId;\n\n          defaultObservation.performer.display = user.profile.name.text;\n          defaultObservation.performer.reference = 'Meteor.users/' + this.userId;\n        }\n      }\n\n      Meteor.call('createObservation', defaultObservation);\n    } else {\n      console.log('Observations already exist.  Skipping.');\n    }\n  },\n  removeObservationById: function(observationId){\n    check(observationId, String);\n\n    console.log('-----------------------------------------');\n    console.log('Removing observation... ');\n\n    return Observations.remove({_id: observationId})\n  },\n  dropObservations: function(){\n    // if (process.env.NODE_ENV === 'test') {\n    console.log('-----------------------------------------');\n    console.log('Dropping ' + Observations.find().count() + ' observations...');\n\n    Observations.find().forEach(function(observation){\n      console.log('observation', observation.id)\n      Observations.remove({id: observation.id}, function(err){\n        if(err) console.log(err)\n      });\n    });\n\n    // } else {\n    //   console.log('This command can only be run in a test environment.');\n    //   console.log('Try setting NODE_ENV=test');\n    // }\n  }\n\n});\n  ","\n\nimport ObservationsPage from './client/ObservationsPage';\nimport ObservationsTable from './client/ObservationsTable';\nimport ObservationDetail from './client/ObservationDetail';\nimport VitalMeasurements from './client/VitalMeasurements';\nimport HealthLog from './client/HealthLog';\n\nvar DynamicRoutes = [{\n  'name': 'ObservationsPageRoute',\n  'path': '/observations',\n  'component': ObservationsPage,\n  'requireAuth': true\n}, {\n  'name': 'HealthLog',\n  'path': '/vitals-tracking',\n  'component': HealthLog,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Observations',\n  'to': '/observations',\n  'href': '/observations'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  ObservationsPage,\n  ObservationsTable,\n  ObservationDetail,\n  VitalMeasurements,\n\n  HealthLog\n};\n\n\n\n","import { Meteor } from 'meteor/meteor';\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nimport { VitalMeasurements } from './VitalMeasurements';\nimport { GlassCard, VerticalCanvas, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport PropTypes from 'prop-types';\n\nexport class Healthlog extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {},\n      state: {\n        isLoggedIn: false\n      }\n    };\n\n    if (Meteor.user()) {\n      data.state.isLoggedIn = true;\n    }\n\n    return data;\n  }\n\n  renderAuthenticatedUserControls(isLoggedIn) {\n\n    // user should be able to see the addPost component if they're logged in and looking at their\n    // own profile; otherwise,\n    if (isLoggedIn) {\n      if (!this.props.routeParams.userId) {\n        return (\n          <div>\n            <VitalMeasurements />\n          </div>\n        );\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"weblogPage\">\n        <VerticalCanvas>\n          { this.renderAuthenticatedUserControls(this.data.state.isLoggedIn) }\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\n\nHealthlog.propTypes = {\n  children: PropTypes.any\n};\nReactMixin(Healthlog.prototype, ReactMeteorData);\nexport default Healthlog;","import { CardActions, CardText } from 'material-ui/Card';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport DatePicker from 'material-ui/DatePicker';\nimport TextField from 'material-ui/TextField';\n\nimport { GlassCard, VerticalCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\nimport { Row, Col } from 'react-bootstrap';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport PropTypes from 'prop-types';\n\nimport { Meteor } from 'meteor/meteor';\n\nimport { get, set } from 'lodash';\n// import { setFlagsFromString } from 'v8';\n\n\n\nexport class ObservationDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      observationId: false,\n      observation: {\n        resourceType: 'Observation',\n        status: 'preliminary',\n        category: {\n          text: ''\n        },\n        effectiveDateTime: '',\n        subject: {\n          display: '',\n          reference: ''\n        },\n        performer: [],\n        device: {\n          display: '',\n          reference: ''\n        },\n        valueQuantity: {\n          value: '',\n          unit: '',\n          system: 'http://unitsofmeasure.org'\n        },\n        valueString: ''\n      },\n      form: {\n        category: '',\n        code: '',\n        value: '',\n        quantity: '',\n        unit: '',\n        deviceDisplay: '',\n        subjectDisplay: '',\n        subjectReference: '',\n        effectiveDateTime: '',\n        loincCode: '',\n        loincCodeText: '',\n        loincCodeDisplay: '',\n        status: ''\n      }\n    }\n  }\n  dehydrateFhirResource(observation) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.category = get(observation, 'type.text')\n    formData.code = get(observation, 'code.text')\n    formData.value = get(observation, 'valueString')\n    formData.comparator = get(observation, 'valueQuantity.comparator')\n    formData.quantity = get(observation, 'valueQuantity.value')\n    formData.unit = get(observation, 'valueQuantity.unit')\n    formData.deviceDisplay = get(observation, 'device.display')\n    formData.subjectDisplay = get(observation, 'subject.display')\n    formData.subjectReference = get(observation, 'subject.reference')\n    formData.effectiveDateTime = get(observation, 'effectiveDateTime')\n    formData.status = get(observation, 'status')\n\n    formData.loincCode = get(observation, 'code.codeable[0].code')\n    formData.loincCodeText = get(observation, 'code.text')\n    formData.loincCodeDisplay = get(observation, 'code.codeable[0].display')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('ObservationDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // received an observation from the table; okay lets update again\n    if(nextProps.observationId !== this.state.observationId){\n\n      if(nextProps.observation){\n        this.setState({observation: nextProps.observation})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.observation)})       \n      }\n\n      this.setState({observationId: nextProps.observationId})      \n      shouldUpdate = true;\n    }\n\n    // both false; don't take any more updates\n    if(nextProps.observation === this.state.observation){\n      shouldUpdate = false;\n    }\n    \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      observationId: this.props.observationId,\n      observation: false,\n      form: this.state.form,\n      displayDatePicker: false\n    };\n\n    if(this.props.displayDatePicker){\n      data.displayDatePicker = this.props.displayDatePicker\n    }\n    \n    if(this.props.observation){\n      data.observation = this.props.observation;\n      data.form = this.dehydrateFhirResource(this.props.observation);\n    }\n\n    //console.log(\"ObservationDetail[data]\", data);\n    return data;\n  }\n\n  renderDatePicker(displayDatePicker, effectiveDateTime){\n    console.log('renderDatePicker', displayDatePicker, effectiveDateTime)\n    if(typeof effectiveDateTime === \"string\"){\n      effectiveDateTime = moment(effectiveDateTime);\n    }\n    if (displayDatePicker) {\n      return (\n        <DatePicker \n          name='effectiveDateTime'\n          hintText={ this.setHint(\"Date of Administration\") } \n          container=\"inline\" \n          mode=\"landscape\"\n          value={ effectiveDateTime ? effectiveDateTime : null}    \n          onChange={ this.changeState.bind(this, 'effectiveDateTime')}      \n          fullWidth\n        />\n      );\n    }\n  }\n  setHint(text){\n    if(this.props.showHints !== false){\n      return text;\n    } else {\n      return '';\n    }\n  }\n  render() {\n    console.log('ObservationDetail.render()', this.state)\n    //let formData = this.state.form;\n\n    var patientInputs;\n    if(this.props.showPatientInputs !== false){\n      patientInputs = <Row>\n        <Col md={6}>\n          <TextField\n            id='subjectDisplayInput'                \n            name='subjectDisplay'\n            floatingLabelText='Subject Name'\n            // TimelineSidescrollPage dialog popup\n            // Getting the following when passing an observation in via props\n            // A component is changing a controlled input of type text to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. \n            value={ get(this, 'data.form.subjectDisplay') }\n            onChange={ this.changeState.bind(this, 'subjectDisplay')}\n            hintText={ this.setHint('Jane Doe') }\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n        </Col>\n        <Col md={3}>\n          <TextField\n            id='subjectIdInput'                \n            name='subjectReference'\n            floatingLabelText='Subject ID'\n            value={ get(this, 'data.form.subjectReference') }\n            onChange={ this.changeState.bind(this, 'subjectReference')}\n            hintText={ this.setHint('Patient/12345') }\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n        </Col>\n        <Col md={3}>\n          <TextField\n            id='categoryTextInput'                \n            name='category'\n            floatingLabelText='Category'\n            value={ get(this, 'data.form.category') }\n            onChange={ this.changeState.bind(this, 'category')}\n            hintText={ this.setHint('Vital Signs') }\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n        </Col>\n      </Row>\n    }\n\n    return (\n      <div id={this.props.id} className=\"observationDetail\">\n        <CardText>\n          { patientInputs }\n          <Row>\n          <Col md={6}>\n              <TextField\n                id='loincCodeTextInput'                \n                name='loincCodeText'\n                floatingLabelText='LOINC Code Text'\n                value={ get(this, 'data.form.loincCodeText') }\n                onChange={ this.changeState.bind(this, 'loincCodeText')}\n                hintText={ this.setHint('HbA1c') }\n                floatingLabelFixed={true}\n                value={ get(this, 'data.form.loincCodeText') }\n                onChange={ this.changeState.bind(this, 'loincCodeText')}\n                hintText={ this.setHint('HbA1c') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='loincCodeInput'                \n                name='loincCode'\n                floatingLabelText='LOINC Code'\n                value={ get(this, 'data.form.loincCode') }\n                onChange={ this.changeState.bind(this, 'loincCode')}\n                hintText={ this.setHint('4548-4') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='loincDisplayInput'                \n                name='loincCodeText'\n                floatingLabelText='LOINC Display'\n                value={ get(this, 'data.form.loincCodeText') }\n                onChange={ this.changeState.bind(this, 'loincCodeText')}\n                hintText={ this.setHint('4548-4') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n\n          <Row>\n            <Col md={2}>\n              <TextField\n                id='comparatorInput'                \n                name='valueQuantity.comparator'\n                floatingLabelText='Comparator'\n                hintText={ this.setHint('< | <= | >= | >') }\n                value={ get(this, 'data.form.comparator') }\n                onChange={ this.changeState.bind(this, 'comparator')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='valueQuantityInput'                \n                name='valueQuantity.value'\n                floatingLabelText='Quantity'\n                hintText={ this.setHint('70.0') }\n                value={ get(this, 'data.form.quantity') }\n                onChange={ this.changeState.bind(this, 'quantity')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='valueQuantityUnitInput'                \n                name='valueQuantity.unit'\n                floatingLabelText='Unit'\n                hintText={ this.setHint('kg') }\n                value={ get(this, 'data.form.unit') }\n                onChange={ this.changeState.bind(this, 'unit')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='valueStringInput'                \n                name='value'\n                floatingLabelText='Value'\n                hintText={ this.setHint('AB+; pos; neg') }\n                value={ get(this, 'data.form.value') }\n                onChange={ this.changeState.bind(this, 'value')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='statusInput'                \n                name='status'\n                floatingLabelText='Status'\n                value={ get(this, 'data.form.status') }\n                onChange={ this.changeState.bind(this, 'status')}\n                hintText={ this.setHint('preliminary | final') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={3}>\n              <TextField\n                id='deviceDisplayInput'                \n                name='deviceDisplay'\n                floatingLabelText='Device Name'\n                value={ get(this, 'data.form.deviceDisplay') }\n                onChange={ this.changeState.bind(this, 'deviceDisplay')}\n                hintText={ this.setHint('iHealth Blood Pressure Cuff') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='deviceReferenceInput'                \n                name='deviceReference'\n                floatingLabelText='Device Name'\n                // value={ get(this, 'data.form.deviceReference') }\n                // onChange={ this.changeState.bind(this, 'deviceReference')}\n                hintText={ this.setHint('Device/444') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <br />\n              { this.renderDatePicker(this.data.displayDatePicker, get(this, 'data.form.effectiveDateTime') ) }\n            </Col>\n\n          </Row>\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.observationId) }\n        </CardActions>\n      </div>\n    );\n  }\n  determineButtons(observationId) {\n    if (observationId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateObservationButton\" label=\"Save\" className=\"saveObservationButton\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteObservationButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return (\n        <RaisedButton id=\"saveObservationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"ObservationDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"category\":\n        set(formData, 'category', textValue)\n        break;\n      case \"code\":\n        set(formData, 'code', textValue)\n        break;        \n      case \"value\":\n        set(formData, 'value', textValue)\n        break;        \n      case \"comparator\":\n        set(formData, 'comparator', textValue)\n        break;\n      case \"quantity\":\n        set(formData, 'quantity', textValue)\n        break;\n      case \"unit\":\n        set(formData, 'unit', textValue)\n        break;\n      case \"deviceDisplay\":\n        set(formData, 'deviceDisplay', textValue)\n        break;\n      case \"subjectDisplay\":\n        set(formData, 'subjectDisplay', textValue)\n        break;\n      case \"subjectReference\":\n        set(formData, 'subjectReference', textValue)\n        break;\n      case \"effectiveDateTime\":\n        set(formData, 'effectiveDateTime', textValue)\n        break;\n      case \"status\":\n        set(formData, 'status', textValue)\n        break;\n      case \"loincCode\":\n        set(formData, 'loincCode', textValue)\n        break;\n      case \"loincCodeText\":\n        set(formData, 'loincCodeText', textValue)\n        break;\n      case \"loincCodeDisplay\":\n        set(formData, 'loincCodeDisplay', textValue)\n        break;\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateObservation(observationData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"ObservationDetail.updateObservation\", observationData, field, textValue);\n\n    switch (field) {\n      case \"category\":\n        set(observationData, 'category.text', textValue)\n        break;\n      case \"code\":\n        set(observationData, 'code.text', textValue)\n        break;        \n      case \"value\":\n        set(observationData, 'valueString', textValue)\n        break;        \n      case \"comparator\":\n        set(observationData, 'valueQuantity.comparator', textValue)\n        break;        \n      case \"quantity\":\n        set(observationData, 'valueQuantity.value', textValue)\n        break;\n      case \"unit\":\n        set(observationData, 'valueQuantity.unit', textValue)\n        break;\n      case \"deviceDisplay\":\n        set(observationData, 'device.display', textValue)\n        break;\n      case \"subjectDisplay\":\n        set(observationData, 'subject.display', textValue)\n        break;\n      case \"subjectReference\":\n        set(observationData, 'subject.reference', textValue)\n        break;\n      case \"effectiveDateTime\":\n        set(observationData, 'effectiveDateTime', textValue)\n        break;    \n      case \"status\":\n        set(observationData, 'status', textValue)\n        break;    \n      case \"loincCode\":\n        set(observationData, 'code.coding[0].code', textValue)\n        break;\n      case \"loincCodeText\":\n        set(observationData, 'code.text', textValue)\n        break;\n      case \"loincCodeDisplay\":\n        set(observationData, 'code.coding[0].display', textValue)\n        break;\n    }\n    return observationData;\n  }\n\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"ObservationDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let observationData = Object.assign({}, this.state.observation);\n\n    formData = this.updateFormData(formData, field, textValue);\n    observationData = this.updateObservation(observationData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"observationData\", observationData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({observation: observationData})\n    this.setState({form: formData})\n  }\n\n\n  \n  // this could be a mixin\n  handleSaveButton() {\n    let self = this;\n    if(this.props.onUpsert){\n      this.props.onUpsert(self);\n    }\n    // if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    // console.log('Saving a new Observation...', this.state)\n\n    // let self = this;\n    // let fhirObservationData = Object.assign({}, this.state.observation);\n\n    // if(process.env.NODE_ENV === \"test\") console.log('fhirObservationData', fhirObservationData);\n\n\n    // let observationValidator = ObservationSchema.newContext();\n    // observationValidator.validate(fhirObservationData)\n\n    // console.log('IsValid: ', observationValidator.isValid())\n    // console.log('ValidationErrors: ', observationValidator.validationErrors());\n\n    // if (this.data.observationId) {\n    //   if(process.env.NODE_ENV === \"test\") console.log(\"Updating observation...\");\n    //   delete fhirObservationData._id;\n\n    //   Observations._collection.update({_id: this.data.observationId}, {$set: fhirObservationData },function(error, result){\n    //     if (error) {\n    //       if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n    //       console.log('error', error)\n    //       Bert.alert(error.reason, 'danger');\n    //     }\n    //     if (result) {\n    //       if(self.props.onUpdate){\n    //         self.props.onUpdate(self.data.observationId);\n    //       }\n    //       Bert.alert('Observation added!', 'success');\n    //     }\n    //   });\n    // } else {\n    //   fhirObservationData.effectiveDateTime = new Date();\n    //   if (process.env.NODE_ENV === \"test\") console.log(\"create a new observation\", fhirObservationData);\n\n    //   Observations._collection.insert(fhirObservationData, function(error, result){\n    //     if (error) {\n    //       if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n    //       console.log('error', error)\n    //       Bert.alert(error.reason, 'danger');\n    //     }\n    //     if (result) {\n    //       if(self.props.onInsert){\n    //         self.props.onInsert(self.data.observationId);\n    //       }\n    //       Bert.alert('Observation added!', 'success');\n    //     }\n    //   });\n    // }\n  }\n\n  // this could be a mixin\n  handleCancelButton() {\n    let self = this;\n    if(this.props.onCancel){\n      this.props.onCancel(self);\n    }\n  }\n\n  handleDeleteButton() {\n    let self = this;\n    if(this.props.onDelete){\n      this.props.onDelete(self);\n    }\n    // console.log('Delete observation...', this.data.observationId)\n    // let self = this;\n    // Observations._collection.remove({_id: this.data.observationId}, function(error, result){\n    //   if (error) {\n    //     console.log('error', error)\n    //     Bert.alert(error.reason, 'danger');\n    //   }\n    //   if (result) {\n    //     if(self.props.onDelete){\n    //       self.props.onDelete(self.data.observationId);\n    //     }\n    //     Bert.alert('Observation deleted!', 'success');\n    //   }\n    // })\n  }\n}\n\nObservationDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  observationId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  observation: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n  showPatientInputs: PropTypes.bool,\n  showHints: PropTypes.bool,\n  onInsert: PropTypes.func,\n  onUpsert: PropTypes.func,\n  onRemove: PropTypes.func,\n  onCancel: PropTypes.func\n};\nReactMixin(ObservationDetail.prototype, ReactMeteorData);\nexport default ObservationDetail;","\nimport { CardText, CardTitle } from 'material-ui/Card';\nimport { Tab, Tabs } from 'material-ui/Tabs';\n\nimport { GlassCard, VerticalCanvas, FullPageCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nimport ObservationDetail from './ObservationDetail';\nimport ObservationsTable from './ObservationsTable';\n\nimport { get } from 'lodash';\n\nSession.setDefault('observationPageTabIndex', 1);\nSession.setDefault('observationSearchFilter', '');\nSession.setDefault('selectedObservationId', false);\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class ObservationsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      observationId: false,\n      observation: {}\n    }\n  }\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('observationPageTabIndex'),\n      observationSearchFilter: Session.get('observationSearchFilter'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedObservationId: Session.get(\"selectedObservationId\"),\n      paginationLimit: 100,\n      selectedObservation: false,\n      selected: [],\n      observations: []\n    };\n\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      data.paginationLimit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n\n    if (Session.get('selectedObservationId')){\n      data.selectedObservation = Observations.findOne({_id: Session.get('selectedObservationId')});\n      this.state.observation = Observations.findOne({_id: Session.get('selectedObservationId')});\n      this.state.observationId = Session.get('selectedObservationId');\n    } else {\n      data.selectedObservation = false;\n      this.state.observationId = false;\n      this.state.observation = {}\n    }\n\n    data.observations = Observations.find().fetch();\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"ObservationsPage[data]\", data);\n    return data;\n  }\n\n  // this could be a mixin\n  handleTabChange(index){\n    Session.set('observationPageTabIndex', index);\n  }\n  handleActive(index){\n  }\n  // this could be a mixin\n  onNewTab(){\n    console.log(\"onNewTab; we should clear things...\");\n\n    Session.set('selectedObservationId', false);\n    // Session.set('observationDetailState', {\n    //   resourceType: 'Observation',\n    //   status: 'preliminary',\n    //   category: {\n    //     text: ''\n    //   },\n    //   effectiveDateTime: '',\n    //   subject: {\n    //     display: '',\n    //     reference: ''\n    //   },\n    //   performer: {\n    //     display: '',\n    //     reference: ''\n    //   },\n    //   device: {\n    //     display: '',\n    //     reference: ''\n    //   },\n    //   valueQuantity: {\n    //     value: '',\n    //     unit: '',\n    //     system: 'http://unitsofmeasure.org'\n    //   }\n    // });\n  }\n  onCancelUpsertObservation(context){\n    Session.set('observationPageTabIndex', 1);\n  }\n  onDeleteObservation(context){\n    Observations._collection.remove({_id: get(context, 'state.observationId')}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Observations.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        Session.set('selectedObservationId', false);\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: context.state.observationId});\n        Bert.alert('Observation removed!', 'success');\n      }\n    });\n    Session.set('observationPageTabIndex', 1);\n  }\n  onUpsertObservation(context){\n    //if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Observation...', context.state)\n\n    if(get(context, 'state.observation')){\n      let self = context;\n      let fhirObservationData = Object.assign({}, get(context, 'state.observation'));\n  \n      // if(process.env.NODE_ENV === \"test\") console.log('fhirObservationData', fhirObservationData);\n  \n      let observationValidator = ObservationSchema.newContext();\n      // console.log('observationValidator', observationValidator)\n      observationValidator.validate(fhirObservationData)\n  \n      if(process.env.NODE_ENV === \"development\"){\n        console.log('IsValid: ', observationValidator.isValid())\n        console.log('ValidationErrors: ', observationValidator.validationErrors());\n  \n      }\n  \n      console.log('Checking context.state again...', context.state)\n      if (get(context, 'state.observationId')) {\n        if(process.env.NODE_ENV === \"development\") {\n          console.log(\"Updating observation...\");\n        }\n\n        delete fhirObservationData._id;\n  \n        // not sure why we're having to respecify this; fix for a bug elsewhere\n        fhirObservationData.resourceType = 'Observation';\n  \n        Observations._collection.update({_id: get(context, 'state.observationId')}, {$set: fhirObservationData }, function(error, result){\n          if (error) {\n            if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: context.state.observationId});\n            Session.set('selectedObservationId', false);\n            Session.set('observationPageTabIndex', 1);\n            Bert.alert('Observation added!', 'success');\n          }\n        });\n      } else {\n        // if(process.env.NODE_ENV === \"test\") \n        console.log(\"Creating a new observation...\", fhirObservationData);\n  \n        fhirObservationData.effectiveDateTime = new Date();\n        Observations._collection.insert(fhirObservationData, function(error, result) {\n          if (error) {\n            if(process.env.NODE_ENV === \"test\")  console.log('Observations.insert[error]', error);\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: context.state.observationId});\n            Session.set('observationPageTabIndex', 1);\n            Session.set('selectedObservationId', false);\n            Bert.alert('Observation added!', 'success');\n          }\n        });\n      }\n    } \n    Session.set('observationPageTabIndex', 1);\n  }\n  onTableRowClick(observationId){\n    Session.set('selectedObservationId', observationId);\n    Session.set('selectedPatient', Observations.findOne({_id: observationId}));\n  }\n  onTableCellClick(id){\n    Session.set('observationsUpsert', false);\n    Session.set('selectedObservationId', id);\n    Session.set('observationPageTabIndex', 2);\n  }\n  tableActionButtonClick(_id){\n    let observation = Observations.findOne({_id: _id});\n\n    // console.log(\"ObservationTable.onSend()\", observation);\n\n    var httpEndpoint = \"http://localhost:8080\";\n    if (get(Meteor, 'settings.public.interfaces.default.channel.endpoint')) {\n      httpEndpoint = get(Meteor, 'settings.public.interfaces.default.channel.endpoint');\n    }\n    HTTP.post(httpEndpoint + '/Observation', {\n      data: observation\n    }, function(error, result){\n      if (error) {\n        console.log(\"error\", error);\n      }\n      if (result) {\n        console.log(\"result\", result);\n      }\n    });\n  }\n  onInsert(observationId){\n    Session.set('selectedObservationId', false);\n    Session.set('observationPageTabIndex', 1);\n    HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: observationId});\n  }\n  onUpdate(observationId){\n    Session.set('selectedObservationId', false);\n    Session.set('observationPageTabIndex', 1);\n    HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: observationId});\n  }\n  onRemove(observationId){\n    Session.set('observationPageTabIndex', 1);\n    Session.set('selectedObservationId', false);\n    HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: observationId});\n  }\n  onCancel(){\n    Session.set('observationPageTabIndex', 1);\n  }\n  render() {\n    return (\n      <div id=\"observationsPage\">\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle\n              title=\"Observations\"\n            />\n            <Tabs id=\"observationsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n              <Tab className=\"newObservationTab\" label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0} >\n                <ObservationDetail \n                  id='newObservation' \n                  displayDatePicker={true} \n                  displayBarcodes={false}\n                  showHints={true}\n                  onInsert={ this.onInsert }\n                  observation={ this.data.selectedObservation }\n                  observationId={ this.data.selectedObservationId } \n\n                  onDelete={ this.onDeleteObservation }\n                  onUpsert={ this.onUpsertObservation }\n                  onCancel={ this.onCancelUpsertObservation } \n\n                  />\n              </Tab>\n              <Tab className=\"observationListTab\" label='Observations' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <ObservationsTable \n                  displayBarcodes={false} \n                  multiline={false}\n                  hideSubjects={true}\n                  hideDevices={true}\n                  multiline={false}                  \n                  hideComparator={true}\n                  hideValue={false}\n                  noDataMessagePadding={100}\n                  observations={ this.data.observations }\n                  paginationLimit={ this.data.pagnationLimit }\n                  appWidth={ Session.get('appWidth') }\n                  actionButtonLabel=\"Send\"\n                  onRowClick={ this.onTableRowClick }\n                  onCellClick={ this.onTableCellClick }\n                  onActionButtonClick={this.tableActionButtonClick}\n                  onRemoveRecord={ this.onDeleteObservation }\n                  />\n              </Tab>\n              <Tab className=\"observationDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                <ObservationDetail \n                  id='observationDetails' \n                  displayDatePicker={true} \n                  displayBarcodes={false}\n                  observation={ this.data.selectedObservation }\n                  observationId={ this.data.selectedObservationId } \n                  showObservationInputs={true}\n                  showHints={false}\n                  onInsert={ this.onInsert }\n\n                  onDelete={ this.onDeleteObservation }\n                  onUpsert={ this.onUpsertObservation }\n                  onCancel={ this.onCancelUpsertObservation } \n              />\n              </Tab>\n            </Tabs>\n\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(ObservationsPage.prototype, ReactMeteorData);\n\nexport default ObservationsPage;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { CardText, Checkbox } from 'material-ui';\nimport { Table } from 'react-bootstrap';\n\n// import ReactMixin from 'react-mixin';\n// import { ReactMeteorData } from 'meteor/react-meteor-data';\n// import { Session } from 'meteor/session';\n// import { GlassCard, VerticalCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport moment from 'moment-es6'\nimport _ from 'lodash';\nlet get = _.get;\nlet set = _.set;\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\nimport { GoTrashcan } from 'react-icons/go'\n\nlet styles = {\n  hideOnPhone: {\n    visibility: 'visible',\n    display: 'table'\n  },\n  cellHideOnPhone: {\n    visibility: 'visible',\n    display: 'table',\n    paddingTop: '16px',\n    maxWidth: '120px'\n  },\n  cell: {\n    paddingTop: '16px'\n  }\n}\n\n\nflattenObservation = function(observation){\n  let result = {\n    _id: '',\n    meta: '',\n    category: '',\n    code: '',\n    valueString: '',\n    value: '',\n    observationValue: '',\n    subject: '',\n    subjectId: '',\n    status: '',\n    device: '',\n    createdBy: '',\n    effectiveDateTime: '',\n    issued: '',\n    unit: ''\n  };\n\n  result._id =  get(observation, 'id') ? get(observation, 'id') : get(observation, '_id');\n  result.category = get(observation, 'category.text', '');\n  result.code = get(observation, 'code.text', '');\n  result.valueString = get(observation, 'valueString', '');\n  result.comparator = get(observation, 'valueQuantity.comparator', '');\n  result.observationValue = get(observation, 'valueQuantity.value', '');\n  result.unit = get(observation, 'valueQuantity.unit', '');\n  result.subject = get(observation, 'subject.display', '');\n  result.subjectId = get(observation, 'subject.reference', '');\n  result.device = get(observation, 'device.display', '');\n  result.status = get(observation, 'status', '');\n  \n  if(get(observation, 'effectiveDateTime')){\n    result.effectiveDateTime =  moment(get(observation, 'effectiveDateTime')).format(\"YYYY-MM-DD hh a\");\n  }\n  if(get(observation, 'issued')){\n    result.effectiveDateTime =  moment(get(observation, 'issued')).format(\"YYYY-MM-DD hh a\");    \n  }\n\n  result.meta = get(observation, 'category.text', '');\n\n  if(result.valueString.length > 0){\n    result.value = result.valueString;\n  } else {\n    if(result.comparator){\n      result.value = result.comparator + ' ';\n    } \n    result.value = result.value + result.observationValue + ' ' + result.unit;\n  }\n\n  return result;\n}\n\n\n\n\nexport class ObservationsTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: [],\n      observations: []\n    }\n  }\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        text: Glass.darkroom()\n      },\n      selected: [],\n      observations: []\n    };\n\n\n    if(this.props.data){\n      console.log('this.props.data', this.props.data);\n\n      if(this.props.data.length > 0){              \n        this.props.data.forEach(function(observation){\n          data.observations.push(flattenObservation(observation));\n        });  \n      }\n    } else {\n      let query = {};\n      if(this.props.query){\n        query = this.props.query\n      }\n      if(this.props.hideEnteredInError){\n        query['verificationStatus'] = {\n          $nin: ['entered-in-error']  // unconfirmed | provisional | differential | confirmed | refuted | entered-in-error\n        }\n      }\n\n      data.observations = Observations.find(query).map(function(observation){\n        return flattenObservation(observation);\n      });\n    }\n\n    // // this could be another mixin\n    // if (Session.get('glassBlurEnabled')) {\n    //   data.style.filter = \"blur(3px)\";\n    //   data.style.WebkitFilter = \"blur(3px)\";\n    // }\n\n    // // this could be another mixin\n    // if (Session.get('backgroundBlurEnabled')) {\n    //   data.style.backdropFilter = \"blur(5px)\";\n    // }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"ObservationsTable[data]\", data);\n    return data;\n  }\n  handleChange(row, key, value) {\n    const source = this.state.source;\n    source[row][key] = value;\n    this.setState({source});\n  }\n  displayOnMobile(width){\n    let style = {};\n    if(['iPhone'].includes(window.navigator.platform)){\n      style.display = \"none\";\n    }\n    if(width){\n      style.width = width;\n    }\n    return style;\n  }\n  handleSelect(selected) {\n    this.setState({selected});\n  }\n  getDate(){\n    return \"YYYY/MM/DD\";\n  }\n  noChange(){\n    return \"\";\n  }\n  rowClick(id){\n    Session.set(\"selectedObservationId\", id);\n    Session.set('observationPageTabIndex', 2);\n    Session.set('observationDetailState', false);\n  }\n  renderActionIconsHeader(){\n    if (!this.props.hideActionIcons) {\n      return (\n        <th className='actionIcons' style={{width: '100px'}}>Actions</th>\n      );\n    }\n  }\n  renderActionIcons(observation ){\n    if (!this.props.hideActionIcons) {\n      let iconStyle = {\n        marginLeft: '4px', \n        marginRight: '4px', \n        marginTop: '4px', \n        fontSize: '120%'\n      }\n\n      return (\n        <td className='actionIcons' style={{minWidth: '120px'}}>\n          <FaTags style={iconStyle} onClick={this.onMetaClick.bind(this, observation)} />\n          <GoTrashcan style={iconStyle} onClick={this.removeRecord.bind(this, observation._id)} />  \n        </td>\n      );\n    }\n  } \n  removeRecord(_id){\n    console.log('Remove observation ', _id)\n    if(this.props.onRemoveRecord){\n      this.props.onRemoveRecord(_id);\n    }\n  }\n  onActionButtonClick(id){\n    if(typeof this.props.onActionButtonClick === \"function\"){\n      this.props.onActionButtonClick(id);\n    }\n  }\n  cellClick(id){\n    if(typeof this.props.onCellClick === \"function\"){\n      this.props.onCellClick(id);\n    }\n  }\n\n  onMetaClick(patient){\n    let self = this;\n    if(this.props.onMetaClick){\n      this.props.onMetaClick(self, patient);\n    }\n  }\n  renderBarcode(id){\n    if (!this.props.hideBarcodes) {\n      return (\n        <td><span className=\"barcode\">{id}</span></td>\n      );\n    }\n  }\n  renderBarcodeHeader(){\n    if (!this.props.hideBarcodes) {\n      return (\n        <th>System ID</th>\n      );\n    }\n  }\n  renderSubject(id){\n    if (!this.props.hideSubjects) {\n      return (\n        <td className='name'>{ id }</td>\n      );\n    }\n  }\n  renderSubjectHeader(){\n    if (!this.props.hideSubjects) {\n      return (\n        <th className='name'>Subject</th>\n      );\n    }\n  }\n  renderDevice(device){\n    if (!this.props.hideDevices) {\n      return (\n        <td className='device.display'>{device }</td>\n      );\n    }\n  }\n  renderDeviceHeader(){\n    if (!this.props.hideDevices) {\n      return (\n        <th className='device.display'>Device</th>\n      );\n    }\n  }\n\n  renderValue(valueString){\n    if (!this.props.hideValue) {\n      return (\n        <td className='value'>{ valueString }</td>\n      );\n    }\n  }\n  renderValueHeader(){\n    if (!this.props.hideValue) {\n      return (\n        <th className='value'>Value</th>\n      );\n    }\n  }\n\n  renderCodeHeader(){\n    if (!this.props.hideCode) {\n      return (\n        <th className='code'>Code</th>\n      );\n    }\n  }\n  renderCode(code, value){\n    if (!this.props.hideCode) {\n      if(this.props.multiline){\n        return (<td className='code'>\n          <span style={{fontWeight: 400}}>{code }</span> <br />\n          { value }\n        </td>)\n      } else {\n        return (\n          <td className='category'>{ code }</td>\n        );  \n      }\n    }\n  }\n  renderCategoryHeader(){\n    if (this.props.multiline === false) {\n      return (\n        <th className='category'>Category</th>\n      );\n    }\n  }\n  renderCategory(category){\n    if (this.props.multiline === false) {\n      return (\n        <td className='category'>{ category }</td>\n      );\n    }\n  }\n\n  renderValueString(valueString){\n    if (!this.props.hideValue) {\n      return (\n        <td className='value'>{ valueString }</td>\n      );\n    }\n  }\n  renderValueStringHeader(){\n    if (!this.props.hideValue) {\n      return (\n        <th className='value'>Value</th>\n      );\n    }\n  }\n  renderComparator(comparator){\n    if (!this.props.hideComparator) {\n      return (\n        <td className='comparator'>{ comparator }</td>\n      );\n    }\n  }\n  renderComparatorHeader(){\n    if (!this.props.hideComparator) {\n      return (\n        <th className='comparator'>Comparator</th>\n        );\n    }\n  }\n  renderToggleHeader(){\n    if (!this.props.hideCheckboxes) {\n      return (\n        <th className=\"toggle\" style={{width: '60px'}} >Toggle</th>\n      );\n    }\n  }\n  renderToggle(){\n    if (!this.props.hideCheckboxes) {\n      return (\n        <td className=\"toggle\" style={{width: '60px'}}>\n            <Checkbox\n              defaultChecked={true}\n            />\n          </td>\n      );\n    }\n  }\n\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.props.appWidth){\n      if (this.props.appWidth < 768) {\n        styles.hideOnPhone.visibility = 'hidden';\n        styles.hideOnPhone.display = 'none';\n        styles.cellHideOnPhone.visibility = 'hidden';\n        styles.cellHideOnPhone.display = 'none';\n      } else {\n        styles.hideOnPhone.visibility = 'visible';\n        styles.hideOnPhone.display = 'table-cell';\n        styles.cellHideOnPhone.visibility = 'visible';\n        styles.cellHideOnPhone.display = 'table-cell';\n      }  \n    }\n\n    let observationsToRender = [];\n    if(this.props.observations){\n      if(this.props.observations.length > 0){              \n        this.props.observations.forEach(function(observation){\n          observationsToRender.push(flattenObservation(observation));\n        });  \n      }\n    }\n\n    if(observationsToRender.length === 0){\n      console.log('No observations to render');\n      // footer = <TableNoData noDataPadding={ this.props.noDataMessagePadding } />\n    } else {\n      for (var i = 0; i < observationsToRender.length; i++) {\n        if(this.props.multiline){\n          tableRows.push(\n            <tr className=\"observationRow\" key={i} onClick={ this.rowClick.bind(this, observationsToRender[i]._id)} >\n              {/* <td className='category'>{observationsToRender[i].category }</td> */}\n              { this.renderToggle() }\n              { this.renderActionIcons(observationsToRender[i]) }\n              { this.renderCategory(observationsToRender[i].category) }\n              { this.renderCode(observationsToRender[i].code, observationsToRender[i].value) }\n              {/* {this.renderComparator(observationsToRender[i].comparator)}\n              {this.renderValueString(observationsToRender[i].observationValue)} */}\n              {this.renderValue(observationsToRender[i].value)}\n              {/* <td className='unit'>{observationsToRender[i].unit }</td> */}\n              {this.renderSubject(observationsToRender[i].subject)}\n              <td className='status' >{observationsToRender[i].status }</td>\n              {this.renderDevice(observationsToRender[i].device)}\n              <td className='date' style={{minWidth: '140px'}}>{observationsToRender[i].effectiveDateTime }</td>\n              {this.renderBarcode(observationsToRender[i]._id)}\n            </tr>\n          );    \n  \n        } else {\n          tableRows.push(\n            <tr className=\"observationRow\" key={i} onClick={ this.rowClick.bind(this, observationsToRender[i]._id)} >            \n              { this.renderToggle() }\n              { this.renderActionIcons(observationsToRender[i]) }\n              { this.renderCategory(observationsToRender[i].category) }\n              { this.renderCode(observationsToRender[i].code) }\n              {/* <td className='code'>{observationsToRender[i].code }</td> */}\n              {/* {this.renderComparator(observationsToRender[i].comparator)}\n              {this.renderValueString(observationsToRender[i].observationValue)} */}\n              {this.renderValue(observationsToRender[i].value)}\n              {/* <td className='unit'>{observationsToRender[i].unit }</td> */}\n              {this.renderSubject(observationsToRender[i].subject)}\n              <td className='status' >{observationsToRender[i].status }</td>\n              {this.renderDevice(observationsToRender[i].device)}\n              <td className='date' style={{minWidth: '140px'}}>{observationsToRender[i].effectiveDateTime }</td>\n              {this.renderBarcode(observationsToRender[i]._id)}\n            </tr>\n          );    \n        }\n      }\n    }\n\n\n    return(\n      <CardText>\n        <Table id=\"observationsTable\" hover >\n          <thead>\n            <tr>\n              { this.renderToggleHeader() }\n              { this.renderActionIconsHeader() }\n              {this.renderCategoryHeader() }\n              {this.renderCodeHeader() }\n              {/* {this.renderComparatorHeader() }\n              {this.renderValueStringHeader() } */}\n              {this.renderValueHeader() }\n              {/* <th className='unit'>Unit</th> */}\n              {this.renderSubjectHeader() }\n              <th className='status'>Status</th>\n              {this.renderDeviceHeader() }\n              <th className='date' style={{minWidth: '140px'}}>Date</th>\n              {this.renderBarcodeHeader() }\n            </tr>\n          </thead>\n          <tbody>\n            { tableRows }\n          </tbody>\n        </Table>\n      </CardText>\n    );\n  }\n}\n\nObservationsTable.propTypes = {\n  barcodes: PropTypes.bool,\n  observations: PropTypes.array,\n  query: PropTypes.object,\n  paginationLimit: PropTypes.number,\n  hideCode: PropTypes.bool,\n  hideBarcodes: PropTypes.bool,\n  hideSubjects: PropTypes.bool,\n  hideDevices: PropTypes.bool,\n  hideComparator: PropTypes.bool,\n  hideValue: PropTypes.bool,\n  hideCheckboxes: PropTypes.bool,\n  hideActionIcons: PropTypes.bool,\n  hideIdentifier: PropTypes.bool,\n  enteredInError: PropTypes.bool,\n  multiline: PropTypes.bool,\n  onCellClick: PropTypes.func,\n  onRowClick: PropTypes.func,\n  onMetaClick: PropTypes.func,\n  onRemoveRecord: PropTypes.func,\n  onActionButtonClick: PropTypes.func,\n  actionButtonLabel: PropTypes.string\n};\n\n\nexport default ObservationsTable; ","import React from 'react';\nimport ReactMixin from 'react-mixin';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\n\nimport { CardTitle, CardText, TextField, RaisedButton } from 'material-ui';\n\nimport { GlassCard, Glass } from 'meteor/clinical:glass-ui';\nimport { Meteor } from 'meteor/meteor';\n\nimport { Grid, Row, Col, ListGroupItem, FormControl, Button } from 'react-bootstrap';\nimport { browserHistory } from 'react-router';\nimport { get } from 'lodash';\n\nimport { IoIosHeartEmpty } from 'react-icons/io';\nimport { IoMdPulse} from 'react-icons/io';\nimport { FiThermometer } from 'react-icons/fi';\nimport { FaStethoscope } from 'react-icons/fa';\n\nimport { Tab, Tabs } from 'material-ui/Tabs';\n\nvar FontAwesome = require('react-fontawesome');\n\nSession.setDefault('healthLogTabIndex', 0);\nSession.setDefault('vitalsForm', {\n  pulse: '',\n  temperature: '',\n  respiration: '',\n  bloodPressure: '',\n  notes: ''\n});\nexport class VitalMeasurements extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: '1px solid white',\n          borderTop: '1px solid white',\n          borderLeft: '1px solid white'\n        }\n      },\n      tabIndex: Session.get('healthLogTabIndex'),\n      state: {\n        pulse: '',\n        temperature: '',\n        respiration: '',\n        bloodPressure: '',\n        notes: ''\n      }\n    };\n\n    if (Session.get('vitalsForm')) {\n      data.state = Session.get('vitalsForm');\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n  handleTabChange(index){\n    Session.set('healthLogTabIndex', index);\n  }\n  onActive(){\n\n  }\n  onNewTab(){\n\n  }\n  render(){\n      var spoonCounter;\n\n      if(get(Meteor, 'settings.public.vitals.showSpoonCounter')){\n          spoonCounter = <TextField\n            id='temperatureInput'\n            ref='temperature'\n            name='temperature'\n            floatingLabelText=\"Spoons\"\n            floatingLabelFixed={true}\n            onChange={this.changePost.bind(this, 'temperature')}\n            fullWidth\n            >\n            <div style={{paddingTop: '25px'}}>\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px', color: 'lightgray'}} />\n                <FontAwesome name=\"spoon\" style={{fontSize: '150%', marginRight: '10px', color: 'lightgray'}} />\n            </div>\n        </TextField>\n      }\n    return (\n      <GlassCard id=\"addPostCard\">\n        <CardText>\n        <Tabs id=\"observationsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={0}>\n              <Tab className=\"vitalsTab\" label='Vitals' style={this.data.style.tab} value={0} >\n                <Row style={{minHeight: '200px'}}>\n                  <Col md={3}>\n                    <IoMdPulse style={{position: 'absolute', top: '40px' }} />\n                    <TextField\n                      id='puleInput'\n                      ref='pulse'\n                      name='pulse'\n                      floatingLabelText=\"Pulse\"\n                      value={this.data.state.pulse}\n                      hintText='60'\n                      onChange={this.changePost.bind(this, 'pulse')}\n                      floatingLabelStyle={{marginLeft: '20px'}}\n                      inputStyle={{marginLeft: '20px'}}\n                      hintStyle={{marginLeft: '20px'}}\n                      fullWidth\n                      /><br/>\n                  </Col>\n                  <Col md={3}>\n                    <FiThermometer style={{position: 'absolute', top: '40px' }} />\n                    <TextField\n                      id='temperatureInput'\n                      name='temperature'\n                      floatingLabelText=\"Temperature\"\n                      hintText='98.6'\n                      value={this.data.state.temperature}\n                      onChange={this.changePost.bind(this, 'temperature')}\n                      floatingLabelStyle={{marginLeft: '20px'}}\n                      inputStyle={{marginLeft: '20px'}}\n                      hintStyle={{marginLeft: '20px'}}\n                      fullWidth\n                      /><br/>\n                  </Col>\n                  <Col md={3}>\n                    <FaStethoscope style={{position: 'absolute', top: '40px' }} />\n                    <TextField\n                      id='respirationRate'\n                      name='respiration'\n                      hintText='15'\n                      floatingLabelText=\"Respiration\"\n                      value={this.data.state.respiration}\n                      onChange={this.changePost.bind(this, 'respiration')}\n                      floatingLabelStyle={{marginLeft: '20px'}}\n                      inputStyle={{marginLeft: '20px'}}\n                      hintStyle={{marginLeft: '20px'}}\n                      fullWidth\n                      /><br/>\n                  </Col>\n                  <Col md={3}>\n                    <IoIosHeartEmpty style={{position: 'absolute', top: '40px' }} />\n                    <TextField\n                      id='bloodPressureInput'\n                      name='bloodPressure'\n                      floatingLabelText=\"Blood Pressure\"\n                      hintText='120 / 80'\n                      value={this.data.state.bloodPressure}\n                      onChange={this.changePost.bind(this, 'bloodPressure')}\n                      floatingLabelStyle={{marginLeft: '20px'}}\n                      inputStyle={{marginLeft: '20px'}}\n                      hintStyle={{marginLeft: '20px'}}\n                      fullWidth\n                      /><br/>\n                  </Col>\n                </Row>\n              </Tab>\n              <Tab className=\"noteTab\" label='Notes' style={this.data.style.tab} value={1}>\n                <Row style={{minHeight: '200px'}} >\n                  <CardText>\n                    <TextField\n                      id='notesInput'\n                      ref='notesContent'\n                      name='notesContent'\n                      floatingLabelText=\"New clinical impression...\"\n                      value={this.data.state.notes}\n                      onChange={this.changePost.bind(this, 'notes')}\n                      multiLine={true}\n                      rows={4}\n                      floatingLabelFixed={true}\n                      fullWidth\n                      /><br/>\n                  </CardText>\n                </Row>\n              </Tab>\n              <Tab className=\"biomarkersTab\" label='Biomarkers' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                <Row style={{minHeight: '200px'}} >\n                </Row>\n              </Tab>\n              <Tab className=\"medicationsTab\" label='Medications' onActive={this.handleActive} style={this.data.style.tab} value={3}>\n                <Row style={{minHeight: '200px'}} >\n                </Row>\n              </Tab>\n            </Tabs>\n\n          <RaisedButton id=\"addObservationButton\" onMouseUp={ this.handleInsertObservations.bind(this) } primary={true} label='New Observation' />\n        </CardText>\n      </GlassCard>\n    );\n  }\n  handleInsertObservations(){\n\n    console.log('handleInsertObservations', this.data.state)\n\n    let defaultObservation = {\n      meta: {\n        lastUpdated: new Date()\n      },\n      status: 'preliminary',\n      category: {\n        text: ''\n      },\n      effectiveDateTime: new Date(),\n      subject: {\n        display: Meteor.user().fullName(),\n        reference: Meteor.userId()\n      },\n      performer: [{\n        display: Meteor.user().fullName(),\n        reference: Meteor.userId()\n      }],\n      device: {\n        display: 'Web App',\n        reference: 'WebApp'\n      },\n      valueQuantity: {\n        value: '',\n        unit: '',\n        system: 'http://unitsofmeasure.org'\n      },\n      valueString: ''\n    };\n\n\n\n    //---------------------------------------------------------------\n    // PULSE\n\n    var pulseObservation = defaultObservation;\n    pulseObservation.category = {\n      text: 'Pulse'\n    };\n    pulseObservation.valueQuantity.unit = 'bmp';\n    pulseObservation.valueQuantity.value = this.data.state.pulse;\n    \n    if(process.env.NODE_ENV === \"test\"){\n      console.log('pulseObservation', pulseObservation)\n    }\n    Observations._collection.insert(pulseObservation, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        //HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: result});\n        Bert.alert('Observation added!', 'success');\n      }\n    });\n\n    //---------------------------------------------------------------\n    // RESPIRATION\n\n    var respirationObservation = defaultObservation;\n    respirationObservation.category = {\n      text: 'Respiration'\n    };\n    respirationObservation.valueQuantity.unit = 'bmp';\n    respirationObservation.valueQuantity.value = this.data.state.respiration;\n    \n      if(process.env.NODE_ENV === \"test\"){\n        console.log('respirationObservation', respirationObservation)\n      }\n      Observations._collection.insert(respirationObservation, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        //HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: result});\n        Bert.alert('Observation added!', 'success');\n      }\n    });    \n\n\n    //---------------------------------------------------------------\n    // RESPIRATION\n\n    var temperatureObservation = defaultObservation;\n    temperatureObservation.category = {\n      text: 'Temperature'\n    };\n    temperatureObservation.valueQuantity.unit = 'F';\n    temperatureObservation.valueQuantity.value = this.data.state.temperature;\n    \n    if(process.env.NODE_ENV === \"test\"){\n        console.log('temperatureObservation', temperatureObservation)\n    }\n\n    Observations._collection.insert(temperatureObservation, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        //HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: result});\n        Bert.alert('Observation added!', 'success');\n      }\n    }); \n\n\n    //---------------------------------------------------------------\n    // BLOOD PRESSURE\n\n    var bloodPressureObservation = defaultObservation;\n\n    bloodPressureObservation.category = {\n      text: 'Blood Pressure'\n    };\n    bloodPressureObservation.valueString = this.data.state.bloodPressure + ' mmHg';    \n    temperatureObservation.valueQuantity = null;\n    \n    if(process.env.NODE_ENV === \"test\"){\n        console.log('bloodPressureObservation', bloodPressureObservation)\n    }\n\n    Observations._collection.insert(bloodPressureObservation, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log(\"Observations.insert[error]\", error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        //HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Observations\", recordId: result});\n        Bert.alert('Observation added!', 'success');\n      }\n    });\n\n    browserHistory.push('/observations');\n  }\n\n\n\n\n  changePost(field, event, value){\n    var vitalsForm = Session.get('vitalsForm');\n    vitalsForm[field] = value;\n    Session.set('vitalsForm', vitalsForm);\n  }\n}\n\n\n\nReactMixin(VitalMeasurements.prototype, ReactMeteorData);\nexport default VitalMeasurements;"]}