{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-allergy-intolerance/lib/AllergyIntolerances.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-allergy-intolerance/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-allergy-intolerance/client/AllergyIntoleranceDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-allergy-intolerance/client/AllergyIntolerancesPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-allergy-intolerance/client/AllergyIntolerancesTable.js"],"names":["SimpleSchema","module","link","v","IdentifierSchema","CodeableConceptSchema","AnnotationSchema","ReferenceSchema","Package","console","log","AllergyIntolerance","BaseModel","extend","prototype","_collection","AllergyIntolerances","Mongo","Collection","connection","AllergyIntoleranceDstu2","type","String","defaultValue","optional","Array","Date","blackbox","allowedValues","Object","AllergyIntoleranceStu3","Number","PeriodSchema","Range","AllergyIntoleranceSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","AllergyIntolerancesPage","AllergyIntolerancesTable","AllergyIntoleranceDetail","CardActions","CardText","DatePicker","RaisedButton","TextField","SelectField","MenuItem","Col","Grid","Row","Meteor","Session","React","Component","update","ReactMeteorData","ReactMixin","browserHistory","get","set","setWith","clone","cloneDeep","PropTypes","props","state","allergyIntoleranceId","allergy","resourceType","identifier","value","clinicalStatus","verificationStatus","category","code","patient","display","recorder","onsetDateTime","reaction","description","criticality","form","allergyIdentifier","reactionDescription","patientDisplay","recorderDisplay","dehydrateFhirResource","allergyIntolerance","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","shouldUpdate","setState","getMeteorData","data","showDatePicker","renderDatePicker","datePickerValue","changeState","bind","render","id","determineButtons","allergyId","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateAllergy","allergyData","componentDidUpdate","event","self","fhirAllergyData","schemaConfig","_id","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","propTypes","string","fhirVersion","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","setDefault","style","opacity","tab","borderBottom","borderRight","tabIndex","allergyIntoleranceSearchFilter","selectedAllergy","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Card","CardMedia","Table","moment","selected","allergyIntolerances","displayToggle","displayIdentifier","displayDates","displayStatus","displayVerification","displayType","displayCategory","displayToggles","find","count","fetch","renderTogglesHeader","renderToggles","patientId","renderIdentifierHeader","renderIdentifier","renderDateHeader","renderDate","newDate","format","renderClinicalStatusHeader","renderClinicalStatus","renderVerificationStatusHeader","renderVerificationStatus","renderTypeHeader","renderType","renderCategoryHeader","renderCategory","rowClick","tableRows","i","length","newRow","asserterDisplay","snomedCode","snomedDisplay","evidenceDisplay","barcode","onset","push","cursor","assertedDate"],"mappings":"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","file":"/packages/clinical_hl7-resource-allergy-intolerance.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\nimport { IdentifierSchema, CodeableConceptSchema, AnnotationSchema } from 'meteor/clinical:hl7-resource-datatypes';\nimport { ReferenceSchema } from 'meteor/clinical:hl7-resource-datatypes';\n\nif(Package['clinical:autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n  console.log(\"Any protected health information (PHI) stored in this app should be audited.\"); \n  console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");  \n  console.log(\"\");  \n  console.log(\"meteor remove clinical:autopublish\");  \n  console.log(\"\");  \n}\nif(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");  \n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"meteor add clinical:autopublish\");  \n  console.log(\"\");  \n}\n\n\n\n// create the object using our BaseModel\nAllergyIntolerance = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nAllergyIntolerance.prototype._collection = AllergyIntolerances;\n\n// Create a persistent data store for addresses to be stored.\n// HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\nif(typeof AllergyIntolerances === 'undefined'){\n  if(Package['clinical:autopublish']){\n    AllergyIntolerances = new Mongo.Collection('AllergyIntolerances');\n  } else if(Package['clinical:desktop-publish']){\n    AllergyIntolerances = new Mongo.Collection('AllergyIntolerances');\n  } else {\n    AllergyIntolerances = new Mongo.Collection('AllergyIntolerances', {connection: null});\n  }\n}\n\n// //Add the transform to the collection since Meteor.users is pre-defined by the accounts package\n// AllergyIntolerances._transform = function (document) {\n//   return new AllergyIntolerance(document);\n// };\n\nAllergyIntoleranceDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"AllergyIntolerance\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"onset\" : {\n      optional: true,\n      type: Date\n  },\n  \"recordedDate\" : {\n    optional: true,\n    type: Date\n  },  \n  \"recorder\" : {\n    optional: true,\n    blackbox: true,\n    type: ReferenceSchema\n  },\n  \"patient\" : {\n    optional: true,\n    blackbox: true,\n    type: ReferenceSchema\n  },\n  \"reporter\" : {\n    optional: true,\n    blackbox: true,\n    type: ReferenceSchema\n  },\n  \"substance\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"status\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['unconfirmed', 'confirmed', 'refuted', 'entered-in-error'],\n    defaultValue: 'unconfirmed'\n  },\n  \"type\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['allergy', 'intolerance']\n  },\n  \"criticality\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['CRITL', 'CRITH', 'CRITU'] // DSTU2\n    // allowedValues: ['low', 'high', 'unable-to-assess'] // DSTU3\n  },\n  \"category\" : {\n    optional: true,\n    type: String ,\n    allowedValues: ['food', 'medication', 'environment', 'other']\n  },\n  \"lastOccurence\" : {\n    optional: true,\n    type: Date\n  },\n  \"note\" : {\n    optional: true,\n    type: AnnotationSchema\n  },  \n  \"reaction\" : {\n    optional: true,\n    type: Array\n  },\n  \"reaction.$\" : {\n    optional: true,\n    type: Object\n  },\n  \"reaction.$.substance\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reaction.$.certainty\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reaction.$.manifestation\" : {\n    optional: true,\n    type: Array\n  },\n  \"reaction.$.manifestation.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },  \n  \"reaction.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"reaction.$.onset\" : {\n    optional: true,\n    type: Date\n  },\n  \"reaction.$.severity\" : {\n    optional: true,\n    type: String\n  },\n  \"reaction.$.exposureRoute\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reaction.$.note\" : {\n    optional: true,\n    type: AnnotationSchema\n  }\n});\n\n\nAllergyIntoleranceStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"AllergyIntolerance\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"clinicalStatus\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['active', 'inactive', 'resolved']\n  },\n  \"verificationStatus\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['unconfirmed', 'confirmed', 'refuted', 'entered-in-error'],\n    defaultValue: 'unconfirmed'\n  },\n  \"type\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['allergy', 'intolerance']\n  },\n  \"category\" : {\n    optional: true,\n    type: Array\n  },\n  \"category.$\" : {\n    optional: true,\n    type: String ,\n    allowedValues: ['food', 'medication', 'environment', 'biologic']\n  },\n  \"criticality\" : {\n    optional: true,\n    type: String,\n    allowedValues: ['low', 'high', 'unable-to-assess']\n  },\n  \"code\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"patient\" : {\n    optional: true,\n    blackbox: true,\n    type: Object\n  },\n  \"patient\" : {\n    optional: true,\n    blackbox: true,\n    type: ReferenceSchema\n  },\n  \"onsetDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"onsetAge\" : {\n    optional: true,\n    type: Number\n  },\n  \"onsetPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"onsetRange\" : {\n    optional: true,\n    type: Range\n  },\n  \"onsetString\" : {\n    optional: true,\n    type: String\n  },\n  \"recorder\" : {\n    optional: true,\n    blackbox: true,\n    type: ReferenceSchema\n  },\n  \"asserter\" : {\n    optional: true,\n    blackbox: true,\n    type: ReferenceSchema\n  },\n  \"lastOccurence\" : {\n    optional: true,\n    type: Date\n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema\n  },  \n  \"reaction\" : {\n    optional: true,\n    type: Array\n  },\n  \"reaction.$\" : {\n    optional: true,\n    type: Object\n  },\n  \"reaction.$.substance\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reaction.$.manifestation\" : {\n    optional: true,\n    type: Array\n  },\n  \"reaction.$.manifestation.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },  \n  \"reaction.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"reaction.$.onset\" : {\n    optional: true,\n    type: Date\n  },\n  \"reaction.$.severity\" : {\n    optional: true,\n    type: String\n  },\n  \"reaction.$.exposureRoute\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reaction.$.note\" : {\n    optional: true,\n    type: AnnotationSchema\n  }\n});\n\nAllergyIntoleranceSchema = AllergyIntoleranceStu3;\n\nBaseSchema.extend(AllergyIntoleranceSchema);\nDomainResourceSchema.extend(AllergyIntoleranceSchema);\nAllergyIntolerances.attachSchema(AllergyIntoleranceSchema);\n\n\nexport default { AllergyIntolerance, AllergyIntolerances, AllergyIntoleranceSchema, AllergyIntoleranceStu3, AllergyIntoleranceDstu2 };","\n\nimport AllergyIntolerancesPage from './client/AllergyIntolerancesPage';\nimport AllergyIntolerancesTable from './client/AllergyIntolerancesTable';\nimport AllergyIntoleranceDetail from './client/AllergyIntoleranceDetail';\n// import { AllergyIntolerance, AllergyIntolerances, AllergyIntoleranceSchema } from './lib/AllergyIntolerances';\n\nvar DynamicRoutes = [{\n  'name': 'AllergyIntolerancesPage',\n  'path': '/allergies',\n  'component': AllergyIntolerancesPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Allergies & Intolerances',\n  'to': '/allergies',\n  'href': '/allergies'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  AllergyIntolerancesPage,\n  AllergyIntolerancesTable,\n  AllergyIntoleranceDetail\n};\n\n\n","// =======================================================================\n// Using DSTU2  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//\n// https://www.hl7.org/fhir/DSTU2/allergyintolerance.html\n//\n//\n// =======================================================================\n\nimport { CardActions, CardText, DatePicker, RaisedButton, TextField, SelectField, MenuItem } from 'material-ui';\nimport { Col, Grid, Row } from 'react-bootstrap';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport React, { Component } from 'react';\nimport update from 'immutability-helper';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { browserHistory } from 'react-router';\nimport { get, set, setWith, clone, cloneDeep } from 'lodash';\nimport PropTypes from 'prop-types';\n\n\nexport class AllergyIntoleranceDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allergyIntoleranceId: false,\n      allergy: {\n        resourceType: \"AllergyIntolerance\",\n          identifier: [{\n            value: ''\n          }],\n          clinicalStatus: 'active',\n          verificationStatus: 'unconfirmed',\n          type: 'allergy',\n          category: ['food'],\n          code: null,\n          patient: {\n            display: ''\n          },\n          recorder: {\n            display: ''\n          },\n          onsetDateTime: null,\n          reaction: [{\n            description: ''\n          }],\n          criticality: 'low'\n      },\n      form: {\n        allergyIdentifier: '',\n        reactionDescription: '',\n        clinicalStatus: 0,\n        verificationStatus: 0,\n        category: 0,\n        type: 0,\n        criticality: 0,\n        patientDisplay: '',\n        recorderDisplay: ''\n      }\n    }\n  }\n  dehydrateFhirResource(allergyIntolerance) {\n\n    let formData = Object.assign({}, this.state.form);\n\n    formData.allergyIdentifier = get(allergyIntolerance, 'identifier[0].value')\n    formData.reactionDescription = get(allergyIntolerance, 'reaction[0].description')    \n    formData.patientDisplay = get(allergyIntolerance, 'patient.display')\n    formData.recorderDisplay = get(allergyIntolerance, 'recorder.display')\n\n    switch (get(allergyIntolerance, 'clinicalStatus')) {\n      case 'active':\n        formData.clinicalStatus = 0;  \n        break;\n      case 'inactive':\n        formData.clinicalStatus = 1;         \n        break;\n      case 'resolved':\n        formData.clinicalStatus = 2;     \n        break;      \n    }\n\n    switch (get(allergyIntolerance, 'verificationStatus')) {\n      case 'unconfirmed':\n        formData.verificationStatus = 0;  \n        break;\n      case 'confirmed':\n        formData.verificationStatus = 1;         \n        break;\n      case 'refuted':\n        formData.verificationStatus = 2;     \n        break;      \n      case 'entered-in-error':\n        formData.verificationStatus = 3;     \n        break;      \n    }\n\n    switch (get(allergyIntolerance, 'category')) {\n      case 'food':\n        formData.category = 0;  \n        break;\n      case 'medication':\n        formData.category = 1;         \n        break;\n      case 'environment':\n        formData.category = 2;     \n        break;      \n      case 'biologic':\n        formData.category = 3;     \n        break;      \n    }\n\n    switch (get(allergyIntolerance, 'type')) {\n      case 'allergy':\n        formData.type = 0;  \n        break;\n      case 'intollerance':\n        formData.type = 1;         \n        break;\n    }\n\n    switch (get(allergyIntolerance, 'criticality')) {\n      case 'low':\n        formData.criticality = 0;  \n        break;\n      case 'high':\n        formData.criticality = 1;         \n        break;\n      case 'unable-to-assess':\n        formData.criticality = 2;     \n        break;      \n    }\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('AllergyIntoleranceDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.allergy === this.state.allergy){\n      shouldUpdate = false;\n    }\n\n    // received an allergie from the table; okay lets update again\n    if(nextProps.allergyIntoleranceId !== this.state.allergyIntoleranceId){\n      this.setState({allergyIntoleranceId: nextProps.allergyIntoleranceId})     \n      this.setState({allergy: nextProps.allergy})     \n      this.setState({form: this.dehydrateFhirResource(nextProps.allergy)})     \n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n\n  getMeteorData() {\n    let data = {\n      allergyIntoleranceId: this.props.allergyIntoleranceId,\n      allergy: false,\n      form: this.state.form,\n      showDatePicker: false      \n    };\n\n    if(this.props.showDatePicker){\n      data.showDatePicker = this.props.showDatePicker\n    }\n    if(this.props.allergy){\n      data.allergy = this.props.allergy;\n    }\n    \n    console.log('AllergyIntoleranceDetail[data]', data);\n    return data;\n  }\n  renderDatePicker(showDatePicker, datePickerValue){\n    if (typeof datePickerValue === \"string\"){\n      datePickerValue = new Date(datePickerValue);\n    }\n    if (showDatePicker) {\n      return (\n        <DatePicker \n          name='datePicker'\n          hintText=\"Date of Confirmation\" \n          container=\"inline\" \n          mode=\"landscape\"\n          value={ datePickerValue ? datePickerValue : null}    \n          onChange={ this.changeState.bind(this, 'datePicker')}      \n          />\n      );\n    }\n  }\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('AllergyIntoleranceDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"allergyIntoleranceDetail\">\n        <CardText>\n          <Row>\n            <Col md={3} >\n              <SelectField\n                id='clinicalStatusInput'\n                ref='clinicalStatus'\n                name='clinicalStatus'\n                floatingLabelText='Clinical Status'\n                value={ get(formData, 'clinicalStatus', '') }\n                onChange={ this.changeState.bind(this, 'clinicalStatus')}\n                floatingLabelFixed={true}\n                fullWidth\n              >\n                <MenuItem value={0} primaryText=\"active\" />\n                <MenuItem value={1} primaryText=\"inactive\" />\n                <MenuItem value={2} primaryText=\"resolved\" />\n              </SelectField>\n\n\n            </Col>\n            <Col md={3} >\n              <SelectField\n                id='verificationStatusInput'\n                ref='verificationStatus'\n                name='verificationStatus'\n                floatingLabelText='Verification Status'\n                value={ get(formData, 'verificationStatus', '') }\n                onChange={ this.changeState.bind(this, 'verificationStatus')}\n                floatingLabelFixed={true}\n                fullWidth\n              >\n                <MenuItem value={0} primaryText=\"unconfirmed\" />\n                <MenuItem value={1} primaryText=\"confirmed\" />\n                <MenuItem value={2} primaryText=\"refuted\" />\n                <MenuItem value={3} primaryText=\"entered-in-error\" />\n              </SelectField>\n\n            </Col>\n\n            <Col md={3} >\n              <SelectField\n                  id='categoryInput'\n                  ref='category'\n                  name='category'\n                  floatingLabelText='Category'\n                  value={ get(formData, 'category', '') }\n                  onChange={ this.changeState.bind(this, 'category')}\n                  floatingLabelFixed={true}\n                  fullWidth\n                >\n                  <MenuItem value={0} primaryText=\"food\" />\n                  <MenuItem value={1} primaryText=\"medication\" />\n                  <MenuItem value={2} primaryText=\"environment\" />\n                  <MenuItem value={3} primaryText=\"biologic\" />\n                </SelectField>\n\n            </Col>\n            <Col md={3} >\n              <SelectField\n                id='typeInput'\n                ref='type'\n                name='type'\n                floatingLabelText='Type'\n                value={ get(formData, 'type', '') }\n                onChange={ this.changeState.bind(this, 'type')}\n                floatingLabelFixed={true}\n                fullWidth\n              >\n                <MenuItem value={0} primaryText=\"allergy\" />\n                <MenuItem value={1} primaryText=\"intollerance\" />\n              </SelectField>\n\n            </Col>\n          </Row>\n\n          <Row>\n            <Col md={4} >\n              <TextField\n                id='identifierInput'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'            \n                value={ get(formData, 'allergyIdentifier', '') }\n                onChange={ this.changeState.bind(this, 'identifier')}\n                hintText=\"Shellfish\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4} >\n              <TextField\n                id='reactionInput'\n                ref='reaction'\n                name='reaction'\n                floatingLabelText='Reaction Description'\n                value={ get(formData, 'reactionDescription', '') }\n                onChange={ this.changeState.bind(this, 'reaction')}\n                hintText=\"Hives\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4} >\n              <SelectField\n                id='criticalityInput'\n                ref='criticality'\n                name='criticality'\n                floatingLabelText='Criticality'\n                value={ get(formData, 'criticality', '') }\n                onChange={ this.changeState.bind(this, 'criticality')}\n                floatingLabelFixed={true}\n                fullWidth\n              >\n                <MenuItem value={0} primaryText=\"low\" />\n                <MenuItem value={1} primaryText=\"high\" />\n                <MenuItem value={2} primaryText=\"unable-to-assess\" />\n              </SelectField>\n\n            </Col>            \n          </Row>\n          <Row>\n            <Col md={4} >\n              <TextField\n                id='patientDisplayInput'\n                ref='patientDisplay'\n                name='patientDisplay'\n                floatingLabelText='Patient'\n                value={ get(formData, 'patientDisplay', '') }\n                onChange={ this.changeState.bind(this, 'patientDisplay')}\n                hintText=\"Jane Doe\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4} >\n              <TextField\n                id='recorderDisplayInput'\n                ref='recorderDisplay'\n                name='recorderDisplay'\n                floatingLabelText='Recorder'\n                value={ get(formData, 'recorderDisplay', '') }\n                onChange={ this.changeState.bind(this, 'recorderDisplay')}\n                hintText=\"Nurse Jackie\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n\n          <br/>\n          { this.renderDatePicker(this.data.showDatePicker, get(this, 'data.allergy.onsetDateTime') ) }\n          <br/>\n          \n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.state.allergyIntoleranceId ) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(allergyId){\n    if (allergyId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateAllergyIntoleranceButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this) } style={{marginRight: '20px'}} />\n          <RaisedButton id=\"deleteAllergyIntoleranceButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this) } />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveAllergyIntoleranceButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this) } />\n      );\n    }\n  }\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"AllergyIntoleranceDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"identifier\":\n        set(formData, 'allergyIdentifier', textValue)\n        break;\n      case \"reaction\":\n        set(formData, 'reactionDescription', textValue)\n        break;        \n      case \"verificationStatus\":\n        set(formData, 'verificationStatus', textValue)\n        break;\n      case \"clinicalStatus\":\n        set(formData, 'clinicalStatus', textValue)\n        break;\n      case \"type\":\n        set(formData, 'type', textValue)\n        break;\n      case \"category\":\n        set(formData, 'category', textValue)\n        break;\n      case \"patientDisplay\":\n        set(formData, 'patientDisplay', textValue)\n        break;\n      case \"recorderDisplay\":\n        set(formData, 'recorderDisplay', textValue)\n        break;\n      case \"datePicker\":\n        set(formData, 'onsetDateTime', textValue)\n        break;\n      case \"criticality\":\n        set(formData, 'criticality', textValue)\n        break;  \n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    return formData;\n  }\n  updateAllergy(allergyData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"AllergyIntoleranceDetail.updateAllergy\", allergyData, field, textValue);\n\n    switch (field) {\n      case \"identifier\":\n        setWith(allergyData, 'identifier[0].value', textValue, Object)\n        break;\n      case \"reaction\":\n        setWith(allergyData, 'reaction[0].description', textValue, Object)\n        break;        \n      case \"verificationStatus\":\n        switch (textValue) {\n          case 0:\n            set(allergyData, 'verificationStatus', 'unconfirmed')\n            break;\n          case 1:\n            set(allergyData, 'verificationStatus', 'confirmed')\n            break;\n          case 2:\n            set(allergyData, 'verificationStatus', 'refuted')\n            break;\n          case 3:\n            set(allergyData, 'verificationStatus', 'entered-in-error')\n            break;\n        }       \n        break;\n      case \"clinicalStatus\":\n        switch (textValue) {\n          case 0:\n            set(allergyData, 'clinicalStatus', 'active')\n            break;\n          case 1:\n            set(allergyData, 'clinicalStatus', 'inactive')\n            break;\n          case 2:\n            set(allergyData, 'clinicalStatus', 'resolved')\n            break;\n        }        \n        break;\n      case \"type\":\n        switch (textValue) {\n          case 0:\n            set(allergyData, 'type', 'allergy')\n            break;\n          case 1:\n            set(allergyData, 'type', 'intolerance')\n            break;\n        }   \n        break;\n      case \"category\":\n        switch (textValue) {\n          case 0:\n            set(allergyData, 'category', ['food'])\n            break;\n          case 1:\n            set(allergyData, 'category', ['medication'])\n            break;\n          case 2:\n            set(allergyData, 'category', ['environment'])\n            break;\n          case 3:\n            set(allergyData, 'category', ['biologic'])\n            break;\n        }   \n        break;\n      case \"datePicker\":\n        set(allergyData, 'onsetDateTime', textValue)\n        break;\n      case \"criticality\":\n        switch (textValue) {\n          case 0:\n            set(allergyData, 'criticality', 'low')\n            break;\n          case 1:\n            set(allergyData, 'criticality', 'high')\n            break;\n          case 2:\n            set(allergyData, 'criticality', 'unable-to-assess')\n            break;\n        }   \n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"allergyData\", allergyData);\n\n    return allergyData;\n  }\n  componentDidUpdate(props){\n    if(process.env.NODE_ENV === \"test\") console.log('AllergyIntoleranceDetail.componentDidUpdate()', props, this.state)\n  }\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"AllergyIntoleranceDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let allergyData = Object.assign({}, this.state.allergy);\n\n    formData = this.updateFormData(formData, field, textValue);\n    allergyData = this.updateAllergy(allergyData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"allergyData\", allergyData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({allergy: allergyData})\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    console.log('Saving a new Allergy...', this.state)\n\n    let self = this;\n    let fhirAllergyData = Object.assign({}, this.state.allergy);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirAllergyData', fhirAllergyData);\n\n    let schemaConfig = get(Meteor, 'settings.public.defaults.schemas')\n    if(process.env.NODE_ENV === \"test\") console.log('Meteor.settings.public.defaults.schemas', schemaConfig);\n\n    if (this.state.allergyIntoleranceId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating allergyIntolerance...\");\n      delete fhirAllergyData._id;\n\n      AllergyIntolerances._collection.update(\n        {_id: this.state.allergyIntoleranceId}, {$set: fhirAllergyData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"AllergyIntolerances\", recordId: self.data.allergyIntoleranceId});\n            Session.set('allergyIntolerancePageTabIndex', 1);\n            Session.set('selectedAllergyIntolerance', false);\n            Bert.alert('AllergyIntolerance updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"Create a new allergyIntolerance\", fhirAllergyData);\n\n      AllergyIntolerances._collection.insert(fhirAllergyData, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"AllergyIntolerances\", recordId: self.data.allergyIntoleranceId});\n          Session.set('allergyIntolerancePageTabIndex', 1);\n          Session.set('selectedAllergyIntolerance', false);\n          Bert.alert('AllergyIntolerance added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('allergyIntolerancePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    AllergyIntolerances._collection.remove({_id: this.state.allergyIntoleranceId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"AllergyIntolerances\", recordId: self.data.allergyIntoleranceId});\n        Session.set('allergyIntolerancePageTabIndex', 1);\n        Session.set('selectedAllergyIntolerance', false);\n        Bert.alert('AllergyIntolerance removed!', 'success');\n      }\n    });\n  }\n}\n\nAllergyIntoleranceDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  allergyIntoleranceId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  allergyIntolerance: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(AllergyIntoleranceDetail.prototype, ReactMeteorData);\nexport default AllergyIntoleranceDetail;","// =======================================================================\n// Using DSTU2  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//\n// https://www.hl7.org/fhir/DSTU2/allergyintolerance.html\n//\n//\n// =======================================================================\n\nimport { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport AllergyIntoleranceDetail from './AllergyIntoleranceDetail';\nimport AllergyIntolerancesTable from './AllergyIntolerancesTable';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\n\nSession.setDefault('fhirVersion', 'v1.0.2');\nSession.setDefault('selectedAllergyIntolerance', false);\n\nexport class AllergyIntolerancesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('allergyIntolerancePageTabIndex'),\n      allergyIntoleranceSearchFilter: Session.get('allergyIntoleranceSearchFilter'),\n      allergyIntoleranceId: Session.get('selectedAllergyIntolerance'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedAllergy: false\n    };\n\n    if (Session.get('selectedAllergyIntolerance')){\n      data.selectedAllergy = AllergyIntolerances.findOne({_id: Session.get('selectedAllergyIntolerance')});\n    } else {\n      data.selectedAllergy = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('allergyIntolerancePageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedAllergyIntolerance', false);\n    Session.set('allergyIntoleranceUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In AllergyIntolerancesPage render');\n    return (\n      <div id='allergyIntolerancesPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Allergy Intolerances' />\n            <CardText>\n              <Tabs id=\"allergyIntolerancesPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newAllergyIntoleranceTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <AllergyIntoleranceDetail \n                  id='newAllergyIntolerance' \n                  fhirVersion={ this.data.fhirVersion }\n                  allergy={ this.data.selectedAllergy }\n                  allergyIntoleranceId={ this.data.allergyIntoleranceId } />\n               </Tab>\n               <Tab className=\"allergyIntoleranceListTab\" label='AllergyIntolerances' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <AllergyIntolerancesTable id='allergyIntolerancesTable' fhirVersion={ this.data.fhirVersion } />\n               </Tab>\n               <Tab className=\"allergyIntoleranceDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <AllergyIntoleranceDetail \n                    id='allergyIntoleranceDetails' \n                    showDatePicker={true} \n                    fhirVersion={ this.data.fhirVersion }\n                    allergy={ this.data.selectedAllergy }\n                    allergyIntoleranceId={ this.data.allergyIntoleranceId } />\n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(AllergyIntolerancesPage.prototype, ReactMeteorData);\n\nexport default AllergyIntolerancesPage;","// =======================================================================\n// Using DSTU2  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//\n// https://www.hl7.org/fhir/DSTU2/allergyintolerance.html\n//\n//\n// =======================================================================\n\n\nimport { Card, CardActions, CardMedia, CardText, CardTitle } from 'material-ui/Card';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { moment } from 'meteor/momentjs:moment';\nimport { get } from 'lodash';\n\nexport class AllergyIntolerancesTable extends React.Component {\n\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      allergyIntolerances: [],\n      displayToggle: false,\n      displayIdentifier: false,\n      displayDates: false,\n      displayStatus: false,\n      displayVerification: false,\n      displayType: false,\n      displayCategory: false,\n      fhirVersion: 'v1.0.2'\n    }\n\n    // STU3 v3.0.1\n    if(this.props.displayStatus){\n      data.displayStatus = this.props.displayStatus;\n    }\n    if(this.props.displayVerification){\n      data.displayVerification = this.props.displayVerification;\n    }\n\n\n    // DSTU2 v1.0.2\n    if(this.props.displayIdentifier){\n      data.displayIdentifier = this.props.displayIdentifier;\n    }\n    if(this.props.displayType){\n      data.displayType = this.props.displayType;\n    }\n    if(this.props.displayCategory){\n      data.displayCategory = this.props.displayCategory;\n    }\n    if(this.props.fhirVersion){\n      data.fhirVersion = this.props.fhirVersion;\n      switch (this.props.fhirVersion) {\n        case 'v1.0.2':\n            data.displayToggle = false;\n            data.displayDates = true;\n            data.displayIdentifier = true;\n            data.displayStatus = false;\n            data.displayVerification = false;\n            data.displayType = true;\n            data.displayCategory = true;\n          break;      \n        case 'v3.0.1':\n          data.displayToggle = false;\n          data.displayDates = true;\n          data.displayIdentifier = true;\n          data.displayStatus = true;\n          data.displayVerification = true;\n          data.displayType = true;\n          data.displayCategory = true;\n        break;      \n      default:\n          break;\n      }\n    }\n\n    // Workflow Items\n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n\n    // Data\n    if(this.props.data){\n      data.allergyIntolerances = this.props.data;\n    } else {\n      if(AllergyIntolerances.find().count() > 0){\n        data.allergyIntolerances = AllergyIntolerances.find().fetch();\n      }  \n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"AllergyIntolerancesTable[data]\", data);\n    return data;\n  };\n\n  renderTogglesHeader(displayToggle){\n    if (displayToggle) {\n      return (\n        <th className=\"toggle\">toggle</th>\n      );\n    }\n  }\n  renderToggles(displayToggle, patientId ){\n    if (displayToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n            />\n          </td>\n      );\n    }\n  }\n\n  renderIdentifierHeader(displayIdentifier){\n    if (displayIdentifier) {\n      return (\n        <th className=\"identifier\">identifier</th>\n      );\n    }\n  }\n  renderIdentifier(displayIdentifier, allergyIntolerances ){\n    if (displayIdentifier) {\n      \n      return (\n        <td className='identifier'>{ get(allergyIntolerances, 'identifier[0].value') }</td>       );\n    }\n  }\n\n  renderDateHeader(displayDates){\n    if (displayDates) {\n      return (\n        <th className='date'>date</th>\n      );\n    }\n  }\n  renderDate(displayDates, newDate ){\n    if (displayDates) {\n      return (\n        <td className='date'>{ moment(newDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n\n\n\n  renderClinicalStatusHeader(displayStatus){\n    if (displayStatus) {\n      return (\n        <th className=\"clinicalStatus\">status</th>\n      );\n    }\n  }\n  renderClinicalStatus(displayStatus, allergyIntolerances ){\n    if (displayStatus) {\n      return (\n        <td className='clinicalStatus'>{ get(allergyIntolerances, 'clinicalStatus') }</td>       );\n    }\n  }\n\n  renderVerificationStatusHeader(displayVerification){\n    if (displayVerification) {\n      return (\n        <th className=\"verificationStatus\">verification</th>\n      );\n    }\n  }\n  renderVerificationStatus(displayVerification, allergyIntolerances ){\n    if (displayVerification) {\n      return (\n        <td className='verificationStatus'>{ get(allergyIntolerances, 'verificationStatus') }</td>       );\n    }\n  }\n\n\n  renderTypeHeader(displayType){\n    if (displayType) {\n      return (\n        <th className=\"type\">type</th>\n      );\n    }\n  }\n  renderType(displayType, allergyIntolerances ){\n    if (displayType) {\n      return (\n        <td className='type'>{ get(allergyIntolerances, 'type') }</td>       );\n    }\n  }\n  renderCategoryHeader(displayCategory){\n    if (displayCategory) {\n      return (\n        <th className=\"category\">category</th>\n      );\n    }\n  }\n  renderCategory(displayCategory, allergyIntolerances ){\n    if (displayCategory) {\n      return (\n        <td className='category'>{ get(allergyIntolerances, 'category[0]') }</td>       );\n    }\n  }\n\n  rowClick(id){\n    Session.set('allergyIntolerancesUpsert', false);\n    Session.set('selectedAllergyIntolerance', id);\n    Session.set('allergyIntolerancePageTabIndex', 2);\n  };\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.allergyIntolerances.length; i++) {\n      var newRow = {\n        patientDisplay: '',\n        asserterDisplay: '',\n        identifier: '',\n        type: '',\n        category: '',\n        clinicalStatus: '',\n        verificationStatus: '',\n        snomedCode: '',\n        snomedDisplay: '',\n        evidenceDisplay: '',\n        barcode: '',\n        criticality: '',\n        patient: '',\n        recorder: '', \n        reaction: '',\n        onset: ''\n      };\n\n      newRow.identifier = get(this.data.allergyIntolerances[i], 'identifier[0].value');\n      newRow.clinicalStatus = get(this.data.allergyIntolerances[i], 'clinicalStatus');\n      newRow.verificationStatus = get(this.data.allergyIntolerances[i], 'verificationStatus');\n      newRow.type = get(this.data.allergyIntolerances[i], 'type');\n      newRow.category = get(this.data.allergyIntolerances[i], 'category[0]');\n\n      if(get(this.data.allergyIntolerances[i], 'code.coding[0]')){            \n        newRow.snomedCode = get(this.data.allergyIntolerances[i], 'code.coding[0].code');\n        newRow.snomedDisplay = get(this.data.allergyIntolerances[i], 'code.coding[0].display');\n      }\n\n      // DSTU2 v1.0.2\n      newRow.patient = get(this.data.allergyIntolerances[i], 'patient.display');\n      newRow.recorder = get(this.data.allergyIntolerances[i], 'recorder.display');\n      newRow.reaction = get(this.data.allergyIntolerances[i], 'reaction[0].description');\n      newRow.onset = moment(get(this.data.allergyIntolerances[i], 'reaction[0].onset')).format(\"YYYY-MM-DD\");\n\n      if(get(this.data.allergyIntolerances[i], 'criticality')){\n        switch (get(this.data.allergyIntolerances[i], 'criticality')) {\n          case \"CRITL\":\n            newRow.criticality = 'Low Risk';         \n            break;\n          case \"CRITH\":\n            newRow.criticality = 'High Risk';         \n            break;\n          case \"CRITU\":\n            newRow.criticality = 'Unable to determine';         \n            break;        \n          default:\n            newRow.criticality = get(this.data.allergyIntolerances[i], 'criticality');    \n          break;\n        }\n      };\n\n      tableRows.push(\n        <tr key={i} className=\"allergyIntoleranceRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.allergyIntolerances[i]._id)} >\n          { this.renderToggles(this.data.displayToggle, this.data.allergyIntolerances[i]) }\n          { this.renderIdentifier(this.data.displayIdentifier, this.data.allergyIntolerances[i]) }\n          <td className='reaction'>{ newRow.reaction }</td>\n          <td className='criticality'>{ newRow.criticality }</td>\n          { this.renderType(this.data.displayType, this.data.allergyIntolerances[i]) }\n          { this.renderCategory(this.data.displayCategory, this.data.allergyIntolerances[i]) }\n          <td className='patient'>{ newRow.patient }</td>\n          <td className='recorder'>{ newRow.recorder }</td>\n          <td className='onset'>{ newRow.onset }</td>\n          { this.renderClinicalStatus(this.data.displayStatus, this.data.allergyIntolerances[i]) }\n          { this.renderVerificationStatus(this.data.displayVerification, this.data.allergyIntolerances[i]) }\n          { this.renderVerificationStatus(this.data.displayVerification, this.data.allergyIntolerances[i]) }\n          { this.renderDate(this.data.displayDates, this.data.allergyIntolerances[i].assertedDate) }\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='allergyIntolerancesTable' hover >\n        <thead>\n          <tr>\n            { this.renderTogglesHeader(this.data.displayToggle) }\n            { this.renderIdentifierHeader(this.data.displayIdentifier) }\n            <th className='reaction'>Reaction</th>\n            <th className='criticality'>Criticality</th>\n            { this.renderTypeHeader(this.data.displayType) }\n            { this.renderCategoryHeader(this.data.displayCategory) }\n            <th className='patient'>Patient</th>\n            <th className='recorder'>Recorder</th>\n            <th className='onsert'>Onset</th>\n            { this.renderClinicalStatusHeader(this.data.displayStatus) }\n            { this.renderVerificationStatusHeader(this.data.displayVerification) }\n            { this.renderDateHeader(this.data.displayDates) }\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nReactMixin(AllergyIntolerancesTable.prototype, ReactMeteorData);\nexport default AllergyIntolerancesTable;"]}