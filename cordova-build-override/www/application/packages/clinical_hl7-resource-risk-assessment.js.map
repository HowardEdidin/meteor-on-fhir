{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-risk-assessment/lib/RiskAssessments.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-risk-assessment/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-risk-assessment/client/RiskAssessmentDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-risk-assessment/client/RiskAssessmentsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-risk-assessment/client/RiskAssessmentsTable.js"],"names":["SimpleSchema","module","link","v","Package","console","log","RiskAssessment","BaseModel","extend","prototype","_collection","RiskAssessments","Mongo","Collection","connection","_transform","document","RiskAssessmentSchema","type","String","defaultValue","optional","Array","IdentifierSchema","ReferenceSchema","Date","CodeableConceptSchema","Object","Number","RangeSchema","PeriodSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","RiskAssessmentsPage","RiskAssessmentsTable","RiskAssessmentDetail","CardActions","CardText","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","PropTypes","Col","Grid","Row","get","set","props","state","riskAssessmentId","riskAssessment","resourceType","subject","display","reference","date","condition","encounter","performer","basis","prediction","title","outcome","text","probabilityDecimal","rational","mitigation","form","subjectDisplay","subjectReference","conditionDisplay","conditionReference","performerDisplay","performerReference","predictionOutcome","dehydrateFhirResource","assessment","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","shouldUpdate","setState","getMeteorData","data","render","id","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateRiskAssessment","riskAssessmentData","event","self","fhirRiskAssessmentData","riskAssessmentValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","Meteor","userName","user","fullName","collectionName","recordId","Session","insert","handleCancelButton","remove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","setDefault","f","style","opacity","tab","borderBottom","borderRight","tabIndex","riskAssessmentSearchFilter","selectedRiskAssessmentId","selectedRiskAssessment","selectedDevice","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Card","CardMedia","Table","selected","riskAssessments","find","fetch","rowClick","tableRows","i","length","newRow","push","cursor"],"mappings":"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","file":"/packages/clinical_hl7-resource-risk-assessment.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\nif(Package['clinical:autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n  console.log(\"Any protected health information (PHI) stored in this app should be audited.\"); \n  console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");  \n  console.log(\"\");  \n  console.log(\"meteor remove clinical:autopublish\");  \n  console.log(\"\");  \n}\nif(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");  \n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"meteor add clinical:autopublish\");  \n  console.log(\"\");  \n}\n\n\n// create the object using our BaseModel\nRiskAssessment = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nRiskAssessment.prototype._collection = RiskAssessments;\n\n\nif(typeof RiskAssessments === 'undefined'){\n  if(Package['clinical:autopublish']){\n    RiskAssessments = new Mongo.Collection('RiskAssessments');\n  } else if(Package['clinical:desktop-publish']){    \n    RiskAssessments = new Mongo.Collection('RiskAssessments');\n  } else {\n    RiskAssessments = new Mongo.Collection('RiskAssessments', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nRiskAssessments._transform = function (document) {\n  return new RiskAssessment(document);\n};\n\n\n\n\nRiskAssessmentSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"RiskAssessment\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },  \n  \"text\" : {\n    optional: true,\n    type: String\n   },\n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n   }, // Who/what does assessment apply to?\n  \"date\" : {\n    optional: true,\n    type: Date\n  }, // When was assessment made?\n  \"condition\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Condition) assessed\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Encounter) Where was assessment performed?\n  \"performer\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Practitioner|Device) Who did assessment?\n\n  \"method\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Evaluation mechanism\n  \"basis\" : {\n    optional: true,\n    type: Array\n  }, // Information used in assessment\n  \"basis.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  }, // Information used in assessment\n  \"prediction.$.title\" : {\n    optional: true,\n    type: String\n  }, // R!  Possible outcome for the subject\n  \"prediction\" : {\n    optional: true,\n    type:  Array\n    },\n  \"prediction.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"prediction.$.outcome\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // R!  Possible outcome for the subject\n  \"prediction.$.probabilityDecimal\" : {\n    optional: true,\n    type: Number\n  },\n  \"prediction.$.probabilityRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"prediction.$.probabilityCodeableConcept\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"prediction.$.relativeRisk\" : {\n    optional: true,\n    type: Number\n  }, // Relative likelihood\n  \"prediction.$.whenPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"prediction.$.whenRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"prediction.$.rational\" : {\n    optional: true,\n    type: String\n  }, // Explanation of prediction\n  \"mitigation\" : {\n    optional: true,\n    type: String\n  }\n\n});\n\nBaseSchema.extend(RiskAssessmentSchema);\nDomainResourceSchema.extend(RiskAssessmentSchema);\n\nRiskAssessments.attachSchema(RiskAssessmentSchema);\n\nexport default { RiskAssessment, RiskAssessments, RiskAssessmentSchema };","\n\nimport RiskAssessmentsPage from './client/RiskAssessmentsPage';\nimport RiskAssessmentsTable from './client/RiskAssessmentsTable';\nimport { RiskAssessment, RiskAssessments, RiskAssessmentSchema } from './lib/RiskAssessments';\n\nvar DynamicRoutes = [{\n  'name': 'RiskAssessmentsPage',\n  'path': '/risk-assessments',\n  'component': RiskAssessmentsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Risk Assessments',\n  'to': '/risk-assessments',\n  'href': '/risk-assessments'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  RiskAssessmentsPage,\n  RiskAssessmentsTable\n};\n\n\n","import { CardActions, CardText } from 'material-ui/Card';\n\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { Col, Grid, Row } from 'react-bootstrap';\nimport { get, set } from 'lodash';\n\n\n\n\nexport class RiskAssessmentDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      riskAssessmentId: false,\n      riskAssessment: {\n        resourceType: \"RiskAssessment\",\n        subject: {\n          display: \"\",\n          reference: \"\"\n        },\n        date: null,\n        condition: {\n          reference: \"\",\n          display: \"\"\n        },\n        encounter: {},\n        performer: {\n          display: \"\",\n          reference: \"\"\n        },\n        basis:[{\n          display: \"\",\n          reference: \"\"\n        }],\n        prediction: [{\n          title: \"\",\n          outcome: {\n            text: \"\"\n          },\n          probabilityDecimal: 0,\n          rational: \"\"\n        }],\n        mitigation: \"\"\n      },\n      form: {\n        subjectDisplay: '',\n        subjectReference: '',\n        conditionDisplay: '',\n        conditionReference: '',\n        performerDisplay: '',\n        performerReference: '',\n        text: '',\n        date: '',\n        predictionOutcome: '',\n        probabilityDecimal: ''\n      }\n    }\n  }\n  dehydrateFhirResource(assessment) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.subjectDisplay = get(assessment, 'subject.display')\n    formData.subjectReference = get(assessment, 'subject.reference')    \n    formData.conditionDisplay = get(assessment, 'condition.display')\n    formData.conditionReference = get(assessment, 'condition.reference')\n    formData.performerDisplay = get(assessment, 'performer.display')\n    formData.performerReference = get(assessment, 'performer.reference')\n    formData.date = get(assessment, 'date')\n    formData.predictionOutcome = get(assessment, 'prediction[0].outcome.text')\n    formData.probabilityDecimal = get(assessment, 'prediction[0].probabilityDecimal')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('RiskAssessmentDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.riskAssessment === this.state.riskAssessment){\n      shouldUpdate = false;\n    }\n\n    // received an riskAssessment from the table; okay lets update again\n    if(nextProps.riskAssessmentId !== this.state.riskAssessmentId){\n      this.setState({riskAssessmentId: nextProps.riskAssessmentId})\n      \n      if(nextProps.riskAssessment){\n        this.setState({riskAssessment: nextProps.riskAssessment})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.riskAssessment)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      riskAssessmentId: this.props.riskAssessment,\n      riskAssessment: false,\n      form: this.state.form\n    };\n\n    if(this.props.riskAssessment){\n      data.riskAssessment = this.props.riskAssessment;\n    }\n\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('RiskAssessmentDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"riskAssessmentDetail\">\n        <CardText>\n          <Row>\n            <Col md={6}>\n              <Row>\n                <Col md={8}>\n                  <TextField\n                    id='subjectDisplayInput'\n                    ref='subjectDisplay'\n                    name='subjectDisplay'\n                    floatingLabelText='Subject'\n                    value={ get(formData, 'subjectDisplay') }\n                    onChange={ this.changeState.bind(this, 'subjectDisplay')}\n                    hintText='Jane Doe'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>\n                </Col>\n                <Col md={4}>\n                  <TextField\n                    id='subjectReferenceInput'\n                    ref='subjectReference'\n                    name='subjectReference'\n                    floatingLabelText='Subject'\n                    value={ get(formData, 'subjectReference') }\n                    onChange={ this.changeState.bind(this, 'subjectReference')}\n                    hintText='Patient/12345'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>\n                </Col>\n              </Row>\n              <Row>\n                <Col md={8}>\n                  <TextField\n                    id='conditionDisplayInput'\n                    ref='conditionDisplay'\n                    name='conditionDisplay'\n                    floatingLabelText='Condition'\n                    value={ get(formData, 'conditionDisplay') }\n                    onChange={ this.changeState.bind(this, 'conditionDisplay')}\n                    hintText='Breast Cancer - Stage IV'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>\n                </Col>\n                <Col md={4}>\n                  <TextField\n                    id='conditionReferenceInput'\n                    ref='conditionReference'\n                    name='conditionReference'\n                    floatingLabelText='Condition'\n                    value={ get(formData, 'conditionReference') }\n                    onChange={ this.changeState.bind(this, 'conditionReference')}\n                    hintText='Condition/777788'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>  \n                </Col>\n              </Row>\n              <Row>\n                <Col md={8}>\n                  <TextField\n                    id='performerDisplayInput'\n                    ref='performerDisplay'\n                    name='performerDisplay'\n                    floatingLabelText='Performer'\n                    value={ get(formData, 'performerDisplay') }\n                    onChange={ this.changeState.bind(this, 'performerDisplay')}\n                    hintText='Dr. James Wilson'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>\n                </Col>\n                <Col md={4}>\n                  <TextField\n                    id='performerReferenceInput'\n                    ref='performerReference'\n                    name='performerReference'\n                    floatingLabelText='Performer'\n                    value={ get(formData, 'performerReference') }\n                    onChange={ this.changeState.bind(this, 'performerReference')}\n                    hintText='Practitioner/3333445'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>                      \n                </Col>\n              </Row>\n              <Row>\n                <Col md={4}>\n                  <TextField\n                    id='dateInput'\n                    ref='date'\n                    name='date'\n                    type='date'\n                    floatingLabelText='Date'\n                    value={ get(formData, 'date') }\n                    onChange={ this.changeState.bind(this, 'date')}\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>   \n                </Col>\n              </Row>\n            </Col>\n            <Col md={6}>\n              <Row>\n                <Col md={12}>\n                  <TextField\n                    id='predictionOutcomeInput'\n                    ref='predictionOutcome'\n                    name='predictionOutcome'\n                    floatingLabelText='Prediction Outcome'\n                    value={ get(formData, 'predictionOutcome') }\n                    onChange={ this.changeState.bind(this, 'predictionOutcome')}\n                    hintText='Melignancy; Death'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>\n                  <TextField\n                    id='probabilityDecimalInput'\n                    ref='probabilityDecimal'\n                    name='probabilityDecimal'\n                    floatingLabelText='Probability Decimal'\n                    value={ get(formData, 'probabilityDecimal') }\n                    onChange={ this.changeState.bind(this, 'probabilityDecimal')}\n                    hintText='18%'\n                    floatingLabelFixed={true}\n                    fullWidth\n                    /><br/>\n                </Col>\n              </Row>\n            </Col>\n          </Row>\n         \n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.state.riskAssessmentId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(riskAssessmentId){\n    if (riskAssessmentId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateRiskAssessmentButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteRiskAssessmentButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveRiskAssessmentButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"RiskAssessmentDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"subjectDisplay\":\n        set(formData, 'subjectDisplay', textValue)\n        break;\n      case \"subjectReference\":\n        set(formData, 'subjectReference', textValue)\n        break;        \n      case \"conditionDisplay\":\n        set(formData, 'conditionDisplay', textValue)\n        break;\n      case \"conditionReference\":\n        set(formData, 'conditionReference', textValue)\n        break;\n      case \"performerDisplay\":\n        set(formData, 'performerDisplay', textValue)\n        break;\n      case \"performerReference\":\n        set(formData, 'performerReference', textValue)\n        break;\n      case \"date\":\n        set(formData, 'date', textValue)\n        break;\n      case \"predictionOutcome\":\n        set(formData, 'predictionOutcome', textValue)\n        break;\n      case \"probabilityDecimal\":\n        set(formData, 'probabilityDecimal', textValue)\n        break;\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateRiskAssessment(riskAssessmentData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"RiskAssessmentDetail.updateRiskAssessment\", riskAssessmentData, field, textValue);\n\n    switch (field) {\n      case \"subjectDisplay\":\n        set(riskAssessmentData, 'subject.display', textValue)\n        break;\n      case \"subjectReference\":\n        set(riskAssessmentData, 'subject.reference', textValue)\n        break;        \n      case \"conditionDisplay\":\n        set(riskAssessmentData, 'condition.display', textValue)\n        break;\n      case \"conditionReference\":\n        set(riskAssessmentData, 'condition.reference', textValue)\n        break;\n      case \"performerDisplay\":\n        set(riskAssessmentData, 'performer.display', textValue)\n        break;\n      case \"performerReference\":\n        set(riskAssessmentData, 'performer.reference', textValue)\n        break;\n      case \"date\":\n        set(riskAssessmentData, 'date', textValue)\n        break;\n      case \"predictionOutcome\":\n        set(riskAssessmentData, 'prediction[0].outcome.text', textValue)\n        break;\n      case \"probabilityDecimal\":\n        set(riskAssessmentData, 'prediction[0].probabilityDecimal', textValue)\n        break;   \n    }\n    return riskAssessmentData;\n  }\n\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"RiskAssessmentDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let riskAssessmentData = Object.assign({}, this.state.riskAssessment);\n\n    formData = this.updateFormData(formData, field, textValue);\n    riskAssessmentData = this.updateRiskAssessment(riskAssessmentData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"riskAssessmentData\", riskAssessmentData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({riskAssessment: riskAssessmentData})\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Risk Assessment...', this.state)\n\n    let self = this;\n    let fhirRiskAssessmentData = Object.assign({}, this.state.riskAssessment);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirRiskAssessmentData', fhirRiskAssessmentData);\n\n\n    let riskAssessmentValidator = RiskAssessmentSchema.newContext();\n    riskAssessmentValidator.validate(fhirRiskAssessmentData)\n\n    console.log('IsValid: ', riskAssessmentValidator.isValid())\n    console.log('ValidationErrors: ', riskAssessmentValidator.validationErrors());\n\n    if (this.state.riskAssessmentId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating riskAssessment...\");\n      delete fhirRiskAssessmentData._id;\n\n      RiskAssessments._collection.update(\n        {_id: this.state.riskAssessmentId}, {$set: fhirRiskAssessmentData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"RiskAssessments\", recordId: self.state.riskAssessmentId});\n            Session.set('riskAssessmentPageTabIndex', 1);\n            Session.set('selectedRiskAssessment', false);\n            Bert.alert('RiskAssessment updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new riskAssessment\", fhirRiskAssessmentData);\n\n      RiskAssessments._collection.insert(fhirRiskAssessmentData, function(error, result) {\n        if (error) {\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"RiskAssessments\", recordId: self.state.riskAssessmentId});\n          Session.set('riskAssessmentPageTabIndex', 1);\n          Session.set('selectedRiskAssessment', false);\n          Bert.alert('RiskAssessment added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('riskAssessmentPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    RiskAssessments._collection.remove({_id: this.state.riskAssessmentId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"RiskAssessments\", recordId: self.state.riskAssessmentId});\n        Session.set('riskAssessmentPageTabIndex', 1);\n        Session.set('selectedRiskAssessment', false);\n        Bert.alert('RiskAssessment removed!', 'success');\n      }\n    });\n  }\n}\n\nRiskAssessmentDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  riskAssessmentId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  riskAssessment: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(RiskAssessmentDetail.prototype, ReactMeteorData);\nexport default RiskAssessmentDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\nimport RiskAssessmentDetail from './RiskAssessmentDetail';\nimport RiskAssessmentsTable from './RiskAssessmentsTable';\n\nSession.setDefault('selectedRiskAssessmentId', false);\n\nexport class RiskAssessmentsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('riskAssessmentPageTabIndex'),\n      riskAssessmentSearchFilter: Session.get('riskAssessmentSearchFilter'),\n      selectedRiskAssessmentId: Session.get('selectedRiskAssessmentId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedRiskAssessment: false\n    };\n\n    if (Session.get('selectedRiskAssessmentId')){\n      data.selectedDevice = RiskAssessments.findOne({_id: Session.get('selectedRiskAssessmentId')});\n    } else {\n      data.selectedDevice = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('riskAssessmentPageTabIndex', index);\n  }f\n\n  onNewTab(){\n    Session.set('selectedRiskAssessmentId', false);\n    Session.set('riskAssessmentUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In RiskAssessmentsPage render');\n    return (\n      <div id='riskAssessmentsPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='RiskAssessments' />\n            <CardText>\n              <Tabs id=\"riskAssessmentsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newRiskAssessmentTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <RiskAssessmentDetail \n                  id='newRiskAssessment'\n                  fhirVersion={ this.data.fhirVersion }\n                  riskAssessment={ this.data.selectedRiskAssessment }\n                  riskAssessmentId={ this.data.selectedRiskAssessmentId }  />\n               </Tab>\n               <Tab className=\"riskAssessmentListTab\" label='RiskAssessments' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <RiskAssessmentsTable />\n               </Tab>\n               <Tab className=\"riskAssessmentDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <RiskAssessmentDetail \n                  id='riskAssessmentDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  riskAssessment={ this.data.selectedRiskAssessment }\n                  riskAssessmentId={ this.data.selectedRiskAssessmentId } />  \n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(RiskAssessmentsPage.prototype, ReactMeteorData);\n\nexport default RiskAssessmentsPage;","import React from 'react';\nimport ReactMixin from 'react-mixin';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\n\nimport { Card, CardMedia, CardTitle, CardText, CardActions } from 'material-ui/Card';\n\nimport { Table } from 'react-bootstrap';\nimport { get } from 'lodash';\n\nexport default class RiskAssessmentsTable extends React.Component {\n\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      riskAssessments: RiskAssessments.find().fetch()\n    }\n\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"data\", data);\n    return data;\n  };\n\n\n  rowClick(id){\n    Session.set('riskAssessmentsUpsert', false);\n    Session.set('selectedRiskAssessmentId', id);\n    Session.set('riskAssessmentPageTabIndex', 2);\n  };\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.riskAssessments.length; i++) {\n\n      let newRow = {\n        date: get(this.data.riskAssessments[i], 'date'),\n        subjectDisplay: get(this.data.riskAssessments[i], 'subject.display'),\n        conditionDisplay: get(this.data.riskAssessments[i], 'condition.display'),\n        performerDisplay: get(this.data.riskAssessments[i], 'performer.display'),\n        predictionOutcome: get(this.data.riskAssessments[i], 'prediction[0].outcome.text'),\n        probabilityDecimal: get(this.data.riskAssessments[i], 'prediction[0].probabilityDecimal'),\n      }\n      tableRows.push(\n        <tr key={i} className=\"riskAssessmentRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.riskAssessments[i]._id)} >\n\n          <td className='date'>{ newRow.date }</td>\n          <td className='subjectDisplay'>{ newRow.subjectDisplay }</td>\n          <td className='conditionDisplay'>{ newRow.conditionDisplay }</td>\n          <td className='performerDisplay'>{ newRow.performerDisplay }</td>\n          <td className='predictionOutcome'>{ newRow.predictionOutcome }</td>\n          <td className='probabilityDecimal'>{ newRow.probabilityDecimal }</td>\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='riskAssessmentsTable' responses hover >\n        <thead>\n          <tr>\n            <th className='date'>Date</th>\n            <th className='subjectDisplay'>Subject</th>\n            <th className='conditionDisplay'>Condition</th>\n            <th className='performerDisplay'>Performer</th>\n            <th className='predictionOutcome'>Outcome</th>\n            <th className='probabilityDecimal'>Probability</th>\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(RiskAssessmentsTable.prototype, ReactMeteorData);\n"]}