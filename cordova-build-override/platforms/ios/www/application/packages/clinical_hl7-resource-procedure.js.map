{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-procedure/lib/Procedures.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-procedure/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-procedure/client/react/ProcedureDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-procedure/client/react/ProceduresPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-procedure/client/react/ProceduresTable.js"],"names":["SimpleSchema","module","link","v","Procedure","BaseModel","extend","prototype","_collection","Procedures","Package","Mongo","Collection","connection","_transform","document","ProcedureDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","ReferenceSchema","Code","allowedValues","CodeableConceptSchema","Boolean","Object","Date","PeriodSchema","AnnotationSchema","ProcedureStu3","ProcedureSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","ProceduresPage","ProceduresTable","ProcedureDetail","CardActions","CardText","DatePicker","RaisedButton","TextField","Toggle","Row","Col","React","ReactMeteorData","ReactMixin","browserHistory","get","set","PropTypes","styles","block","maxWidth","toggle","marginTop","thumbOff","backgroundColor","trackOff","thumbSwitched","trackSwitched","labelStyle","color","props","state","procedureId","procedure","resourceType","identifier","coding","system","code","text","value","status","notPerformed","use","subject","reference","display","performer","bodySite","category","notes","time","form","categoryCode","categoryDisplay","procedureCode","procedureCodeDisplay","bodySiteDisplay","bodySiteReference","performedDate","performedTime","performerDisplay","performerReference","subjectDisplay","subjectReference","noteTime","noteText","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","console","log","shouldUpdate","setState","getMeteorData","data","showDatePicker","renderDatePicker","datePickerValue","changeState","bind","render","id","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateProcedure","procedureData","telecomArray","event","self","fhirProcedureData","procedureValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","Meteor","userName","user","fullName","collectionName","recordId","Session","insert","handleCancelButton","remove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","setDefault","style","opacity","tab","borderBottom","borderRight","tabIndex","procedureSearchFilter","selectedProcedureId","selectedProcedure","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Card","CardMedia","Table","selected","procedures","displayToggle","displayDates","displayToggles","find","count","fetch","displayOnMobile","width","includes","window","navigator","platform","renderTogglesHeader","renderToggles","patientId","renderDateHeader","renderDate","rowClick","tableRows","i","length","newRow","notesCount","push","cursor"],"mappings":"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","file":"/packages/clinical_hl7-resource-procedure.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nProcedure = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nProcedure.prototype._collection = Procedures;\n\n// Create a persistent data store for addresses to be stored.\n// HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Procedures === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Procedures = new Mongo.Collection('Procedures');\n  } else if(Package['clinical:desktop-publish']){    \n    Procedures = new Mongo.Collection('Procedures');\n  } else {\n    Procedures = new Mongo.Collection('Procedures', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nProcedures._transform = function (document) {\n  return new Procedure(document);\n};\n\n\n\nProcedureDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Procedure\"\n  },\n\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"status\" : {\n    type: Code,\n    allowedValues: [ 'in-progress', 'aborted', 'completed', 'entered-in-error'],\n    defaultValue: 'completed'\n  },\n  \"category\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"code\" : {\n    type: CodeableConceptSchema\n  },\n  \"notPerformed\" : {\n    optional: true,\n    type: Boolean,\n    defaultValue: true\n  },\n  \"reasonNotPerformed\" : {\n    optional: true,\n    type: Array\n  },\n  \"reasonNotPerformed.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"bodySite\" : {\n    optional: true,\n    type: Array\n  },\n  \"bodySite.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reasonCodeableConceptSchema\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reasonReference\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"performer\" : {\n    optional: true,\n    type:  Array\n    },\n  \"performer.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"performer.$.actor\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"performer.$.role\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"performedDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"performedPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"location\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"outcome\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"report\" : {\n    optional: true,\n    type: Array\n  },\n  \"report.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"complication\" : {\n    optional: true,\n    type: Array\n  },\n  \"complication.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"followUp\" : {\n    optional: true,\n    type: Array\n  },\n  \"followUp.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"request\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"notes\" : {\n    optional: true,\n    type: Array\n  },\n  \"notes.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"focalDevice\" : {\n    optional: true,\n    type:  Array\n    },\n  \"focalDevice.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"focalDevice.$.action\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"focalDevice.$.manipulated\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"used\" : {\n    optional: true,\n    type: Array\n  },\n  \"used.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  }\n});\n\n\nProcedureStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Procedure\"\n  },\n\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"definition\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"basedOn\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"partOf\" : {\n    optional: true,\n    type: ReferenceSchema\n  },  \n  \"status\" : {\n    type: Code,\n    allowedValues: [ 'preparation', 'in-progress', 'suspended', 'aborted', 'completed', 'entered-in-error', 'unknown'],\n    defaultValue: 'completed'\n  },\n  \"notDone\" : {\n    optional: true,\n    type: Boolean,\n    defaultValue: true\n  },\n  \"notDoneReason\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"category\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"code\" : {\n    type: CodeableConceptSchema\n  },\n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"performedDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"performedPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"performer\" : {\n    optional: true,\n    type:  Array\n    },\n  \"performer.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"performer.$.role\" : {\n      optional: true,\n      type: CodeableConceptSchema\n    },\n  \"performer.$.actor\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"performer.$.onBehalfOf\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"location\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"reasonCode\" : {\n    optional: true,\n    type: Array\n  },\n  \"reasonCode.$\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reasonReference\" : {\n    optional: true,\n    type: Array\n  },\n  \"reasonReference.$\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"bodySite\" : {\n    optional: true,\n    type: Array\n  },\n  \"bodySite.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n\n  \"outcome\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"report\" : {\n    optional: true,\n    type: Array\n  },\n  \"report.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"complication\" : {\n    optional: true,\n    type: Array\n  },\n  \"complication.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"complicationDetail\" : {\n    optional: true,\n    type: Array\n  },\n  \"complicationDetail.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"followUp\" : {\n    optional: true,\n    type: Array\n  },\n  \"followUp.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"focalDevice\" : {\n    optional: true,\n    type:  Array\n    },\n  \"focalDevice.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"focalDevice.$.action\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"focalDevice.$.manipulated\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"usedReference\" : {\n    optional: true,\n    type: Array\n  },\n  \"usedReference.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"usedCode\" : {\n    optional: true,\n    type: Array\n  },\n  \"usedCode.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  }\n});\n\nProcedureSchema = ProcedureDstu2;\n\nBaseSchema.extend(ProcedureSchema);\nDomainResourceSchema.extend(ProcedureSchema);\n\nProcedures.attachSchema(ProcedureSchema);\n\nexport default { Procedure, Procedures, ProcedureSchema, ProcedureDstu2, ProcedureStu3 };","\n\nimport ProceduresPage from './client/react/ProceduresPage';\nimport ProceduresTable from './client/react/ProceduresTable';\nimport { Procedure, Procedures, ProcedureSchema } from './lib/Procedures';\n\nvar DynamicRoutes = [{\n  'name': 'ProceduresPage',\n  'path': '/procedures',\n  'component': ProceduresPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Procedures',\n  'to': '/procedures',\n  'href': '/procedures'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  ProceduresPage,\n  ProceduresTable\n};\n\n\n","import { CardActions, CardText, DatePicker, RaisedButton, TextField, Toggle } from 'material-ui';\nimport { Row, Col } from 'react-bootstrap';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { browserHistory } from 'react-router';\nimport { get, set } from 'lodash';\nimport PropTypes from 'prop-types';\n\n\nconst styles = {\n  block: {\n    maxWidth: 250,\n  },\n  toggle: {\n    marginTop: 16,\n  },\n  thumbOff: {\n    backgroundColor: '#ffcccc',\n  },\n  trackOff: {\n    backgroundColor: '#ff9d9d',\n  },\n  thumbSwitched: {\n    backgroundColor: 'red',\n  },\n  trackSwitched: {\n    backgroundColor: '#ff9d9d',\n  },\n  labelStyle: {\n    color: 'red',\n  },\n};\n\n\nexport class ProcedureDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      procedureId: false,\n      procedure: {\n        resourceType: 'Procedure',\n        identifier: [{\n          type: {\n            coding: [\n              {\n                system: \"\",\n                code: \"\"\n              }\n            ],\n            text: \"Serial Number\"\n          },\n          value: \"\"\n        }],\n        status: 'unknown',\n        notPerformed: false,\n        identifier: [{\n          use: 'official',\n          value: ''\n        }],\n        subject: {\n          reference: '',\n          display: ''\n        },\n        performer:{\n          reference: '',\n          display: ''\n        },\n        bodySite:{\n          reference: '',\n          display: ''\n        },\n        code: {\n          text: '',\n          coding: [{\n            system: '',\n            code: '',\n            display: ''\n          }]\n        },\n        category: {\n          text: '',\n          coding: [{\n            system: '',\n            code: '',\n            display: ''\n          }]\n        },\n        notes: [{\n          time: null,\n          text: ''\n        }]\n      },\n      form: {\n        identifier: '',\n        categoryCode: '',\n        categoryDisplay: '',\n        procedureCode: '',\n        procedureCodeDisplay: '',\n        bodySiteDisplay: '',\n        bodySiteReference: '',\n        performedDate: null,\n        performedTime: null,\n        notPerformed: false,\n        performerDisplay: '',\n        performerReference: '',\n        subjectDisplay: '',\n        subjectReference: '',\n        noteTime: '',\n        noteText: ''\n      }\n    }\n  }\n  dehydrateFhirResource(procedure) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.identifier = get(procedure, 'identifier[0].value')\n    formData.categoryCode = get(procedure, 'category.coding[0].code')\n    formData.categoryDisplay = get(procedure, 'category.coding[0].display')    \n    formData.procedureCode = get(procedure, 'code.coding[0].code')\n    formData.procedureCodeDisplay = get(procedure, 'code.coding[0].display')\n    formData.bodySiteDisplay = get(procedure, 'bodySite.display')\n    formData.bodySiteReference = get(procedure, 'bodySite.reference')\n    formData.performedDate = get(procedure, 'performedDate')\n    formData.performedTime = get(procedure, 'performedTime')\n    formData.notPerformed = get(procedure, 'notPerformed')\n    formData.performerDisplay = get(procedure, 'performer.display')\n    formData.performerReference = get(procedure, 'performer.reference')\n    formData.subjectDisplay = get(procedure, 'subject.display')\n    formData.subjectReference = get(procedure, 'subject.reference')\n    formData.noteTime = get(procedure, 'notes[0].time')\n    formData.noteText = get(procedure, 'notes[0].text')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('ProcedureDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.procedure === this.state.procedure){\n      shouldUpdate = false;\n    }\n\n    // received an procedure from the table; okay lets update again\n    if(nextProps.procedureId !== this.state.procedureId){\n      this.setState({procedureId: nextProps.procedureId})\n      \n      if(nextProps.procedure){\n        this.setState({procedure: nextProps.procedure})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.procedure)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      procedureId: this.state.procedureId,\n      procedure: false,\n      showDatePicker: false\n    };\n\n    if(this.props.showDatePicker){\n      data.showDatePicker = this.props.showDatePicker\n    }\n\n    if(this.props.procedure){\n      data.procedure = this.props.procedure;\n    }  \n\n    return data;\n  }\n\n  renderDatePicker(showDatePicker, datePickerValue){\n    if (showDatePicker) {\n      return (\n        <DatePicker \n          name='performedDateTime'\n          hintText=\"Performed Date/Time\" \n          container=\"inline\" \n          mode=\"landscape\"\n          value={ datePickerValue ? datePickerValue : ''}    \n          onChange={ this.changeState.bind(this, 'performedDateTime')}      \n          />\n      );\n    }\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('ProcedureDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"procedureDetail\">\n        <CardText>\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='identifierInput'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'\n                value={  get(formData, 'identifier') }\n                onChange={ this.changeState.bind(this, 'identifier')}\n                hintText='IR-28376481'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='categoryDisplayInput'\n                ref='categoryDisplay'\n                name='categoryDisplay'\n                floatingLabelText='Procedure Category'\n                value={  get(formData, 'categoryDisplay') }\n                onChange={ this.changeState.bind(this, 'categoryDisplay')}\n                hintText='Interventional Radiology'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='categoryCodeInput'\n                ref='categoryCode'\n                name='categoryCode'\n                floatingLabelText='Category Code'\n                value={  get(formData, 'categoryCode') }\n                onChange={ this.changeState.bind(this, 'categoryCode')}\n                hintText='240917005'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='procedureCodeDisplayInput'\n                ref='procedureCodeDisplay'\n                name='procedureCodeDisplay'\n                floatingLabelText='Procedure'\n                value={  get(formData, 'procedureCodeDisplay') }\n                onChange={ this.changeState.bind(this, 'procedureCodeDisplay')}\n                hintText='Biliary drainage intervention'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='procedureCodeInput'\n                ref='procedureCode'\n                name='procedureCode'\n                floatingLabelText='Procedure Code'\n                value={  get(formData, 'procedureCode') }\n                onChange={ this.changeState.bind(this, 'procedureCode')}\n                hintText='277566006'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='subjectDisplayInput'\n                ref='subjectDisplay'\n                name='subjectDisplay'\n                floatingLabelText='Subject'\n                value={  get(formData, 'subjectDisplay') }\n                onChange={ this.changeState.bind(this, 'subjectDisplay')}\n                hintText='Jane Doe'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='subjectReferenceInput'\n                ref='subjectReference'\n                name='subjectReference'\n                floatingLabelText='Subject Reference'\n                value={  get(formData, 'subjectReference') }\n                onChange={ this.changeState.bind(this, 'subjectReference')}\n                hintText='Patient/12345'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n\n            <Col md={4}>\n              <TextField\n                id='bodySiteDisplayInput'\n                ref='bodySiteDisplay'\n                name='bodySiteDisplay'\n                floatingLabelText='Body Site'\n                value={  get(formData, 'bodySiteDisplay') }\n                onChange={ this.changeState.bind(this, 'bodySiteDisplay')}\n                hintText='Billiary Ducts'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='bodySiteReferenceInput'\n                ref='bodySiteReference'\n                name='bodySiteReference'\n                floatingLabelText='Body Site Reference'\n                value={  get(formData, 'bodySiteReference') }\n                onChange={ this.changeState.bind(this, 'bodySiteReference')}\n                hintText='BodySite/222244'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n\n          </Row>\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='performerDisplayInput'\n                ref='performerDisplay'\n                name='performerDisplay'\n                floatingLabelText='Performed By'\n                value={  get(formData, 'performerDisplay') }\n                onChange={ this.changeState.bind(this, 'performerDisplay')}\n                floatingLabelFixed={true}\n                hintText='Chris Taub'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='performerReferenceInput'\n                ref='performerReference'\n                name='performerReference'\n                floatingLabelText='Performer Reference'\n                value={  get(formData, 'performerReference') }\n                onChange={ this.changeState.bind(this, 'performerReference')}\n                hintText='Practitioner/77777'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='performedDateInput'\n                ref='performedDate'\n                name='performedDate'\n                type='date'\n                floatingLabelText='Performed Date'\n                value={  get(formData, 'performedDate') }\n                onChange={ this.changeState.bind(this, 'performedDate')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='performedTimeInput'\n                ref='performedTime'\n                name='performedTime'\n                type='time'\n                floatingLabelText='Performed Date'\n                value={  get(formData, 'performedTime') }\n                onChange={ this.changeState.bind(this, 'performedTime')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>      \n            <Col md={2} >\n              <br />\n              <Toggle\n                label=\"Not Performed\"\n                labelPosition=\"right\"\n                defaultToggled={false}\n                style={styles.toggle}\n              />\n            </Col>      \n          </Row>\n          <Row>\n            <Col md={2}>\n              <TextField\n                id='noteTimeInput'\n                ref='noteTime'\n                name='noteTime'\n                type='date'\n                floatingLabelText='Time'\n                value={  get(formData, 'noteTime') }\n                onChange={ this.changeState.bind(this, 'noteTime')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={12}>\n              <TextField\n                id='noteTextInput'\n                ref='noteText'\n                name='noteText'\n                floatingLabelText='Subject Reference'\n                value={  get(formData, 'noteText') }\n                onChange={ this.changeState.bind(this, 'noteText')}\n                floatingLabelFixed={true}\n                hintText='Routine follow-up.  No complications.'\n                multiLine={true}          \n                rows={5}\n                fullWidth\n                /><br/>  \n            </Col>\n          </Row>\n\n\n          <a href='http://browser.ihtsdotools.org/?perspective=full&conceptId1=404684003&edition=us-edition&release=v20180301&server=https://prod-browser-exten.ihtsdotools.org/api/snomed&langRefset=900000000000509007'>Lookup codes with the SNOMED CT Browser</a>\n\n            <br/>\n          { this.renderDatePicker(this.data.showDatePicker, get(this, 'data.procedure.performedDateTime') ) }\n          <br/>\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.procedureId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n\n \n  determineButtons(procedureId){\n    if (procedureId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateProcedureButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteProcedureButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveProcedureButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"PatientDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"identifier\":\n        set(formData, 'identifier', textValue)\n        break;\n      case \"categoryCode\":\n        set(formData, 'categoryCode', textValue)\n        break;\n      case \"categoryDisplay\":\n        set(formData, 'categoryDisplay', textValue)\n        break;        \n      case \"procedureCode\":\n        set(formData, 'procedureCode', textValue)\n        break;\n      case \"procedureCodeDisplay\":\n        set(formData, 'procedureCodeDisplay', textValue)\n        break;\n      case \"bodySiteDisplay\":\n        set(formData, 'bodySiteDisplay', textValue)\n        break;\n      case \"bodySiteReference\":\n        set(formData, 'bodySiteReference', textValue)\n        break;\n      case \"notPerformed\":\n        set(formData, 'notPerformed', textValue)\n        break;\n      case \"performerDisplay\":\n        set(formData, 'performerDisplay', textValue)\n        break;\n      case \"performerReference\":\n        set(formData, 'performerReference', textValue)\n        break;\n      case \"subjectDisplay\":\n        set(formData, 'subjectDisplay', textValue)\n        break;\n      case \"subjectReference\":\n        set(formData, 'subjectReference', textValue)\n        break;\n      case \"noteTime\":\n        set(formData, 'noteTime', textValue)\n        break;\n      case \"noteText\":\n        set(formData, 'noteText', textValue)\n        break;\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n\n  updateProcedure(procedureData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"PatientDetail.updateProcedure\", procedureData, field, textValue);\n\n    let telecomArray = get(procedureData, 'telecom');\n\n    switch (field) {\n      case \"identifier\":\n        set(procedureData, 'identifier[0].value', textValue)\n        break;\n      case \"categoryCode\":\n        set(procedureData, 'category.coding[0].code', textValue)\n        break;\n      case \"categoryDisplay\":\n        set(procedureData, 'category.coding[0].display', textValue)\n        break;        \n      case \"procedureCode\":\n        set(procedureData, 'code.coding[0].code', textValue)\n        break;\n      case \"procedureCodeDisplay\":\n        set(procedureData, 'code.coding[0].display', textValue)\n        break;\n      case \"bodySiteDisplay\":\n        set(procedureData, 'bodySite.display', textValue)\n        break;\n      case \"bodySiteReference\":\n        set(procedureData, 'bodySite.reference', )\n        break;\n      case \"notPerformed\":\n        set(procedureData, 'notPerformed', textValue)\n        break;\n      case \"performerDisplay\":\n        set(procedureData, 'performer.display', textValue)\n        break;\n      case \"performerReference\":\n        set(procedureData, 'performer.reference', textValue)\n        break;\n      case \"subjectDisplay\":\n        set(procedureData, 'subject.display', textValue)\n        break;\n      case \"subjectReference\":\n        set(procedureData, 'subject.reference', textValue)\n        break;\n      case \"noteTime\":\n        set(procedureData, 'notes[0].time', textValue)\n        break;\n      case \"noteText\":\n        set(procedureData, 'notes[0].text', textValue)\n        break;\n    }\n    return procedureData;\n  }\n\n  changeState(field, event, textValue){\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"ProcedureDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let procedureData = Object.assign({}, this.state.procedure);\n\n    formData = this.updateFormData(formData, field, textValue);\n    procedureData = this.updateProcedure(procedureData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"procedureData\", procedureData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({procedure: procedureData})\n    this.setState({form: formData})\n  }\n\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Procedure...', this.state)\n\n    let self = this;\n    let fhirProcedureData = Object.assign({}, this.state.procedure);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirProcedureData', fhirProcedureData);\n\n\n    let procedureValidator = ProcedureSchema.newContext();\n    procedureValidator.validate(fhirProcedureData)\n\n    console.log('IsValid: ', procedureValidator.isValid())\n    console.log('ValidationErrors: ', procedureValidator.validationErrors());\n\n\n    if (this.state.procedureId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating Procedure...\");\n      delete fhirProcedureData._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      fhirProcedureData.resourceType = 'Procedure';\n\n      Procedures._collection.update(\n        {_id: this.state.procedureId}, {$set: fhirProcedureData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Procedures\", recordId: self.state.procedureId });\n            Session.set('procedurePageTabIndex', 1);\n            Session.set('selectedProcedureId', false);\n            Session.set('procedureUpsert', false);\n            Bert.alert('Procedure updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new procedure\", fhirProcedureData);\n\n      Procedures._collection.insert(fhirProcedureData, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Procedures\", recordId: self.state.procedureId });\n          Session.set('procedurePageTabIndex', 1);\n          Session.set('selectedProcedureId', false);\n          Session.set('procedureUpsert', false);\n          Bert.alert('Procedure added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('procedurePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Procedures._collection.remove({_id: this.state.procedureId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Procedures\", recordId: self.state.procedureId});\n        Session.set('procedurePageTabIndex', 1);\n        Session.set('selectedProcedureId', false);\n        Bert.alert('Procedure removed!', 'success');\n      }\n    });\n  }\n}\n\n\nProcedureDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  procedureId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  procedure: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(ProcedureDetail.prototype, ReactMeteorData);\nexport default ProcedureDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport ProcedureDetail from './ProcedureDetail';\nimport ProceduresTable from './ProceduresTable';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nSession.setDefault('selectedProcedureId', false);\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class ProceduresPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('procedurePageTabIndex'),\n      procedureSearchFilter: Session.get('procedureSearchFilter'),\n      selectedProcedureId: Session.get('selectedProcedureId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedProcedure: false\n    };\n\n    if (Session.get('selectedProcedureId')){\n      data.selectedProcedure = Procedures.findOne({_id: Session.get('selectedProcedureId')});\n    } else {\n      data.selectedProcedure = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('procedurePageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedProcedureId', false);\n    Session.set('procedureUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In ProceduresPage render');\n    return (\n      <div id='proceduresPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Procedures' />\n            <CardText>\n              <Tabs id=\"proceduresPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newProcedureTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <ProcedureDetail \n                  id='newProcedure' \n                  fhirVersion={ this.data.fhirVersion }\n                  procedure={ this.data.selectedProcedure }\n                  procedureId={ this.data.selectedProcedureId } \n                />\n               </Tab>\n               <Tab className=\"procedureListTab\" label='Procedures' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <ProceduresTable \n                  noDataMessagePadding={100}\n                  displayDates={true} />\n               </Tab>\n               <Tab className=\"procedureDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <ProcedureDetail \n                  id='procedureDetails'\n                  showDatePicker={true} \n                  fhirVersion={ this.data.fhirVersion }\n                  procedure={ this.data.selectedProcedure }\n                  procedureId={ this.data.selectedProcedureId } />  \n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(ProceduresPage.prototype, ReactMeteorData);\n\nexport default ProceduresPage;","import { Card, CardActions, CardMedia, CardText, CardTitle } from 'material-ui/Card';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport Toggle from 'material-ui/Toggle';\nimport { get } from 'lodash';\n\nexport default class ProceduresTable extends React.Component {\n\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      procedures: [],\n      displayToggle: false,\n      displayDates: false\n    }\n\n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n    if(this.props.data){\n      data.procedures = this.props.data;\n    } else {\n      if(Procedures.find().count() > 0){\n        data.procedures = Procedures.find().fetch();\n      }  \n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"ProceduresTable[data]\", data);\n    return data;\n  };\n  displayOnMobile(width){\n    let style = {};\n    if(['iPhone'].includes(window.navigator.platform)){\n      style.display = \"none\";\n    }\n    if(width){\n      style.width = width;\n    }\n    return style;\n  }\n  renderTogglesHeader(displayToggle){\n    if (displayToggle) {\n      return (\n        <th className=\"toggle\">toggle</th>\n      );\n    }\n  }\n  renderToggles(displayToggle, patientId ){\n    if (displayToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n              //style={styles.toggle}\n            />\n          </td>\n      );\n    }\n  }\n  renderDateHeader(displayDates){\n    if (displayDates) {\n      return (\n        <th className='performedDate'>Date</th>\n        // <th className='performedTime'>Time</th>\n      );\n    }\n  }\n  renderDate(displayDates, performedDate, performedTime ){\n    if (displayDates) {\n      return (\n        // <td className='date'>{ moment(performedDate).format('YYYY-MM-DD') }</td>\n        // <td className='time'>{ moment(newDate).format('YYYY-MM-DD') }</td>\n        <td className='date'>{ performedDate }</td>\n        // <td className='time'>{ performedTime }</td>\n      );\n    }\n  }\n  rowClick(id){\n    Session.set('proceduresUpsert', false);\n    Session.set('selectedProcedureId', id);\n    Session.set('procedurePageTabIndex', 2);\n  };\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.procedures.length; i++) {\n      var newRow = {\n        identifier: '',\n        status: '',\n        code: ''        \n      };\n      newRow.identifier = get(this.data.procedures[i], 'identifier[0].value');\n      newRow.categoryDisplay = get(this.data.procedures[i], 'category.coding[0].display')    \n      newRow.procedureCode = get(this.data.procedures[i], 'code.coding[0].code');\n      newRow.procedureCodeDisplay = get(this.data.procedures[i], 'code.coding[0].display');\n      newRow.performedDate = get(this.data.procedures[i], 'performedDate');\n      newRow.performedTime = get(this.data.procedures[i], 'performedTime');\n      newRow.subjectDisplay = get(this.data.procedures[i], 'subject.display');\n      newRow.subjectReference = get(this.data.procedures[i], 'subject.reference');\n      newRow.performerDisplay = get(this.data.procedures[i], 'performer.display');\n      newRow.performerReference = get(this.data.procedures[i], 'performer.reference');\n      newRow.bodySiteDisplay = get(this.data.procedures[i], 'bodySite.display');\n\n      let notes = get(this.data.procedures[i], 'notes')\n      if(notes && notes.length){\n        newRow.notesCount = notes.length;\n      } else {\n        newRow.notesCount = 0;\n      }\n\n      console.log('newRow', newRow)\n\n      \n      tableRows.push(\n        <tr key={i} className=\"procedureRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.procedures[i]._id)} >\n          { this.renderToggles(this.data.displayToggle, this.data.procedures[i]) }\n          <td className='identifier' style={this.displayOnMobile()} >{ newRow.identifier }</td>\n          <td className='categoryDisplay'>{ newRow.categoryDisplay }</td>\n          <td className='procedureCodeDisplay'>{ newRow.procedureCodeDisplay }</td>\n          <td className='procedureCode'>{ newRow.procedureCode }</td>\n          <td className='subjectDisplay' style={this.displayOnMobile()} >{ newRow.subjectDisplay }</td>\n          <td className='performerDisplay' style={this.displayOnMobile()} >{ newRow.performerDisplay }</td>\n          <td className='bodySiteDisplay' style={this.displayOnMobile()} >{ newRow.bodySiteDisplay }</td>\n          { this.renderDate(this.data.displayDates, newRow.performedDate, newRow.performedTime) }\n          <td className='notesCount'>{ newRow.notesCount }</td>\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='proceduresTable' hover >\n        <thead>\n          <tr>\n            { this.renderTogglesHeader(this.data.displayToggle) }\n            <th className='identifier' style={this.displayOnMobile()} >Identifier</th>\n            <th className='categoryDisplay'>Category</th>\n            <th className='procedureCodeDisplay'>Procedure</th>\n            <th className='procedureCode'>Code</th>\n            <th className='subjectDisplay' style={this.displayOnMobile()} >Subject</th>\n            <th className='performerDisplay' style={this.displayOnMobile()} >Performer</th>\n            <th className='bodySiteDisplay' style={this.displayOnMobile()} >Body Site</th>\n\n            { this.renderDateHeader(this.data.displayDates) }\n            <th className='notesCount'>Notes</th>\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(ProceduresTable.prototype, ReactMeteorData);"]}