{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/lib/Immunizations.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/client/ImmunizationDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/client/ImmunizationsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/client/ImmunizationsTable.js"],"names":["SimpleSchema","module","link","v","Immunization","BaseModel","extend","prototype","_collection","Immunizations","Package","Mongo","Collection","connection","_transform","document","ImmunizationDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","allowedValues","Date","CodeableConceptSchema","ReferenceSchema","Boolean","QuantitySchema","AnnotationSchema","Object","Number","ImmunizationStu3","ImmunizationSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","ImmunizationsPage","ImmunizationsTable","ImmunizationDetail","CardActions","CardText","DatePicker","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","browserHistory","get","set","PropTypes","Col","Grid","Row","Session","setDefault","props","state","immunizationId","immunization","resourceType","status","wasNotGiven","identifier","use","value","vaccineCode","text","date","patient","reference","display","form","patientDisplay","patientReference","performerDisplay","performerReference","reported","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","console","log","shouldUpdate","setState","getMeteorData","data","showDatePicker","renderDatePicker","datePickerValue","changeState","bind","render","id","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateImmunization","immunizationData","componentDidUpdate","event","self","fhirImmunizationData","immunizationValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","Meteor","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","Component","propTypes","string","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","style","opacity","tab","borderBottom","borderRight","tabIndex","immunizationSearchFilter","selectedImmunizationId","fhirVersion","selectedImmunization","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Card","CardMedia","Table","Toggle","selected","immunizations","displayToggle","displayDates","displayToggles","find","$sort","count","fetch","displayOnMobile","width","includes","window","navigator","platform","renderTogglesHeader","renderToggles","patientId","renderDateHeader","renderDate","newDate","moment","format","rowClick","tableRows","i","length","newRow","push","cursor","derate"],"mappings":"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","file":"/packages/clinical_hl7-resource-immunization.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nImmunization = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nImmunization.prototype._collection = Immunizations;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Immunizations === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Immunizations = new Mongo.Collection('Immunizations');\n  } else if(Package['clinical:desktop-publish']){    \n    Immunizations = new Mongo.Collection('Immunizations');\n  } else {\n    Immunizations = new Mongo.Collection('Immunizations', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nImmunizations._transform = function (document) {\n  return new Immunization(document);\n};\n\n\n\nImmunizationDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Immunization\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    type: String,\n    allowedValues: ['in-progress', 'on-hold', 'completed', 'entered-in-error', 'stopped']\n  },\n  \"date\" : {\n    optional: true,\n    type: Date\n  },\n  \"vaccineCode\" : {\n    type: CodeableConceptSchema\n  },\n  \"patient\" : {\n    type: ReferenceSchema\n  },\n  \"wasNotGiven\" : {\n    type: Boolean\n  },\n  \"reported\" : {\n    type: Boolean\n  },\n  \"performer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"requester\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"manufacturer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"location\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"lotNumber\" : {\n    optional: true,\n    type: String\n  },\n  \"expirationDate\" : {\n    optional: true,\n    type: Date\n  },\n  \"site\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"route\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"doseQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"explanation\" : {\n    optional: true,\n    type: Object\n  },\n  \"explanation.reason\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reason.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"explanation.reasonNotGiven\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reasonNotGiven.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reaction\" : {\n    optional: true,\n    type:  Array\n    },\n  \"reaction.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"reaction.$.date\" : {\n    optional: true,\n    type: Date\n  },\n  \"reaction.$.detail\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"reaction.$.reported\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"vaccinationProtocol\" : {\n    optional: true,\n    type:  Array\n    },\n  \"vaccinationProtocol.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"vaccinationProtocol.$.doseSequence\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.authority\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"vaccinationProtocol.$.series\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.seriesDoses\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.targetDisease\" : {\n    optional: true,\n    type: Array\n  },\n  \"vaccinationProtocol.$.targetDisease.$\" : {\n    type: CodeableConceptSchema \n  },\n  \"vaccinationProtocol.$.doseStatus\" : {\n    type: CodeableConceptSchema\n  },\n  \"vaccinationProtocol.$.doseStatusReason\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }\n});\n\n\n\nImmunizationStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Immunization\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    type: String,\n    allowedValues: ['completed', 'entered-in-error'],\n    defaultValue: 'completed'\n  },\n  \"notGiven\" : {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"vaccineCode\" : {\n    type: CodeableConceptSchema\n  },\n  \"patient\" : {\n    type: ReferenceSchema\n  },\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"date\" : {\n    optional: true,\n    type: Date\n  },\n  \"primarySource\" : {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"reportOrigin\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"location\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"manufacturer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"lotNumber\" : {\n    optional: true,\n    type: String\n  },\n  \"expirationDate\" : {\n    optional: true,\n    type: Date\n  },\n  \"site\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"route\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"doseQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n  \"practitioner\" : {\n    optional: true,\n    type: Array\n  },\n  \"practitioner.$\" : {\n    optional: true,\n    type: Object\n  },\n  \"practitioner.role\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"practitioner.actor\" : {\n    type: ReferenceSchema\n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"explanation\" : {\n    optional: true,\n    type: Object\n  },\n  \"explanation.reason\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reason.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"explanation.reasonNotGiven\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reasonNotGiven.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reaction\" : {\n    optional: true,\n    type:  Array\n    },\n  \"reaction.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"reaction.$.date\" : {\n    optional: true,\n    type: Date\n  },\n  \"reaction.$.detail\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"reaction.$.reported\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"vaccinationProtocol\" : {\n    optional: true,\n    type:  Array\n    },\n  \"vaccinationProtocol.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"vaccinationProtocol.$.doseSequence\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.authority\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"vaccinationProtocol.$.series\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.seriesDoses\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.targetDisease\" : {\n    optional: true,\n    type: Array\n  },\n  \"vaccinationProtocol.$.targetDisease.$\" : {\n    type: CodeableConceptSchema \n  },\n  \"vaccinationProtocol.$.doseStatus\" : {\n    type: CodeableConceptSchema\n  },\n  \"vaccinationProtocol.$.doseStatusReason\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }\n});\n\n\n\nImmunizationSchema = ImmunizationDstu2;\n\n\nBaseSchema.extend(ImmunizationSchema);\nDomainResourceSchema.extend(ImmunizationSchema);\nImmunizations.attachSchema(ImmunizationSchema);\n\nexport default { Immunization, Immunizations, ImmunizationSchema, ImmunizationDstu2, ImmunizationStu3 };","\n\nimport ImmunizationsPage from './client/ImmunizationsPage';\nimport ImmunizationsTable from './client/ImmunizationsTable';\nimport { Immunization, Immunizations, ImmunizationSchema } from './lib/Immunizations';\n\nvar DynamicRoutes = [{\n  'name': 'ImmunizationsPage',\n  'path': '/immunizations',\n  'component': ImmunizationsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Immunizations',\n  'to': '/immunizations',\n  'href': '/immunizations'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  ImmunizationsPage,\n  ImmunizationsTable\n};\n\n\n","import { CardActions, CardText } from 'material-ui/Card';\n\nimport DatePicker from 'material-ui/DatePicker';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport { browserHistory } from 'react-router';\nimport { get, set } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { Col, Grid, Row } from 'react-bootstrap';\n\n\nSession.setDefault('selectedImmunization', false);\n\nexport class ImmunizationDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      immunizationId: false,\n      immunization: {\n        resourceType: \"Immunization\",\n        status: 'completed',\n        wasNotGiven: false,\n        identifier: [{\n          use: 'official',\n          value: ''\n        }],\n        vaccineCode: {\n          text: ''\n        },\n        date: null,\n        patient: {\n          reference: \"\",\n          display: \"\"\n        }\n      },\n      form: {\n        patientDisplay: '',\n        patientReference: '',\n        performerDisplay: '',\n        performerReference: '',\n        identifier: '',\n        status: '',\n        vaccineCode: '',\n        reported: true,\n        date: ''\n      }\n    }\n  }\n  dehydrateFhirResource(immunization) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.patientDisplay = get(immunization, 'patient.display')\n    formData.patientReference = get(immunization, 'patient.reference')\n    formData.performerDisplay = get(immunization, 'performer.display')    \n    formData.performerReference = get(immunization, 'performer.reference')    \n    formData.identifier = get(immunization, 'identifier[0].value')\n    formData.status = get(immunization, 'status')\n    formData.vaccineCode = get(immunization, 'vaccineCode.text')\n    formData.reported = get(immunization, 'reported')\n    formData.date = get(immunization, 'date')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('ImmunizationDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.immunization === this.state.immunization){\n      shouldUpdate = false;\n    }\n\n    // received an allergie from the table; okay lets update again\n    if(nextProps.immunizationId !== this.state.immunizationId){\n      this.setState({immunizationId: nextProps.immunizationId})    \n      \n      if(nextProps.immunization){\n        this.setState({immunization: nextProps.immunization})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.immunization)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      immunizationId: this.props.immunizationId,\n      immunization: false,\n      form: this.state.form,\n      showDatePicker: false\n    };\n\n    if(this.props.showDatePicker){\n      data.showDatePicker = this.props.showDatePicker\n    }\n\n    if(this.props.immunization){\n      data.immunization = this.props.immunization;\n    }\n\n    console.log('ImmunizationDetail[data]', data);\n    return data;\n  }\n  renderDatePicker(showDatePicker, datePickerValue){\n    if (typeof datePickerValue === \"string\"){\n      datePickerValue = new Date(datePickerValue);\n    }\n    if (showDatePicker) {\n      return (\n        <DatePicker \n          name='datePicker'\n          hintText=\"Date of Administration\" \n          container=\"inline\" \n          mode=\"landscape\"\n          value={ datePickerValue ? datePickerValue : ''}    \n          onChange={ this.changeState.bind(this, 'datePicker')}      \n          />\n      );\n    }\n  }\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('ImmunizationDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"immunizationDetail\">\n        <CardText>\n          <Row>\n            <Col md={6}>\n              <TextField\n                id='identifierInput'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'\n                value={ get(formData, 'identifier', '') }\n                onChange={ this.changeState.bind(this, 'identifier')}\n                floatingLabelFixed={true}\n                hintText='Measles, Mumps, and Rubella'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='vaccineCodeInput'\n                ref='vaccineCode'\n                name='vaccineCode'\n                floatingLabelText='Vaccine Code'\n                value={ get(formData, 'vaccineCode', '') }\n                onChange={ this.changeState.bind(this, 'vaccineCode')}\n                floatingLabelFixed={true}\n                hintText='MMR'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='statusInput'\n                ref='status'\n                name='status'\n                floatingLabelText='Status'\n                value={ get(formData, 'status', '') }\n                onChange={ this.changeState.bind(this, 'status')}\n                floatingLabelFixed={true}\n                hintText='in-progress | on-hold | completed'\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={3}>\n              <TextField\n                id='patientDisplayInput'\n                ref='patientDisplay'\n                name='patientDisplay'\n                floatingLabelText='Patient Name'\n                value={ get(formData, 'patientDisplay', '') }\n                onChange={ this.changeState.bind(this, 'patientDisplay')}\n                floatingLabelFixed={true}\n                hintText='Jane Doe'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='patientReferenceInput'\n                ref='patientReference'\n                name='patientReference'\n                floatingLabelText='Patient Reference'\n                value={ get(formData, 'patientReference', '') }\n                onChange={ this.changeState.bind(this, 'patientReference')}\n                floatingLabelFixed={true}\n                hintText='Patient/1234567890'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='performerDisplayInput'\n                ref='performerDisplay'\n                name='performerDisplay'\n                floatingLabelText='Performer Name'\n                value={ get(formData, 'performerDisplay', '') }\n                onChange={ this.changeState.bind(this, 'performerDisplay')}\n                floatingLabelFixed={true}\n                hintText='Nurse Jackie'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='performerReferenceInput'\n                ref='performerReference'\n                name='performerReference'\n                floatingLabelText='Performer Reference'\n                value={ get(formData, 'performerReference', '') }\n                onChange={ this.changeState.bind(this, 'performerReference')}\n                floatingLabelFixed={true}\n                hintText='Practitioner/555'\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n\n            <br/>\n            { this.renderDatePicker(this.data.showDatePicker, get(this, 'data.immunizationForm.datePicker') ) }\n            <br/>\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.immunizationId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(immunizationId){\n    if (immunizationId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateImmunizationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton id=\"deleteImmunizationButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveImmunizationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"patientDisplay\":\n        set(formData, 'patientDisplay', textValue)\n        break;\n      case \"patientReference\":\n        set(formData, 'patientReference', textValue)\n        break;\n      case \"performerDisplay\":\n        set(formData, 'performerDisplay', textValue)\n        break;        \n      case \"performerReference\":\n        set(formData, 'performerReference', textValue)\n        break;        \n      case \"identifier\":\n        set(formData, 'identifier', textValue)\n        break;\n      case \"status\":\n        set(formData, 'status', textValue)\n        break;\n      case \"vaccineCode\":\n        set(formData, 'vaccineCode', textValue)\n        break;\n      case \"reported\":\n        set(formData, 'reported', textValue)\n        break;\n      case \"date\":\n        set(formData, 'date', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateImmunization(immunizationData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationDetail.updateImmunization\", immunizationData, field, textValue);\n\n    switch (field) {\n      case \"patientDisplay\":\n        set(immunizationData, 'patient.display', textValue)\n        break;\n      case \"patientReference\":\n        set(immunizationData, 'patient.reference', textValue)\n        break;\n      case \"performerDisplay\":\n        set(immunizationData, 'performer.display', textValue)\n        break;        \n      case \"performerReference\":\n        set(immunizationData, 'performer.reference', textValue)\n        break;        \n      case \"identifier\":\n        set(immunizationData, 'identifier[0].value', textValue)\n        break;\n      case \"status\":\n        set(immunizationData, 'status', textValue)\n        break;\n      case \"vaccineCode\":\n        set(immunizationData, 'vaccineCode.text', textValue)\n        break;\n      case \"reported\":\n        set(immunizationData, 'reported', textValue)\n        break;\n      case \"date\":\n        set(immunizationData, 'date', textValue)\n        break;    \n    }\n    return immunizationData;\n  }\n  componentDidUpdate(props){\n    if(process.env.NODE_ENV === \"test\") console.log('ImmunizationDetail.componentDidUpdate()', props, this.state)\n  }\n\n  // this could be a mixin\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let immunizationData = Object.assign({}, this.state.immunization);\n\n    formData = this.updateFormData(formData, field, textValue);\n    immunizationData = this.updateImmunization(immunizationData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"immunizationData\", immunizationData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({immunization: immunizationData})\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Immunization...', this.state)\n\n    let self = this;\n    let fhirImmunizationData = Object.assign({}, this.state.immunization);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirImmunizationData', fhirImmunizationData);\n\n\n    let immunizationValidator = ImmunizationSchema.newContext();\n    immunizationValidator.validate(fhirImmunizationData)\n\n    console.log('IsValid: ', immunizationValidator.isValid())\n    console.log('ValidationErrors: ', immunizationValidator.validationErrors());\n\n\n    if (this.props.immunizationId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating immunization...\");\n      delete fhirImmunizationData._id;\n\n      Immunizations._collection.update(\n        {_id: this.props.immunizationId}, {$set: fhirImmunizationData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Immunizations\", recordId: self.props.immunizationId});\n            Session.set('immunizationPageTabIndex', 1);\n            Session.set('selectedImmunization', false);\n            Session.set('immunizationUpsert', false);\n            Bert.alert('Immunization updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"Create a new Immunization\", fhirImmunizationData);\n\n      // var fhirImmunizationData = {\n      //   \"resourceType\": \"Immunization\",\n      //   'notGiven': true,\n      //   'identifier': [],\n      //   'vaccineCode': {\n      //     'text': fhirImmunizationData.vaccineCode\n      //   }\n      // };\n\n      // fhirImmunizationData.identifier.push({\n      //   'use': 'official',\n      //   'type': {\n      //     'text': fhirImmunizationData.identifier\n      //   }\n      // });\n      // fhirImmunizationData.identifier.push({\n      //   'use': 'secondary',\n      //   'type': {\n      //     'text': fhirImmunizationData.vaccine\n      //   }\n      // });\n\n      Immunizations._collection.insert(fhirImmunizationData, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Immunizations\", recordId: result});\n          Session.set('immunizationPageTabIndex', 1);\n          Session.set('selectedImmunization', false);\n          Bert.alert('Immunization added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('immunizationPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Immunizations._collection.remove({_id: this.props.immunizationId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Immunizations\", recordId: self.props.immunizationId});\n        Session.set('immunizationPageTabIndex', 1);\n        Session.set('selectedImmunization', false);\n        Bert.alert('Immunization removed!', 'success');\n      }\n    });\n  }\n}\n\n\nImmunizationDetail.propTypes = {\n  id: PropTypes.string,\n  immunizationId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  immunization: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(ImmunizationDetail.prototype, ReactMeteorData);\nexport default ImmunizationDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport ImmunizationDetail from './ImmunizationDetail';\nimport ImmunizationsTable from './ImmunizationsTable';\n\nimport { Session } from 'meteor/session';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class ImmunizationsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('immunizationPageTabIndex'),\n      immunizationSearchFilter: Session.get('immunizationSearchFilter'),\n      selectedImmunizationId: Session.get('selectedImmunizationId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedImmunization: false\n    };\n\n    if (Session.get('selectedImmunizationId')){\n      data.selectedImmunization = Immunizations.findOne({_id: Session.get('selectedImmunizationId')});\n    } else {\n      data.selectedImmunization = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('immunizationPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedImmunizationId', false);\n    Session.set('immunizationUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('ImmunizationsPage.render()', this.data);\n    return (\n      <div id='immunizationsPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Immunizations' />\n            <CardText>\n              <Tabs id=\"immunizationsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newImmunizationTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <ImmunizationDetail \n                  id='newImmunization' \n                  fhirVersion={ this.data.fhirVersion }\n                  immunizationId={ this.data.selectedImmunizationId } />  \n               </Tab>\n               <Tab className=\"immunizationListTab\" label='Immunizations' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <ImmunizationsTable \n                  displayDates={true}\n                />\n               </Tab>\n               <Tab className=\"immunizationDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <ImmunizationDetail \n                  id='immunizationDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  immunization={ this.data.selectedImmunization }\n                  immunizationId={ this.data.selectedImmunizationId }\n                  showDatePicker={true} \n                  />\n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(ImmunizationsPage.prototype, ReactMeteorData);\n\nexport default ImmunizationsPage;","import { Card, CardActions, CardMedia, CardText, CardTitle } from 'material-ui/Card';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport Toggle from 'material-ui/Toggle';\nimport { get } from 'lodash';\n\nexport class ImmunizationsTable extends React.Component {\n\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      immunizations: [],\n      displayToggle: false,\n      displayDates: false\n    }\n\n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n    if(this.props.data){\n      data.immunizations = this.props.data;\n    } else {\n      if(Immunizations.find({}, {$sort: {'identifier.type.text': 1}}).count() > 0){\n        data.immunizations = Immunizations.find({}, {$sort: {'identifier.type.text': 1}}).fetch();\n      }\n    }\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationsTable[data]\", data);\n\n    return data;\n  };\n\n  displayOnMobile(width){\n    let style = {};\n    if(['iPhone'].includes(window.navigator.platform)){\n      style.display = \"none\";\n    }\n    if(width){\n      style.width = width;\n    }\n    return style;\n  }\n  renderTogglesHeader(displayToggle){\n    if (displayToggle) {\n      return (\n        <th className=\"toggle\">toggle</th>\n      );\n    }\n  }\n  renderToggles(displayToggle, patientId ){\n    if (displayToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n            />\n          </td>\n      );\n    }\n  }\n  renderDateHeader(displayDates){\n    if (displayDates) {\n      return (\n        <th className='date'>date</th>\n      );\n    }\n  }\n  renderDate(displayDates, newDate ){\n    if (displayDates) {\n      return (\n        <td className='date'>{ moment(newDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n\n  rowClick(id){\n    Session.set('immunizationsUpsert', false);\n    Session.set('selectedImmunizationId', id);\n    Session.set('immunizationPageTabIndex', 2);\n  };\n  render () {\n    console.log('this.data', this.data)\n\n    let tableRows = [];\n    for (var i = 0; i < this.data.immunizations.length; i++) {\n      let newRow = {\n        patientDisplay: get(this.data.immunizations[i], 'patient.display'),\n        patientReference: get(this.data.immunizations[i], 'patient.reference'),\n        performerDisplay: get(this.data.immunizations[i], 'performer.display'),\n        performerReference: get(this.data.immunizations[i], 'performer.reference'),\n        identifier: get(this.data.immunizations[i], 'identifier[0].value'),\n        status: get(this.data.immunizations[i], 'status'),\n        vaccineCode: get(this.data.immunizations[i], 'vaccineCode.text'),\n        reported: get(this.data.immunizations[i], 'reported'),\n        date: get(this.data.immunizations[i], 'date')\n      }\n\n      tableRows.push(\n        <tr key={i} className=\"immunizationRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.immunizations[i]._id)} >\n          { this.renderToggles(this.data.displayToggle, this.data.immunizations[i]) }\n          <td className='identifier' style={this.displayOnMobile()} >{ newRow.identifier }</td>\n          <td className='vaccineCode'>{ newRow.vaccineCode }</td>\n          <td className='status' style={this.displayOnMobile()}>{ newRow.status }</td>\n          <td className='patient' style={this.displayOnMobile()} >{ newRow.patientDisplay }</td>\n          <td className='performer' style={this.displayOnMobile()} >{ newRow.performerDisplay }</td>\n          { this.renderDate(this.data.displayDates, newRow.derate) }\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='immunizationsTable' hover >\n        <thead>\n          <tr>\n            { this.renderTogglesHeader(this.data.displayToggle) }\n            <th className='identifier' style={this.displayOnMobile()} >identifier</th>\n            <th className='vaccineCode'>vaccineCode</th>\n            <th className='status' style={this.displayOnMobile()} >status</th>\n            <th className='patient' style={this.displayOnMobile()} >patient</th>\n            <th className='performer' style={this.displayOnMobile()} >performer</th>\n            { this.renderDateHeader(this.data.displayDates) }\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(ImmunizationsTable.prototype, ReactMeteorData);\nexport default ImmunizationsTable;"]}