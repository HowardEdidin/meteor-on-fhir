{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/lib/CarePlans.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlanDesignerPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlanDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlanDetailPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlansPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlansTable.js"],"names":["SimpleSchema","module","link","v","CarePlan","BaseModel","extend","prototype","_collection","CarePlans","Package","Mongo","Collection","connection","_transform","document","CarePlanDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","ReferenceSchema","Code","allowedValues","PeriodSchema","Date","CodeableConceptSchema","Object","AnnotationSchema","Boolean","TimingSchema","QuantitySchema","CarePlanStu3","CarePlanSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","CarePlansPage","CarePlansTable","CarePlanDetail","CarePlanDesignerPage","CarePlanDetailPage","ConditionsTable","GoalsTable","MedicationsTable","Card","CardHeader","CardText","CardTitle","GlassCard","VerticalCanvas","Glass","DynamicSpacer","AccountCircle","Dialog","FlatButton","RaisedButton","TextField","ActivitiesTable","PatientTable","React","ReactMeteorData","ReactMixin","Meteor","Session","browserHistory","setDefault","props","getMeteorData","data","style","primaryContact","display","careplan","goal","selectedMeds","patientDialog","open","get","patient","reference","color","background","filter","WebkitFilter","find","count","carePlanTemplate","fetch","author","changeInput","variable","event","value","set","handleOpenPatients","handleClosePatients","render","inactiveIndexCard","opacity","width","paddingLeft","paddingRight","indexCard","cursor","indexCardPadding","position","patientActions","paddingTop","bind","textAlign","overflowY","marginBottom","Component","CardActions","Bert","PropTypes","FullPageCanvas","defaultCarePlan","carePlanId","carePlan","console","log","selectedCarePlan","findOne","_id","id","determineButtons","handleSaveButton","marginRight","handleDeleteButton","changeState","field","carePlanUpdate","process","env","NODE_ENV","asserter","clinicalStatus","code","coding","evidence","detail","resourceType","update","$set","error","result","alert","reason","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","propTypes","hasUser","object","Tab","Tabs","tab","borderBottom","borderRight","tabIndex","carePlanSearchFilter","currentCarePlan","params","blur","appbar","darkroom","handleTabChange","index","onNewTab","Table","has","FaTags","FaCode","FaPuzzlePiece","FaLock","flattenCarePlan","plan","subject","template","am","pm","activities","goals","start","end","title","toString","createdAt","moment","period","format","activity","length","carePlanQuery","selected","careplans","forEach","push","map","handleChange","row","key","source","state","setState","handleSelect","getDate","noChange","rowClick","renderBarcode","i","showBarcode","renderBarcodeHeader","tableRows","marginLeft"],"mappings":"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","file":"/packages/clinical_hl7-resource-careplan.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nCarePlan = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nCarePlan.prototype._collection = CarePlans;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof CarePlans === 'undefined'){\n  if(Package['clinical:autopublish']){\n    CarePlans = new Mongo.Collection('CarePlans');\n  } else if(Package['clinical:desktop-publish']){\n    CarePlans = new Mongo.Collection('CarePlans');\n  } else {\n    CarePlans = new Mongo.Collection('CarePlans', {connection: null});\n  }\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nCarePlans._transform = function (document) {\n  return new CarePlan(document);\n};\n\n\n// if (Meteor.isClient){\n//   Meteor.subscribe(\"CarePlans\");\n// }\n\n// if (Meteor.isServer){\n//   Meteor.publish(\"CarePlans\", function (argument){\n//     if (this.userId) {\n//       return CarePlans.find();\n//     } else {\n//       return [];\n//     }\n//   });\n// }\n\nCarePlanDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"CarePlan\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"status\" : {\n    type: Code,\n    allowedValues: ['proposed', 'draft', 'active', 'completed', 'cancelled']\n    },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"period\" : {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"author\" : {\n    optional: true,\n    type: Array\n    },\n  \"author.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n  \"modified\" : {\n    optional: true,\n    type: Date\n    },\n  \"category\" : {\n    optional: true,\n    type: Array\n    },\n  \"category.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n  \"description\" : {\n    optional: true,\n    type: String\n    },\n  \"addresses\" : {\n    optional: true,\n    type: Array\n    },\n  \"addresses.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n  \"support\" : {\n    optional: true,\n    type: Array\n    },    \n  \"support.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n\n  \"relatedPlan\" :  {\n    optional: true,\n    type: Array\n    },\n  \"relatedPlan.$\" :  {\n    optional: true,\n    type: Object\n    },          \n  \"relatedPlan.$.code\" :  {\n    optional: true,\n    type: Code,\n    allowedValues: ['includes', 'replaces', 'fulfills']\n    },\n  \"relatedPlan.$.plan\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"participant\" :  {\n    optional: true,\n    type: Array\n    },\n  \"participant.$\" :  {\n    optional: true,\n    type: Object\n    },          \n  \"participant.$.role\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"participant.$.member\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$\" :  {\n    optional: true,\n    type: Object\n    },      \n\n  \"activity.$.actionResulting\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.actionResulting.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.progress\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.progress.$\" :  {\n    optional: true,\n    type: AnnotationSchema \n    },    \n  \"activity.$.reference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"activity.$.detail\" :  {\n    optional: true,\n    type: Object\n    },\n\n  \"activity.$.detail.category\" :  {\n    optional: true,\n    type: CodeableConceptSchema,\n    allowedValues: ['diet', 'drug', 'encounter', 'observation', 'procedure', 'supply', 'other']\n    },\n  \"activity.$.detail.code\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.reasonCode\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonCode.$\" :  {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n\n  \"activity.$.detail.reasonReference\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonReference.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.status\" :  {\n    optional: true,\n    type: Code,\n    allowedValues: ['not-started', 'scheduled', 'in-progress', 'on-hold', 'completed', 'cancelled']\n    },\n  \"activity.$.detail.statusReason\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.prohibited\" :  {\n    type: Boolean,\n    defaultValue: false\n    },\n  \"activity.$.detail.scheduledTiming\" :  {\n    optional: true,\n    type: TimingSchema\n    },\n  \"activity.$.detail.scheduledPeriod\" :  {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"activity.$.detail.scheduledString\" :  {\n    optional: true,\n    type: String\n    },\n  \"activity.$.detail.location\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.performer\" : {\n    optional: true,\n    type:  Array\n    },\n  \"activity.$.detail.performer.$\" : {\n    optional: true,\n    type:  ReferenceSchema \n    },    \n  \"activity.$.detail.productCodeableConcept\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.productReference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.dailyAmount\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.quantity\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.description\" :  {\n    optional: true,\n    type: String\n    },\n  \"note\" :  {\n    optional: true,\n    type: AnnotationSchema\n    }\n});\n\n\n\n\n\nCarePlanStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"CarePlan\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"basedOn\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"replaces\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"partOf\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"status\" : {\n    type: Code,\n    allowedValues: ['draft', 'active', 'suspended', 'completed', 'entered-in-error', 'cancelled', 'unknown']\n    },\n  \"intent\" : {\n    type: Code,\n    allowedValues: ['proposal', 'plan', 'order', 'option']\n    },\n  \"category\" : {\n    optional: true,\n    type: Array\n    },\n  \"category.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n  \"title\" : {\n    optional: true,\n    type: String\n    },\n  \"description\" : {\n    optional: true,\n    type: String\n    },\n    \n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"period\" : {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"author\" : {\n    optional: true,\n    type: Array\n    },\n  \"author.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },  \n   \n  \"careTEam\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"addresses\" : {\n    optional: true,\n    type: Array\n    },\n  \"addresses.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n  \"supportingInfo\" : {\n    optional: true,\n    type: Array\n    },    \n  \"supportingInfo.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n\n  \"goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$\" :  {\n    optional: true,\n    type: Object\n    },      \n  \"activity.$.outcomeCodeableConcept\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.outcomeCodeableConcept.$\" :  {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n  \"activity.$.outcomeReference\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.outcomeReference.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.progress\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.progress.$\" :  {\n    optional: true,\n    type: AnnotationSchema \n    },    \n  \"activity.$.reference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"activity.$.detail\" :  {\n    optional: true,\n    type: Object\n    },\n\n  \"activity.$.detail.category\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.definition\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },    \n  \"activity.$.detail.code\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.reasonCode\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonCode.$\" :  {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n\n  \"activity.$.detail.reasonReference\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonReference.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.status\" :  {\n    type: Code,\n    allowedValues: ['not-started', 'scheduled', 'in-progress', 'on-hold', 'completed', 'cancelled', 'unknown']\n    },\n  \"activity.$.detail.statusReason\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.prohibited\" :  {\n    type: Boolean,\n    defaultValue: false\n    },\n  \"activity.$.detail.scheduledTiming\" :  {\n    optional: true,\n    type: TimingSchema\n    },\n  \"activity.$.detail.scheduledPeriod\" :  {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"activity.$.detail.scheduledString\" :  {\n    optional: true,\n    type: String\n    },\n  \"activity.$.detail.location\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.performer\" : {\n    optional: true,\n    type:  Array\n    },\n  \"activity.$.detail.performer.$\" : {\n    optional: true,\n    type:  ReferenceSchema \n    },    \n  \"activity.$.detail.productCodeableConcept\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.productReference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.dailyAmount\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.quantity\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.description\" :  {\n    optional: true,\n    type: String\n    },\n  \"note\" :  {\n    optional: true,\n    type: AnnotationSchema\n    }\n});\n\nCarePlanSchema = CarePlanStu3\n\nBaseSchema.extend(CarePlanSchema);\nDomainResourceSchema.extend(CarePlanSchema);\nCarePlans.attachSchema(CarePlanSchema);\n\nexport default { CarePlan, CarePlans, CarePlanSchema, CarePlanStu3, CarePlanDstu2 };","\n\nimport CarePlansPage from './client/react/CarePlansPage';\nimport CarePlansTable from './client/react/CarePlansTable';\nimport CarePlanDetail from './client/react/CarePlanDetail';\nimport CarePlanDesignerPage from './client/react/CarePlanDesignerPage';\nimport CarePlanDetailPage from './client/react/CarePlanDetailPage';\nimport { CarePlan, CarePlans, CarePlanSchema } from './lib/CarePlans';\n\nimport { ConditionsTable } from 'meteor/clinical:hl7-resource-condition';\nimport { GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\n\n\nvar DynamicRoutes = [{\n  'name': 'CarePlansPage',\n  'path': '/care-plans',\n  'component': CarePlansPage,\n  'requireAuth': true\n}, {\n  'name': 'Care Plan Designer',\n  'path': '/careplan-designer',\n  'component': CarePlanDesignerPage,\n  'requireAuth': true\n}, {\n  'name': 'CarePlanDetailPage',\n  'path': '/careplan/:id',\n  'component': CarePlanDetailPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Care Plans',\n  'to': '/care-plans',\n  'href': '/care-plans'\n}, {\n  'primaryText': 'CarePlan',\n  'to': '/careplan',\n  'href': '/careplan'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  CarePlansPage,\n  CarePlansTable,\n  CarePlanDetail,\n  CarePlanDesignerPage\n};\n\n\n","import { Card, CardHeader, CardText, CardTitle } from 'material-ui/Card';\nimport { GlassCard, VerticalCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport AccountCircle from 'material-ui/svg-icons/action/account-circle';\nimport Dialog from 'material-ui/Dialog';\nimport FlatButton from 'material-ui/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport TextField from 'material-ui/TextField';\n\nimport { ActivitiesTable, GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\nimport { PatientTable } from 'meteor/clinical:hl7-resource-patient'\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { browserHistory } from 'react-router';\n\nSession.setDefault('patientDialogOpen', false);\nexport class CarePlanDesignerPage extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getMeteorData() {\n\n    let data = {\n      style: {},\n      primaryContact: {\n        display: ''\n      },\n      careplan: {\n        goal: []\n      },\n      selectedMeds: [],\n      patientDialog: {\n        open: Session.get('patientDialogOpen'),\n        patient: {\n          display: '',\n          reference: ''\n        }\n      }\n    };\n\n\n    // this should all be handled by props\n    // or a mixin!\n    if (Session.get('darkroomEnabled')) {\n      data.style.color = 'black';\n      data.style.background = 'white';\n    } else {\n      data.style.color = 'white';\n      data.style.background = 'black';\n    }\n\n    // this could be another mixin\n    if (Session.get('glassBlurEnabled')) {\n      data.style.filter = 'blur(3px)';\n      data.style.WebkitFilter = 'blur(3px)';\n    }\n\n    // the following assumes that we only have a single CarePlan record in the database\n    if (CarePlans.find({'identifier.value':'alcohol-treatment-template'}).count() > 0) {\n      let carePlanTemplate = CarePlans.find({'identifier.value':'alcohol-treatment-template'}).fetch()[0];\n      //console.log(\"carePlanTemplate\", carePlanTemplate);\n\n      if (carePlanTemplate ) {\n        data.primaryContact = carePlanTemplate.author[0];\n\n        data.careplan = carePlanTemplate;\n      }\n    }\n\n    return data;\n  }\n  changeInput(variable, event, value){\n    Session.set(variable, value);\n  }  \n  handleOpenPatients(){\n    Session.set('patientDialogOpen', true);\n  }  \n  handleClosePatients(){\n    Session.set('patientDialogOpen', false);\n  }  \n  render() {\n    let style = {\n      inactiveIndexCard: {\n        opacity: .5,\n        width: '50%',\n        display: 'inline-block',\n        paddingLeft: '20px',\n        paddingRight: '20px'\n      },\n      indexCard: {\n        cursor: 'pointer'\n      },\n      indexCardPadding: {\n        width: '100%',\n        display: 'inline-block',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        position: 'relative'\n      }\n    };\n    const patientActions = [\n      <FlatButton\n        label=\"Clear\"\n        primary={true}\n        onTouchTap={this.handleClosePatients}\n      />,\n      <FlatButton\n        label=\"Select\"\n        primary={true}\n        keyboardFocused={true}\n        onTouchTap={this.handleClosePatients}\n      />\n    ];\n    return (\n      <section id='carePlanDesignerPage' style={{paddingTop: \"20px\", position: 'absolute'}}>\n        <VerticalCanvas >\n\n          <section id=\"patientSection\" style={style.indexCardPadding} >\n            <GlassCard>\n              <CardTitle\n                title=\"Patient Pick List\"\n              />\n              <CardText>\n\n                <TextField\n                  hintText=\"Jane Doe\"\n                  errorText=\"Patient Search\"\n                  onChange={this.changeInput.bind(this, 'description')}\n                  value={this.data.patientDialog.patient.display}\n                  fullWidth>\n                    <FlatButton\n                      label=\"Patients\"\n                      className=\"patientsButton\"\n                      primary={true}\n                      onTouchTap={this.handleOpenPatients}\n                      icon={ <AccountCircle /> }\n                      style={{textAlign: 'right', cursor: 'pointer'}}\n                    />\n                  </TextField>\n\n                <Dialog\n                  title=\"Patient Search\"\n                  actions={patientActions}\n                  modal={false}\n                  open={this.data.patientDialog.open}\n                  onRequestClose={this.handleClosePatients}\n                >\n                  <CardText style={{overflowY: \"auto\"}}>\n                  <TextField\n                    hintText=\"Jane Doe\"\n                    errorText=\"Patient Search\"\n                    onChange={this.changeInput.bind(this, 'description')}\n                    value={this.data.patientDialog.patient.display}\n                    fullWidth />\n                    <PatientTable />\n                  </CardText>\n                </Dialog>\n              </CardText>\n            </GlassCard>\n          </section>\n\n\n          <DynamicSpacer />\n\n          <section id=\"medicationSection\" style={style.indexCardPadding} >\n            <GlassCard style={style.indexCard} >\n              <CardTitle\n                title='Medications'\n                subtitle='Select the medications the patient will receive.'\n              />\n              <CardText>\n                <MedicationsTable />\n              </CardText>\n            </GlassCard>\n          </section>\n\n          <DynamicSpacer />\n\n          <section id=\"activitiesSection\" style={style.indexCardPadding} >\n            <GlassCard style={style.indexCard} >\n              <CardTitle\n                title='Activities'\n                subtitle='Select the activities the patient ought to engage in.'\n              />\n              <CardText>\n                <ActivitiesTable />\n              </CardText>\n            </GlassCard>\n          </section>\n\n          <DynamicSpacer />\n\n          <section id=\"goalsSelection\" style={style.indexCardPadding} >\n            <GlassCard style={style.indexCard} >\n              <CardTitle\n                title='Goals'\n                subtitle='Select the goals for the patient treatment.'\n              />\n              <CardText>\n                <GoalsTable />\n              </CardText>\n            </GlassCard>\n          </section>\n\n          <DynamicSpacer />\n\n\n          <section  style={style.indexCardPadding}>\n            <RaisedButton\n              id='authorCarePlanButton'\n              label=\"Author CarePlan\"\n              fullWidth={true}\n              //onClick={this.authorCarePlan.bind(this)}\n              style={{marginBottom: '60px'}}\n            />\n          </section>\n\n        </VerticalCanvas>\n      </section>\n    );\n  }\n  // authorCarePlan(){\n  //   if(process.env.NODE_ENV === \"test\") console.log(\"authoring care plan...\");\n\n  //   var currentUser = new User(Meteor.user());\n\n  //   let careplanData = {\n  //     template: 'alcohol-treatment-template',\n  //     subject: {\n  //       display: Session.get('patientSearchFilter'),\n  //       reference: Session.get('selectedPatientId')\n  //     },\n  //     author: {\n  //       display: currentUser.fullName(),\n  //       reference: Meteor.userId()\n  //     },\n  //     description: 'Alcohol Recovery Treatment Plan',\n  //     medications: Session.get('selectedMedications'),\n  //     goals: Session.get('selectedGoals'),\n  //     deselectedActivities: Session.get('deselectedActivities')\n  //   };\n\n  //   if(process.env.NODE_ENV === \"test\") console.log(\"careplanData\", careplanData);\n\n\n  //   let newCarePlanId = authorCarePlan.call(careplanData);\n\n  //   Patients.update({_id: Session.get('selectedPatientId')}, {$set: {\n  //     'carePlanId': newCarePlanId\n  //   }});\n\n  //   Session.set('selectedMedications', []);\n  //   browserHistory.push('/careplan-history');\n  // }\n}\n\n\n\n\nReactMixin(CarePlanDesignerPage.prototype, ReactMeteorData);\n\nexport default CarePlanDesignerPage;","import { CardActions, CardText, CardTitle, RaisedButton } from 'material-ui';\n\nimport { Bert } from 'meteor/clinical:alert';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { Glass, GlassCard, VerticalCanvas, FullPageCanvas, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport { ConditionsTable } from 'meteor/clinical:hl7-resource-condition';\nimport { GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\n\nlet defaultCarePlan = {\n  \"resourceType\": \"CarePlan\",\n  \"patient\": {\n    \"reference\": \"\",\n    \"display\": \"\"\n  },\n  \"asserter\": {\n    \"reference\": \"\",\n    \"display\": \"\"\n  },\n  \"dateRecorded\": \"\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"\",\n        \"display\": \"\"\n      }\n    ]\n  },\n  \"clinicalStatus\": \"\",\n  \"verificationStatus\": \"confirmed\",\n  \"severity\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"\",\n        \"display\": \"\"\n      }\n    ]\n  },\n  \"onsetDateTime\": \"\",\n  \"evidence\": [\n    {\n      \"detail\": [\n        {\n          \"reference\": \"\",\n          \"display\": \"\"\n        }\n      ]\n    }\n  ]\n};\n\n\n\nSession.setDefault('carePlanUpsert', false);\nSession.setDefault('selectedCarePlan', false);\n\n\nexport class CarePlanDetail extends React.Component {\n  getMeteorData() {\n    let data = {\n      carePlanId: false,\n      carePlan: defaultCarePlan\n    };\n\n    if (Session.get('carePlanUpsert')) {\n      data.carePlan = Session.get('carePlanUpsert');\n    } else {\n      if (Session.get('selectedCarePlan')) {\n        data.carePlanId = Session.get('selectedCarePlan');\n        console.log(\"selectedCarePlan\", Session.get('selectedCarePlan'));\n\n        let selectedCarePlan = CarePlans.findOne({_id: Session.get('selectedCarePlan')});\n        console.log(\"selectedCarePlan\", selectedCarePlan);\n\n        if (selectedCarePlan) {\n          data.carePlan = selectedCarePlan;\n        }\n      } else {\n        data.carePlan = defaultCarePlan;\n      }\n\n    }\n\n    console.log('CarePlanDetail.data', data)\n    return data;\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} className=\"carePlanDetail\">\n        <CardTitle title='Addresses' />\n        <ConditionsTable />\n        <DynamicSpacer />\n\n        <CardTitle title='Goals' />\n        <GoalsTable />\n        <DynamicSpacer />\n\n        <CardTitle title='Medications' />\n        <MedicationsTable />\n        <DynamicSpacer />\n\n        <CardActions>\n          { this.determineButtons(this.data.carePlanId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n\n  determineButtons(carePlanId){\n    if (carePlanId) {\n      return (\n        <div>\n          <RaisedButton id=\"saveCarePlanButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)}  style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteCarePlanButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveCarePlanButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n\n  // this could be a mixin\n  changeState(field, event, value){\n    let carePlanUpdate;\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"CarePlanDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new carePlan\n    if (Session.get('carePlanUpsert')) {\n      carePlanUpdate = Session.get('carePlanUpsert');\n    } else {\n      carePlanUpdate = defaultCarePlan;\n    }\n\n\n\n    // if there's an existing carePlan, use them\n    if (Session.get('selectedCarePlan')) {\n      carePlanUpdate = this.data.carePlan;\n    }\n\n    switch (field) {\n      case \"patientDisplay\":\n        carePlanUpdate.patient.display = value;\n        break;\n      case \"asserterDisplay\":\n        carePlanUpdate.asserter.display = value;\n        break;\n      case \"clinicalStatus\":\n        carePlanUpdate.clinicalStatus = value;\n        break;\n      case \"snomedCode\":\n        carePlanUpdate.code.coding[0].code = value;\n        break;\n      case \"snomedDisplay\":\n        carePlanUpdate.code.coding[0].display = value;\n        break;\n      case \"evidenceDisplay\":\n        carePlanUpdate.evidence[0].detail[0].display = value;\n        break;\n      default:\n\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"carePlanUpdate\", carePlanUpdate);\n    Session.set('carePlanUpsert', carePlanUpdate);\n  }\n\n  handleSaveButton(){\n    let carePlanUpdate = Session.get('carePlanUpsert', carePlanUpdate);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"carePlanUpdate\", carePlanUpdate);\n\n\n    if (Session.get('selectedCarePlan')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating carePlan...\");\n      delete carePlanUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      carePlanUpdate.resourceType = 'CarePlan';\n\n      CarePlans._collection.update(\n        {_id: Session.get('selectedCarePlan')}, {$set: carePlanUpdate }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"CarePlans\", recordId: Session.get('selectedCarePlan')});\n            Session.set('carePlanPageTabIndex', 1);\n            Session.set('selectedCarePlan', false);\n            Session.set('carePlanUpsert', false);\n            Bert.alert('CarePlan updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new carePlan\", carePlanUpdate);\n\n      CarePlans._collection.insert(carePlanUpdate, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"CarePlans\", recordId: result});\n          Session.set('carePlanPageTabIndex', 1);\n          Session.set('selectedCarePlan', false);\n          Session.set('carePlanUpsert', false);\n          Bert.alert('CarePlan added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('carePlanPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    CarePlan._collection.remove({_id: Session.get('selectedCarePlan')}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"CarePlans\", recordId: Session.get('selectedCarePlan')});\n        Session.set('carePlanPageTabIndex', 1);\n        Session.set('selectedCarePlan', false);\n        Session.set('carePlanUpsert', false);\n        Bert.alert('CarePlan removed!', 'success');\n      }\n    });\n  }\n}\n\n\nCarePlanDetail.propTypes = {\n  hasUser: PropTypes.object\n};\nReactMixin(CarePlanDetail.prototype, ReactMeteorData);\nexport default CarePlanDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { get } from 'lodash';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nimport { ConditionsTable } from 'meteor/clinical:hl7-resource-condition';\nimport { GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\n\nexport class CarePlanDetailPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('carePlanPageTabIndex'),\n      carePlanSearchFilter: Session.get('carePlanSearchFilter'),\n      currentCarePlan: Session.get('selectedCarePlan')\n    };\n\n    if(this.props.params.id){\n      data.currentCarePlan = CarePlans.findOne({_id: this.props.params.id});\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    console.log('CarePlanDetailPage.data', data)\n    // console.log('CarePlanDetailPage.props', this.props)\n\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In CarePlanDetailPage render');\n    return (\n      <div id='carePlanDetailPage'>\n        <VerticalCanvas>\n\n          <GlassCard >\n            <CardTitle title='Conditions Addressed' />\n            <CardText>\n            <ConditionsTable />\n              {/* <ConditionsTable conditions={get(this, 'data.currentCarePlan.addresses')} /> */}\n            </CardText>\n          </GlassCard>\n          <DynamicSpacer />\n\n          <GlassCard >\n            <CardTitle title='Goals' />\n            <CardText>\n              <GoalsTable />\n            </CardText>\n          </GlassCard>\n          <DynamicSpacer />\n\n          <GlassCard >\n            <CardTitle title='Medications' />\n            <CardText>\n              <MedicationsTable />\n            </CardText>\n          </GlassCard>\n          <DynamicSpacer />\n\n\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(CarePlanDetailPage.prototype, ReactMeteorData);\n\nexport default CarePlanDetailPage;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport CarePlanDetail from './CarePlanDetail';\nimport CarePlansTable from './CarePlansTable';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nexport class CarePlansPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('carePlanPageTabIndex'),\n      carePlanSearchFilter: Session.get('carePlanSearchFilter'),\n      currentCarePlan: Session.get('selectedCarePlan')\n    };\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('carePlanPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedCarePlan', false);\n    Session.set('carePlanUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In CarePlansPage render');\n    return (\n      <div id='carePlansPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='CarePlans' />\n            <CardText>\n              <CarePlansTable />\n\n              {/* <Tabs id=\"carePlansPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className=\"carePlanListTab\" label='CarePlans' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <CarePlansTable />\n               </Tab>\n               <Tab className=\"carePlanDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <CarePlanDetail id='carePlanDetails' />\n               </Tab>\n             </Tabs> */}\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(CarePlansPage.prototype, ReactMeteorData);\n\nexport default CarePlansPage;","import React from 'react';\nimport ReactMixin from 'react-mixin';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport { Table } from 'react-bootstrap';\nimport { get, has } from 'lodash';\n\nimport { browserHistory } from 'react-router';\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\n\n\nflattenCarePlan = function(plan){\n  // careplans: CarePlans.find({'subject.reference': Meteor.userId}).map(function(plan){\n  // todo: replace tertiary logic\n\n  // console.log('flattenCarePlan', plan)\n\n  let result = {\n    _id: plan._id,\n    subject: '',\n    author: '',\n    template: '',\n    am: '',\n    pm: '',\n    activities: '',\n    goals: '',\n    start: '',\n    end: '',\n    title: ''\n  };\n\n  if (plan.template) {\n    result.template = plan.template.toString();\n  }\n  if (plan.subject && plan.subject.display) {\n    result.subject = plan.subject.display;\n  }\n  if (plan.author && plan.author[0] && plan.author[0].display) {\n    result.author = plan.author[0].display;\n  }\n  if (plan.createdAt) {\n    result.createdAt = moment(plan.period.start).format(\"YYYY-MM-DD hh:mm a\");\n  }\n  if (plan.activity) {\n    result.activities = plan.activity.length;\n  }\n  if (plan.goal) {\n    result.goals = plan.goal.length;\n  }\n  if (typeof plan.title === \"string\") {\n    result.title = plan.title;\n  } else {\n    result.title = get(plan, 'category[0].text')    \n  }\n\n  // if( plan.period ) {\n  //   if (plan.period.start) {\n  //     result.start = plan.period.start;\n  //   }\n  //   if (plan.period.end) {\n  //     result.end = plan.period.end;\n  //   }\n  // }\n\n  return result;\n}\nexport class CarePlansTable extends React.Component {\n  \n  getMeteorData() {\n\n    // default query is scoped to the logged in user\n    let carePlanQuery = {'subject.reference': Meteor.userId()};\n    if (get(Meteor.user(), 'roles[0]') === \"practitioner\") {\n      // practitioner query is open ended and returns everybody\n      carePlanQuery = {};\n    }\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      careplans: []\n    };\n\n\n    if(this.props.data){\n      this.props.data.forEach(function(plan){\n        data.careplans.push(flattenCarePlan(plan));\n      })\n    } else {\n      data.careplans = CarePlans.find(carePlanQuery).map(flattenCarePlan);\n    }\n\n    // if (Session.get('darkroomEnabled')) {\n    //   data.style.color = \"black\";\n    //   data.style.background = \"white\";\n    // } else {\n    //   data.style.color = \"white\";\n    //   data.style.background = \"black\";\n    // }\n\n    // // this could be another mixin\n    // if (Session.get('glassBlurEnabled')) {\n    //   data.style.filter = \"blur(3px)\";\n    //   data.style.WebkitFilter = \"blur(3px)\";\n    // }\n\n    // // this could be another mixin\n    // if (Session.get('backgroundBlurEnabled')) {\n    //   data.style.backdropFilter = \"blur(5px)\";\n    // }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"CarePlansTable[data]\", data);\n\n\n    return data;\n  }\n\n  handleChange(row, key, value) {\n    const source = this.state.source;\n    source[row][key] = value;\n    this.setState({source});\n  }\n\n  handleSelect(selected) {\n    this.setState({selected});\n  }\n  getDate(){\n    return \"YYYY/MM/DD\";\n  }\n  noChange(){\n    return \"\";\n  }\n  rowClick(id){\n    // set the user\n    Session.set(\"selectedCarePlan\", id);\n\n    // // set which tab is selected\n    // let state = Session.get('patientCardState');\n    // state[\"index\"] = 2;\n    // Session.set('patientCardState', state);\n\n    browserHistory.push('/careplan/' + id);\n\n  }\n  renderBarcode(i){\n    if (this.props.showBarcode) {\n      return (\n        <td><span className=\"barcode\">{this.data.careplans[i]._id}</span></td>\n      );\n    }\n  }\n  renderBarcodeHeader(){\n    if (this.props.showBarcode) {\n      return (<th>id</th>);\n    }\n  }\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.careplans.length; i++) {\n      tableRows.push(\n        <tr key={i} className=\"patientRow\" style={{cursor: \"pointer\", textAlign: 'left'}} onClick={ this.rowClick.bind('this', this.data.careplans[i]._id)} >\n          <td className='meta' style={{width: '100px'}}>\n            <FaLock style={{marginLeft: '2px', marginRight: '2px'}} />\n            <FaTags style={{marginLeft: '2px', marginRight: '2px'}} />\n            <FaCode style={{marginLeft: '2px', marginRight: '2px'}} />\n            <FaPuzzlePiece style={{marginLeft: '2px', marginRight: '2px'}} />\n          </td>\n          <td>{this.data.careplans[i].title }</td>\n          <td>{this.data.careplans[i].subject }</td>\n          <td>{this.data.careplans[i].author }</td>\n          {/* <td>{this.data.careplans[i].am}</td>\n          <td>{this.data.careplans[i].pm}</td>\n          <td>{this.data.careplans[i].activities}</td>\n          <td>{this.data.careplans[i].goals}</td> */}\n          {/* <td>{ moment(get(this, 'data.careplans[i].period.start')).format(\"YYYY-MM-DD\") }</td>\n          <td>{ moment(get(this, 'data.careplans[i].period.end')).format(\"YYYY-MM-DD\") }</td> */}\n          {this.renderBarcode.bind('this', this.data.careplans[i]._id)}\n        </tr>\n      );\n    }\n\n\n    return(\n      <Table hover >\n        <thead>\n          <tr>\n            <th className='meta'>Meta</th>\n            <th>Title</th>\n            <th>Subject</th>\n            <th>Author</th>\n            {/* <th>am</th>\n            <th>pm</th>\n            <th>activities</th>\n            <th>goals</th> */}\n            {/* <th>start</th>\n            <th>end</th> */}\n            {/* <th>template</th> */}\n            {this.renderBarcodeHeader}\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n\n    );\n  }\n}\n\n\nCarePlansTable.propTypes = {};\nReactMixin(CarePlansTable.prototype, ReactMeteorData);\nexport default CarePlansTable;"]}