{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-device/lib/Devices.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-device/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-device/client/DeviceDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-device/client/DevicesPage.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-device/client/DevicesTable.jsx"],"names":["SimpleSchema","module","link","v","Device","BaseModel","extend","prototype","_collection","Devices","Package","Mongo","Collection","connection","_transform","document","DeviceDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","CodeableConceptSchema","AnnotationSchema","Code","Date","ReferenceSchema","ContactPointSchema","DeviceStu3","Object","allowedValues","DeviceSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","DevicesPage","DevicesTable","DeviceDetail","CardActions","CardText","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","PropTypes","Col","Grid","Row","get","set","Meteor","Session","GlassCard","VerticalCanvas","Glass","setDefault","props","state","deviceId","device","resourceType","identifier","coding","system","code","text","value","status","manufacturer","model","lotNumber","contact","form","deviceType","serialNumber","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","console","log","shouldUpdate","setState","getMeteorData","data","render","id","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateDevice","deviceData","componentDidUpdate","event","self","fhirDeviceData","deviceValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","CardTitle","Tabs","Tab","style","opacity","tab","borderBottom","borderRight","tabIndex","deviceSearchFilter","currentDeviceId","selectedDevice","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Card","CardMedia","Table","selected","devices","find","fetch","rowClick","tableRows","i","length","push","cursor","note"],"mappings":"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","file":"/packages/clinical_hl7-resource-device.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nDevice = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nDevice.prototype._collection = Devices;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\nif(typeof Devices === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Devices = new Mongo.Collection('Devices');\n  } else if(Package['clinical:desktop-publish']){    \n    Devices = new Mongo.Collection('Devices');\n  } else {\n    Devices = new Mongo.Collection('Devices', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nDevices._transform = function (document) {\n  return new Device(document);\n};\n\n\nDeviceDstu2 = new SimpleSchema({\n  'resourceType' : {\n    type: String,\n    defaultValue: 'Device'\n  },\n  'identifier' : {\n    optional: true,\n    type: Array\n  }, // Instance id from manufacturer, owner, and others\n  'identifier.$' : {\n    optional: true,\n    type: IdentifierSchema \n  }, // Instance id from manufacturer, owner, and others\n  'type' : {\n    type: CodeableConceptSchema\n  }, // R!  What kind of device this is\n  'note' : {\n    optional: true,\n    type: Array\n  }, // Device notes and comments\n  'note.$' : {\n    optional: true,\n    type: AnnotationSchema\n  }, // Device notes and comments\n  'status' : {\n    optional: true,\n    type: Code\n  }, // available | not-available | entered-in-error\n  'manufacturer' : {\n    optional: true,\n    type: String\n  }, // Name of device manufacturer\n  'model' : {\n    optional: true,\n    type: String\n  }, // Model id assigned by the manufacturer\n  'version' : {\n    optional: true,\n    type: String\n  }, // Version number (i.e. software)\n  'manufactureDate' : {\n    optional: true,\n    type: Date\n  }, // Manufacture date\n  'expiry' : {\n    optional: true,\n    type: Date\n  }, // Date and time of expiry of this device (if applicable)\n  'udi' : {\n    optional: true,\n    type: String\n  }, // FDA mandated Unique Device Identifier\n  'lotNumber' : {\n    optional: true,\n    type: String\n  }, // Lot number of manufacture\n  'owner' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Organization) Organization responsible for device\n  'location' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Location)Where the resource is found\n  'patient' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Patient) If the resource is affixed to a person\n  'contact' : {\n    optional: true,\n    type: Array\n  }, // Details for human/organization for support\n  'contact.$' : {\n    optional: true,\n    type: ContactPointSchema \n  }, // Details for human/organization for support\n  'url' : {\n    optional: true,\n    type: String\n  } // Network address to contact device\n});\n\n\n\nDeviceStu3 = new SimpleSchema({\n  'resourceType' : {\n    type: String,\n    defaultValue: 'Device'\n  },\n  'identifier' : {\n    optional: true,\n    type: Array\n  }, // Instance id from manufacturer, owner, and others\n  'identifier.$' : {\n    optional: true,\n    type: IdentifierSchema \n  }, // Instance id from manufacturer, owner, and others\n  'udi' : {\n    optional: true,\n    type: Object\n  }, // FDA mandated Unique Device Identifier\n  'udi.deviceIdentifier' : {\n    optional: true,\n    type: String\n  }, \n  'udi.name' : {\n    optional: true,\n    type: String\n  }, \n  'udi.jurisdiction' : {\n    optional: true,\n    type: String\n  }, \n  'udi.carrierHRF' : {\n    optional: true,\n    type: String\n  }, \n  'udi.carrierAIDC' : {\n    optional: true,\n    type: String\n  }, \n  'udi.issuer' : {\n    optional: true,\n    type: String\n  }, \n  'udi.entryType' : {\n    optional: true,\n    type: Code\n  }, \n  'status' : {\n    optional: true,\n    type: Code,\n    allowedValues: ['active', 'inactive', 'enterred-in-error', 'unknown']\n  },\n  'type' : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  'lotNumber' : {\n    optional: true,\n    type: String\n  }, // Lot number of manufacture\n  'manufacturer' : {\n    optional: true,\n    type: String\n  }, // Name of device manufacturer\n  'manufactureDate' : {\n    optional: true,\n    type: Date\n  }, // Manufacture date\n  'expirationDate' : {\n    optional: true,\n    type: Date\n  }, // Manufacture date\n  'model' : {\n    optional: true,\n    type: String\n  }, // Model id assigned by the manufacturer\n  'version' : {\n    optional: true,\n    type: String\n  }, // Version number (i.e. software)\n  'patient' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Organization) Organization responsible for device\n  'owner' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Organization) Organization responsible for device\n  'contact' : {\n    optional: true,\n    type: Array\n  }, // Details for human/organization for support\n  'contact.$' : {\n    optional: true,\n    type: ContactPointSchema \n  }, // Details for human/organization for support\n  'location' : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Location)Where the resource is found\n  'url' : {\n    optional: true,\n    type: String\n  }, // Network address to contact device\n  'note' : {\n    optional: true,\n    type: Array\n  }, // Device notes and comments\n  'note.$' : {\n    optional: true,\n    type: AnnotationSchema\n  }, // Device notes and comments\n  'safety' : {\n    optional: true,\n    type: Array\n  }, \n  'safety.$' : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, \n});\n\n\n\n\nDeviceSchema = DeviceDstu2;\n\nBaseSchema.extend(DeviceSchema);\nDomainResourceSchema.extend(DeviceSchema);\nDevices.attachSchema(DeviceSchema);\n\nexport default { Device, Devices, DeviceSchema, DeviceDstu2, DeviceStu3 };","\nimport DevicesPage from './client/DevicesPage';\nimport DevicesTable from './client/DevicesTable';\n\nvar DynamicRoutes = [{\n  'name': 'DevicesPage',\n  'path': '/devices',\n  'component': DevicesPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Devices',\n  'to': '/devices',\n  'href': '/devices'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  DevicesPage,\n  DevicesTable\n};\n\n\n","// =======================================================================\n// Using DSTU2  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//\n// https://www.hl7.org/fhir/DSTU2/device.html\n//\n//\n// =======================================================================\n\n\nimport { CardActions, CardText } from 'material-ui/Card';\n\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { Col, Grid, Row } from 'react-bootstrap';\nimport { get, set } from 'lodash';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\n\nSession.setDefault('deviceUpsert', false);\n\nexport class DeviceDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deviceId: false,\n      device: {\n        resourceType: \"Device\",\n        identifier: [{\n          type: {\n            coding: [\n              {\n                system: \"http://hl7.org/fhir/identifier-type\",\n                code: \"SNO\"\n              }\n            ],\n            text: \"Serial Number\"\n          },\n          value: \"\"\n        }],\n        type: {\n          text: \"\"\n        },\n        status: \"available\",\n        manufacturer: \"\",\n        model: \"\",\n        lotNumber: \"\",\n        contact: [{\n          resourceType: \"ContactPoint\",\n          system: \"phone\",\n          value: \"\"\n        }]\n      },\n      form: {\n        deviceType: '',\n        manufacturer: '',\n        model: '',\n        serialNumber: ''\n      }\n    }\n  }\n  dehydrateFhirResource(device) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.deviceType = get(device, 'type.text')\n    formData.manufacturer = get(device, 'manufacturer')    \n    formData.model = get(device, 'model')\n    formData.serialNumber = get(device, 'identifier[0].value')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('DeviceDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.device === this.state.device){\n      shouldUpdate = false;\n    }\n\n    // received an device from the table; okay lets update again\n    if(nextProps.deviceId !== this.state.deviceId){\n      this.setState({deviceId: nextProps.deviceId})\n      \n      if(nextProps.device){\n        this.setState({device: nextProps.device})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.device)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      deviceId: this.props.deviceId,\n      device: false,\n      form: this.state.form\n    };\n\n    if(this.props.device){\n      data.device = this.props.device;\n    }\n\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('DeviceDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"deviceDetail\">\n        <CardText>\n          <TextField\n            id='deviceTypeInput'\n            ref='deviceType'\n            name='deviceType'\n            floatingLabelText='Device Type'\n            hintText=\"Floor Scale\"\n            value={ get(formData, 'deviceType', '') }\n            onChange={ this.changeState.bind(this, 'deviceType')}\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n          <TextField\n            id='manufacturerInput'\n            ref='manufacturer'\n            name='manufacturer'\n            floatingLabelText='Manufacturer'\n            hintText=\"Withings\"\n            value={ get(formData, 'manufacturer', '') }\n            onChange={ this.changeState.bind(this, 'manufacturer')}\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n          <TextField\n            id='deviceModelInput'\n            ref='deviceModel'\n            name='deviceModel'\n            floatingLabelText='Model'\n            hintText='Cardio WiFi'\n            value={ get(formData, 'model', '') }\n            onChange={ this.changeState.bind(this, 'deviceModel')}\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n          <TextField\n            id='serialNumberInput'\n            ref='serialNumber'\n            name='serialNumber'\n            hintText='GN-23-01'\n            floatingLabelText='Serial Number'\n            value={ get(formData, 'serialNumber', '') }\n            onChange={ this.changeState.bind(this, 'serialNumber')}\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.deviceId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(deviceId){\n    if (deviceId) {\n      return (\n        <div>\n          <RaisedButton id=\"saveDeviceButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteDeviceButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveDeviceButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"DeviceDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"deviceType\":\n        set(formData, 'deviceType', textValue)\n        break;\n      case \"manufacturer\":\n        set(formData, 'manufacturer', textValue)\n        break;        \n      case \"deviceModel\":\n        set(formData, 'model', textValue)\n        break;\n      case \"serialNumber\":\n        set(formData, 'serialNumber', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateDevice(deviceData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"DeviceDetail.updateDevice\", deviceData, field, textValue);\n\n    switch (field) {\n      case \"deviceType\":\n        set(deviceData, 'type.text', textValue)\n        break;\n      case \"manufacturer\":\n        set(deviceData, 'manufacturer', textValue)\n        break;\n      case \"deviceModel\":\n        set(deviceData, 'model', textValue)\n        break;\n      case \"serialNumber\":\n        set(deviceData, 'identifier[0].value', textValue)\n        break;      \n    }\n    return deviceData;\n  }\n  componentDidUpdate(props){\n    if(process.env.NODE_ENV === \"test\") console.log('DeviceDetail.componentDidUpdate()', props, this.state)\n  }\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"DeviceDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let deviceData = Object.assign({}, this.state.device);\n\n    formData = this.updateFormData(formData, field, textValue);\n    deviceData = this.updateDevice(deviceData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"deviceData\", deviceData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({device: deviceData})\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Device...', this.state)\n\n    let self = this;\n    let fhirDeviceData = Object.assign({}, this.state.device);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirDeviceData', fhirDeviceData);\n\n\n    let deviceValidator = DeviceSchema.newContext();\n    deviceValidator.validate(fhirDeviceData)\n\n    console.log('IsValid: ', deviceValidator.isValid())\n    console.log('ValidationErrors: ', deviceValidator.validationErrors());\n\n    if (this.data.deviceId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating device...\");\n      delete fhirDeviceData._id;\n\n      Devices._collection.update(\n        {_id: this.data.deviceId}, {$set: fhirDeviceData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Devices\", recordId: self.data.deviceId});\n            Session.set('devicePageTabIndex', 1);\n            Session.set('selectedDevice', false);\n            Session.set('deviceUpsert', false);\n            Bert.alert('Device updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new device\", fhirDeviceData);\n\n      Devices._collection.insert(fhirDeviceData, function(error, result) {\n        if (error) {\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Devices\", recordId: self.data.deviceId});\n          Session.set('devicePageTabIndex', 1);\n          Session.set('selectedDevice', false);\n          Session.set('deviceUpsert', false);\n          Bert.alert('Device added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('devicePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Devices._collection.remove({_id: this.data.deviceId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Devices\", recordId: self.data.deviceId});\n        Session.set('devicePageTabIndex', 1);\n        Session.set('selectedDevice', false);\n        Session.set('deviceUpsert', false);\n        Bert.alert('Device removed!', 'success');\n      }\n    });\n  }\n}\n\n\nDeviceDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  deviceId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  device: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(DeviceDetail.prototype, ReactMeteorData);\nexport default DeviceDetail;","import React  from 'react';\nimport ReactMixin  from 'react-mixin';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\n\nimport { CardTitle, CardText } from 'material-ui/Card';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport DeviceDetail from './DeviceDetail';\nimport DevicesTable from './DevicesTable';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nSession.setDefault('fhirVersion', 'v1.0.2');\nSession.setDefault('selectedDeviceId', false);\n\nexport class DevicesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('devicePageTabIndex'),\n      deviceSearchFilter: Session.get('deviceSearchFilter'),\n      currentDeviceId: Session.get('selectedDeviceId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedDevice: false\n    };\n\n    if (Session.get('selectedDeviceId')){\n      data.selectedDevice = Devices.findOne({_id: Session.get('selectedDeviceId')});\n    } else {\n      data.selectedDevice = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('devicePageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedDeviceId', false);\n    Session.set('deviceUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In DevicesPage render');\n    return (\n      <div id='devicesPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Devices' />\n            <CardText>\n              <Tabs id=\"devicesPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newDeviceTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <DeviceDetail \n                  id='newDevice'\n                  fhirVersion={ this.data.fhirVersion }\n                  device={ this.data.selectedDevice }\n                  deviceId={ this.data.currentDeviceId } \n                  />  \n               </Tab>\n               <Tab className=\"deviceListTab\" label='Devices' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <DevicesTable />\n               </Tab>\n               <Tab className=\"deviceDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <DeviceDetail \n                  id='deviceDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  device={ this.data.selectedDevice }\n                  deviceId={ this.data.currentDeviceId } />  \n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(DevicesPage.prototype, ReactMeteorData);\n\nexport default DevicesPage;","import { Card, CardActions, CardMedia, CardText, CardTitle } from 'material-ui/Card';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\n\nexport default class DevicesTable extends React.Component {\n\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        text: Glass.darkroom()\n      },\n      selected: [],\n      devices: Devices.find().fetch()\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"DevicesTable[data]\", data);\n    return data;\n  };\n\n\n  rowClick(id){\n    Session.set('devicesUpsert', false);\n    Session.set('selectedDeviceId', id);\n    Session.set('devicePageTabIndex', 2);\n  };\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.devices.length; i++) {\n      tableRows.push(\n        <tr key={i} className=\"deviceRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.devices[i]._id)} >\n\n          <td className='deviceType'>{this.data.devices[i].type.text }</td>\n          <td className='manufacturer'>{this.data.devices[i].manufacturer }</td>\n          <td className='deviceModel'>{this.data.devices[i].model }</td>\n          <td className='serialNumber'>{this.data.devices[i].identifier[0] ? this.data.devices[i].identifier[0].value :  '' }</td>\n          <td className=\"costOfOwnership\">{ (this.data.devices[i].note && this.data.devices[i].note[0]) ? this.data.devices[i].note[0].text : '' }</td>\n          <td><span className=\"barcode\">{ this.data.devices[i]._id }</span></td>\n        </tr>\n      );\n    }\n\n    return(\n      <Table id='devicesTable' hover >\n        <thead>\n          <tr>\n            <th className='deviceType'>type</th>\n            <th className='manufacturer'>manufacturer</th>\n            <th className='deviceModel'>model</th>\n            <th className='serialNumber'>serial number</th>\n            <th className='costOfOwnership'>cost ($/year)</th>\n            <th>_id</th>\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(DevicesTable.prototype, ReactMeteorData);\n"]}