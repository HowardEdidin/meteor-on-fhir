{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-statement/lib/MedicationStatements.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-statement/lib/defaultStatements.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-statement/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-statement/client/MedicationStatementDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-statement/client/MedicationStatementsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-medication-statement/client/MedicationStatementsTable.js"],"names":["SimpleSchema","module","link","v","BaseSchema","DomainResourceSchema","MedicationStatement","BaseModel","extend","prototype","_collection","MedicationStatements","Package","Mongo","Collection","connection","_transform","document","MedicationStatementDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","ReferenceSchema","Date","allowedValues","Boolean","CodeableConceptSchema","PeriodSchema","blackbox","Object","TimingSchema","QuantitySchema","RangeSchema","RatioSchema","MedicationStatementStu3","CodeableConcept","AnnotationSchema","MedicationStatementSchema","attachSchema","exportDefault","export","medicationStatement3","medicationStatement2","resourceType","identifier","coding","system","code","text","value","basedOn","partOf","context","referenec","status","category","display","medicationCodeableConcept","medicationReference","reference","effectiveDateTime","effectivePeriod","dateAsserted","informationSource","subject","taken","reasonCode","reasonReference","referene","note","dosage","patient","wasNotTaken","reasonNotTaken","reasonForUseCodeableConcept","reasonForUseReference","supportingInformation","SidebarElements","DynamicRoutes","MedicationStatementsPage","MedicationStatementsTable","MedicationStatementDetail","Card","CardActions","CardHeader","CardText","Col","Grid","Row","get","has","set","DatePicker","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","browserHistory","PropTypes","moment","Session","setDefault","props","state","medicationStatementId","stu","dstu2","form","informationSourceReference","informationSourceDisplay","subjectDisplay","subjectReference","reasonCodeDisplay","medicationDisplay","clinicalNote","shouldComponentUpdate","nextProps","process","env","NODE_ENV","console","log","shouldUpdate","medicationStatement","setState","dehydrateFhirResource","fhirVersion","statement","formData","assign","getMeteorData","data","render","id","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateMedicationStatement","medicationStatementData","event","self","fhirMedicationStatementData","medicationStatementValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","Meteor","userName","user","fullName","collectionName","recordId","toDate","meta","tag","push","insert","handleCancelButton","remove","Component","propTypes","string","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","style","opacity","tab","borderBottom","borderRight","tabIndex","medicationStatementSearchFilter","selectedMedicationStatementId","selectedMedicationStatement","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","CardMedia","Table","Toggle","flattenMedicationStatement","newRow","medication","format","selected","medicationStatements","displayToggle","displayDates","displayToggles","map","find","count","renderTogglesHeader","renderToggles","patientId","renderDateHeader","renderDate","newDate","rowClick","tableRows","i","length","cursor"],"mappings":"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","file":"/packages/clinical_hl7-resource-medication-statement.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\nimport { BaseSchema, DomainResourceSchema } from 'meteor/clinical:hl7-resource-datatypes'\n\n// create the object using our BaseModel\nMedicationStatement = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nMedicationStatement.prototype._collection = MedicationStatements;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof MedicationStatements === 'undefined'){\n  if(Package['clinical:autopublish']){\n    MedicationStatements = new Mongo.Collection('MedicationStatements');\n  } else if(Package['clinical:desktop-publish']){    \n    MedicationStatements = new Mongo.Collection('MedicationStatements');\n  } else {\n    MedicationStatements = new Mongo.Collection('MedicationStatements', {connection: null});\n  }\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nMedicationStatements._transform = function (document) {\n  return new MedicationStatement(document);\n};\n\n\n\nMedicationStatementDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"MedicationStatement\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"patient\" : {\n    type: ReferenceSchema\n  },\n  \"informationSource\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"dateAsserted\" : {\n    optional: true,\n    type: Date,\n    defaultValue: new Date()    \n  },\n  \"status\" : {\n    type: String,\n    allowedValues: ['active', 'completed', 'entered-in-error', 'intended'],\n    defaultValue: 'active'\n  },\n  \"wasNotTaken\" : {\n    optional: true,\n    type: Boolean,\n    defaultValue: true\n  },\n\n  \"reasonNotTaken\" : {\n    optional: true,\n    type: Array\n  },\n  \"reasonNotTaken.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reasonForUseCodeableConcept\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"reasonForUseReference\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"effectiveDateTime\" : {\n    optional: true,\n    type: Date,\n    defaultValue: new Date()\n  },\n  \"effectivePeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"note\" : {\n    optional: true,\n    type: String \n  },\n  \"supportingInformation\" : {\n    optional: true,\n    type: Array \n  },\n  \"supportingInformation.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"medicationCodeableConcept\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"medicationReference\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"dosage\" : {\n    optional: true,\n    type: Array\n  },\n  \"dosage.$\" : {\n    optional: true,\n    blackbox: true,\n    type: Object \n  },\n  \"dosage.$.text\" : {\n    optional: true,\n    type: String \n  },\n  \"dosage.$.timing\" : {\n    optional: true,\n    type: TimingSchema \n  },\n  \"dosage.$.asNeededBoolean\" : {\n    optional: true,\n    type: Boolean \n  },\n  \"dosage.$.asNeededCodeableConcept\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"dosage.$.siteCodeableConcept\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"dosage.$.route\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"dosage.$.method\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"dosage.$.quantityQuantity\" : {\n    optional: true,\n    type: QuantitySchema \n  },\n  \"dosage.$.quantityRange\" : {\n    optional: true,\n    type: RangeSchema \n  },\n  \"dosage.$.rateRatio\" : {\n    optional: true,\n    type: RatioSchema \n  },\n  \"dosage.$.rateRange\" : {\n    optional: true,\n    type: RangeSchema \n  },\n  \"dosage.$.maxDosePerPeriod\" : {\n    optional: true,\n    type: RatioSchema \n  }\n});\n\n\n\n\nMedicationStatementStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"MedicationStatement\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"basedOn\" : {\n    optional: true,\n    type: Array\n  },\n  \"basedOn.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },\n  \"partOf\" : {\n    optional: true,\n    type: Array\n  },  \n  \"partOf.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  },  \n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"status\" : {\n    type: String,\n    allowedValues: ['active', 'completed', 'entered-in-error', 'intended', 'stopped', 'on-hold'],\n    defaultValue: 'active'\n  },\n  \"category\" : {\n    optional: true,\n    type: CodeableConcept\n  },  \n  \"medicationCodeableConcept\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"medicationReference\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"effectiveDateTime\" : {\n    optional: true,\n    type: Date,\n    defaultValue: new Date()\n  },\n  \"effectivePeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"dateAsserted\" : {\n    optional: true,\n    type: Date,\n    defaultValue: new Date()    \n  },\n  \"informationSource\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"subject\" : {\n    type: ReferenceSchema\n  },\n  \"derivedFrom\" : {\n    optional: true,\n    type: Array\n  },\n  \"derivedFrom.$\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"taken\" : {\n    type: String,\n    allowedValues: ['y', 'n', 'unk', 'na'],\n    defaultValue: 'y'\n  },\n  \"reasonNotTaken\" : {\n    optional: true,\n    type: Array\n  },\n  \"reasonNotTaken.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reasonCode\" : {\n    optional: true,\n    type: Array\n  },\n  \"reasonCode\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"dosage\" : {\n    optional: true,\n    type: Array\n  },\n  \"dosage.$\" : {\n    optional: true,\n    blackbox: true,\n    type: Object \n  }\n});\n\nMedicationStatementSchema = MedicationStatementDstu2;\n\n// MedicationStatementSchema.extend(BaseSchema);\n// MedicationStatementSchema.extend(DomainResourceSchema);\n\nMedicationStatements.attachSchema(MedicationStatementSchema);\n\nexport default { MedicationStatement, MedicationStatements, MedicationStatementSchema, MedicationStatementDstu2, MedicationStatementStu3 };","///============================================\n// STU\n// v3.0.1\n\nexport const medicationStatement3 = {\n    resourceType: \"MedicationStatement\",\n    identifier: [{\n      type: {\n        coding: [\n          {\n            system: \"http://hl7.org/fhir/identifier-type\",\n            code: \"SNO\"\n          }\n        ],\n        text: \"Serial Number\"\n      },\n      value: \"\"\n    }],\n    basedOn: [],\n    partOf: [],\n    context: {\n      referenec: ''\n    },\n    status: \"\",\n    category: [{\n      coding: [{\n        code: \"\",\n        display: \"\"\n      }]\n    }],\n    medicationCodeableConcept: {\n      coding: []\n    },\n    medicationReference: {\n      reference: \"\",\n      display: \"\"\n    },\n    effectiveDateTime: null,\n    effectivePeriod: null,\n    dateAsserted: null,\n    informationSource: {\n      reference: \"\",\n      display: \"\"\n    },\n    subject: {\n      reference: \"\",\n      display: \"\"\n    },\n    taken: \"y\",\n    reasonCode: [{\n      coding: [{\n        code: \"\",\n        display: \"\"\n      }]\n    }],\n    reasonReference: [{\n      display: '',\n      referene: ''\n    }],\n    note: [{\n      text: ''\n    }],\n    dosage: [{\n      text: ''\n    }]\n  };\n\n\n\n///============================================\n// DSTU2\n// v1.0.2\n\nexport const medicationStatement2 = {\n  resourceType: \"MedicationStatement\",\n  identifier: [{\n    type: {\n      coding: [\n        {\n          system: \"http://hl7.org/fhir/identifier-type\",\n          code: \"SNO\"\n        }\n      ],\n      text: \"Serial Number\"\n    },\n    value: \"\"\n  }],\n  patient: {\n    reference: \"\",\n    display: \"\"\n  },\n  informationSource: {\n    reference: \"\",\n    display: \"\"\n  },\n  dateAsserted: new Date(),\n  status: \"\",\n  wasNotTaken: false,\n  reasonNotTaken: [],\n  reasonForUseCodeableConcept: {\n    coding: [{\n      code: \"\",\n      display: \"\"\n    }]\n  },\n  reasonForUseReference: {\n    reference: '',\n    display: ''\n  },\n  effectiveDateTime: null,\n  effectivePeriod: null,\n  note: [{\n    text: ''\n  }],\n  supportingInformation: [{\n    display: '',\n    reference: ''\n  }],\n  medicationReference: {\n    reference: \"\",\n    display: \"\"\n  },\n  dosage: [{\n    text: ''\n  }]\n};\n\n","\n\nimport MedicationStatementsPage from './client/MedicationStatementsPage';\nimport MedicationStatementsTable from './client/MedicationStatementsTable';\nimport { MedicationStatement, MedicationStatements, MedicationStatementSchema } from './lib/MedicationStatements';\n\nvar DynamicRoutes = [{\n  'name': 'MedicationStatementsPage',\n  'path': '/medication-statements',\n  'component': MedicationStatementsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Medication Statements',\n  'to': '/medication-statements',\n  'href': '/medication-statements'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  MedicationStatementsPage,\n  MedicationStatementsTable\n};\n\n\n","// =======================================================================\n// Using DSTU2  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//\n// https://www.hl7.org/fhir/DSTU2/medicationstatement.html\n//\n//\n// =======================================================================\n\n\n\n\nimport { Card, CardActions, CardHeader, CardText } from 'material-ui/Card';\nimport { Col, Grid, Row } from 'react-bootstrap';\nimport { get, has, set } from 'lodash';\n\nimport DatePicker from 'material-ui/DatePicker';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport { browserHistory } from 'react-router';\nimport PropTypes from 'prop-types';\nimport { moment } from 'meteor/momentjs:moment';\n\nimport { medicationStatement2, medicationStatement3 } from '../lib/defaultStatements.js';\n\nSession.setDefault('originalMedicationStatement', false);\n\nexport class MedicationStatementDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      medicationStatementId: false,\n      stu: medicationStatement3,\n      dstu2: medicationStatement2,\n      form: {\n        basedOn: \"\",\n        status: '',\n        effectiveDateTime: \"\",\n        dateAsserted: \"\",\n        informationSourceReference: \"\",\n        informationSourceDisplay: \"\",\n        subjectDisplay: \"\",\n        subjectReference: \"\",\n        taken: \"\",\n        reasonCodeDisplay: \"\",\n        reasonCode: \"\",\n        dosage: \"\",\n        medicationReference: '',\n        medicationDisplay: '',\n        clinicalNote: ''\n      }\n    }\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('MedicationDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.medicationStatement === this.state.dstu2){\n      shouldUpdate = false;\n    }\n\n    // received an medicationStatement from the table; okay lets update again\n    if(nextProps.medicationStatementId !== this.state.medicationStatementId){\n\n      this.setState({medicationStatementId: nextProps.medicationStatementId});\n      \n      if(nextProps.medicationStatement){\n        this.setState({form: this.dehydrateFhirResource(nextProps.medicationStatement)})       \n\n        if(this.props.fhirVersion === \"v3.0.1\"){\n          this.setState({stu: nextProps.medicationStatement})     \n        }\n        if(this.props.fhirVersion === \"v1.0.2\"){\n          this.setState({dstu2: nextProps.medicationStatement})     \n        }\n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n\n  dehydrateFhirResource(statement) {\n    let formData = Object.assign({}, this.state.form);\n\n    // STU3\n    if(this.props.fhirVersion === 'v3.0.1'){\n      formData.basedOn = get(statement, 'basedOn[0].display')\n      formData.effectiveDateTime = get(statement, 'effectiveDateTime')    \n      formData.dateAsserted = get(statement, 'dateAsserted')\n      formData.informationSourceReference = get(statement, 'informationSource.reference')\n      formData.informationSourceDisplay = get(statement, 'informationSource.display')\n      formData.subjectDisplay = get(statement, 'subject.display')\n      formData.subjectReference = get(statement, 'subject.reference')\n      formData.taken = get(statement, 'taken')\n      formData.reasonCodeDisplay = get(statement, 'reasonCode[0].coding[0].display')\n      formData.reasonCode = get(statement, 'reasonCode[0].coding[0].code')\n      formData.dosage = get(statement, 'dosage[0].text')\n      formData.medicationReference = get(statement, 'medicationReference.reference')\n      formData.medicationDisplay = get(statement, 'medicationReference.display')\n      formData.clinicalNote = get(statement, 'note[0].text')\n      formData.status = get(statement, 'status')\n    }\n\n    // DSTU2\n    if(this.props.fhirVersion === 'v1.0.2'){\n      formData.effectiveDateTime = get(statement, 'effectiveDateTime')    \n      formData.dateAsserted = get(statement, 'dateAsserted')\n      formData.informationSourceReference = get(statement, 'supportingInformation[0].reference')\n      formData.informationSourceDisplay = get(statement, 'supportingInformation[0].display')\n      formData.subjectDisplay = get(statement, 'patient.display')\n      formData.subjectReference = get(statement, 'patient.reference')\n      formData.reasonCodeDisplay = get(statement, 'reasonForUseCodeableConcept.coding[0].display')\n      formData.reasonCode = get(statement, 'reasonForUseCodeableConcept.coding[0].code')\n      formData.dosage = get(statement, 'dosage[0].text')\n      formData.medicationReference = get(statement, 'medicationReference.reference')\n      formData.medicationDisplay = get(statement, 'medicationReference.display')\n      formData.clinicalNote = get(statement, 'note[0].text')\n      formData.status = get(statement, 'status')\n    }\n\n    return formData;\n  }\n\n\n\n  getMeteorData() {\n    let data = {\n      medicationStatementId: this.state.medicationStatementId,\n      medicationStatement: false,\n      form: this.props.form\n    };\n\n    if(this.props.medicationStatement){\n      data.medicationStatement = this.props.medicationStatement;\n    }\n\n\n    // if (this.state.medicationStatementId) {\n    //   data.medicationStatementId = this.state.medicationStatementId;\n    //   console.log(\"selectedMedicationStatementId\", this.state.medicationStatementId);\n\n    //   data.medicationStatement = MedicationStatements.findOne({_id: this.state.medicationStatementId});\n    //   console.log(\"selectedMedicationStatementId\", data.medicationStatement);\n\n    // } else {\n    //   data.medicationStatementForm = defaultMedicationStatementForm;\n    //   data.medicationStatement = defaultMedicationStatement;\n    // }    \n    \n\n    // // if(has(data.medicationStatement, 'medicationReference.display')){\n    //   data.medicationStatementForm.medicationDisplay = get(data.medicationStatement, 'medicationReference.display', '');\n    // // } \n    // // if(has(data.medicationStatement, 'medicationReference.reference')){\n    //   data.medicationStatementForm.medicationReference = get(data.medicationStatement, 'medicationReference.reference', '');\n    // // } \n\n    // // if(has(data.medicationStatement, 'identifier[0].value')){\n    //   data.medicationStatementForm.identifier = get(data.medicationStatement, 'identifier[0].value', '');\n    // // }        \n\n    // // if(has(data.medicationStatement, 'effectiveDateTime')){\n    //   data.medicationStatementForm.effectiveDateTime = moment(get(data.medicationStatement, 'effectiveDateTime')).format(\"YYYY-MM-DD\");\n    // // }        \n\n    // // if(has(data.medicationStatement, 'dateAsserted')){\n    //   data.medicationStatementForm.dateAsserted = moment(get(data.medicationStatement, 'dateAsserted')).format(\"YYYY-MM-DD\");\n    // // }        \n\n    // // if(has(data.medicationStatement, 'subject.display')){\n    //   data.medicationStatementForm.subjectDisplay = get(data.medicationStatement, 'subject.display', '');\n    // // }        \n    // // if(has(data.medicationStatement, 'subject.reference')){\n    //   data.medicationStatementForm.subjectReference = get(data.medicationStatement, 'subject.reference', '');\n    // // }        \n\n    // // if(has(data.medicationStatement, 'informationSource.display')){\n    //   data.medicationStatementForm.informationSourceDisplay = get(data.medicationStatement, 'informationSource.display', '');\n    // // }        \n    // // if(has(data.medicationStatement, 'informationSource.reference')){\n    //   data.medicationStatementForm.informationSourceReference = get(data.medicationStatement, 'informationSource.reference', '');\n    // // }        \n\n    // // if(has(data.medicationStatement, 'taken')){\n    //   data.medicationStatementForm.taken = get(data.medicationStatement, 'taken', 'y');\n    // // }        \n\n    // // if(has(data.medicationStatement, 'reasonCode[0].coding[0].display')){\n    //   data.medicationStatementForm.reasonCodeDisplay = get(data.medicationStatement, 'reasonCode[0].coding[0].display', '');\n    // // }  \n    // // if(has(data.medicationStatement, 'reasonCode[0].coding[0].code')){\n    //   data.medicationStatementForm.reasonCode = get(data.medicationStatement, 'reasonCode[0].coding[0].code', '');\n    // // }  \n    // // if(has(data.medicationStatement, 'note[0].text')){\n    //   data.medicationStatementForm.clinicalNote = get(data.medicationStatement, 'note[0].text', '');\n    // // }     \n    \n    // // if (Session.get('medicationStatementFormUpsert')) {\n    //   data.medicationStatementForm = Session.get('medicationStatementFormUpsert');\n    // // } \n\n    console.log('MedicationStatementDetail[data]', data);\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('MedicationDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"medicationStatementDetail\">\n        <CardText>\n            <DatePicker\n              id='dateAssertedInput'\n              ref='dateAsserted'\n              name='dateAsserted'\n              floatingLabelText='Date Asserted'\n              container=\"inline\" \n              mode=\"landscape\"\n              value={ get(formData, 'dateAsserted') }\n              onChange={ this.changeState.bind(this, 'dateAsserted')}\n              floatingLabelFixed={true}\n              /><br/>   \n\n          <Row> \n            <Col md={8} >\n              <TextField\n                id='subjectDisplayInput'\n                ref='subjectDisplay'\n                name='subjectDisplay'\n                floatingLabelText='Patient - Display'\n                value={ get(formData, 'subjectDisplay') }\n                onChange={ this.changeState.bind(this, 'subjectDisplay')}\n                hintText=\"Jane Doe\"\n                fullWidth\n                floatingLabelFixed={true}\n                /><br/>\n            </Col>\n            <Col md={4} >\n              <TextField\n                id='subjectReferenceInput'\n                ref='subjectReference'\n                name='subjectReference'\n                floatingLabelText='Patient - Reference'\n                value={ get(formData, 'subjectReference') }\n                onChange={ this.changeState.bind(this, 'subjectReference')}\n                hintText=\"Patient/12345\"\n                fullWidth\n                floatingLabelFixed={true}\n                /><br/>         \n            </Col>\n          </Row>\n\n          <Row> \n            <Col md={8} >\n              <TextField\n                id='medicationDisplayInput'\n                ref='medicationDisplay'\n                name='medicationDisplay'\n                floatingLabelText='Medication - Display'\n                value={ get(formData, 'medicationDisplay') }\n                onChange={ this.changeState.bind(this, 'medicationDisplay')}\n                floatingLabelFixed={true}\n                hintText=\"Aleve - Naproxene Sodium\"\n                fullWidth\n                /><br/>               \n            </Col>\n            <Col md={4} >\n              <TextField\n                id='medicationReferenceInput'\n                ref='medicationReference'\n                name='medicationReference'\n                floatingLabelText='Medication - Reference'\n                value={ get(formData, 'medicationReference') }\n                onChange={ this.changeState.bind(this, 'medicationReference')}\n                hintText=\"Medication/0280-6000\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>     \n            </Col>\n          </Row> \n          <Row> \n            <Col md={8} >\n              <TextField\n                id='informationSourceDisplayInput'\n                ref='informationSourceDisplay'\n                name='informationSourceDisplay'\n                floatingLabelText='Information Source - Display'\n                value={ get(formData, 'informationSourceDisplay') }\n                onChange={ this.changeState.bind(this, 'informationSourceDisplay')}\n                hintText=\"Pain\"\n                fullWidth\n                floatingLabelFixed={true}\n                /><br/>\n            </Col>\n            <Col md={4} >\n              <TextField\n                id='informationSourceReferenceInput'\n                ref='informationSourceReference'\n                name='informationSourceReference'\n                floatingLabelText='Information Source - Reference'\n                value={ get(formData, 'informationSourceReference') }\n                onChange={ this.changeState.bind(this, 'informationSourceReference')}\n                hintText=\"Condition/777\"\n                fullWidth\n                floatingLabelFixed={true}\n                /><br/>   \n            </Col>\n          </Row>\n\n          <Row> \n            <Col md={8} >\n              <TextField\n                id='reasonCodeDisplayInput'\n                ref='reasonCodeDisplay'\n                name='reasonCodeDisplay'\n                floatingLabelText='Reason - Display Text'\n                value={ get(formData, 'reasonCodeDisplay') }\n                onChange={ this.changeState.bind(this, 'reasonCodeDisplay')}\n                hintText=\"Pulled Muscle\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>   \n            </Col>\n            <Col md={4} >\n              <TextField\n                id='reasonCodeInput'\n                ref='reasonCode'\n                name='reasonCode'\n                floatingLabelText='Reason - Code Value'\n                value={ get(formData, 'reasonCode') }\n                onChange={ this.changeState.bind(this, 'reasonCode')}\n                hintText=\"Observation/12345\"\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>   \n            </Col>\n          </Row>\n\n\n          <Row> \n            {/* <Col md={2} >\n              <TextField\n                id='takenInput'\n                ref='taken'\n                name='taken'\n                floatingLabelText='Medication Taken'\n                value={ get(formData, 'taken') }\n                onChange={ this.changeState.bind(this, 'taken')}\n                fullWidth\n                /><br/>   \n            </Col> */}\n            <Col md={6} >\n              <DatePicker\n                id='effectiveDateTimeInput'\n                ref='effectiveDateTime'\n                name='effectiveDateTime'\n                floatingLabelText='Effective Date/Time'\n                container=\"inline\" \n                mode=\"landscape\"\n                value={ get(formData, 'effectiveDateTime') }\n                onChange={ this.changeState.bind(this, 'effectiveDateTime')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>   \n            </Col>\n          </Row>\n\n          <TextField\n            id='clinicalNoteInput'\n            ref='clinicalNote'\n            name='clinicalNote'\n            floatingLabelText='Clinical Note'\n            value={ get(formData, 'clinicalNote') }\n            onChange={ this.changeState.bind(this, 'clinicalNote')}\n            multiLine={true}\n            rows={5}\n            floatingLabelFixed={true}\n            fullWidth\n            /><br/>   \n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.medicationStatementId) }\n        </CardActions>\n      </div>\n    );\n  }\n  determineButtons(medicationStatementId){\n    if (medicationStatementId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateMedicationStatementButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteMedicationStatementButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveMedicationStatementButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"MedicationDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"effectiveDateTime\":\n        set(formData, 'effectiveDateTime', textValue)\n        break;\n      case \"dateAsserted\":\n        set(formData, 'dateAsserted', textValue)\n        break;\n      case \"informationSourceReference\":\n        set(formData, 'informationSourceReference', textValue)\n        break;        \n      case \"informationSourceDisplay\":\n        set(formData, 'informationSourceDisplay', textValue)\n        break;        \n      case \"subjectDisplay\":\n        set(formData, 'subjectDisplay', textValue)\n        break;\n      case \"subjectReference\":\n        set(formData, 'subjectReference', textValue)\n        break;\n      case \"reasonCodeDisplay\":\n        set(formData, 'reasonCodeDisplay', textValue)\n        break;\n      case \"reasonCode\":\n        set(formData, 'reasonCode', textValue)\n        break;\n      case \"dosage\":\n        set(formData, 'dosage', textValue)\n        break;\n      case \"medicationReference\":\n        set(formData, 'medicationReference', textValue)\n        break;\n      case \"medicationDisplay\":\n        set(formData, 'medicationDisplay', textValue)\n        break;\n      case \"clinicalNote\":\n        set(formData, 'clinicalNote', textValue)\n        break;\n      case \"status\":\n        set(formData, 'status', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateMedicationStatement(medicationStatementData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"MedicationDetail.updateMedication\", medicationStatementData, field, textValue);\n\n    if(this.props.fhirVersion === 'v1.0.2'){\n      switch (field) {\n        case \"effectiveDateTime\":\n          set(medicationStatementData, 'effectiveDateTime', textValue)\n          break;\n        case \"dateAsserted\":\n          set(medicationStatementData, 'dateAsserted', textValue)\n          break;\n        case \"informationSourceReference\":\n          set(medicationStatementData, 'supportingInformation[0].reference', textValue)\n          break;        \n        case \"informationSourceDisplay\":\n          set(medicationStatementData, 'supportingInformation[0].display', textValue)\n          break;        \n        case \"subjectDisplay\":\n          set(medicationStatementData, 'patient.display', textValue)\n          break;\n        case \"subjectReference\":\n          set(medicationStatementData, 'patient.reference', textValue)\n          break;\n        case \"reasonCodeDisplay\":\n          set(medicationStatementData, 'reasonForUseCodeableConcept.coding[0].display', textValue)\n          break;\n        case \"reasonCode\":\n          set(medicationStatementData, 'reasonForUseCodeableConcept.coding[0].code', textValue)\n          break;\n        case \"dosage\":\n          set(medicationStatementData, 'dosage[0].text', textValue)\n          break;\n        case \"medicationReference\":\n          set(medicationStatementData, 'medicationReference.reference', textValue)\n          break;\n        case \"medicationDisplay\":\n          set(medicationStatementData, 'medicationReference.display', textValue)\n          break;\n        case \"clinicalNote\":\n          set(medicationStatementData, 'note[0].text', textValue)\n          break;\n        case \"status\":\n          set(medicationStatementData, 'status', textValue)\n          break;\n      }\n    }\n    return medicationStatementData;\n  }\n\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"MedicationDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let medicationStatementData = Object.assign({}, this.state.dstu2);\n\n    formData = this.updateFormData(formData, field, textValue);\n    medicationStatementData = this.updateMedicationStatement(medicationStatementData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"medicationStatementData\", medicationStatementData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    if(this.props.fhirVersion === 'v1.0.2'){\n      this.setState({dstu2: medicationStatementData})\n    }\n    if(this.props.fhirVersion === 'v3.0.1'){\n      this.setState({stu: medicationStatementData})\n    }\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Medication Statement...', this.state)\n\n    let self = this;\n    let fhirMedicationStatementData = Object.assign({}, this.state.dstu2);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirMedicationStatementData', fhirMedicationStatementData);\n\n    let medicationStatementValidator = MedicationStatementSchema.newContext();\n    medicationStatementValidator.validate(fhirMedicationStatementData)\n\n    console.log('IsValid: ', medicationStatementValidator.isValid())\n    console.log('ValidationErrors: ', medicationStatementValidator.validationErrors());\n\n    if (this.state.medicationStatementId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating medicationStatement...\");\n\n      delete fhirMedicationStatementData._id;\n\n      MedicationStatements._collection.update(\n        {_id: this.state.medicationStatementId}, {$set: fhirMedicationStatementData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"MedicationStatements\", recordId: self.state.medicationStatementId});\n            Session.set('medicationStatementPageTabIndex', 1);\n            Session.set('selectedMedicationStatementId', false);\n            Bert.alert('MedicationStatement updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new medicationStatement\", fhirMedicationStatementData);\n\n      set(fhirMedicationStatementData, 'meta.lastUpdated', moment().toDate())\n      set(fhirMedicationStatementData, 'meta.tag', [])  \n      fhirMedicationStatementData.meta.tag.push(this.props.fhirVersion);\n\n      MedicationStatements._collection.insert(fhirMedicationStatementData, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"MedicationStatements\", recordId: self.state.medicationStatementId});\n          Session.set('medicationStatementPageTabIndex', 1);\n          Session.set('selectedMedicationStatementId', false);\n          Bert.alert('MedicationStatement added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('medicationStatementPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    MedicationStatements._collection.remove({_id: this.state.medicationStatementId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"MedicationStatements\", recordId: self.state.medicationStatementId});\n        Session.set('medicationStatementPageTabIndex', 1);\n        Session.set('selectedMedicationStatementId', false);\n        Bert.alert('MedicationStatement removed!', 'success');\n      }\n    });\n  }\n}\n\n\nMedicationStatementDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  medicationStatementId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  medicationStatement: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(MedicationStatementDetail.prototype, ReactMeteorData);\nexport default MedicationStatementDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport MedicationStatementDetail from './MedicationStatementDetail';\nimport MedicationStatementsTable from './MedicationStatementsTable';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nSession.setDefault('fhirVersion', 'v1.0.2');\nSession.setDefault('selectedMedicationStatementId', false);\n\nexport class MedicationStatementsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('medicationStatementPageTabIndex'),\n      medicationStatementSearchFilter: Session.get('medicationStatementSearchFilter'),\n      selectedMedicationStatementId: Session.get('selectedMedicationStatementId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedMedicationStatement: false\n    };\n\n    if(Session.get('fhirVersion')){\n      data.fhirVersion = Session.get('fhirVersion')\n    }\n\n    if (Session.get('selectedMedicationStatementId')){\n      data.selectedMedicationStatement = MedicationStatements.findOne({_id: Session.get('selectedMedicationStatementId')});\n    } else {\n      data.selectedMedicationStatement = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('medicationStatementPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedMedicationStatement', false);\n    Session.set('medicationStatementFormUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In MedicationStatementsPage render');\n    return (\n      <div id='medicationStatementsPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Medication Statements' />\n            <CardText>\n              <Tabs id=\"medicationStatementsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newMedicationStatementTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <MedicationStatementDetail \n                 id='newMedicationStatement' \n                 fhirVersion={ this.data.fhirVersion }\n                 />  \n               </Tab>\n               <Tab className=\"medicationStatementListTab\" label='MedicationStatements' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <MedicationStatementsTable fhirVersion={ this.data.fhirVersion } />\n               </Tab>\n               <Tab className=\"medicationStatementDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <MedicationStatementDetail \n                  id='medicationStatementDetails'\n                  fhirVersion={ this.data.fhirVersion }\n                  medicationStatement={ this.data.selectedMedicationStatement }\n                  medicationStatementId={ this.data.selectedMedicationStatementId } \n                  showDatePicker={true} \n                />\n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(MedicationStatementsPage.prototype, ReactMeteorData);\n\nexport default MedicationStatementsPage;","import { Card, CardActions, CardMedia, CardText, CardTitle } from 'material-ui/Card';\nimport { get, has } from 'lodash';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport Toggle from 'material-ui/Toggle';\n// import { moment } from 'meteor/momentjs/moment';\n\nconst flattenMedicationStatement = function(statement, fhirVersion){\n  console.log('flattenMedicationStatement', statement)\n\n  var newRow = {\n    '_id': statement._id,\n    'medication': '',\n    'medicationReference': '',\n    'medicationDisplay': '',\n    'reasonCodeCode': '',\n    'reasonCodeDisplay': '',\n    'basedOn': '',\n    'effectiveDateTime': '',\n    'dateAsserted': null,\n    'informationSource': '',\n    'subjectDisplay': '',\n    'taken': '',\n    'reasonCodeDisplay': '',\n    'dosage': '',\n  };\n\n  // STU3\n  if(fhirVersion === \"v3.0.1\"){\n    newRow.subjectDisplay = get(statement, 'subject.display');\n    newRow.medication = get(statement, 'medicationReference.reference');\n    newRow.medication = get(statement, 'medicationReference.display');\n    newRow.medication = get(statement, 'medicationCodeableConcept.coding[0].display');\n    newRow.identifier = get(statement, 'identifier[0].value');\n    newRow.effectiveDateTime = moment(get(statement, 'effectiveDateTime')).format(\"YYYY-MM-DD\");\n    newRow.dateAsserted = moment(get(statement, 'dateAsserted')).format(\"YYYY-MM-DD\");\n    newRow.informationSource = get(statement, 'informationSource.display');\n    newRow.taken = get(statement, 'taken');\n    newRow.reasonCodeDisplay = get(statement, 'reasonCode[0].coding[0].display');  \n  }\n\n  // DSTU2\n  if(fhirVersion === \"v1.0.2\"){\n    newRow.subjectDisplay = get(statement, 'patient.display');\n    newRow.medicationReference = get(statement, 'medicationReference.reference');\n    newRow.medicationDisplay = get(statement, 'medicationReference.display');\n    newRow.medication = get(statement, 'medicationReference.display');\n    newRow.reasonCode = get(statement, 'reasonForUseCodeableConcept.coding[0].code');\n    newRow.reasonCodeDisplay = get(statement, 'reasonForUseCodeableConcept.coding[0].display');\n    newRow.identifier = get(statement, 'identifier[0].value');\n    newRow.effectiveDateTime = moment(get(statement, 'effectiveDateTime')).format(\"YYYY-MM-DD\");\n    newRow.dateAsserted = moment(get(statement, 'dateAsserted')).format(\"YYYY-MM-DD\");\n    newRow.informationSource = get(statement, 'supportingInformation[0].display');\n    newRow.reasonCodeDisplay = get(statement, 'reasonForUseCodeableConcept.coding[0].display');  \n  }\n\n\n  return newRow;\n}\n\nexport default class MedicationStatementsTable extends React.Component {\n\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      medicationStatements: [],\n      displayToggle: false,\n      displayDates: true,\n      fhirVersion: 'v1.0.2'\n    }\n\n    if(this.props.fhirVersion){\n      data.fhirVersion = this.props.fhirVersion;\n    }\n    \n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n    if(this.props.data){\n      this.props.data.map(function(statement){\n        data.medicationStatements.push(flattenMedicationStatement(statement, data.fhirVersion));        \n      });\n    } else {\n      if(MedicationStatements.find().count() > 0){\n\n        MedicationStatements.find().map(function(statement){        \n          data.medicationStatements.push(flattenMedicationStatement(statement, data.fhirVersion));\n        });\n      } else {\n        data.medicationStatements = [];        \n      }\n    }\n\n  \n    if(process.env.NODE_ENV === \"test\") console.log(\"MedicationStatementsTable[data]\", data);\n    return data;\n  };\n\n  renderTogglesHeader(displayToggle){\n    if (displayToggle) {\n      return (\n        <th className=\"toggle\">toggle</th>\n      );\n    }\n  }\n  renderToggles(displayToggle, patientId ){\n    if (displayToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n              //style={styles.toggle}\n            />\n          </td>\n      );\n    }\n  }\n  renderDateHeader(displayDates){\n    if (displayDates) {\n      return (\n        <th className='date'>asserted at</th>\n      );\n    }\n  }\n  renderDate(displayDates, newDate ){\n    if (displayDates) {\n      return (\n        <td className='dateAsserted'>{ moment(newDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n  rowClick(id){\n    Session.set('medicationStatementsUpsert', false);\n    Session.set('selectedMedicationStatementId', id);\n    Session.set('medicationStatementPageTabIndex', 2);\n  };\n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.medicationStatements.length; i++) {\n\n      tableRows.push(\n        <tr key={i} className=\"medicationStatementRow\" style={{cursor: \"pointer\"}} onClick={ this.rowClick.bind('this', this.data.medicationStatements[i]._id)} >\n          { this.renderToggles(this.data.displayToggle, this.data.medicationStatements[i]) }\n          <td className='medication'>{ this.data.medicationStatements[i].medication }</td>\n          <td className='effectiveDateTime'>{ moment(this.data.medicationStatements[i].effectiveDateTime).format(\"YYYY-MM-DD\") }</td>\n          <td className='informationSource'>{ this.data.medicationStatements[i].informationSource }</td>\n          <td className='subject'>{ this.data.medicationStatements[i].subjectDisplay }</td>\n          {/* <td className='taken'>{ this.data.medicationStatements[i].taken }</td> */}\n          <td className='reason'>{ this.data.medicationStatements[i].reasonCodeDisplay }</td>\n          {/* <td className='dosage'>{ this.data.medicationStatements[i].dosage }</td> */}\n          { this.renderDate(this.data.displayDates, this.data.medicationStatements[i].dateAsserted) }\n\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='medicationStatementsTable' hover >\n        <thead>\n          <tr>\n            { this.renderTogglesHeader(this.data.displayToggle) }\n            <th className='medication'>medication</th>\n            <th className='effectiveDateTime'>date /time</th>\n            <th className='informationSource'>source</th>\n            <th className='subject'>subject</th>\n            {/* <th className='taken'>taken</th> */}\n            <th className='reason'>reason</th>\n            {/* <th className='dosage'>dosage</th> */}\n            { this.renderDateHeader(this.data.displayDates) }            \n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(MedicationStatementsTable.prototype, ReactMeteorData);\n"]}