{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-organization/lib/Organizations.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-organization/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-organization/client/OrganizationDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-organization/client/OrganizationsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-organization/client/OrganizationsTable.js"],"names":["SimpleSchema","module","link","v","Package","console","log","Organization","BaseModel","extend","prototype","_collection","Organizations","Mongo","Collection","connection","_transform","document","OrganizationStu3","type","String","defaultValue","optional","Array","IdentifierSchema","Boolean","CodeableConceptSchema","ContactPointSchema","AddressSchema","ReferenceSchema","Object","HumanNameSchema","OrganizationDstu2","OrganizationSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","fetchBundle","query","parameters","callback","organizationArray","find","map","organization","id","_id","_document","result","Bundle","generate","toMongo","originalOrganization","mongoRecord","prepForUpdate","identifier","process","env","TRACE","forEach","resourceType","telecom","address","contact","name","prepForFhirTransfer","DEBUG","export","SidebarElements","DynamicRoutes","OrganizationsPage","OrganizationsTable","OrganizationDetail","CardActions","CardText","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","PropTypes","get","set","Row","Col","props","state","organizationId","active","use","value","system","text","city","postalCode","form","phone","email","dehydrateFhirResource","formData","assign","telecomArray","telecomRecord","shouldComponentUpdate","nextProps","NODE_ENV","shouldUpdate","setState","getMeteorData","data","render","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateOrganization","organizationData","event","self","fhirOrganizationData","organizationValidator","newContext","validate","isValid","validationErrors","update","$set","error","Bert","alert","reason","Session","insert","handleCancelButton","remove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","Meteor","OrganizationTable","setDefault","style","opacity","tab","borderBottom","borderRight","isLoggedIn","tabIndex","organizationSearchFilter","selectedOrganizationId","selectedOrganization","findOne","selectedDevice","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Table","Toggle","block","maxWidth","selected","organizations","handleChange","row","key","source","handleSelect","rowClick","renderIdentifier","hideIdentifier","renderIdentifierHeader","renderPhone","hidePhone","renderPhoneHeader","renderEmail","hideEmail","renderEmailHeader","renderCity","hideCity","renderCityHeader","renderState","hideState","renderStateHeader","renderPostalCode","hidePostalCode","renderPostalCodeHeader","tableRows","i","length","push","cursor"],"mappings":"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","file":"/packages/clinical_hl7-resource-organization.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\nif(Package['clinical:autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n  console.log(\"Any protected health information (PHI) stored in this app should be audited.\"); \n  console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");  \n  console.log(\"\");  \n  console.log(\"meteor remove clinical:autopublish\");  \n  console.log(\"\");  \n}\nif(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");  \n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"meteor add clinical:autopublish\");  \n  console.log(\"\");  \n}\n\n\n\n\n\n\n// create the object using our BaseModel\nOrganization = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nOrganization.prototype._collection = Organizations;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Organizations === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Organizations = new Mongo.Collection('Organizations');\n  } else if(Package['clinical:desktop-publish']){    \n    Organizations = new Mongo.Collection('Organizations');\n  } else {\n    Organizations = new Mongo.Collection('Organizations', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nOrganizations._transform = function (document) {\n  return new Organization(document);\n};\n\n\nOrganizationStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Organization\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"active\" : {\n    optional: true,\n    type: Boolean,\n    defaultValue: true\n  }, // Whether the organization's record is still in active use\n  \"type\" : {\n    optional: true,\n    type: Array\n  }, // Kind of organization\n  \"type.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  }, // Kind of organization\n  \"name\" : {\n    optional: true,\n    type: String\n  }, // C? Name used for the organization\n  \"telecom\" : {\n    optional: true,\n    type: Array\n  }, // C? A contact detail for the organization\n  \"telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, // C? A contact detail for the organization\n  \"address\" : {\n    optional: true,\n    type: Array\n  }, // C? An address for the organization\n  \"address.$\" : {\n    optional: true,\n    type: AddressSchema \n  }, // C? An address for the organization\n  \"partOf\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Organization) The organization of which this organization forms a part\n\n  \"contact\" : {\n    optional: true,\n    type:  Array\n    },\n  \"contact.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"contact.$.purpose\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // The type of contact\n  \"contact.$.name\" : {\n    optional: true,\n    type: HumanNameSchema\n  }, // A name associated with the contact\n  \"contact.$.telecom\" : {\n    optional: true,\n    type: Array\n  }, // Contact details (telephone, email, etc.)  for a contact\n  \"contact.$.telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, // Contact details (telephone, email, etc.)  for a contact\n  \"contact.$.address\" : {\n    optional: true,\n    type: AddressSchema\n  }, // Visiting or postal addresses for the contact\n  \"alias\" : {\n    optional: true,\n    type: Array\n  }, \n  \"alias.$\" : {\n    optional: true,\n    type: String\n  }, \n  \"endpoint\" : {\n    optional: true,\n    type: ReferenceSchema\n  }\n});\n\n\n\nOrganizationDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Organization\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"active\" : {\n    optional: true,\n    type: Boolean,\n    defaultValue: true\n  }, // Whether the organization's record is still in active use\n  \"type\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Kind of organization\n  \"name\" : {\n    optional: true,\n    type: String\n  }, // C? Name used for the organization\n  \"telecom\" : {\n    optional: true,\n    type: Array\n  }, // C? A contact detail for the organization\n  \"telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, // C? A contact detail for the organization\n  \"address\" : {\n    optional: true,\n    type: Array\n  }, // C? An address for the organization\n  \"address.$\" : {\n    optional: true,\n    type: AddressSchema \n  }, // C? An address for the organization\n  \"partOf\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Organization) The organization of which this organization forms a part\n\n  \"contact\" : {\n    optional: true,\n    type:  Array\n    },\n  \"contact.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"contact.$.purpose\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // The type of contact\n  \"contact.$.name\" : {\n    optional: true,\n    type: HumanNameSchema\n  }, // A name associated with the contact\n  \"contact.$.telecom\" : {\n    optional: true,\n    type: Array\n  }, // Contact details (telephone, email, etc.)  for a contact\n  \"contact.$.telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, // Contact details (telephone, email, etc.)  for a contact\n  \"contact.$.address\" : {\n    optional: true,\n    type: AddressSchema\n  }\n});\n\nOrganizationSchema = OrganizationDstu2;\n\n\nBaseSchema.extend(OrganizationSchema);\nDomainResourceSchema.extend(OrganizationSchema);\n\nOrganizations.attachSchema(OrganizationSchema);\n\n\nexport default { Organization, Organizations, OrganizationSchema, OrganizationDstu2, OrganizationStu3 };\n\n\n\n//=================================================================\n// FHIR Methods\n\nOrganizations.fetchBundle = function (query, parameters, callback) {\n  var organizationArray = Organizations.find(query, parameters, callback).map(function(organization){\n    organization.id = organization._id;\n    delete organization._document;\n    return organization;\n  });\n\n  // console.log(\"organizationArray\", organizationArray);\n\n  var result = Bundle.generate(organizationArray);\n\n  // console.log(\"result\", result.entry[0]);\n\n  return result;\n};\n\n\n/**\n * @summary This function takes a FHIR resource and prepares it for storage in Mongo.\n * @memberOf Organizations\n * @name toMongo\n * @version 1.6.0\n * @returns { Organization }\n * @example\n * ```js\n *  let organizations = Organizations.toMongo('12345').fetch();\n * ```\n */\n\nOrganizations.toMongo = function (originalOrganization) {\n  var mongoRecord;\n\n  // if (originalOrganization.identifier) {\n  //   originalOrganization.identifier.forEach(function(identifier){\n  //     if (identifier.period) {\n  //       if (identifier.period.start) {\n  //         var startArray = identifier.period.start.split('-');\n  //         identifier.period.start = new Date(startArray[0], startArray[1] - 1, startArray[2]);\n  //       }\n  //       if (identifier.period.end) {\n  //         var endArray = identifier.period.end.split('-');\n  //         identifier.period.end = new Date(startArray[0], startArray[1] - 1, startArray[2]);\n  //       }\n  //     }\n  //   });\n  // }\n\n  return originalOrganization;\n};\n\n\n/**\n * @summary Similar to toMongo(), this function prepares a FHIR record for storage in the Mongo database.  The difference being, that this assumes there is already an existing record.\n * @memberOf Organizations\n * @name prepForUpdate\n * @version 1.6.0\n * @returns { Object }\n * @example\n * ```js\n *  let organizations = Organizations.findMrn('12345').fetch();\n * ```\n */\n\nOrganizations.prepForUpdate = function (organization) {\n\n  if (organization.identifier && organization.identifier[0]) {\n    process.env.TRACE && console.log(\"organization.identifier\", organization.identifier);\n\n    organization.identifier.forEach(function(identifier){\n      identifier.resourceType = \"HumanName\";\n    });\n  }\n\n  if (organization.telecom && organization.telecom[0]) {\n    process.env.TRACE && console.log(\"organization.telecom\", organization.telecom);\n    organization.telecom.forEach(function(telecom){\n      telecom.resourceType = \"ContactPoint\";\n    });\n  }\n\n  if (organization.address && organization.address[0]) {\n    process.env.TRACE && console.log(\"organization.address\", organization.address);\n    organization.address.forEach(function(address){\n      address.resourceType = \"Address\";\n    });\n  }\n\n  if (organization.contact && organization.contact[0]) {\n    process.env.TRACE && console.log(\"organization.contact\", organization.contact);\n\n    organization.contact.forEach(function(contact){\n      if (contact.name) {\n        contact.name.resourceType = \"HumanName\";\n      }\n\n      if (contact.telecom && contact.telecom[0]) {\n        contact.telecom.forEach(function(telecom){\n          telecom.resourceType = \"ContactPoint\";\n        });\n      }\n\n      if (contact.address) {\n        contact.address.resourceType = \"HumanName\";\n      }\n\n    });\n  }\n\n  return organization;\n};\n\n\n/**\n * @summary Scrubbing the organization; make sure it conforms to v1.6.0\n * @memberOf Organizations\n * @name scrub\n * @version 1.2.3\n * @returns {Boolean}\n * @example\n * ```js\n *  let organizations = Organizations.findMrn('12345').fetch();\n * ```\n */\n\nOrganizations.prepForFhirTransfer = function (organization) {\n  process.env.DEBUG && console.log(\"Organizations.prepForBundle()\");\n\n\n  if (organization.telecom && organization.telecom[0]) {\n    process.env.TRACE && console.log(\"organization.telecom\", organization.telecom);\n    organization.telecom.forEach(function(telecom){\n      delete telecom.resourceType;\n    });\n  }\n\n  if (organization.address && organization.address[0]) {\n    process.env.TRACE && console.log(\"organization.address\", organization.address);\n    organization.address.forEach(function(address){\n      delete address.resourceType;\n    });\n  }\n\n  if (organization.contact && organization.contact[0]) {\n    process.env.TRACE && console.log(\"organization.contact\", organization.contact);\n\n    organization.contact.forEach(function(contact){\n\n      console.log(\"contact\", contact);\n\n\n      if (contact.name && contact.name.resourceType) {\n        process.env.TRACE && console.log(\"organization.contact.name\", contact.name);\n        delete contact.name.resourceType;\n      }\n\n      if (contact.telecom && contact.telecom[0]) {\n        contact.telecom.forEach(function(telecom){\n          delete telecom.resourceType;\n        });\n      }\n\n\n      if (contact.address && contact.address.resourceType) {\n        delete contact.address.resourceType;\n      }\n    });\n  }\n\n  console.log(\"Organizations.prepForBundle()\", organization);\n\n  return organization;\n};\n\n// /**\n//  * @summary The displayed name of the organization.\n//  * @memberOf Organization\n//  * @name displayName\n//  * @version 1.2.3\n//  * @returns {Boolean}\n//  * @example\n//  * ```js\n//  * ```\n//  */\n\n// Organization.prototype.displayName = function () {\n//   if (this.name && this.name[0]) {\n//     return this.name[0].text;\n//   }\n// };\n","\n\nimport OrganizationsPage from './client/OrganizationsPage';\nimport OrganizationsTable from './client/OrganizationsTable';\n\nvar DynamicRoutes = [{\n  'name': 'OrganizationsPage',\n  'path': '/organizations',\n  'component': OrganizationsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Organizations',\n  'to': '/organizations',\n  'href': '/organizations'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  OrganizationsPage,\n  OrganizationsTable\n};\n\n\n","import { CardActions, CardText } from 'material-ui/Card';\n\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { get, set } from 'lodash';\nimport { Row, Col } from 'react-bootstrap';\n\n\nexport class OrganizationDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      organizationId: false,\n      organization: {\n        resourceType: 'Organization',\n        active: true,\n        name: \"\",\n        identifier: [{\n          use: 'usual',\n          value: ''\n        }],\n        telecom: [{\n          resourceType: \"ContactPoint\",\n          system: \"phone\",\n          value: '',\n          use: ''\n        }, {\n          resourceType: \"ContactPoint\",\n          system: \"email\",\n          value: '',\n          use: ''\n        }],\n        address: [{\n          resourceType: \"Address\",\n          text: '',\n          city: '',\n          state: '',\n          postalCode: ''\n        }]\n      },\n      form: {\n        name: '',\n        identifier: '',\n        phone: '',\n        email: '',\n        text: '',\n        city: '',\n        state: '',\n        postalCode: ''\n      }\n    }\n  }\n  dehydrateFhirResource(organization) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.name = get(organization, 'name')\n    formData.identifier = get(organization, 'identifier[0].value')\n\n    let telecomArray = get(organization, 'telecom');\n    telecomArray.forEach(function(telecomRecord){\n      if(get(telecomRecord, 'system') === 'phone'){\n        formData.phone = get(telecomRecord, 'value');\n      }\n      if(get(telecomRecord, 'system') === 'email'){\n        formData.email = get(telecomRecord, 'value');\n      }\n    })\n\n    formData.text = get(organization, 'address[0].text')\n    formData.city = get(organization, 'address[0].city')\n    formData.state = get(organization, 'address[0].state')\n    formData.postalCode = get(organization, 'address[0].postalCode')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('DeviceDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.organization === this.state.organization){\n      shouldUpdate = false;\n    }\n\n    // received an organization from the table; okay lets update again\n    if(nextProps.organizationId !== this.state.organizationId){\n      this.setState({organizationId: nextProps.organizationId})\n      \n      if(nextProps.organization){\n        this.setState({organization: nextProps.organization})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.organization)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      organizationId: this.props.organizationId,\n      organization: false,\n      form: this.state.form\n    };\n\n    if(this.props.organization){\n      data.organization = this.props.organization;\n    }\n\n    console.log('OrganizationDetail', data);\n    return data;\n  }\n\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('DeviceDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"organizationDetail\">\n        <CardText>\n          <Row>\n            <Col md={9}>\n              <TextField\n                id='organizationNameInput'\n                ref='organizationName'\n                name='name'\n                floatingLabelText='Organization Name'\n                value={ get(formData, 'name') }\n                onChange={ this.changeState.bind(this, 'name')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='identifierInput'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'\n                value={ get(formData, 'identifier') }\n                onChange={ this.changeState.bind(this, 'identifier')}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='textInput'\n                ref='text'\n                name='text'\n                floatingLabelText='Address'\n                value={ get(formData, 'text') }\n                onChange={ this.changeState.bind(this, 'text')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='cityInput'\n                ref='city'\n                name='city'\n                floatingLabelText='City'\n                value={ get(formData, 'city') }\n                onChange={ this.changeState.bind(this, 'city')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='stateInput'\n                ref='state'\n                name='state'\n                floatingLabelText='State'\n                value={ get(formData, 'state') }\n                onChange={ this.changeState.bind(this, 'state')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='postalCodeInput'\n                ref='postalCode'\n                name='postalCode'\n                floatingLabelText='Postal Code'\n                value={ get(formData, 'postalCode') }\n                onChange={ this.changeState.bind(this, 'postalCode')}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={3}>\n              <TextField\n                id='phoneInput'\n                ref='phone'\n                name='phone'\n                floatingLabelText='Phone'\n                value={ get(formData, 'phone') }\n                onChange={ this.changeState.bind(this, 'phone')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='emailInput'\n                ref='email'\n                name='email'\n                floatingLabelText='Email'\n                value={ get(formData, 'email') }\n                onChange={ this.changeState.bind(this, 'email')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n            </Col>\n            <Col md={3}>\n            </Col>\n          </Row>\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.organizationId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n\n  determineButtons(organizationId){\n    if (organizationId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateOrganizationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton id=\"deleteOrganizationButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveOrganizationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"DeviceDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"name\":\n        set(formData, 'name', textValue)\n        break;\n      case \"identifier\":\n        set(formData, 'identifier', textValue)\n        break;        \n      case \"phone\":\n        set(formData, 'phone', textValue)\n        break;\n      case \"email\":\n        set(formData, 'email', textValue)\n        break;\n      case \"text\":\n        set(formData, 'text', textValue)\n        break;\n      case \"city\":\n        set(formData, 'city', textValue)\n        break;\n      case \"state\":\n        set(formData, 'state', textValue)\n        break;\n      case \"postalCode\":\n        set(formData, 'postalCode', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateOrganization(organizationData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"DeviceDetail.updateDevice\", organizationData, field, textValue);\n\n    let telecomArray = organizationData.telecom;\n\n    switch (field) {\n      case \"name\":\n        set(organizationData, 'name', textValue)\n        break;\n      case \"identifier\":\n        set(organizationData, 'identifier[0].value', textValue)\n        break;        \n      case \"phone\":\n        telecomArray.forEach(function(telecom){\n          if(telecom.system === 'phone'){\n            telecom.value = textValue\n          } \n        })\n        set(organizationData, 'telecom', telecomArray)\n        break;\n      case \"email\":\n        telecomArray.forEach(function(telecom){\n          if(telecom.system === 'email'){\n            telecom.value = textValue\n          } \n        })\n        set(organizationData, 'telecom', telecomArray)\n        break;\n      case \"text\":\n        set(organizationData, 'address[0].text', textValue)\n        break;\n      case \"city\":\n        set(organizationData, 'address[0].city', textValue)\n        break;\n      case \"state\":\n        set(organizationData, 'address[0].state', textValue)\n        break;\n      case \"postalCode\":\n        set(organizationData, 'address[0].postalCode', textValue)\n        break;    \n    }\n    return organizationData;\n  }\n\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"DeviceDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let organizationData = Object.assign({}, this.state.organization);\n\n    formData = this.updateFormData(formData, field, textValue);\n    organizationData = this.updateOrganization(organizationData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"organizationData\", organizationData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({organization: organizationData})\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Organization...', this.state)\n\n    let self = this;\n    let fhirOrganizationData = Object.assign({}, this.state.organization);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirOrganizationData', fhirOrganizationData);\n\n\n    let organizationValidator = OrganizationSchema.newContext();\n    organizationValidator.validate(fhirOrganizationData)\n\n    console.log('IsValid: ', organizationValidator.isValid())\n    console.log('ValidationErrors: ', organizationValidator.validationErrors());\n\n    if (this.state.organizationId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Update Organization\");\n      delete fhirOrganizationData._id;\n\n      Organizations._collection.update(\n        {_id: this.state.organizationId}, {$set: fhirOrganizationData }, function(error) {\n          if (error) {\n            console.log(\"error\", error);\n            Bert.alert(error.reason, 'danger');\n          } else {\n            Bert.alert('Organization updated!', 'success');\n            Session.set('organizationPageTabIndex', 1);\n            Session.set('selectedOrganization', false);\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new organization\", fhirOrganizationData);\n\n      Organizations._collection.insert(fhirOrganizationData, function(error) {\n        if (error) {\n          console.log('Organizations.insert[error]', error)\n          Bert.alert(error.reason, 'danger');\n        } else {\n          Bert.alert('Organization added!', 'success');\n          Session.set('organizationPageTabIndex', 1);\n          Session.set('selectedOrganization', false);\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    if(process.env.NODE_ENV === \"test\") console.log(\"handleCancelButton\");\n  }\n\n  handleDeleteButton(){\n    Organizations._collection.remove({_id: this.state.organizationId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      } else {\n        Bert.alert('Organization deleted!', 'success');\n        Session.set('organizationPageTabIndex', 1);\n        Session.set('selectedOrganization', false);\n      }\n    })\n  }\n}\n\n\nOrganizationDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  organizationId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  organization: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\n\nReactMixin(OrganizationDetail.prototype, ReactMeteorData);\nexport default OrganizationDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport { Tab, Tabs } from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport OrganizationDetail from './OrganizationDetail';\nimport OrganizationTable from './OrganizationsTable';\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\n\nSession.setDefault('organizationPageTabIndex', 1); \nSession.setDefault('organizationSearchFilter', ''); \nSession.setDefault('selectedOrganizationId', false);\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class OrganizationsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      state: {\n        isLoggedIn: false\n      },\n      tabIndex: Session.get('organizationPageTabIndex'),\n      organizationSearchFilter: Session.get('organizationSearchFilter'),\n      selectedOrganizationId: Session.get('selectedOrganizationId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedOrganization: false\n    };\n\n    if (Session.get('selectedOrganizationId')){\n      data.selectedOrganization = Organizations.findOne({_id: Session.get('selectedOrganizationId')});\n    } else {\n      data.selectedDevice = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"OrganizationsPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('organizationPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedOrganizationId', false);\n    Session.set('organizationUpsert', false);\n  }\n\n  render() {\n    return (\n      <div id=\"organizationsPage\"> <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle\n              title=\"Organizations\"\n            />\n            <CardText>\n              <Tabs id=\"organizationsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}> \n                <Tab className=\"newOrganizationTab\" label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0} >\n                  <OrganizationDetail \n                    id='newOrganization' />\n                </Tab>\n                <Tab className=\"organizationListTab\" label='Organizations' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                  <OrganizationTable />\n                </Tab>\n                <Tab className=\"organizationDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                  <OrganizationDetail \n                    id='organizationDetails' \n                    organization={ this.data.selectedOrganization }\n                    organizationId={ this.data.selectedOrganizationId } />  \n                </Tab>\n              </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(OrganizationsPage.prototype, ReactMeteorData);\nexport default OrganizationsPage;","import React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport Toggle from 'material-ui/Toggle';\nimport { get, set } from 'lodash';\nimport { Glass } from 'meteor/clinical:glass-ui';\nimport PropTypes from 'prop-types';\n\nSession.setDefault('selectedOrganizations', []);\n\nexport class OrganizationsTable extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        text: Glass.darkroom(),\n        block: {\n          maxWidth: 250\n        }\n      },\n      selected: [],\n      organizations: Organizations.find().map(function(organization){\n        let result = {\n          _id: '',\n          name: '',\n          identifier: '',\n          phone: '',\n          email: '',\n          text: '',\n          city: '',\n          state: '',\n          postalCode: ''\n        };\n\n        result._id = get(organization, '_id');\n        result.name = get(organization, 'name')\n        result.identifier = get(organization, 'identifier[0].value', '')\n    \n\n        //----------------------------------------------------------------\n        // TODO REFACTOR:  ContactPoint\n        // totally want to extract this\n\n        let telecomArray = get(organization, 'telecom', []);\n        telecomArray.forEach(function(telecomRecord){\n          if(get(telecomRecord, 'system') === 'phone'){\n            result.phone = get(telecomRecord, 'value');\n          }\n          if(get(telecomRecord, 'system') === 'email'){\n            result.email = get(telecomRecord, 'value');\n          }\n        })\n\n        //----------------------------------------------------------------\n    \n        result.text = get(organization, 'address[0].text')\n        result.city = get(organization, 'address[0].city')\n        result.state = get(organization, 'address[0].state')\n        result.postalCode = get(organization, 'address[0].postalCode')\n\n\n        return result;\n      })\n    };\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"OrganizationsTable[data]\", data);\n\n    return data;\n  }\n  handleChange(row, key, value) {\n    const source = this.state.source;\n    source[row][key] = value;\n    this.setState({source});\n  }\n\n  handleSelect(selected) {\n    this.setState({selected});\n  }\n\n  rowClick(id){\n    Session.set('organizationUpsert', false);\n    Session.set('selectedOrganizationId', id);\n    Session.set('organizationPageTabIndex', 2);\n  }\n  renderIdentifier(identifier){\n    if (!this.props.hideIdentifier) {\n      return (\n        <td className=\"identifier hidden-on-phone\">{ identifier }</td>\n      );\n    }\n  }\n  renderIdentifierHeader(){\n    if (!this.props.hideIdentifier) {\n      return (\n        <th className=\"identifier hidden-on-phone\">identifier</th>\n      );\n    }\n  }\n  renderPhone(phone){\n    if (!this.props.hidePhone) {\n      return (\n        <td className=\"phone\">{ phone }</td>\n      );\n    }\n  }\n  renderPhoneHeader(){\n    if (!this.props.hidePhone) {\n      return (\n        <th className=\"phone\">phone</th>\n      );\n    }\n  }\n  renderEmail(email){\n    if (!this.props.hideEmail) {\n      return (\n        <td className=\"email hidden-on-phone\">{ email }</td>\n      );\n    }\n  }\n  renderEmailHeader(){\n    if (!this.props.hideEmail) {\n      return (\n        <th className=\"email hidden-on-phone\">email</th>\n      );\n    }\n  }\n  renderCity(city){\n    if (!this.props.hideCity) {\n      return (\n        <td className=\"city \">{ city }</td>\n      );\n    }\n  }\n  renderCityHeader(){\n    if (!this.props.hideCity) {\n      return (\n        <th className=\"city\">city</th>\n      );\n    }\n  }\n  renderState(state){\n    if (!this.props.hideState) {\n      return (\n        <td className=\"state\">{ state }</td>\n      );\n    }\n  }\n  renderStateHeader(){\n    if (!this.props.hideState) {\n      return (\n        <th className=\"city\">city</th>\n      );\n    }\n  }\n  renderPostalCode(postalCode){\n    if (!this.props.hidePostalCode) {\n      return (\n        <td className=\"postalCode hidden-on-phone\">{ postalCode }</td>\n      );\n    }\n  }\n  renderPostalCodeHeader(){\n    if (!this.props.hidePostalCode) {\n      return (\n        <th className=\"postalCode hidden-on-phone\">postalCode</th>\n      );\n    }\n  }\n  \n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.organizations.length; i++) {\n      tableRows.push(\n      <tr className='organizationRow' ref='med-{i}' key={i} style={{cursor: 'pointer'}} onClick={ this.rowClick.bind('this', this.data.organizations[i]._id) }>\n        <td className=\"name\">{this.data.organizations[i].name}</td>\n        {this.renderIdentifier(this.data.organizations[i].identifier)}\n        {this.renderPhone(this.data.organizations[i].phone)}\n        {this.renderEmail(this.data.organizations[i].email)}\n        {this.renderCity(this.data.organizations[i].city)}\n        {this.renderState(this.data.organizations[i].state)}\n        {this.renderPostalCode(this.data.organizations[i].postalCode)}\n      </tr>);\n    }\n\n\n    return(\n      <Table id=\"organizationsTable\" ref='organizationsTable' hover >\n        <thead>\n          <tr>\n            <th className=\"name\">name</th>\n            {this.renderIdentifierHeader() }\n            {this.renderPhoneHeader() }\n            {this.renderEmailHeader() }\n            {this.renderCityHeader() }\n            {this.renderStateHeader() }\n            {this.renderPostalCodeHeader() }\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nOrganizationsTable.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  hideIdentifier: PropTypes.bool,\n  hidePhone: PropTypes.bool,\n  hideEmail: PropTypes.bool,\n  hideCity: PropTypes.bool,\n  hideState: PropTypes.bool,\n  hidePostalCode: PropTypes.bool\n};\nReactMixin(OrganizationsTable.prototype, ReactMeteorData);\nexport default OrganizationsTable;"]}