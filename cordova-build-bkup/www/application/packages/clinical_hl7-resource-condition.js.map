{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-condition/lib/Conditions.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-condition/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-condition/client/ConditionDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-condition/client/ConditionsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-condition/client/ConditionsTable.js"],"names":["SimpleSchema","module","link","v","Condition","BaseModel","extend","prototype","_collection","Conditions","Package","Mongo","Collection","connection","_transform","document","ConditionDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","blackbox","ReferenceSchema","Date","CodeableConceptSchema","Code","allowedValues","QuantitySchema","PeriodSchema","RangeSchema","Boolean","Object","ConditionStu3","ConditionSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","ConditionsPage","ConditionsTable","ConditionDetail","CardActions","CardText","DatePicker","RaisedButton","TextField","React","ReactMeteorData","ReactMixin","get","set","PropTypes","Col","Grid","Row","moment","props","state","conditionId","condition","resourceType","patient","reference","display","asserter","dateRecorded","code","coding","system","clinicalStatus","verificationStatus","evidence","onsetDateTime","form","patientDisplay","asserterDisplay","snomedCode","snomedDisplay","evidenceDisplay","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","Meteor","console","log","shouldUpdate","setState","getMeteorData","data","showDatePicker","renderDatePicker","datePickerValue","changeState","bind","setHint","text","showHints","render","id","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateCondition","conditionData","componentDidUpdate","event","self","fhirConditionData","conditionValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","onUpdate","insert","onInsert","handleCancelButton","onCancel","remove","Component","propTypes","string","oneOfType","bool","object","func","onRemove","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","Session","setDefault","style","opacity","tab","borderBottom","borderRight","tabIndex","conditionSearchFilter","currentConditionId","fhirVersion","selectedCondition","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","handleActive","Card","CardMedia","Toggle","Table","has","FaTags","FaCode","FaPuzzlePiece","FaLock","GoTrashcan","selected","conditions","displayToggle","displayDates","displayPatientName","displayAsserterName","displayEvidence","displayIdentifier","displayToggles","query","hideEnteredInError","$nin","find","count","fetch","removeRecord","showSecurityDialog","displayOnMobile","width","includes","window","navigator","platform","minWidth","renderToggleHeader","hideToggle","renderToggle","patientId","renderDateHeader","header","hideDates","renderStartDate","startDate","format","renderEndDate","endDate","renderPatientNameHeader","hidePatientName","renderPatientName","renderAsserterNameHeader","hideAsserterName","renderAsserterName","renderSeverityHeader","hideSeverity","renderSeverity","severity","renderEvidenceHeader","hideEvidence","renderEvidence","renderIdentifierHeader","hideIdentifier","renderIdentifier","identifier","renderActionIconsHeader","hideActionIcons","renderActionIcons","iconStyle","marginLeft","marginTop","fontSize","rowClick","tableRows","i","length","newRow","barcode","abatementDateTime","rowStyle","cursor","color","push","array","paginationLimit","number"],"mappings":"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","file":"/packages/clinical_hl7-resource-condition.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nCondition = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nCondition.prototype._collection = Conditions;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\nif(typeof Conditions === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Conditions = new Mongo.Collection('Conditions');\n  } else if(Package['clinical:desktop-publish']){\n    Conditions = new Mongo.Collection('Conditions');\n  } else {\n    Conditions = new Mongo.Collection('Conditions', {connection: null});\n  }\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nConditions._transform = function (document) {\n  return new Condition(document);\n};\n\n\n\n\nConditionDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Condition\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"patient\" : {\n    blackbox: true,\n    type: ReferenceSchema\n  }, // R!  (Patient) Who has the condition?\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Encounter) Encounter when condition first asserted\n  \"asserter\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // (Practitioner|Patient) Person who asserts this condition\n  \"dateRecorded\" : {\n    optional: true,\n    type: Date\n  }, // When first entered\n  \"code\" : {\n    type: CodeableConceptSchema\n  }, // R!  Identification of the condition, problem or diagnosis\n  \"category\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // complaint | symptom | finding | diagnosis\n  \"clinicalStatus\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['active', 'relapse', 'remission', 'resolved']\n  }, // \n  \"verificationStatus\" : {\n    type: Code,\n    allowedValues: ['provisional', 'differential', 'confirmed', 'refuted', 'entered-in-error', 'unknown']\n  }, // R!  \n  \"severity\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Subjective severity of condition\n  \"onsetDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"onsetQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  }, //(Age)\n  \"onsetPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"onsetRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"onsetString\" : {\n    optional: true,\n    type: String\n  },\n  // abatement[x]: If/when in resolution/remission. One of these 6:\n  \"abatementDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"abatementQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  }, //(Age)\n  \"abatementBoolean\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"abatementPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"abatementRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"abatementString\" : {\n    optional: true,\n    type: String\n  },\n  \"stage\" : {\n    optional: true,\n    type: Object\n  }, \n  \"stage.summary\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // C? Simple summary (disease specific)\n  \"stage.assessment\" : {\n    optional: true,\n    type: Array\n  }, // (ClinicalImpression|DiagnosticReport|Observation) C? Formal record of assessment\n  \"stage.assessment.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  }, \n  \"evidence\" : {\n    optional: true,\n    type: Array\n  }, \n  \"evidence.$\" : {\n    optional: true,\n    type: Object\n  }, \n  \"evidence.$.code\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // C? Manifestation/symptom\n  \"evidence.$.detail\" : {\n    optional: true,\n    type:Array\n  }, \n  \"evidence.$.detail.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  }, \n  \"bodySite\" : {\n    optional: true,\n    type: Array\n  }, // Anatomical location, if relevant\n  \"bodySite.$\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Anatomical location, if relevant\n  \"notes\" : {\n    optional: true,\n    type: String\n  } // Additional information about the Condition\n});\n\n\nConditionStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Condition\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"clinicalStatus\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['active', 'recurrence', 'inactive', 'remission', 'resolved']\n  }, // \n  \"verificationStatus\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['provisional', 'differential', 'confirmed', 'refuted', 'entered-in-error', 'unknown']\n  }, \n  \"category\" : {\n    optional: true,\n    type: Array\n  }, \n  \"category.$\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, \n  \"severity\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Subjective severity of condition\n  \"code\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, \n  \"bodySite\" : {\n    optional: true,\n    type: Array\n  }, \n  \"bodySite.$\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, \n  \"subject\" : {\n    type: ReferenceSchema\n  },\n  \"asserter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"onsetDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"onsetAge\" : {\n    optional: true,\n    type: QuantitySchema\n  }, //(Age)\n  \"onsetPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"onsetRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"onsetString\" : {\n    optional: true,\n    type: String\n  },\n\n  // abatement[x]: If/when in resolution/remission. One of these 6:\n  \"abatementDateTime\" : {\n    optional: true,\n    type: Date\n  },\n  \"abatementAge\" : {\n    optional: true,\n    type: QuantitySchema\n  }, //(Age)\n  \"abatementBoolean\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"abatementPeriod\" : {\n    optional: true,\n    type: PeriodSchema\n  },\n  \"abatementRange\" : {\n    optional: true,\n    type: RangeSchema\n  },\n  \"abatementString\" : {\n    optional: true,\n    type: String\n  },\n  \"stage\" : {\n    optional: true,\n    type: Object\n  }, \n  \"stage.summary\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // C? Simple summary (disease specific)\n  \"stage.assessment\" : {\n    optional: true,\n    type: Array\n  }, // (ClinicalImpression|DiagnosticReport|Observation) C? Formal record of assessment\n  \"stage.assessment.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  }, \n  \"evidence\" : {\n    optional: true,\n    type: Array\n  }, \n  \"evidence.$\" : {\n    optional: true,\n    type: Object\n  }, \n  \"evidence.$.code\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // C? Manifestation/symptom\n  \"evidence.$.detail\" : {\n    optional: true,\n    type:Array\n  }, \n  \"evidence.$.detail.$\" : {\n    optional: true,\n    type: ReferenceSchema \n  }, \n  \"notes\" : {\n    optional: true,\n    type: String\n  } // Additional information about the Condition\n});\n\n\n\nConditionSchema = ConditionStu3;\n\n// BaseSchema.extend(ConditionSchema);\n// DomainResourceSchema.extend(ConditionSchema);\nConditions.attachSchema(ConditionSchema);\n\nexport default { Condition, Conditions, ConditionSchema, ConditionStu3, ConditionDstu2 };","\n\nimport ConditionsPage from './client/ConditionsPage';\nimport ConditionsTable from './client/ConditionsTable';\nimport ConditionDetail from './client/ConditionDetail';\nimport { Condition, Conditions, ConditionSchema } from './lib/Conditions';\n\nvar DynamicRoutes = [{\n  'name': 'ConditionsPage',\n  'path': '/conditions',\n  'component': ConditionsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Conditions',\n  'to': '/conditions',\n  'href': '/conditions'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  ConditionsPage,\n  ConditionsTable,\n  ConditionDetail\n};\n\n\n","// =======================================================================\n// Using DSTU2  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//\n// https://www.hl7.org/fhir/DSTU2/conditions.html\n//\n//\n// =======================================================================\n\nimport { CardActions, CardText, DatePicker, RaisedButton, TextField } from 'material-ui';\n\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { get, set } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { Col, Grid, Row } from 'react-bootstrap';\nimport { moment } from 'meteor/momentjs:moment'\n\nexport class ConditionDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      conditionId: false,\n      condition: {\n        resourceType: \"Condition\",\n        patient: {\n          reference: \"\",\n          display: \"\"\n        },\n        asserter: {\n          reference: \"\",\n          display: \"\"\n        },\n        dateRecorded: null,\n        code: {\n          coding: [\n            {\n              system: \"http://snomed.info/sct\",\n              code: \"\",\n              display: \"\"\n            }\n          ]\n        },\n        clinicalStatus: \"active\",\n        verificationStatus: \"confirmed\",\n        evidence: [],\n        onsetDateTime: null\n      }, \n      form: {\n        patientDisplay: '',\n        asserterDisplay: '',\n        snomedCode: '',\n        snomedDisplay: '',\n        clinicalStatus: '',\n        verificationStatus: '',\n        evidenceDisplay: ''\n      }\n    }\n  }\n  dehydrateFhirResource(condition) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.patientDisplay = get(condition, 'patient.display')\n    formData.asserterDisplay = get(condition, 'asserter.display')    \n    formData.snomedCode = get(condition, 'code.coding[0].code')\n    formData.snomedDisplay = get(condition, 'code.coding[0].display')\n    formData.clinicalStatus = get(condition, 'clinicalStatus')\n    formData.verificationStatus = get(condition, 'verificationStatus')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    get(Meteor, 'settings.public.logging') === \"debug\" && console.log('ConditionDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // received an condition from the table; okay lets update again\n    if(nextProps.conditionId !== this.state.conditionId){\n      \n      if(nextProps.condition){\n        this.setState({condition: nextProps.condition})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.condition)})       \n      }\n\n      this.setState({conditionId: nextProps.conditionId})\n      shouldUpdate = true;\n    }\n\n    // both false; don't take any more updates\n    if(nextProps.condition === this.state.condition){\n      shouldUpdate = false;\n    }\n \n    return shouldUpdate;\n  }\n\n  getMeteorData() {\n    let data = {\n      conditionId: this.props.conditionId,\n      condition: false,\n      showDatePicker: false,\n      form: this.state.form\n    };\n\n    if(this.props.showDatePicker){\n      data.showDatePicker = this.props.showDatePicker\n    }\n    if(this.props.condition){\n      data.condition = this.props.condition;\n      data.form = this.dehydrateFhirResource(this.props.condition);\n    }\n\n    return data;\n  }\n  renderDatePicker(showDatePicker, datePickerValue){\n    if (typeof datePickerValue === \"string\"){\n      datePickerValue = new Date(datePickerValue);\n    }\n    if (showDatePicker) {\n      return (\n        <DatePicker \n          name='onsetDateTime'\n          hintText=\"Onset Date\" \n          container=\"inline\" \n          mode=\"landscape\"\n          value={ datePickerValue ? datePickerValue : null }    \n          onChange={ this.changeState.bind(this, 'onsetDateTime')}      \n          />\n      );\n    }\n  }\n  setHint(text){\n    if(this.props.showHints !== false){\n      return text;\n    } else {\n      return '';\n    }\n  }\n  render() {\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log('ConditionDetail.render()', this.state)\n\n    return (\n      <div id={this.props.id} className=\"conditionDetail\">\n        <CardText>\n          <Row>\n            <Col md={6} >\n              <TextField\n                id='patientDisplayInput'\n                name='patientDisplay'\n                floatingLabelText='Patient'\n                value={ get(this, 'data.form.patientDisplay', '') }\n                onChange={ this.changeState.bind(this, 'patientDisplay')}\n                hintText={ this.setHint('Jane Doe') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={6} >\n              <TextField\n                id='asserterDisplayInput'\n                name='asserterDisplay'\n                floatingLabelText='Asserter'\n                value={ get(this, 'data.form.asserterDisplay', '') }\n                onChange={ this.changeState.bind(this, 'asserterDisplay')}\n                hintText={ this.setHint('Nurse Jackie') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6} >\n              <TextField\n                id='snomedCodeInput'\n                name='snomedCode'\n                floatingLabelText='SNOMED Code'\n                value={ get(this, 'data.form.snomedCode', '') }\n                hintText={ this.setHint('307343001') }\n                onChange={ this.changeState.bind(this, 'snomedCode')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={6} >\n              <TextField\n                id='snomedDisplayInput'\n                name='snomedDisplay'\n                floatingLabelText='SNOMED Display'\n                value={ get(this, 'data.form.snomedDisplay', '') }\n                onChange={ this.changeState.bind(this, 'snomedDisplay')}\n                hintText={ this.setHint('Acquired hemoglobin H disease (disorder)') }\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6} >\n              <TextField\n                id='clinicalStatusInput'\n                name='clinicalStatus'\n                floatingLabelText='Clinical Status'\n                value={ get(this, 'data.form.clinicalStatus', '') }\n                hintText={ this.setHint('active | recurrence | inactive | remission | resolved') }\n                onChange={ this.changeState.bind(this, 'clinicalStatus')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={6} >\n              <TextField\n                id='verificationStatusInput'\n                name='verificationStatus'\n                floatingLabelText='Verification Status'\n                value={ get(this, 'data.form.verificationStatus', '') }\n                hintText={ this.setHint('provisional | differential | confirmed | refuted | entered-in-error | unknown') }\n                onChange={ this.changeState.bind(this, 'verificationStatus')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n\n\n          {/* <br/>\n          { this.renderDatePicker(this.data.showDatePicker, get(this, 'data.condition.onsetDateTime') ) }\n          <br/> */}\n\n          <a href='http://browser.ihtsdotools.org/?perspective=full&conceptId1=404684003&edition=us-edition&release=v20180301&server=https://prod-browser-exten.ihtsdotools.org/api/snomed&langRefset=900000000000509007'>Lookup codes with the SNOMED CT Browser</a>\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.state.conditionId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(conditionId){\n    if (conditionId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateConditionButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteConditionButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveConditionButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n  updateFormData(formData, field, textValue){\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"ConditionDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"patientDisplay\":\n        set(formData, 'patientDisplay', textValue)\n        break;\n      case \"asserterDisplay\":\n        set(formData, 'asserterDisplay', textValue)\n        break;        \n      case \"verificationStatus\":\n        set(formData, 'verificationStatus', textValue)\n        break;\n      case \"clinicalStatus\":\n        set(formData, 'clinicalStatus', textValue)\n        break;\n      case \"snomedCode\":\n        set(formData, 'snomedCode', textValue)\n        break;\n      case \"snomedDisplay\":\n        set(formData, 'snomedDisplay', textValue)\n        break;\n      case \"evidenceDisplay\":\n        set(formData, 'evidenceDisplay', textValue)\n        break;\n      case \"onsetDateTime\":\n        set(formData, 'onsetDateTime', textValue)\n        break;\n      default:\n    }\n\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateCondition(conditionData, field, textValue){\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"ConditionDetail.updateCondition\", conditionData, field, textValue);\n\n    switch (field) {\n      case \"patientDisplay\":\n        set(conditionData, 'patient.display', textValue)\n        break;\n      case \"asserterDisplay\":\n        set(conditionData, 'asserter.display', textValue)\n        break;\n      case \"verificationStatus\":\n        set(conditionData, 'verificationStatus', textValue)\n        break;\n      case \"clinicalStatus\":\n        set(conditionData, 'clinicalStatus', textValue)\n        break;\n      case \"snomedCode\":\n        set(conditionData, 'code.coding[0].code', textValue)\n        break;\n      case \"snomedDisplay\":\n        set(conditionData, 'code.coding[0].display', textValue)\n        break;\n      case \"evidenceDisplay\":\n        set(conditionData, 'evidence[0].detail[0].display', textValue)\n        break;  \n      case \"datePicker\":\n        set(conditionData, 'onsetDateTime', textValue)\n        break;\n    }\n    return conditionData;\n  }\n  componentDidUpdate(props){\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log('ConditionDisplay.componentDidUpdate()', props, this.state)\n  }\n  // this could be a mixin\n  changeState(field, event, textValue){\n\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"   \");\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"ConditionDetail.changeState\", field, textValue);\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let conditionData = Object.assign({}, this.state.condition);\n\n    formData = this.updateFormData(formData, field, textValue);\n    conditionData = this.updateCondition(conditionData, field, textValue);\n\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"conditionData\", conditionData);\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"formData\", formData);\n\n    this.setState({condition: conditionData})\n    this.setState({form: formData})\n\n  }\n\n  handleSaveButton(){\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Condition...', this.state)\n\n    let self = this;\n    let fhirConditionData = Object.assign({}, this.state.condition);\n\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log('fhirConditionData', fhirConditionData);\n\n\n    let conditionValidator = ConditionSchema.newContext();\n    conditionValidator.validate(fhirConditionData)\n\n    console.log('IsValid: ', conditionValidator.isValid())\n    console.log('ValidationErrors: ', conditionValidator.validationErrors());\n\n    if (this.state.conditionId) {\n      if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"Updating Condition...\");\n      delete fhirConditionData._id;\n\n      Conditions._collection.update(\n        {_id: this.state.conditionId}, {$set: fhirConditionData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            if(self.props.onUpdate){\n              self.props.onUpdate(self.data.conditionId);\n            }\n            Bert.alert('Condition updated!', 'success');\n          }\n        });\n    } else {\n\n      if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"Create a new Condition\", fhirConditionData);\n\n      Conditions._collection.insert(fhirConditionData, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          if(self.props.onInsert){\n            self.props.onInsert(self.data.conditionId);\n          }\n          Bert.alert('Condition added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    if(this.props.onCancel){\n      this.props.onCancel();\n    }\n  }\n\n  handleDeleteButton(){\n    console.log('ConditionDetail.handleDeleteButton()', this.state.conditionId)\n\n    let self = this;\n    Conditions._collection.remove({_id: this.state.conditionId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        if(this.props.onInsert){\n          this.props.onInsert(self.data.conditionId);\n        }\n        Bert.alert('Condition removed!', 'success');\n      }\n    });\n  }\n}\n\nConditionDetail.propTypes = {\n  id: PropTypes.string,\n  conditionId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  condition: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n  showDatePicker: PropTypes.bool,\n  showHints: PropTypes.bool,\n  onInsert: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onRemove: PropTypes.func,\n  onCancel: PropTypes.func\n};\nReactMixin(ConditionDetail.prototype, ReactMeteorData);\nexport default ConditionDetail;","import { CardText, CardTitle, Tab, Tabs } from 'material-ui';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport ConditionDetail from './ConditionDetail';\nimport ConditionsTable from './ConditionsTable';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nimport { get } from 'lodash';\n\n\nSession.setDefault('fhirVersion', 'v1.0.2');\nSession.setDefault('selectedConditionId', false);\nSession.setDefault('conditionPageTabIndex', 1);\n\nexport class ConditionsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('conditionPageTabIndex'),\n      conditionSearchFilter: Session.get('conditionSearchFilter'),\n      currentConditionId: Session.get('selectedConditionId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedCondition: false\n    };\n\n    if (Session.get('selectedConditionId')){\n      data.selectedCondition = Conditions.findOne({_id: Session.get('selectedConditionId')});\n    } else {\n      data.selectedCondition = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('conditionPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedConditionId', false);\n  }\n  onInsert(conditionId){\n    HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Conditions\", recordId: conditionId});\n    Session.set('conditionPageTabIndex', 1);\n    Session.set('selectedConditionId', false);\n  }\n  onUpdate(conditionId){\n    HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Conditions\", recordId: conditionId});\n    Session.set('conditionPageTabIndex', 1);\n    Session.set('selectedConditionId', false);\n}\n  onRemove(conditionId){\n    HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Conditions\", recordId: conditionId});\n    Session.set('conditionPageTabIndex', 1);\n    Session.set('selectedConditionId', false);\n  }\n  onCancel(){\n    Session.set('conditionPageTabIndex', 1);\n  }\n  render() {\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log('In ConditionsPage render');\n    return (\n      <div id='conditionsPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Conditions' />\n            <CardText>\n              <Tabs id=\"conditionsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab id='newConditionTab' className='newConditionTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <ConditionDetail \n                    id='newCondition'\n                    showHints={true}\n                    fhirVersion={ this.data.fhirVersion }\n                    condition={ this.data.selectedCondition }\n                    conditionId={ this.data.currentConditionId } />  \n               </Tab>\n               <Tab id='conditionListTab' className=\"conditionListTab\" label='Conditions' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <ConditionsTable \n                  displayPatientName={true}\n                  displayAsserterName={true}\n                  displayToggle={true}\n                  displayEvidence={false}\n                  displayDates={true}\n                  displayIdentifier={false}\n                  noDataMessagePadding={100}\n                />\n               </Tab>\n               <Tab id=\"conditionDetailsTab\" className=\"conditionDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <ConditionDetail \n                  id='conditionDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  condition={ this.data.selectedCondition }\n                  conditionId={ this.data.currentConditionId } \n                  showDatePicker={true} \n                  showHints={false}\n                  onInsert={ this.onInsert }\n                  onUpdate={ this.onUpdate }\n                  onRemove={ this.onRemove }\n                  onCancel={ this.onCancel }\n                 />\n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(ConditionsPage.prototype, ReactMeteorData);\n\nexport default ConditionsPage;\n","import { Card, CardActions, CardMedia, CardText, CardTitle, Toggle } from 'material-ui';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { get, has } from 'lodash';\nimport PropTypes from 'prop-types';\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\nimport { GoTrashcan } from 'react-icons/go'\n\nexport class ConditionsTable extends React.Component {\n\n  getMeteorData() {\n\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      conditions: [],\n      displayToggle: false,\n      displayDates: false,\n      displayPatientName: false,\n      displayAsserterName: false,\n      displayEvidence: false,\n      displayIdentifier: false\n    }\n    \n    if(this.props.displayPatientName){\n      data.displayPatientName = this.props.displayPatientName;\n    }\n    if(this.props.displayAsserterName){\n      data.displayAsserterName = this.props.displayAsserterName;\n    }\n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n    if(this.props.displayEvidence){\n      data.displayEvidence = this.props.displayEvidence;\n    }\n\n    if(this.props.data){\n      data.conditions = this.props.data;\n    } else {\n\n      let query = {};\n      if(this.props.query){\n        query = this.props.query\n      }\n      if(this.props.hideEnteredInError){\n        query.verificationStatus = {\n          $nin: [\"entered-in-error\"]  // unconfirmed | provisional | differential | confirmed | refuted | entered-in-error\n        }\n      }\n\n      console.log('ConditionsTable.Conditions.query: ', query)\n\n      if(Conditions.find().count() > 0){\n        data.conditions = Conditions.find(query).fetch();\n      }  \n    }\n\n    if(get(Meteor, 'settings.public.logging') === \"debug\") console.log(\"ConditionsTable[data]\", data);\n    return data;\n  };\n  removeRecord(_id){\n    console.log('Remove condition ', _id)\n    Conditions._collection.remove({_id: _id})\n  }\n  showSecurityDialog(condition){\n    console.log('showSecurityDialog', condition)\n\n    Session.set('securityDialogResourceJson', Conditions.findOne(get(condition, '_id')));\n    Session.set('securityDialogResourceType', 'Condition');\n    Session.set('securityDialogResourceId', get(condition, '_id'));\n    Session.set('securityDialogOpen', true);\n  }\n  displayOnMobile(width){\n    let style = {};\n    if(['iPhone'].includes(window.navigator.platform)){\n      style.display = \"none\";\n    }\n    if(width){\n      style.width = width;\n    } else {\n      style.minWidth = '140px'\n    }\n    return style;\n  }\n  renderToggleHeader(){\n    if (!this.props.hideToggle) {\n      return (\n        <th className=\"toggle\" style={{width: '60px'}} >Toggle</th>\n      );\n    }\n  }\n  renderToggle(patientId ){\n    if (!this.props.hideToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n            />\n          </td>\n      );\n    }\n  }\n  renderDateHeader(header){\n    if (!this.props.hideDates) {\n      return (\n        <th className='date' style={{minWidth: '100px'}}>{header}</th>\n      );\n    }\n  }\n  renderStartDate(startDate ){\n    if (!this.props.hideDates) {\n      return (\n        <td className='date'>{ moment(startDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n  renderEndDate(endDate ){\n    if (!this.props.hideDates) {\n      return (\n        <td className='date'>{ moment(endDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n\n\n  renderPatientNameHeader(){\n    if (!this.props.hidePatientName) {\n      return (\n        <th className='patientDisplay'>patient</th>\n      );\n    }\n  }\n  renderPatientName(patientDisplay ){\n    if (!this.props.hidePatientName) {\n      return (\n        <td className='patientDisplay' style={{minWidth: '140px'}}>{ patientDisplay }</td>\n      );\n    }\n  }\n  renderAsserterNameHeader(){\n    if (!this.props.hideAsserterName) {\n      return (\n        <th className='asserterDisplay'>Asserter</th>\n      );\n    }\n  }\n  renderAsserterName(asserterDisplay ){\n    if (!this.props.hideAsserterName) {\n      return (\n        <td className='asserterDisplay' style={{minWidth: '140px'}}>{ asserterDisplay }</td>\n      );\n    }\n  }  \n\n  renderSeverityHeader(){\n    if (!this.props.hideSeverity) {\n      return (\n        <th className='hideSeverity'>Severity</th>\n      );\n    }\n  }\n  renderSeverity(severity ){\n    if (!this.props.hideSeverity) {\n      return (\n        <td className='severity'>{ severity }</td>\n      );\n    }\n  } \n  renderEvidenceHeader(){\n    if (!this.props.hideEvidence) {\n      return (\n        <th className='asserterDisplay'>Evidence</th>\n      );\n    }\n  }\n  renderEvidence(evidenceDisplay ){\n    if (!this.props.hideEvidence) {\n      return (\n        <td className='evidenceDisplay'>{ evidenceDisplay }</td>\n      );\n    }\n  } \n  renderIdentifierHeader(){\n    if (!this.props.hideIdentifier) {\n      return (\n        <th className='identifier'>Identifier</th>\n      );\n    }\n  }\n  renderIdentifier(identifier ){\n    if (!this.props.hideIdentifier) {\n      return (\n        <td className='identifier'>{ identifier }</td>\n      );\n    }\n  } \n  renderActionIconsHeader(){\n    if (!this.props.hideActionIcons) {\n      return (\n        <th className='actionIcons'>Actions</th>\n      );\n    }\n  }\n  renderActionIcons( condition ){\n    if (!this.props.hideActionIcons) {\n\n      let iconStyle = {\n        marginLeft: '4px', \n        marginRight: '4px', \n        marginTop: '4px', \n        fontSize: '120%'\n      }\n\n      return (\n        <td className='actionIcons' style={{minWidth: '120px'}}>\n          <FaTags style={iconStyle} onClick={this.showSecurityDialog.bind(this, condition)} />\n          <GoTrashcan style={iconStyle} onClick={this.removeRecord.bind(this, condition._id)} />  \n        </td>\n      );\n    }\n  } \n\n  rowClick(id){\n    Session.set('selectedConditionId', id);\n    Session.set('conditionPageTabIndex', 2);\n  };\n  render () {\n\n  \n\n    let tableRows = [];\n    for (var i = 0; i < this.data.conditions.length; i++) {\n      var newRow = {\n        identifier: '',        \n        patientDisplay: '',\n        asserterDisplay: '',\n        clinicalStatus: '',\n        verificationStatus: '',\n        severity: '',\n        snomedCode: '',\n        snomedDisplay: '',\n        evidenceDisplay: '',\n        barcode: '',\n        onsetDateTime: '',\n        abatementDateTime: ''\n      };\n\n      newRow.identifier = get(this.data.conditions[i], 'identifier[0].value');\n      newRow.patientDisplay = get(this.data.conditions[i], 'patient.display');\n      newRow.asserterDisplay = get(this.data.conditions[i], 'asserter.display');\n      newRow.clinicalStatus = get(this.data.conditions[i], 'clinicalStatus');\n      newRow.verificationStatus = get(this.data.conditions[i], 'verificationStatus');\n      newRow.snomedCode = get(this.data.conditions[i], 'code.coding[0].code');\n      newRow.snomedDisplay = get(this.data.conditions[i], 'code.coding[0].display');\n      newRow.evidenceDisplay = get(this.data.conditions[i], 'evidence[0].detail[0].display');\n      newRow.barcode = get(this.data.conditions[i], '_id');\n      newRow.severity = get(this.data.conditions[i], 'severity.text');\n      newRow.onsetDateTime = get(this.data.conditions[i], 'onsetDateTime');\n      newRow.abatementDateTime = get(this.data.conditions[i], 'abatementDateTime');\n\n      let rowStyle = {\n        cursor: 'pointer'\n      }\n      if(get(this.data.conditions[i], 'modifierExtension[0]')){\n        rowStyle.color = \"orange\";\n      }\n\n      tableRows.push(\n        <tr key={i} className=\"conditionRow\" style={rowStyle} onClick={ this.rowClick.bind('this', this.data.conditions[i]._id)} >\n\n          { this.renderToggle() }\n          { this.renderActionIcons(this.data.conditions[i]) }\n          { this.renderIdentifier(newRow.identifier ) }\n          { this.renderPatientName(newRow.patientDisplay ) } \n          { this.renderAsserterName(newRow.asserterDisplay ) } \n          <td className='clinicalStatus'>{ newRow.clinicalStatus }</td>\n          <td className='snomedDisplay'>{ newRow.snomedDisplay }</td>\n          <td className='snomedCode'>{ newRow.snomedCode }</td>\n          <td className='verificationStatus' style={ this.displayOnMobile()} >{ newRow.verificationStatus }</td>\n          { this.renderSeverity(newRow.severity) }\n          { this.renderEvidence(newRow.evidenceDisplay) }\n          { this.renderStartDate(newRow.onsetDateTime) }\n          { this.renderEndDate(newRow.abatementDateTime) }\n        </tr>\n      )\n    }\n\n\n\n    return(\n      <Table id='conditionsTable' hover >\n        <thead>\n          <tr>\n            { this.renderToggleHeader() } \n            { this.renderActionIconsHeader() }\n            { this.renderIdentifierHeader() }\n            { this.renderPatientNameHeader() }\n            { this.renderAsserterNameHeader() }\n            <th className='clinicalStatus'>status</th>\n            <th className='snomedDisplay'>condition</th>\n            <th className='snomedCode'>code</th>\n            <th className='verificationStatus' style={ this.displayOnMobile('140px')} >verification</th>\n            { this.renderSeverityHeader() }\n            { this.renderEvidenceHeader() }\n            { this.renderDateHeader('start') }\n            { this.renderDateHeader('end') }\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nConditionsTable.propTypes = {\n  data: PropTypes.array,\n  query: PropTypes.object,\n  paginationLimit: PropTypes.number,\n  hideIdentifier: PropTypes.bool,\n  hideToggle: PropTypes.bool,\n  hideActionIcons: PropTypes.bool,\n  hidePatientName: PropTypes.bool,\n  hideAsserterName: PropTypes.bool,\n  hideEvidence: PropTypes.bool,\n  hideDates: PropTypes.bool,\n  hideSeverity: PropTypes.bool,\n  hideEnteredInError: PropTypes.bool\n};\nReactMixin(ConditionsTable.prototype, ReactMeteorData);\nexport default ConditionsTable;\n"]}