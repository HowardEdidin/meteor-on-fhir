{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-location/lib/Locations.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-location/lib/methods.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-location/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-location/client/LocationDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-location/client/LocationsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-location/client/LocationsTable.js"],"names":["SimpleSchema","module","link","v","Package","console","log","Location","BaseModel","extend","prototype","_collection","Locations","Mongo","Collection","connection","_transform","document","Meteor","isServer","_ensureIndex","LocationDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","Code","allowedValues","CodeableConceptSchema","ContactPointSchema","AddressSchema","Object","Number","blackbox","ReferenceSchema","LocationStu3","CodingSchema","LocationSchema","BaseSchema","DomainResourceSchema","attachSchema","fetchBundle","query","parameters","callback","locationArray","find","map","location","id","_id","_document","result","Bundle","generate","toMongo","originalLocation","mongoRecord","telecom","forEach","resourceType","address","prepForUpdate","process","env","TRACE","name","prepForFhirTransfer","toLatLng","exportDefault","get","methods","createLocation","locationObject","check","NODE_ENV","insert","error","removeLocationById","locationId","remove","dropLocations","initializeHospitals","hospitals","lat","lng","hospital","findOne","newLocation","text","position","latitude","longitude","altitude","coordinates","isClient","export","SidebarElements","DynamicRoutes","LocationsPage","LocationsTable","LocationDetail","CardActions","CardText","Col","Grid","Row","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","PropTypes","set","props","state","status","form","identifier","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","shouldUpdate","setState","getMeteorData","data","render","height","changeState","bind","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateLocation","locationData","event","self","fhirLocationData","locationValidator","newContext","validate","isValid","validationErrors","update","$set","Bert","alert","reason","Session","handleCancelButton","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","Component","propTypes","string","oneOfType","bool","object","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","Checkbox","EJSON","GoogleMapReact","LocationTable","ScatterplotChart","has","setDefault","styles","block","maxWidth","checkbox","marginBottom","demoData","x","y","style","opacity","tab","borderBottom","borderRight","page","top","left","width","canvas","tabIndex","locationSearchFilter","selectedLocationId","currentLocation","fhirVersion","center","home","zoom","layers","heatmap","reimbursements","mortality","eyeexams","diabetes","lipidPanels","outpatientReimbursement","shapefileDataLayer","markers","tspRoute","proximity","options","panControl","mapTypeControl","scrollwheel","metadata","pricePerGallonGasoline","milesPerGallon","sort","fetch","blur","appbar","darkroom","apiKey","handleTabChange","index","onNewTab","setGeojsonUrl","value","routeMetadataUpdate","calculateTspRoute","call","shortestFoundPath","toggleMortalityLayer","toggle","findNearMe","clearProximity","initializePoliceStations","initializeFireStations","tspWaypoints","handleActive","color","pageContent","push","backgroundColor","borderRadius","bgColor","key","libraries","maps","setStyle","icon","path","SymbolPath","CIRCLE","fillColor","fillOpacity","strokeColor","strokeWeight","scale","baseUrl","absoluteUrl","loadGeoJson","feature","getProperty","parseFloat","outpatients","Table","Toggle","row","cursor","selected","locations","manufacturer","primaryIngredient","background","filter","WebkitFilter","backdropFilter","handleChange","source","handleSelect","rowClick","tableRows","i","length","cardinality"],"mappings":"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","file":"/packages/clinical_hl7-resource-location.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\nif(Package['clinical:autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n  console.log(\"Any protected health information (PHI) stored in this app should be audited.\");\n  console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");\n  console.log(\"\");\n  console.log(\"meteor remove clinical:autopublish\");\n  console.log(\"\");\n}\nif(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");\n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");\n  console.log(\"meteor remove autopublish\");\n  console.log(\"meteor add clinical:autopublish\");\n  console.log(\"\");\n}\n\n\n\n// create the object using our BaseModel\nLocation = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nLocation.prototype._collection = Locations;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Locations === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Locations = new Mongo.Collection('Locations');\n  } else if(Package['clinical:desktop-publish']){    \n    Locations = new Mongo.Collection('Locations');\n  } else {\n    Locations = new Mongo.Collection('Locations', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nLocations._transform = function (document) {\n  return new Location(document);\n};\n\n\n\nif(Meteor.isServer){\n  if(Package['clinical:autopublish']){\n    Locations._ensureIndex({ \"location\": \"2dsphere\"});\n  } \n}\n\n\n\nLocationDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Location\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['active', 'suspended', 'inactive'],\n    defaultValue: 'active'\n  },\n  \"name\" : {\n    optional: true,\n    type: String\n  }, // Name of the location as used by humans\n  \"description\" : {\n    optional: true,\n    type: String\n  }, // Description of the location\n  \"mode\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['instance', 'kind']\n  }, // instance | kind\n  \"type\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Type of function performed\n  \"telecom\" : {\n    optional: true,\n    type: Array\n  }, // Contact details of the location\n  \"telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, // Contact details of the location\n  \"address\" : {\n    optional: true,\n    type: AddressSchema\n  }, // Physical location\n  \"physicalType\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Physical form of the location\n\n  \"position\" : {\n    optional: true,\n    type: Object\n  }, \n  \"position.longitude\" : {\n    type: Number\n  }, // R!  Longitude with WGS84 datum\n  \"position.latitude\" : {\n    type: Number\n  }, // R!  Latitude with WGS84 datum\n  \"position.altitude\" : {\n    optional: true,\n    type: Number\n  }, // Altitude with WGS84 datum\n  \"location\" : {\n    optional: true,\n    blackbox: true,\n    type: Object\n  }, // a geolocation Point\n  \"managingOrganization\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Organization responsible for provisioning and upkeep\n  \"partOf\" : {\n    optional: true,\n    type: ReferenceSchema\n  } // Another Location this one is physically part of\n});\n\n\nLocationStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Location\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['active', 'suspended', 'inactive'],\n    defaultValue: 'active'\n  },\n  \"operationalStatus\" : {\n    optional: true,\n    type: CodingSchema\n  }, \n  \"name\" : {\n    optional: true,\n    type: String\n  }, // Name of the location as used by humans\n  \"alias\" : {\n    optional: true,\n    type: Array\n  }, // Name of the location as used by humans\n  \"alias.$\" : {\n    optional: true,\n    type: String\n  }, // Name of the location as used by humans\n  \"description\" : {\n    optional: true,\n    type: String\n  }, // Description of the location\n  \"mode\" : {\n    optional: true,\n    type: Code,\n    allowedValues: ['instance', 'kind']\n  }, // instance | kind\n  \"type\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Type of function performed\n  \"telecom\" : {\n    optional: true,\n    type: Array\n  }, // Contact details of the location\n  \"telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n  }, // Contact details of the location\n  \"address\" : {\n    optional: true,\n    type: AddressSchema\n  }, // Physical location\n  \"physicalType\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }, // Physical form of the location\n\n  \"position\" : {\n    optional: true,\n    type: Object\n  }, \n  \"position.longitude\" : {\n    type: Number\n  }, // R!  Longitude with WGS84 datum\n  \"position.latitude\" : {\n    type: Number\n  }, // R!  Latitude with WGS84 datum\n  \"position.altitude\" : {\n    optional: true,\n    type: Number\n  }, // Altitude with WGS84 datum\n  \"location\" : {\n    optional: true,\n    blackbox: true,\n    type: Object\n  }, // a geolocation Point\n  \"managingOrganization\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Organization responsible for provisioning and upkeep\n  \"partOf\" : {\n    optional: true,\n    type: ReferenceSchema\n  }, // Another Location this one is physically part of\n  \"endpoint\" : {\n    optional: true,\n    type: Array\n  }, // Another Location this one is physically part of\n  \"endpoint.$\" : {\n    optional: true,\n    type: ReferenceSchema\n  } // Another Location this one is physically part of\n});\n\n\nLocationSchema = LocationDstu2;\n\n\nBaseSchema.extend(LocationSchema);\nDomainResourceSchema.extend(LocationSchema);\n\nLocations.attachSchema(LocationSchema);\n\n\n\n\n\n\n\n//=================================================================\n\n\nLocations.fetchBundle = function (query, parameters, callback) {\n  var locationArray = Locations.find(query, parameters, callback).map(function(location){\n    location.id = location._id;\n    delete location._document;\n    return location;\n  });\n\n  // console.log(\"locationArray\", locationArray);\n\n  var result = Bundle.generate(locationArray);\n\n  // console.log(\"result\", result.entry[0]);\n\n  return result;\n};\n\n\n/**\n * @summary This function takes a FHIR resource and prepares it for storage in Mongo.\n * @memberOf Locations\n * @name toMongo\n * @version 1.6.0\n * @returns { Location }\n * @example\n * ```js\n *  let locations = Locations.toMongo('12345').fetch();\n * ```\n */\n\nLocations.toMongo = function (originalLocation) {\n  var mongoRecord;\n\n  if (originalLocation.telecom && originalLocation.telecom[0]) {\n    originalLocation.telecom.forEach(function(telecom){\n      telecom.resourceType = \"ContactPoint\";\n    });\n  }\n\n  if (originalLocation.address && !originalLocation.address.resourceType) {\n    originalLocation.address.resourceType = \"Address\";\n  }\n\n  return originalLocation;\n};\n\n\n/**\n * @summary Similar to toMongo(), this function prepares a FHIR record for storage in the Mongo database.  The difference being, that this assumes there is already an existing record.\n * @memberOf Locations\n * @name prepForUpdate\n * @version 1.6.0\n * @returns { Object }\n * @example\n * ```js\n *  let locations = Locations.findMrn('12345').fetch();\n * ```\n */\n\nLocations.prepForUpdate = function (location) {\n\n  if (location.telecom && location.telecom[0]) {\n    process.env.TRACE && console.log(\"location.name\", location.name);\n  \n    location.telecom.forEach(function(telecom){\n      telecom.resourceType = \"ContactPoint\";\n    });\n  }\n  \n  if (location.address && location.address) {  \n    location.address.resourceType = \"Address\";\n  }\n\n\n  return location;\n};\n\n\n/**\n * @summary Scrubbing the location; make sure it conforms to v1.6.0\n * @memberOf Locations\n * @name scrub\n * @version 1.2.3\n * @returns {Boolean}\n * @example\n * ```js\n *  let locations = Locations.findMrn('12345').fetch();\n * ```\n */\n\nLocations.prepForFhirTransfer = function (location) {\n  //console.log(\"Locations.prepForBundle()\");\n\n  // // FHIR has complicated and unusual rules about dates in order\n  // // to support situations where a family member might report on a location's\n  // // date of birth, but not know the year of birth; and the other way around\n  // if (location.birthDate) {\n  //   location.birthDate = moment(location.birthDate).format(\"YYYY-MM-DD\");\n  // }\n  \n\n  if (location.telecom && location.telecom[0]) {\n    location.telecom.forEach(function(telecom){\n      delete telecom.resourceType;\n    });\n  }\n\n  delete location.address.resourceType;\n\n  process.env.TRACE && console.log(\"Locations.prepForBundle()\", location);\n\n  return location;\n};\n\n/**\n * @summary Returns the record in LatLng object\n * @memberOf Location\n * @name toLatLng\n * @version 1.2.3\n * @returns {Object}\n * @example\n * ```js\n * ```\n */\n\nLocation.prototype.toLatLng = function () {\n  return {};\n};\n\n\nexport default { Location, Locations, LocationSchema, LocationDstu2, LocationStu3 };","import { get } from 'lodash';\n\nMeteor.methods({\n    createLocation:function(locationObject){\n        check(locationObject, Object);\n\n        if (process.env.NODE_ENV === 'test') {\n            console.log('Creating Location...');\n            Locations.insert(locationObject, function(error, result){\n            if (error) {\n                console.log(error);\n            }\n            if (result) {\n                console.log('Location created: ' + result);\n            }\n            });\n        } else {\n            console.log('This command can only be run in a test environment.');\n            console.log('Try setting NODE_ENV=test');\n        }\n    },  \n    removeLocationById: function(locationId){\n        check(locationId, String);\n        Locations.remove({_id: locationId});\n    },\n    dropLocations: function(){\n        console.log('-----------------------------------------');\n        console.log('Dropping Locations... ');\n        if (process.env.NODE_ENV === 'test') {\n            Locations.remove({});\n        } else {\n            console.log('This command can only be run in a test environment.');\n            console.log('Try setting NODE_ENV=test');\n        }\n    },\n    // These are Chicago area hospitals\n    initializeHospitals: function(){\n\n      var hospitals = [{\n            name: \"Childrens Memorial Hospital\",\n            lat: 41.9247546,\n            lng: -87.6472764\n        }, {\n            name: \"Bernard Mitchell Hospital\",\n            lat: 41.7892007,\n            lng: -87.6044935\n        }, {\n            name: \"Gottlieb Memorial Hospital\",\n            lat: 41.9114198,\n            lng: -87.843672\n        }, {\n            name: \"Holy Cross Hospital\",\n            lat: 41.7694777,\n            lng: -87.6922738\n        }, {\n            name: \"Lakeside Veterans Administration\",\n            lat: 41.8944773,\n            lng: -87.6189413\n        }, { \n            name: \"Little Company of Mary Hospital\",\n            lat: 41.7219779,\n            lng: -87.6914393  \n        }, { \n            name: \"Methodist Hospital\",\n            lat: 41.9728097,\n            lng: -87.6708897\n        }, { \n            name: \"Northwestern Memorial Hospital\",\n            lat: 41.8955885,\n            lng: -87.6208858     \n        }, { \n            name: \"Oak Forest Hospital\",\n            lat: 41.5983672,\n            lng: -87.732549     \n        }, { \n            name: \"Saint Francis Hospital\",\n            lat: 41.6580896,\n            lng:  -87.6781042       \n        }, { \n            name: \"Sacred Heart Hospital\",\n            lat: 41.8905879,\n            lng: -87.7081111       \n        }, { \n            name: \"Roseland Community Hospital\",\n            lat: 41.6922565,\n            lng: -87.6253253\n        }, { \n            name: \"South Shore Hospital\",\n            lat: 41.7494792,\n            lng:  -87.5692135     \n        }, { \n            name: \"Hartgrove Hospital\",\n            lat: 41.8905878,\n            lng: -87.7203337\n        }, { \n            name: \"Glenbrook Hospital\",\n            lat: 42.0925276,\n            lng: -87.852566  \n        }, { \n            name: \"Garfield Park Hospital\",\n            lat: 41.8814211,\n            lng: -87.7220001 \n        }, { \n            name: \"Mercy\",\n            lat: 41.8469777,\n            lng: -87.6211623     \n        }, { \n            name: \"Kindred Chicago Hospital\",\n            lat: 41.9400318,\n            lng:  -87.7292243 \n        }, { \n            name: \"Norwegian - American Hospital\",\n            lat:  41.9005879,\n            lng:  -87.7000555   \n        }, { \n            name: \"Oak Park Hospital\",\n            lat: 41.8786426,\n            lng: -87.8031141   \n        }, { \n            name: \"Passavant Hospital\",\n            lat: 41.8953107,\n            lng:  -87.6197747  \n        }, { \n            name: \"Reese Hospital\",\n            lat: 41.8397557,\n            lng: -87.6131063 \n        }, { \n            name: \"Ronald McDonald Childrens Hospital\",\n            lat: 41.8605869,\n            lng: -87.8350591\n        }, { \n            name: \"Saint Anthony Hospital\",\n            lat:  41.8553104,\n            lng:  -87.697832    \n        }, { \n            name: \"Shriners Hospital\",\n            lat: 41.9197536,\n            lng: -87.7933926     \n        }];\n\n        hospitals.forEach(function(hospital){\n            if(!Locations.findOne({name: hospital.name})){\n                var newLocation = {\n                    name: hospital.name,\n                    type: {\n                        text: \"Hospital\"\n                    },\n                    position: {\n                        latitude: hospital.lat,\n                        longitude: hospital.lng,\n                        altitude: 594\n                    },\n                    location: {\n                        type: \"Point\",\n                        coordinates: [hospital.lng, hospital.lat]\n                    }\n                }\n\n                // if we have the autopublish package installed\n                // create the Locations on both client and server\n                if(Package['clinical:autopublish']){\n                    Locations.insert(newLocation);\n                } else {\n                    // otherwise, only install on the client\n                    if(Meteor.isClient){\n                        Locations.insert(newLocation);\n                    }\n                }\n            }\n        });\n\n    }\n});\n\n\n","\n\nimport LocationsPage from './client/LocationsPage';\nimport LocationsTable from './client/LocationsTable';\nimport { Location, Locations, LocationSchema } from './lib/Locations';\n\nvar DynamicRoutes = [{\n  'name': 'LocationsPage',\n  'path': '/locations',\n  'component': LocationsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Locations',\n  'to': '/locations',\n  'href': '/locations'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  LocationsPage,\n  LocationsTable\n};\n\n\n","import { CardActions, CardText } from 'material-ui/Card';\nimport { Col, Grid, Row } from 'react-bootstrap';\n\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { get, set } from 'lodash';\n\n\nexport class LocationDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      locationId: false,\n      location: {\n        resourceType: \"Location\",\n        status: \"active\",\n        name: \"\",\n        position: {\n          latitude: 0,\n          longitude: 0,\n          altitude: 0\n        }\n      },\n      form: {\n        name: '',\n        status: '',\n        latitude: '',\n        longitude: '',\n        identifier: '',\n        altitude: ''\n      }\n    }\n  }\n  dehydrateFhirResource(location) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.name = get(location, 'name')\n    formData.status = get(location, 'status')\n    formData.latitude = get(location, 'position.latitude')    \n    formData.longitude = get(location, 'position.longitude')    \n    formData.altitude = get(location, 'position.altitude')    \n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('LocationDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.location === this.state.location){\n      shouldUpdate = false;\n    }\n\n    // received an location from the table; okay lets update again\n    if(nextProps.locationId !== this.state.locationId){\n      this.setState({locationId: nextProps.locationId})    \n      \n      if(nextProps.location){\n        this.setState({location: nextProps.location})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.location)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      locationId: this.props.locationId,\n      location: false,\n      form: this.state.form\n    };\n\n    if(this.props.location){\n      data.location = this.props.location;\n    }\n\n    console.log('LocationDetail[data]', data);\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('LocationDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"locationDetail\" style={{height: '100%'}}>\n        <CardText>\n          <Row>\n            <Col md={8}>\n              <TextField\n                id='nameInput'\n                ref='name'\n                name='name'\n                floatingLabelText='Location Name'\n                value={ get(formData, 'name') }\n                onChange={ this.changeState.bind(this, 'name')}\n                floatingLabelFixed={true}\n                hintText='Home'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='statusInput'\n                ref='status'\n                name='status'\n                floatingLabelText='Status'\n                value={ get(formData, 'status') }\n                onChange={ this.changeState.bind(this, 'status')}\n                floatingLabelFixed={true}\n                hintText='active | suspended | inactive'\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='latitudeInput'\n                ref='latitude'\n                name='latitude'\n                floatingLabelText='Latitude'\n                value={ get(formData, 'latitude')}\n                onChange={ this.changeState.bind(this, 'latitude')}\n                floatingLabelFixed={true}\n                hintText='41.7895716'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='longitudeInput'\n                ref='longitude'\n                name='longitude'\n                floatingLabelText='Longitude'\n                value={ get(formData, 'longitude') }\n                onChange={ this.changeState.bind(this, 'longitude')}\n                floatingLabelFixed={true}\n                hintText='-87.599661'\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='altitudeInput'\n                ref='altitude'\n                name='altitude'\n                floatingLabelText='Altitude'\n                value={ get(formData, 'altitude') }\n                onChange={ this.changeState.bind(this, 'altitude')}\n                floatingLabelFixed={true}                \n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.locationId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(locationId){\n    if (locationId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateLocationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteLocationButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)}  />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveLocationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"LocationDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"name\":\n        set(formData, 'name', textValue)\n        break;\n      case \"status\":\n        set(formData, 'status', textValue)\n        break;\n      case \"latitude\":\n        set(formData, 'latitude', textValue)\n        break;        \n      case \"longitude\":\n        set(formData, 'longitude', textValue)\n        break;        \n      case \"altitude\":\n        set(formData, 'altitude', textValue)\n        break;      \n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateLocation(locationData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"LocationDetail.updateLocation\", locationData, field, textValue);\n\n    switch (field) {\n      case \"name\":\n        set(locationData, 'name', textValue)\n        break;\n      case \"status\":\n        set(locationData, 'status', textValue)\n        break;\n      case \"latitude\":\n        set(locationData, 'position.latitude', textValue)\n        break;        \n      case \"longitude\":\n        set(locationData, 'position.longitude', textValue)\n        break;        \n      case \"altitude\":\n        set(locationData, 'position.altitude', textValue)\n        break;\n    }\n    return locationData;\n  }\n\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"LocationDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let locationData = Object.assign({}, this.state.location);\n\n    formData = this.updateFormData(formData, field, textValue);\n    locationData = this.updateLocation(locationData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"locationData\", locationData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({location: locationData})\n    this.setState({form: formData})\n  }\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Location...', this.state)\n\n    let self = this;\n    let fhirLocationData = Object.assign({}, this.state.location);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirLocationData', fhirLocationData);\n\n\n    let locationValidator = LocationSchema.newContext();\n    locationValidator.validate(fhirLocationData)\n\n    console.log('IsValid: ', locationValidator.isValid())\n    console.log('ValidationErrors: ', locationValidator.validationErrors());\n\n\n    if (this.props.locationId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"update practioner\");\n      delete fhirLocationData._id;\n\n      Locations._collection.update(\n        {_id: this.props.locationId}, {$set: fhirLocationData }, function(error) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          } else {\n            Bert.alert('Location updated!', 'success');\n            Session.set('locationPageTabIndex', 1);\n            Session.set('selectedLocation', false);\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"Create a new Location\", fhirLocationData);\n\n      Locations._collection.insert(fhirLocationData, function(error) {\n        if (error) {\n          Bert.alert(error.reason, 'danger');\n        } else {\n          Bert.alert('Location added!', 'success');\n          Session.set('locationPageTabIndex', 1);\n          Session.set('selectedLocation', false);\n        }\n      });\n    }\n  }\n\n  // this could be a mixin\n  handleCancelButton(){\n    if(process.env.NODE_ENV === \"test\") console.log(\"handleCancelButton\");\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Locations._collection.remove({_id: this.props.locationId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      } else {\n        Bert.alert('Location deleted!', 'success');\n        Session.set('locationPageTabIndex', 1);\n        Session.set('selectedLocation', false);\n        Session.set('locationUpsert', false);\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Locations\", recordId: self.props.locationId});\n      }\n    })\n  }\n}\n\nLocationDetail.propTypes = {\n  id: PropTypes.string,\n  locationId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  location: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(LocationDetail.prototype, ReactMeteorData);\nexport default LocationDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport { Col, Grid, Row } from 'react-bootstrap';\nimport { Tab, Tabs } from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport Checkbox from 'material-ui/Checkbox';\nimport { EJSON } from 'meteor/ejson';\nimport GoogleMapReact from 'google-map-react';\n\nimport LocationDetail from './LocationDetail';\nimport LocationTable from './LocationsTable';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport RaisedButton from 'material-ui/RaisedButton';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nimport { ScatterplotChart } from 'react-easy-chart';\nimport TextField from 'material-ui/TextField';\nimport { get, has } from 'lodash';\n\n\nSession.setDefault('locationPageTabIndex', 1); \nSession.setDefault('locationSearchFilter', ''); \nSession.setDefault('shapefileDataLayer', false);\nSession.setDefault('tspRoute', []);\nSession.setDefault('mortalityLayer', true);\nSession.setDefault('proximityDistance', '5000');\nSession.setDefault('priximityLocations', false);\n\nSession.setDefault('selectedLocationId', false);\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nconst styles = {\n  block: {\n    maxWidth: 250,\n  },\n  checkbox: {\n    marginBottom: 16,\n  },\n};\nconst demoData = [\n    {\n      type: 'One',\n      x: 1,\n      y: 5\n    },\n    {\n      type: 'Two',\n      x: 3,\n      y: 1\n    },\n    {\n      type: 'Three',\n      x: 0,\n      y: 6\n    },\n    {\n      type: 'Four',\n      x: 5,\n      y: 2\n    },\n    {\n      type: 'Five',\n      x: 4,\n      y: 4\n    },\n    {\n      type: 'Six',\n      x: 5,\n      y: 9\n    },\n    {\n      type: 'Seven',\n      x: 9,\n      y: 1\n    },\n    {\n      type: 'Eight',\n      x: 5,\n      y: 6\n    },\n    {\n      type: 'Nine',\n      x: 3,\n      y: 9\n    },\n    {\n      type: 'Ten',\n      x: 7,\n      y: 9\n    }\n  ];\n\nexport class LocationsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        },\n        page: {\n          position: 'fixed',\n          top: '0px',\n          left: '0px',\n          height: Session.get('appHeight'),\n          width: Session.get('appWidth')\n        },\n        canvas: {\n          left: '0px;'\n        }\n      },\n      tabIndex: Session.get('locationPageTabIndex'),\n      locationSearchFilter: Session.get('locationSearchFilter'),\n      selectedLocationId: Session.get('selectedLocationId'),\n      currentLocation: null,\n      fhirVersion: Session.get('fhirVersion'),\n      center: {\n        lat: 41.8359496, \n        lng: -87.8317244\n      },\n      home: {\n        lat: 41.8359496, \n        lng: -87.8317244        \n      },\n      zoom: 10, \n      layers: {\n        heatmap: false,\n        reimbursements: false,\n        mortality: Session.get('mortalityLayer'),\n        eyeexams: false,\n        diabetes: false,\n        lipidPanels: false,\n        outpatientReimbursement: false\n      },\n      shapefileDataLayer: [],\n      markers: [],\n      tspRoute: Session.get('tspRoute'),\n      proximity: Session.get('proximityDistance'),\n      options: {\n        panControl: false,\n        mapTypeControl: false,\n        scrollwheel: false,\n        styles: [\n          {\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#f5f5f5\"\n              }\n            ]\n          },\n          {\n            \"elementType\": \"labels.icon\",\n            \"stylers\": [\n              {\n                \"visibility\": \"off\"\n              }\n            ]\n          },\n          {\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#616161\"\n              }\n            ]\n          },\n          {\n            \"elementType\": \"labels.text.stroke\",\n            \"stylers\": [\n              {\n                \"color\": \"#f5f5f5\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"administrative.land_parcel\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#bdbdbd\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"poi\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#eeeeee\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"poi\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#757575\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"poi.park\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#e5e5e5\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"poi.park\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#9e9e9e\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"road\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#ffffff\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"road.arterial\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#757575\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"road.highway\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#dadada\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"road.highway\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#616161\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"road.local\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#9e9e9e\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"transit.line\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#e5e5e5\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"transit.station\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#eeeeee\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"water\",\n            \"elementType\": \"geometry\",\n            \"stylers\": [\n              {\n                \"color\": \"#c9c9c9\"\n              }\n            ]\n          },\n          {\n            \"featureType\": \"water\",\n            \"elementType\": \"labels.text.fill\",\n            \"stylers\": [\n              {\n                \"color\": \"#9e9e9e\"\n              }\n            ]\n          }\n        ]\n      },\n      metadata: {\n        pricePerGallonGasoline: 2.50,\n        milesPerGallon: 24\n      }\n    };\n\n    if(Session.get('shapefileDataLayer')){\n      data.shapefileDataLayer = Session.get('shapefileDataLayer');\n    }\n    if(Session.get('priximityLocations')){\n      data.markers = Session.get('priximityLocations');\n    } else { \n      data.markers = Locations.find({}, {sort: {name: 1}}).fetch();\n    }\n\n    if (Session.get('selectedLocationId')){\n      data.currentLocation = Locations.findOne({_id: Session.get('selectedLocationId')});\n    } else {\n      data.currentLocation = false;\n    }\n\n    if(get(Meteor.user(), 'profile.locations.home')){\n      data.home.lat = get(Meteor.user(), 'profile.locations.home.position.latitude')\n      data.home.lng = get(Meteor.user(), 'profile.locations.home.position.longitude')\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n    data.apiKey = get(Meteor, 'settings.public.google.maps.apiKey', '');\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"LocationsPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('locationPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedLocationId', false);\n    Session.set('locationUpsert', false);\n  }\n  setGeojsonUrl(event, text){\n    console.log('setGeojsonUrl', text);\n\n    Session.set('geojsonUrl', text)\n  }\n\n  // this could be a mixin\n  changeState(field, event, value){\n    let routeMetadataUpdate;\n\n    // if(process.env.NODE_ENV === \"test\") console.log(\"LocationDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new location\n    if (Session.get('routeMetadataUpdate')) {\n      routeMetadataUpdate = Session.get('routeMetadataUpdate');\n    } else {\n      routeMetadataUpdate = {\n        pricePerGallonGasoline: 2.50,\n        milesPerGallon: 24\n      };\n    }\n\n\n\n    // if there's an existing location, use them\n    if (Session.get('selectedLocationId')) {\n      routeMetadataUpdate = this.data.location;\n    }\n\n    switch (field) {\n      case \"pricePerGallonGasoline\":\n        routeMetadataUpdate.pricePerGallonGasoline = value;\n        break;\n      case \"milesPerGallon\":\n        routeMetadataUpdate.milesPerGallon = value;\n        break;\n        case \"proximity\":\n        routeMetadataUpdate.proximity = value;\n        Session.set('proximityDistance', value)\n        break;\n      default:\n    }\n\n    Session.set('routeMetadataUpdate', routeMetadataUpdate);\n  }\n  calculateTspRoute(){\n    console.log('calculateTspRoute');\n    Meteor.call('calculateTspRoute', function(error, result){\n      if(result){\n        console.log('result', result);\n        Session.set('tspRoute', result.shortestFoundPath);\n      }\n    });\n  }\n  toggleMortalityLayer(){\n    Session.toggle('mortalityLayer');\n  }\n  findNearMe(){\n    console.log('findLocationsNearMe');\n    Meteor.call('findLocationsNearMe', Session.get('proximityDistance'), function(error, result){\n      if(result){\n        console.log('result', result);\n\n        Session.set('priximityLocations', result);\n      }\n    });    \n  }\n  clearProximity(){\n    Session.set('priximityLocations', false);    \n  }\n  initializeHospitals(){\n    console.log('initializeHospitals()')\n    Meteor.call('initializeHospitals');\n  }\n  initializePoliceStations(){\n    console.log('initializePoliceStations()')\n  }\n  initializeFireStations(){\n    console.log('initializeFireStations()')\n  }\n  render() {\n    var self = this;\n    var markers = [];\n    var tspWaypoints = [];\n    var map;\n  \n\n    // we know that the vertical canvas with locations will be displayed regardless of whether\n    // we load the background map; so lets create a variable to set it up\n    var canvas = <VerticalCanvas width={768} style={this.data.style.canvas}>\n      <GlassCard height='auto'>\n        <CardTitle\n          title=\"Locations\"\n        />\n        <CardText>\n          <Tabs id=\"locationsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}> <Tab className=\"newLocationTab\" label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0} >\n              <LocationDetail \n                id='newLocation'\n                fhirVersion={ this.data.fhirVersion }\n              />  \n            </Tab>\n            <Tab className=\"locationListTab\" label='Locations' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n              <LocationTable />\n            </Tab>\n            <Tab className=\"locationDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n              <LocationDetail \n                id='locationDetails'\n                fhirVersion={ this.data.fhirVersion }\n                location={ this.data.currentLocation }\n                locationId={ this.data.selectedLocationId }\n              />\n            </Tab>\n            <Tab className=\"layersDetail\" label='Layers' onActive={this.handleActive} style={this.data.style.tab} value={3}>\n              <CardText>      \n              <TextField\n                  id='geojsonUrl'\n                  ref='geojsonUrl'\n                  name='geojsonUrl'\n                  floatingLabelText='Heat Map Data Url'\n                  floatingLabelFixed={true}\n                  placeholder='http://somewhere.com/healthdata.geojson'\n                  value={ Session.get('geojsonUrl') }\n                  onChange={ this.setGeojsonUrl.bind(this)}\n                  fullWidth\n                  />\n                <br/>\n                <br/>\n                <br/>\n          \n                <h4>Public Services</h4>\n                <RaisedButton id=\"initializeHospitals\" label=\"Initialize Hospitals\" primary={true} onClick={this.initializeHospitals.bind(this)}  /> <br/><br/>\n                <RaisedButton id=\"initializePoliceStations\" label=\"Initialize Police Stations\" primary={false} disabled={true} onClick={this.initializePoliceStations }  />\n                <RaisedButton id=\"initializeFireStations\" label=\"Initialize Fire Stations\" primary={true} onClick={this.initializeFireStations.bind(this)}  /> <br/><br/>\n\n                <br/>\n                <br/>\n                <br/>\n                <h4 style={{color: '#666666'}}>Health Statistics</h4>\n                <Checkbox label=\"Hospital Referral Regions\" style={styles.checkbox} disabled={true} />\n                <Checkbox label=\"Health Service Areas\" style={styles.checkbox} disabled={true} onCheck={this.toggleMortalityLayer } checked={ this.data.layers.mortality } />                        \n                <br/>\n\n                <h4 disabled={true} style={{color: '#666666'}}>Medicare</h4>\n                <Checkbox label=\"Reimbursements\" style={styles.checkbox} disabled={true} />\n                <Checkbox label=\"Total Mortality\" style={styles.checkbox} disabled={true} onCheck={this.toggleMortalityLayer } checked={ this.data.layers.mortality } />\n                <Checkbox label=\"Eye Exams\" style={styles.checkbox} disabled={true} />\n                <Checkbox label=\"Diabetes\" style={styles.checkbox} disabled={true} />\n                <Checkbox label=\"Lipid Panels\" style={styles.checkbox} disabled={true} />\n                <Checkbox label=\"Outpatient Visits\" style={styles.checkbox} disabled={true} />\n                <p>Contact <a href=\"mailto:sales@symptomatic.io\">sales@symptomatic.io</a> for more information about enabling neighborhood level geodata.</p>\n              </CardText>\n            </Tab>\n            <Tab className=\"findNearMe\" label='Proximity' onActive={this.handleActive} style={this.data.style.tab} value={4}>\n              <CardText>      \n              <TextField\n                  id='proximityInput'\n                  ref='proximity'\n                  name='proximity'\n                  floatingLabelText='Distance (meters)'\n                  placeholder='5000'\n                  value={ this.data.proximity }\n                  onKeyPress={this.changeState.bind(this, 'proximity')}\n                  fullWidth\n                  /><br/>\n\n                <br />\n                <RaisedButton id=\"findNearMe\" label=\"Find Near Me\" primary={true} onClick={this.findNearMe.bind(this)}  /> <br/><br/>\n                <RaisedButton id=\"clear\" label=\"Clear Selection\" primary={true} onClick={this.clearProximity }  />\n\n              </CardText>\n            </Tab>\n            {/* <Tab className=\"quickAnalysisTab\" label='Analysis' onActive={this.handleActive} style={this.data.style.tab} value={4}>\n              <CardText>\n                  <Row>\n                    <Col md={4}>\n                      <TextField\n                        id='pricePerGallonGasolineInput'\n                        ref='pricePerGallonGasoline'\n                        name='pricePerGallonGasoline'\n                        floatingLabelText='Price Per Gallon'\n                        value={(this.data.metadata) ? this.data.metadata.pricePerGallonGasoline : ''}\n                        onChange={ this.changeState.bind(this, 'pricePerGallonGasoline')}\n                        fullWidth\n                        /><br/>\n                    </Col>\n                    <Col md={4}>\n                      <TextField\n                        id='milesPerGallonInput'\n                        ref='milesPerGallon'\n                        name='milesPerGallon'\n                        floatingLabelText='Miles Per Gallon'\n                        value={(this.data.metadata) ? this.data.metadata.milesPerGallon : ''}\n                        onChange={ this.changeState.bind(this, 'milesPerGallon')}\n                        fullWidth\n                        /><br/>\n                    </Col>\n                  </Row>\n                  <RaisedButton id=\"calculateRoute\" label=\"Calculate Route\" primary={true} onClick={this.calculateTspRoute.bind(this)}  />\n\n                  <hr />\n\n                  <LocationTable data={ this.data.tspRoute } />\n              </CardText>\n            </Tab> */}\n          </Tabs>\n        </CardText>\n      </GlassCard>\n    </VerticalCanvas>;\n\n\n    var pageContent;\n    // we only want to render the google map in certain environments\n    // specifically, we don't want to render it while running QA tests\n    if(process.env.NODE_ENV !== 'test'){\n\n      markers.push(\n        <div lat={ this.data.home.lat} lng={ this.data.home.lng } style={{width: '200px'}}>\n          <div style={{backgroundColor: 'orange', opacity: '.8', height: '20px', width: '20px', borderRadius: '80%'}}></div>\n          {location.name}\n        </div>)\n\n\n      // okay, we're not running QA tests,\n      // so lets create a bunch of markers to draw on the map, and load them into a variable\n      this.data.markers.forEach(function(location){\n\n        var bgColor = '#666666';\n        if(get(location, 'type.text') === \"Hospital\"){\n          bgColor = '#21a525';\n        } \n        if(get(location, 'type.text') === \"Volunteer\"){\n          bgColor = '#4286f4';\n        } \n        if(get(location, 'type.text') === \"Medication\"){\n          bgColor = '#9e4545';\n        } \n        markers.push(\n          <div lat={location.position.latitude} lng={ location.position.longitude} style={{width: '200px'}}>\n            <div style={{backgroundColor: bgColor, opacity: '.8', height: '10px', width: '10px', borderRadius: '80%'}}></div>\n            {location.name}\n          </div>)\n      });\n\n      // we're now going to draw our background map,\n      // add the canvas with our locations CRUD user interface\n      // and our map markers\n      pageContent = <GoogleMapReact\n          id=\"googleMap\"\n          defaultCenter={this.data.center}\n          defaultZoom={this.data.zoom}           \n          options={this.data.options}\n          bootstrapURLKeys={{\n            key: this.data.apiKey,\n            libraries: 'visualization'\n          }}\n          onGoogleApiLoaded={function({map, maps}){\n            console.log('onGoogleApiLoaded', map);\n            \n\n            // for (var index = 0; index < 8; index++) {\n            //   tspWaypoints.push({\n            //     location: new maps.LatLng(self.data.tspRoute[index].latitude, self.data.tspRoute[index].longitude),\n            //     stopover: true\n            //   });\n            // }\n            // console.log('tspWaypoints', tspWaypoints)\n\n  \n            map.data.setStyle({\n              // raw binary data (extremely fast!)\n              //icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAiklEQVR42mNgQIAoIF4NxGegdCCSHAMzEC+NUlH5v9rF5f+ZoCAwHaig8B8oPhOmKC1NU/P//7Q0DByrqgpSGAtSdOCAry9WRXt9fECK9oIUPXwYFYVV0e2ICJCi20SbFAuyG5uiECUlkKIQmOPng3y30d0d7Lt1bm4w301jQAOgcNoIDad1yOEEAFm9fSv/VqtJAAAAAElFTkSuQmCC'\n  \n              // load from a content delivery network\n              //icon: 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png'\n\n              // load from Meteor server\n              //icon: Meteor.absoluteUrl() + 'geodata/icons/purple-dot.png'\n\n              // load from googleapis\n              //icon: 'https://mts.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png&text=A&psize=16&font=fonts/Roboto-Regular.ttf&color=ff333333&ax=44&ay=48&scale=1'\n\n              // load a Symbol\n              icon: {\n                // a custom designed path (must be less than 22x22 pixels)\n                //path: 'M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z M -2,-30 a 2,2 0 1,1 4,0 2,2 0 1,1 -4,0',\n\n                path: maps.SymbolPath.CIRCLE,\n                fillColor: '#616161',\n                fillOpacity: 0.5,\n                strokeColor: '#9e4545',\n                strokeWeight: 2,\n                scale: 2\n              },\n              fillColor: '#ffffff',\n              strokeColor: '#9e4545',\n              strokeWeight: 0.5\n              //icon: new maps.MarkerImage(\n              //  'http://www.gettyicons.com/free-icons/108/gis-gps/png/24/needle_left_yellow_2_24.png',\n              //  new maps.Size(24, 24),\n              //  new maps.Point(0, 0),\n              //  new maps.Point(0, 24)\n              //)\n\n              // and some labels \n              //label: {\n              //  color: \"blue\",\n              //  fontFamily: \"Courier\",\n              //  fontSize: \"24px\",\n              //  fontWeight: \"bold\",\n              //  text: 'foo'\n              //}\n            });\n\n\n            // // TSP Routing / Directions\n            // directionsService = new maps.DirectionsService({map: map});\n            // directionsDisplay = new maps.DirectionsRenderer({map: map});\n            // directionsDisplay.setMap(map);\n\n            // var request = {\n            //   origin: 'Logan Square, Chicago, IL',\n            //   destination: 'Logan Square, Chicago, IL',\n            //   waypoints: tspWaypoints,\n            //   provideRouteAlternatives: false,\n            //   travelMode: 'DRIVING',\n            //   unitSystem: maps.UnitSystem.IMPERIAL\n            // }\n\n            // console.log('directionsService', directionsService);\n            // console.log('directionsDisplay', directionsDisplay);\n\n            // directionsService.route(request, function(result, status) {\n            //   if (status == 'OK') {\n            //     directionsDisplay.setDirections(result);\n            //   }\n            // });\n\n\n            \n            // // heatmaps are special, and need to process the data from our geojson after it's received\n            // if(self.data.layers.heatmap){\n            //   var dataLayer = [];\n            //   HTTP.get(Meteor.absoluteUrl() + '/geodata/health_service_areas_detailed.geojson', function(error, data){\n            //     var geojson = EJSON.parse(data.content);\n            //     console.log('loadGeoJson', geojson);\n            //     geojson.features.forEach(function(datum){\n            //       if(datum.geometry && datum.geometry.coordinates && datum.geometry.coordinates[0] && datum.geometry.coordinates[1]){\n            //         dataLayer.push(new maps.LatLng(datum.geometry.coordinates[1], datum.geometry.coordinates[0]));\n            //       }\n            //     })\n            //     console.log('dataLayer', dataLayer);\n\n            //     // we sometimes also want to load the data twice\n            //     // do we need to double fetch?  or can we just pass data in here?\n            //     if(self.data.layers.points){\n            //       map.data.loadGeoJson(Meteor.absoluteUrl() + '/geodata/health_service_areas_detailed.geojson');\n            //       console.log('map.data', map.data);\n            //     }\n\n\n            //     // if we turn on the heatmap\n            //     var heatmap = new maps.visualization.HeatmapLayer({\n            //       data: dataLayer,\n            //       map: map\n            //     });\n            //     var gradient = [\n            //       'rgba(0, 255, 255, 0)',\n            //       'rgba(0, 255, 255, 1)',\n            //       'rgba(0, 191, 255, 1)',\n            //       'rgba(0, 127, 255, 1)',\n            //       'rgba(0, 63, 255, 1)',\n            //       'rgba(0, 0, 255, 1)',\n            //       'rgba(0, 0, 223, 1)',\n            //       'rgba(0, 0, 191, 1)',\n            //       'rgba(0, 0, 159, 1)',\n            //       'rgba(0, 0, 127, 1)',\n            //       'rgba(63, 0, 91, 1)',\n            //       'rgba(255, 0, 0, 1)'\n            //     ]\n            //     heatmap.set('gradient', gradient);\n            //     heatmap.set('radius', 40);\n            //     heatmap.set('opacity', 0.4);\n            //     heatmap.setMap(map);\n\n            //   });\n              var baseUrl = Meteor.absoluteUrl();\n              if(get(Meteor, 'settings.public.baseUrl')){\n                baseUrl = get(Meteor, 'settings.public.baseUrl');\n              }\n\n              map.data.loadGeoJson(baseUrl + 'geodata/health_service_areas_detailed.geojson');\n              console.log('map.data', map.data);\n\n              // reimbursements layer\n              if(self.data.layers.reimbursements){\n                map.data.setStyle(function(feature){\n                  var reimbursements = feature.getProperty(\"Total_Reimbursements\");\n                  //console.log('reimbursements', reimbursements);\n                  var color = '#ffffff';\n                  if((1 < reimbursements) && (reimbursements < 7000)){\n                     color = '#f0faf8';\n                  } else if ((7001 < reimbursements) && (reimbursements < 8000)){\n                     color = '#d0dfdd';\n                  } else if ((8001 < reimbursements) && (reimbursements < 9000)){\n                     color = '#b1c5c3';\n                  } else if ((9001 < reimbursements) && (reimbursements < 10000)){\n                     color = '#92aaa9';\n                  } else if ((10001 < reimbursements) && (reimbursements < 11000)){\n                     color = '#73908e';\n                  } else if ((11001 < reimbursements) && (reimbursements < 12000)){\n                     color = '#547574';\n                  } else if (12001 < reimbursements){\n                     color = '#355b5a';\n                  }\n\n                  return {\n                    fillColor: color,\n                    strokeColor: '#164140',\n                    strokeWeight: 1\n                  };\n                })\n              } \n              if(self.data.layers.mortality){\n                map.data.setStyle(function(feature){\n                  var mortality = parseFloat(feature.getProperty(\"Total Mort\"));\n                  //console.log('mortality', mortality);\n                  var color = '#ffffff';\n                  if((1 < mortality) && (mortality < 3)){\n                     color = '#fdd49e';\n                  } else if ((3 < mortality) && (mortality <= 3.5)){\n                     color = '#fdbb84';\n                  } else if ((3.5 < mortality) && (mortality <= 4)){\n                     color = '#fc8d59';\n                  } else if ((4 < mortality) && (mortality <= 4.5)){\n                     color = '#ef6548';\n                  } else if ((4.5 < mortality) && (mortality <= 5)){\n                     color = '#d7301f';\n                  } else if ((5 < mortality) && (mortality <= 5.5)){\n                     color = '#b30000';\n                  } else if (5.5 <= mortality){\n                     color = '#7f0000';\n                  }\n\n                  return {\n                    fillColor: color,\n                    strokeColor: '#164140',\n                    strokeWeight: 1\n                  };\n                })\n              }\n\n              if(self.data.layers.outpatientReimbursement){\n                map.data.setStyle(function(feature){\n                  var outpatients = parseFloat(feature.getProperty(\"Outpat$\"));\n                  //console.log('outpatients', outpatients);\n                  var color = '#ffffff';\n                  if((1 < outpatients) && (outpatients < 1000)){\n                     color = '#eee1eb';\n                  } else if ((1001 < outpatients) && (outpatients <= 2000)){\n                     color = '#d6c6e6';\n                  } else if ((2001 < outpatients) && (outpatients <= 3000)){\n                     color = '#b89ac5';\n                  } else if ((3001 < outpatients) && (outpatients <= 4000)){\n                     color = '#775599';\n                  } else if ((4001 < outpatients) && (outpatients <= 5000)){\n                     color = '#321272';\n                  } else if ((5001 < outpatients) && (outpatients <= 6000)){\n                     color = '#300042';\n                  } else if (6001 <= outpatients){\n                     color = '#300042';\n                  }\n\n                  return {\n                    fillColor: color,\n                    strokeColor: '#164140',\n                    strokeWeight: 0.5\n                  };\n                })\n              }              \n            // }\n          }}\n        >          \n        {markers}\n        {canvas}\n      </GoogleMapReact>\n    } else {\n      // but if we're in a test environment, we're just going to render the locations CRUD user interface\n      pageContent = canvas;\n    }\n          \n    return (\n      <div id=\"locationsPage\" style={this.data.style.page}> \n        {pageContent}                \n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(LocationsPage.prototype, ReactMeteorData);\n\nexport default LocationsPage;","import React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport Toggle from 'material-ui/Toggle';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nSession.setDefault('selectedLocations', []);\n\nexport class LocationTable extends React.Component {\n  getMeteorData() {\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        block: {\n          maxWidth: 250\n        },\n        checkbox: {\n          //marginBottom: 16\n        },\n        row: Glass.darkroom({\n          opacity: Session.get('globalOpacity'),\n          cursor: 'pointer'\n        })\n      },\n      selected: [],\n      locations: []\n    };\n\n    if(this.props.data){\n       data.locations = this.props.data;\n    } else {\n      data.locations = Locations.find().map(function(location){\n        let result = {\n          _id: '',\n          name: '',\n          manufacturer: '',\n          form: '',\n          primaryIngredient: ''\n        };\n\n        if (location._id ) {\n          result._id = location._id;\n        }\n        if (location.name ) {\n          result.name = location.name;\n        }\n        if (location.position ) { \n          result.position = location.position;\n        }\n\n        return result;\n      })\n    }\n\n    if (Session.get('darkroomEnabled')) {\n      data.style.color = 'black';\n      data.style.background = 'white';\n    } else {\n      data.style.color = 'white';\n      data.style.background = 'black';\n    }\n\n    // this could be another mixin\n    if (Session.get('glassBlurEnabled')) {\n      data.style.filter = 'blur(3px)';\n      data.style.WebkitFilter = 'blur(3px)';\n    }\n\n    // this could be another mixin\n    if (Session.get('backgroundBlurEnabled')) {\n      data.style.backdropFilter = 'blur(5px)';\n    }\n\n    //console.log(\"data\", data);\n    return data;\n  }\n  handleChange(row, key, value) {\n    const source = this.state.source;\n    source[row][key] = value;\n    this.setState({source});\n  }\n\n  handleSelect(selected) {\n    this.setState({selected});\n  }\n\n  rowClick(id){\n    Session.set('locationUpsert', false);\n    Session.set('selectedLocationId', id);\n    Session.set('locationPageTabIndex', 2);\n  }\n  render () {\n    if(process.env.NODE_ENV === \"test\") console.log('LocationTable.render()', this.state)\n\n    let tableRows = [];\n    // console.log('this.data.locations', this.data.locations);\n    \n    for (var i = 0; i < this.data.locations.length; i++) {\n      tableRows.push(\n      <tr className='locationRow' ref='med-{i}' key={i} style={this.data.style.row} onClick={ this.rowClick.bind('this', this.data.locations[i]._id) }>\n        <td className=\"cardinality\">{(this.data.locations[i].cardinality) ? this.data.locations[i].cardinality : ''}</td>\n        <td className=\"name hidden-on-phone\">{this.data.locations[i].name}</td>\n        <td className=\"latitutude\">{(this.data.locations[i].position) ? this.data.locations[i].position.latitude : ''}</td>\n        <td className=\"longitude\">{(this.data.locations[i].position) ? this.data.locations[i].position.longitude : ''}</td>\n        <td className=\"altitude\">{(this.data.locations[i].position) ? this.data.locations[i].position.altitude : ''}</td>\n      </tr>);\n    }\n\n\n    return(\n      <Table id=\"locationsTable\" ref='locationsTable' hover >\n        <thead>\n          <tr>\n            <th className=\"cardinality hidden-on-phone\">cardinality</th>\n            <th className=\"name hidden-on-phone\">name</th>\n            <th className=\"latitutude\">latitutude</th>\n            <th className=\"longitude\">longitude</th>\n            <th className=\"altitude\">altitude</th>\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\n\nReactMixin(LocationTable.prototype, ReactMeteorData);\nexport default LocationTable;"]}