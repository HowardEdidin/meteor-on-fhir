{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hipaa-logger/lib/HipaaLog.js","meteor://ðŸ’»app/packages/clinical:hipaa-logger/lib/HipaaLogger.js"],"names":["HipaaLog","Mongo","Collection","allow","insert","userId","doc","update","fields","modifier","remove","HipaaLogger","logAuditEvent","auditEvent","check","Object","process","env","DEBUG","console","log","Meteor","call","error","result","logEvent","hipaaEvent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACAA,QAAQ,GAAG,IAAIC,KAAK,CAACC,UAAV,CAAqB,UAArB,CAAX;AAEAF,QAAQ,CAACG,KAAT,CAAe;AACbC,QAAM,EAAE,UAAUC,MAAV,EAAkBC,GAAlB,EAAuB;AAC7B;AACA,QAAID,MAAJ,EAAY;AACV,aAAO,IAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAP;AACD;AACF,GARY;AASbE,QAAM,EAAE,UAAUF,MAAV,EAAkBC,GAAlB,EAAuBE,MAAvB,EAA+BC,QAA/B,EAAyC;AAC/C;AACA,WAAO,KAAP;AACD,GAZY;AAabC,QAAM,EAAE,UAAUL,MAAV,EAAkBC,GAAlB,EAAuB;AAC7B;AACA,WAAO,KAAP;AACD,GAhBY,CAiBb;AACA;AACA;;AAnBa,CAAf,E;;;;;;;;;;;ACHA;;;;;;;;;;;;AAcAK,WAAW,GAAG;AACZ;;;;;;;;AASAC,eAAa,EAAE,UAASC,UAAT,EAAoB;AACjCC,SAAK,CAACD,UAAD,EAAaE,MAAb,CAAL;AAEAC,WAAO,CAACC,GAAR,CAAYC,KAAZ,IAAqBC,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BP,UAA1B,CAArB;AAEA,WAAOQ,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA6BT,UAA7B,EAAyC,UAAUU,KAAV,EAAiBC,MAAjB,EAAwB;AACtE,UAAID,KAAJ,EAAU;AACRJ,eAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBG,KAArB;AACD;;AACD,UAAIC,MAAJ,EAAW;AACR,eAAOA,MAAP;AACF;AACF,KAPM,CAAP;AAQD,GAvBW;;AAwBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BAC,UAAQ,EAAE,UAASC,UAAT,EAAoB;AAC5BZ,SAAK,CAACY,UAAD,EAAaX,MAAb,CAAL;AAEA,WAAOM,MAAM,CAACC,IAAP,CAAY,UAAZ,EAAwBI,UAAxB,EAAoC,UAAUH,KAAV,EAAiBC,MAAjB,EAAwB;AACjE,UAAID,KAAJ,EAAU;AACRJ,eAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBG,KAArB;AACD;;AACD,UAAIC,MAAJ,EAAW;AACR,eAAOA,MAAP;AACF;AACF,KAPM,CAAP;AAQD;AA/DW,CAAd,C","file":"/packages/clinical_hipaa-logger.js","sourcesContent":["\nHipaaLog = new Mongo.Collection(\"HipaaLog\");\n\nHipaaLog.allow({\n  insert: function (userId, doc) {\n    // we can only write to the audit log if we're logged in\n    if (userId) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  update: function (userId, doc, fields, modifier) {\n    // the audit log is write-only\n    return false;\n  },\n  remove: function (userId, doc) {\n    // the audit log is write-only\n    return false;\n  }\n  // fetch: function(userId){\n  //   return true;\n  // }\n});\n\n","/*\nvar hipaaEvent = {\n  eventType: \"\",\n  userId: \"\",\n  userName: \"\",\n  collectionName: \"\",\n  recordId: \"\",\n  patientId: \"\",\n  patientName: \"\",\n  message: \"\"\n};\n*/\n\n\nHipaaLogger = {\n  /**\n  * @summary Detects if a specific environment variable was exposed from the server.\n  * @locus Client\n  * @memberOf HipaaLogger\n  * @name logAuditEvent\n  * @param AuditEvent\n  * @version 1.2.3\n  */\n\n  logAuditEvent: function(auditEvent){\n    check(auditEvent, Object);\n\n    process.env.DEBUG && console.log('auditEvent', auditEvent);    \n\n    return Meteor.call(\"logAuditEvent\", auditEvent, function (error, result){\n      if (error){\n        console.log(\"error\", error);\n      }\n      if (result){\n         return result\n      }\n    });\n  },\n  /**\n  * @summary Detects if a specific environment variable was exposed from the server.\n  * @locus Client\n  * @memberOf HipaaLogger\n  * @name logEvent\n  * @param hipaaEvent.eventType\n  * @param hipaaEvent.userId\n  * @param hipaaEvent.userName\n  * @param hipaaEvent.collectionName\n  * @param hipaaEvent.recordId\n  * @param hipaaEvent.patientId\n  * @param hipaaEvent.patientName\n  * @param hipaaEvent.message\n  * @version 1.2.3\n  * @example\n  * ```js\n  * var hipaaEvent = {\n  *   eventType: \"update\",\n  *   userId: Meteor.userId(),\n  *   userName: Meteor.user().fullName(),\n  *   collectionName: \"Medications\",\n  *   recordId: Random.id(),\n  *   patientId: Session.get('currentPatientId'),\n  *   patientName: Session.get('currentPatientName')\n  * };\n  * HipaaLogger.logEvent(hipaaEvent);\n  * ```\n  */\n  logEvent: function(hipaaEvent){\n    check(hipaaEvent, Object);\n\n    return Meteor.call(\"logEvent\", hipaaEvent, function (error, result){\n      if (error){\n        console.log(\"error\", error);\n      }\n      if (result){\n         return result\n      }\n    });\n  }\n};\n"]}