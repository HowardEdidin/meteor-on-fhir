{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/lib/Bundles.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/lib/methods.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/client/BundleDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/client/BundleTable.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-bundle/client/BundlesPage.jsx"],"names":["module","export","Bundle","Bundles","BundleSchema","BaseModel","link","v","Mongo","SimpleSchema","BaseSchema","DomainResourceSchema","HumanNameSchema","IdentifierSchema","ContactPointSchema","AddressSchema","ReferenceSchema","SignatureSchema","Package","console","log","extend","prototype","_collection","Collection","Meteor","isClient","subscribe","isServer","publish","argument","userId","find","_transform","document","type","String","defaultValue","optional","Code","allowedValues","Number","Array","Object","blackbox","Date","attachSchema","methods","newBundle","Random","id","call","check","insert","validate","filter","remove","SidebarElements","AdminSidebarElements","DynamicRoutes","BundlesPage","BundleTable","BundleDetail","CardActions","CardText","DatePicker","Toggle","RaisedButton","TextField","get","has","set","Row","Col","moment","React","ReactMeteorData","ReactMixin","PropTypes","Session","styles","block","maxWidth","toggle","marginTop","thumbOff","backgroundColor","trackOff","thumbSwitched","trackSwitched","labelStyle","color","props","state","bundleId","bundle","resourceType","name","text","prefix","family","given","suffix","active","gender","birthDate","photo","url","identifier","use","coding","system","code","value","deceasedBoolean","multipleBirthBoolean","maritalStatus","contact","animal","species","communication","language","careProvider","display","reference","managingOrganization","form","deceased","multipleBirth","dehydrateFhirResource","formData","assign","format","shouldComponentUpdate","nextProps","process","env","NODE_ENV","shouldUpdate","setState","getMeteorData","data","bundelContent","displayBirthdate","bundleContent","JSON","stringify","findOne","render","changeState","bind","maxHeight","width","height","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateBundle","bundleData","event","self","fhirBundleData","bundleValidator","newContext","isValid","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userName","user","fullName","collectionName","recordId","handleCancelButton","animalremove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","exportDefault","Avatar","FlatButton","HTTP","Table","TableNoData","flattenBundle","person","subject","author","title","date","toString","style","hideOnPhone","visibility","cellHideOnPhone","paddingTop","cell","avatar","userSelect","borderRadius","selected","bundles","query","options","limit","length","forEach","push","map","imgError","avatarId","refs","src","absoluteUrl","rowClick","renderRowAvatarHeader","showAvatars","renderRowAvatar","avatarStyle","renderSpeciesHeader","displaySpecies","renderSpeciesRow","renderSendButtonHeader","showSendButton","renderSendButton","onSend","i","httpEndpoint","post","selectBundleRow","onRowClick","tableRows","footer","noDataMessagePadding","cursor","minWidth","number","CardTitle","Tab","Tabs","Glass","GlassCard","VerticalCanvas","FullPageCanvas","Grid","defaultBundle","index","username","email","setDefault","opacity","tab","borderBottom","borderRight","tabIndex","bundleSearchFilter","selectedBundleId","selectedBundle","blur","appbar","darkroom","handleTabChange","onNewTab","version"],"mappings":"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","file":"/packages/clinical_hl7-resource-bundle.js","sourcesContent":["if(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"\");  \n}\nimport { BaseModel } from 'meteor/clinical:base-model';\nimport { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\nimport { BaseSchema, DomainResourceSchema, HumanNameSchema, IdentifierSchema, ContactPointSchema, AddressSchema, ReferenceSchema, SignatureSchema } from 'meteor/clinical:hl7-resource-datatypes';\n\n\n// create the object using our BaseModel\nBundle = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nBundle.prototype._collection = Bundles;\n\n\nif(typeof Bundles === 'undefined'){\n  if(Package['autopublish']){\n    Bundles = new Mongo.Collection('Bundles');\n  } else if(Package['clinical:autopublish']){\n    Bundles = new Mongo.Collection('Bundles');\n  } else if(Package['clinical:desktop-publish']){\n    Bundles = new Mongo.Collection('Bundles');\n  } else {\n    Bundles = new Mongo.Collection('Bundles');\n    // Bundles = new Mongo.Collection('Bundles', {connection: null});\n  }\n}\n\nif (Meteor.isClient){\n  Meteor.subscribe(\"Bundles\");\n}\n\nif (Meteor.isServer){\n  Meteor.publish(\"Bundles\", function (argument){\n    if (this.userId) {\n      return Bundles.find();\n    } else {\n      return [];\n    }\n  });\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nBundles._transform = function (document) {\n  return new Bundle(document);\n};\n\nBundleSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Bundle\"\n  },\n  \"type\" : {\n    optional: true,\n    type: Code,\n    allowedValues: [  'document' , 'message' , 'transaction' , 'transaction-response' , 'batch' , 'batch-response' , 'history' , 'searchset' , 'collection' ],\n    defaultValue: 'searchset'\n  },\n  \"total\" : {\n    optional: true,\n    type: Number\n  },\n  \"link\" : {\n    optional: true,\n    type: Array\n  },\n  \"link.$\" : {\n    optional: true,\n    type: Object\n  },\n  \"link.$.relation\" : {\n    optional: true,\n    type: String\n  },\n  \"link.$.url\" : {\n    optional: true,\n    type: String\n  },\n\n  \"entry\" : {\n    optional: true,\n    type: Array\n  },\n  \"entry.$\" : {\n    optional: true,\n    type: Object\n  },\n\n  \"entry.$.link\" : {\n    optional: true,\n    type: Array\n  },\n  \"entry.$.link.$\" : {\n    optional: true,\n    type: String \n  },  \n  \"entry.$.fullUrl\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.resource\" : {\n    optional: true,\n    type: Object,\n    blackbox: true\n  },\n\n  \"entry.$.search\" : {\n    optional: true,\n    type: Object\n  },\n\n  \"entry.$.search.mode\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.search.score\" : {\n    optional: true,\n    type: Number\n  },\n\n  \"entry.$.request\" : {\n    optional: true,\n    type: Object\n  },\n\n  \"entry.$.request.method\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.url\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.ifNoneMatch\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.ifModifiedSince\" : {\n    optional: true,\n    type: Date\n  },\n  \"entry.$.request.ifMatch\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.request.ifNoneExist\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response\" : {\n    optional: true,\n    type: Object\n  },\n  \"entry.$.response.status\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response.location\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response.etag\" : {\n    optional: true,\n    type: String\n  },\n  \"entry.$.response.lastModified\" : {\n    optional: true,\n    type: Date\n  },\n  \"signature\" : {\n    optional: true,\n    type: SignatureSchema\n  }\n});\n\n// BaseSchema.extend(BundleSchema);\n// DomainResourceSchema.extend(BundleSchema);\nBundles.attachSchema(BundleSchema);\n\n\n\nexport { Bundle, Bundles, BundleSchema };","\n\nMeteor.methods({\n    'Bundle/initialize': function(){\n        console.log('Initializing a default bundle...')\n        let newBundle = {\n          \"resourceType\": \"Bundle\",\n          \"entry\": [\n            {\n              \"fullUrl\": \"/Composition/\" + Random.id(),\n              \"resource\": {\n                \"resourceType\": \"Composition\",\n                \"identifier\": {\n                  \"value\": Random.id()\n                },\n                \"status\": \"preliminary\",\n                \"type\": {},\n                \"class\": {},\n                \"subject\": {\n                  \"display\": \"System Admin\",\n                  \"reference\": Random.id()\n                },\n                \"encounter\": {\n                  \"display\": \"\",\n                  \"reference\": \"\"\n                },\n                \"date\": \"<dateTime>\",\n                \"author\": [\n                  {\n                    \"display\": \"System Admin\",\n                    \"reference\": Random.id()\n                  }\n                ],\n                \"title\": \"Continuity of Care Document\",\n                \"confidentiality\": \"0\",\n                \"attester\": [],\n                \"custodian\": {\n                  \"display\": \"\",\n                  \"reference\": \"\"\n                },\n                \"relatesTo\": [],\n                \"event\": [],\n                \"section\": []\n              }\n            }\n          ]\n        }\n          Meteor.call('Bundle/create', newBundle)\n    },\n    'Bundle/create': function(newBundle){\n      console.log('Creating bundle...')\n      check(newBundle, Object);\n\n      Bundles.insert(newBundle, {validate: false, filter: false});          \n    },\n    'Bundle/drop': function(){\n      console.log('Dropping bundles...')\n      Bundles.remove({});\n    }\n})","\n\nimport BundlesPage from './client/BundlesPage';\nimport BundleTable from './client/BundleTable';\nimport BundleDetail from './client/BundleDetail';\n\nimport { Bundle, Bundles, BundleSchema } from './lib/Bundles';\n\nvar DynamicRoutes = [{\n  'name': 'BundlePage',\n  'path': '/bundles',\n  'component': BundlesPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n    'primaryText': 'Bundles',\n    'to': '/bundles',\n    'href': '/bundles'\n  }];\n  \nvar AdminSidebarElements = [{\n  'primaryText': 'Bundles',\n  'to': '/bundles',\n  'href': '/bundles'\n}];\n\nexport { \n  SidebarElements,\n  AdminSidebarElements, \n  DynamicRoutes, \n\n  BundlesPage,\n  BundleTable,\n  BundleDetail,\n\n  Bundle,\n  Bundles,\n  BundleSchema\n};\n\n\n","import { CardActions, CardText, DatePicker, Toggle, RaisedButton, TextField } from 'material-ui';\nimport { get, has, set } from 'lodash';\nimport { Row, Col } from 'react-bootstrap';\nimport moment from 'moment';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport PropTypes from 'prop-types';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\n\nconst styles = {\n  block: {\n    maxWidth: 250,\n  },\n  toggle: {\n    marginTop: 16,\n  },\n  thumbOff: {\n    backgroundColor: '#ffcccc',\n  },\n  trackOff: {\n    backgroundColor: '#ff9d9d',\n  },\n  thumbSwitched: {\n    backgroundColor: 'red',\n  },\n  trackSwitched: {\n    backgroundColor: '#ff9d9d',\n  },\n  labelStyle: {\n    color: 'red',\n  },\n};\n\nexport class BundleDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bundleId: false,\n      bundle: {\n        resourceType : 'Bundle',\n        name : [{\n          text : '',\n          prefix: [''],\n          family: [''],\n          given: [''],\n          suffix: [''],\n          resourceType : 'HumanName'\n        }],\n        active : true,\n        gender : \"\",\n        birthDate : '',\n        photo : [{\n          url: \"\"\n        }],\n        identifier: [{\n          use: 'usual',\n          type: {\n            coding: [\n              {\n                system: 'http://hl7.org/fhir/v2/0203',\n                code: 'MR'\n              }\n            ]\n          },\n          value: ''\n        }],\n        deceasedBoolean: false,\n        multipleBirthBoolean: false,\n        maritalStatus: {\n          text: ''\n        },\n        contact: [],\n        animal: {\n          species: {\n            text: 'Human'\n          }\n        },\n        communication: [{\n          language: {\n            text: 'English'\n          }\n        }],\n        careProvider: [{\n          display: '',\n          reference: ''\n        }],\n        managingOrganization: {\n          reference: '',\n          display: ''\n        }\n      },\n      form: {\n        prefix: '',\n        family: '',\n        given: '',\n        suffix: '',\n        identifier: '',\n        deceased: false,\n        multipleBirth: false,\n        maritalStatus: '',\n        species: '',\n        language: ''\n      }\n    }\n  }\n  dehydrateFhirResource(bundle) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.prefix = get(bundle, 'name[0].prefix[0]')\n    formData.family = get(bundle, 'name[0].family[0]')\n    formData.given = get(bundle, 'name[0].given[0]')\n    formData.suffix = get(bundle, 'name[0].suffix[0]')\n    formData.identifier = get(bundle, 'identifier[0].value')\n    formData.deceased = get(bundle, 'deceasedBoolean')\n    formData.gender = get(bundle, 'gender')\n    formData.multipleBirth = get(bundle, 'multipleBirthBoolean')\n    formData.maritalStatus = get(bundle, 'maritalStatus.text')\n    formData.species = get(bundle, 'animal.species.text')\n    formData.language = get(bundle, 'communication[0].language.text')\n    formData.birthDate = moment(bundle.birthDate).format(\"YYYY-MM-DD\")\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('BundleDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.bundle === this.state.bundle){\n      shouldUpdate = false;\n    }\n\n    // received an bundle from the table; okay lets update again\n    if(nextProps.bundleId !== this.state.bundleId){\n      this.setState({bundleId: nextProps.bundleId})\n      \n      if(nextProps.bundle){\n        this.setState({bundle: nextProps.bundle})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.bundle)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      bundleId: this.props.bundleId,\n      bundle: false,\n      bundelContent: '',\n      form: this.state.form\n    };\n\n    if(this.props.bundle){\n      data.bundle = this.props.bundle;\n    }\n    if(this.props.displayBirthdate){\n      data.displayBirthdate = this.props.displayBirthdate;\n    }\n\n    data.bundleContent = JSON.stringify(Bundles.findOne(this.props.bundleId), null, 2);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail[data]\", data);\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('BundleDetail.render()', this.state)\n    let formData = this.state.form;\n\n    return (\n      <div id={this.props.id} className=\"bundleDetail\">\n        <CardText>\n\n          <Row>\n            <Col md={4}>\n              <TextField\n                id='identifier'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'\n                value={ get(formData, 'identifier', '')}\n                onChange={ this.changeState.bind(this, 'identifier')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={8}>\n              <TextField\n                  id='title'\n                  ref='title'\n                  name='title'\n                  floatingLabelText='Title'\n                  value={ get(formData, 'title', '')}\n                  onChange={ this.changeState.bind(this, 'title')}\n                  floatingLabelFixed={true}\n                  fullWidth\n                  /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <pre style={{maxHeight: '500px', width: '100%', height: '100%'}}>\n              {this.data.bundleContent}              \n            </pre>\n          </Row>\n\n          {/* \n          <Row>\n            <Col md={1}>\n              <TextField\n                id='prefixInput'\n                ref='prefix'\n                name='prefix'\n                floatingLabelText='Prefix'\n                value={ get(formData, 'prefix', '')}\n                onChange={ this.changeState.bind(this, 'prefix')}\n                hintText=''\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={5}>\n              <TextField\n                id='givenInput'\n                ref='given'\n                name='given'\n                floatingLabelText='Given Name'\n                hintText='Jane'\n                value={ get(formData, 'given', '')}\n                onChange={ this.changeState.bind(this, 'given')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='familyInput'\n                ref='family'\n                name='family'\n                floatingLabelText='Family Name'\n                hintText='Doe'\n                value={ get(formData, 'family', '')}\n                onChange={ this.changeState.bind(this, 'family')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='suffixInput'\n                ref='suffix'\n                name='suffix'\n                floatingLabelText='Suffix / Maiden'\n                hintText=''\n                value={ get(formData, 'suffix', '')}\n                onChange={ this.changeState.bind(this, 'suffix')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={3}>\n              <TextField\n                id='maritalStatusInput'\n                ref='maritalStatus'\n                name='maritalStatus'\n                floatingLabelText='Marital Status'\n                hintText='single | maried | other'\n                value={ get(formData, 'maritalStatus', '')}\n                onChange={ this.changeState.bind(this, 'maritalStatus')}\n                floatingLabelFixed={false}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='genderInput'\n                ref='gender'\n                name='gender'\n                floatingLabelText='Gender'\n                hintText='male | female | unknown'\n                value={ get(formData, 'gender', '')}\n                onChange={ this.changeState.bind(this, 'gender')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n\n              <TextField\n                id='birthDateInput'\n                ref='birthDate'\n                name='birthDate'\n                type='date'\n                floatingLabelText='Birthdate'\n                value={ get(formData, 'birthDate', '')}\n                onChange={ this.changeState.bind(this, 'birthDate')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3} >\n              <br />\n              <Toggle\n                label=\"Multiple Birth\"\n                defaultToggled={false}\n                labelPosition=\"right\"\n                style={styles.toggle}\n              />              \n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>\n              <TextField\n                id='photoInput'\n                ref='photo'\n                name='photo'\n                floatingLabelText='Photo'\n                hintText='http://somewhere.com/image.jpg'\n                value={ get(formData, 'photo', '')}\n                onChange={ this.changeState.bind(this, 'photo')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='speciesInput'\n                ref='species'\n                name='species'\n                floatingLabelText='Species'\n                value={ get(formData, 'species', '')}\n                hintText='Human'\n                onChange={ this.changeState.bind(this, 'species')}\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='languageInput'\n                ref='language'\n                name='language'\n                floatingLabelText='Language'\n                value={ get(formData, 'language', '')}\n                onChange={ this.changeState.bind(this, 'language')}\n                hintText='English'\n                floatingLabelFixed={true}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row> */}\n\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.bundleId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(bundleId){\n    if (bundleId) {\n      return (\n        <div>\n          <RaisedButton id='updateBundleButton' className='updateBundleButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton id='deleteBundleButton' label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id='saveBundleButton'  className='saveBundleButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"title\":\n        set(formData, 'title', textValue)\n        break;\n      case \"identifier\":\n        set(formData, 'identifier', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateBundle(bundleData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail.updateBundle\", bundleData, field, textValue);\n\n    switch (field) {\n      case \"title\":\n        set(bundleData, 'title', textValue)\n        break;\n      case \"identifier\":\n        set(bundleData, 'identifier[0].value', textValue)\n        break;\n    }\n    return bundleData;\n  }\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundleDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let bundleData = Object.assign({}, this.state.bundle);\n\n    formData = this.updateFormData(formData, field, textValue);\n    bundleData = this.updateBundle(bundleData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"bundleData\", bundleData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({bundle: bundleData})\n    this.setState({form: formData})\n  }\n\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Bundle...', this.state)\n\n    let self = this;\n    let fhirBundleData = Object.assign({}, this.state.bundle);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirBundleData', fhirBundleData);\n\n\n    let bundleValidator = BundleSchema.newContext();\n    console.log('bundleValidator', bundleValidator)\n    bundleValidator.validate(fhirBundleData)\n\n    console.log('IsValid: ', bundleValidator.isValid())\n    // console.log('ValidationErrors: ', bundleValidator.validationErrors());\n\n    if (this.state.bundleId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating bundle...\");\n\n      delete fhirBundleData._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      fhirBundleData.resourceType = 'Bundle';\n\n      Bundles._collection.update({_id: this.state.bundleId}, {$set: fhirBundleData }, function(error, result){\n        if (error) {\n          if(process.env.NODE_ENV === \"test\") console.log(\"Bundles.insert[error]\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Bundles\", recordId: self.state.bundleId});\n          Session.set('selectedBundleId', false);\n          Session.set('bundlePageTabIndex', 1);\n          Bert.alert('Bundle added!', 'success');\n        }\n      });\n    } else {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Creating a new bundle...\", fhirBundleData);\n\n      Bundles._collection.insert(fhirBundleData, function(error, result) {\n        if (error) {\n          if(process.env.NODE_ENV === \"test\")  console.log('Bundles.insert[error]', error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Bundles\", recordId: self.state.bundleId});\n          Session.set('bundlePageTabIndex', 1);\n          Session.set('selectedBundleId', false);\n          Bert.alert('Bundle added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('bundlePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Bundles._collection.animalremove({_id: this.state.bundleId}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Bundles.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Bundles\", recordId: self.state.bundleId});\n        Session.set('bundlePageTabIndex', 1);\n        Session.set('selectedBundleId', false);\n        Bert.alert('Bundle removed!', 'success');\n      }\n    });\n  }\n}\n\nBundleDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  bundleId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  bundle: PropTypes.oneOfType([PropTypes.object, PropTypes.bool])\n};\nReactMixin(BundleDetail.prototype, ReactMeteorData);\nexport default BundleDetail;","import Avatar from 'material-ui/Avatar';\nimport FlatButton from 'material-ui/FlatButton';\nimport { HTTP } from 'meteor/http';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { Session } from 'meteor/session';\nimport { has, get } from 'lodash';\nimport { TableNoData } from 'meteor/clinical:glass-ui'\nimport PropTypes from 'prop-types';\n\nflattenBundle = function(person){\n  let result = {\n    _id: person._id,\n    id: person.id,\n    active: true,\n    subject: '',\n    author: '',\n    title: '',\n    date: ''\n  };\n\n  result.subject = get(person, 'entry[0].resource.subject.display', true).toString();\n  result.author = get(person, 'entry[0].resource.author[0].display', true).toString();\n  result.title = get(person, 'entry[0].resource.title', true).toString();\n\n  // there's an off-by-1 error between momment() and Date() that we want\n  // to account for when converting back to a string\n  result.date = moment(person.date).format(\"YYYY-MM-DD\")\n\n  return result;\n}\n\nexport class BundleTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getMeteorData() {\n    let data = {\n      style: {\n        hideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n        },\n        cellHideOnPhone: {\n          visibility: 'visible',\n          display: 'table',\n          paddingTop: '16px',\n          maxWidth: '120px'\n        },\n        cell: {\n          paddingTop: '16px'\n        },\n        avatar: {\n          // color: rgb(255, 255, 255);\n          backgroundColor: 'rgb(188, 188, 188)',\n          userSelect: 'none',\n          borderRadius: '2px',\n          height: '40px',\n          width: '40px'\n        }\n      },\n      selected: [],\n      bundles: []\n    };\n\n    let query = {};\n    let options = {};\n\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      options.limit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n    // but can be over-ridden by props being more explicit\n    if(this.props.limit){\n      options.limit = this.props.limit;      \n    }\n\n    if(this.props.data){\n      // console.log('this.props.data', this.props.data);\n\n      if(this.props.data.length > 0){              \n        this.props.data.forEach(function(bundle){\n          data.bundles.push(flattenBundle(bundle));\n        });  \n      }\n    } else {\n      data.bundles = Bundles.find().map(function(bundle){\n        return flattenBundle(bundle);\n      });\n    }\n\n    console.log(\"BundleTable[data]\", data);\n    return data;\n  }\n  imgError(avatarId) {\n    this.refs[avatarId].src = Meteor.absoluteUrl() + 'noAvatar.png';\n  }\n  rowClick(id){\n    Session.set('bundlesUpsert', false);\n    Session.set('selectedBundleId', id);\n    // Session.set('bundlePageTabIndex', 2);\n\n    console.log('rowClick', Bundles.findOne(id));\n\n    // Session.set('dataContent', dataContent);   \n  }\n  renderRowAvatarHeader(){\n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <th className='avatar'>photo</th>\n      );\n    }\n  }\n  renderRowAvatar(bundle, avatarStyle){\n    //console.log('renderRowAvatar', bundle, avatarStyle)\n    \n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <td className='avatar'>\n          <img src={bundle.photo} ref={bundle._id} onError={ this.imgError.bind(this, bundle._id) } style={avatarStyle}/>\n        </td>\n      );\n    }\n  }\n  renderSpeciesHeader(displaySpecies){\n    if(displaySpecies){\n      return (\n        <th className='species'>Species</th>\n      );\n    }\n  }\n  renderSpeciesRow(displaySpecies, bundle){\n    if(displaySpecies){\n      return (\n        <td className='species' style={this.data.style.cellHideOnPhone}>\n          {bundle.species}\n        </td>\n      );\n    }\n\n  }\n  renderSendButtonHeader(){\n    if (this.props.showSendButton === true) {\n      return (\n        <th className='sendButton' style={this.data.style.hideOnPhone}></th>\n      );\n    }\n  }\n  renderSendButton(bundle, avatarStyle){\n    if (this.props.showSendButton === true) {\n      return (\n        <td className='sendButton' style={this.data.style.hideOnPhone}>\n          <FlatButton label=\"send\" onClick={this.onSend.bind('this', this.data.bundles[i]._id)}/>\n        </td>\n      );\n    }\n  }\n  onSend(id){\n    let bundle = Bundles.findOne({_id: id});\n\n    console.log(\"BundleTable.onSend()\", bundle);\n\n    var httpEndpoint = \"http://localhost:8080\";\n    if (get(Meteor, 'settings.public.interfaces.default.channel.endpoint')) {\n      httpEndpoint = get(Meteor, 'settings.public.interfaces.default.channel.endpoint');\n    }\n    HTTP.post(httpEndpoint + '/Bundle', {\n      data: bundle\n    }, function(error, result){\n      if (error) {\n        console.log(\"error\", error);\n      }\n      if (result) {\n        console.log(\"result\", result);\n      }\n    });\n  }\n  selectBundleRow(bundleId){\n    if(typeof(this.props.onRowClick) === \"function\"){\n      this.props.onRowClick(bundleId);\n    }\n  }\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.data.bundles.length === 0){\n      footer = <TableNoData noDataPadding={ this.props.noDataMessagePadding } />\n    } else {\n      for (var i = 0; i < this.data.bundles.length; i++) {\n        tableRows.push(\n          <tr key={i} className=\"bundleRow\" style={{cursor: \"pointer\"}} onClick={this.selectBundleRow.bind(this, this.data.bundles[i].id )} >\n            <td className='identifier' style={this.data.style.cell}>{this.data.bundles[i].identifier}</td>\n            <td className='title' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={this.data.style.cell}>{this.data.bundles[i].title }</td>\n            <td className='subject' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={this.data.style.cell}>{this.data.bundles[i].subject }</td>\n            <td className='author' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={this.data.style.cell}>{this.data.bundles[i].author }</td>\n            <td className='birthDate' onClick={ this.rowClick.bind('this', this.data.bundles[i]._id)} style={{minWidth: '100px', paddingTop: '16px'}}>{this.data.bundles[i].birthDate }</td>\n          </tr>\n        );\n      }\n    }\n    \n\n\n    return(\n      <div>\n        <Table id='bundlesTable' hover >\n          <thead>\n            <tr>\n              <th className='identifier'>Identifier</th>\n              <th className='author'>Title</th>\n              <th className='subject'>Subject</th>\n              <th className='author'>Author</th>\n              <th className='birthdate' style={{minWidth: '100px'}}>Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            { tableRows }\n          </tbody>\n        </Table>\n        { footer }\n      </div>\n    );\n  }\n}\n\nBundleTable.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  showSendButton: PropTypes.bool,\n  displaySpecies: PropTypes.bool,\n  noDataMessagePadding: PropTypes.number\n};\n\nReactMixin(BundleTable.prototype, ReactMeteorData);\nexport default BundleTable;","import { CardText, CardTitle, Tab, Tabs } from 'material-ui';\nimport { Glass, GlassCard, VerticalCanvas, FullPageCanvas } from 'meteor/clinical:glass-ui';\n\nimport BundleDetail from './BundleDetail';\nimport BundleTable from './BundleTable';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport PropTypes from 'prop-types';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { Bundles, BundleSchema } from '../lib/Bundles.js';\nimport { Grid, Col, Row } from 'react-bootstrap';\n\nlet defaultBundle = {\n  index: 2,\n  id: '',\n  username: '',\n  email: '',\n  given: '',\n  family: '',\n  gender: ''\n};\nSession.setDefault('bundleFormData', defaultBundle);\nSession.setDefault('bundleSearchFilter', '');\nSession.setDefault('selectedBundleId', false);\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class BundlesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('bundlePageTabIndex'),\n      bundleSearchFilter: Session.get('bundleSearchFilter'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedBundleId: Session.get(\"selectedBundleId\"),\n      selectedBundle: false\n    };\n\n    \n    if (Session.get('selectedBundleId')){\n      data.selectedBundle = Bundles.findOne({_id: Session.get('selectedBundleId')});\n    } else {\n      data.selectedBundle = false;\n    }\n\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"BundlesPage[data]\", data);\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('bundlePageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedBundleId', false);\n    Session.set('bundleUpsert', false);\n  }\n\n\n  render() {\n    console.log('React.version: ' + React.version);\n    return (\n      <div id=\"bundlesPage\">\n        <FullPageCanvas>\n          <Col md={6}>\n            <GlassCard height=\"auto\">\n              <CardTitle\n                title=\"Bundles\"\n              />\n              <CardText>\n                <BundleTable \n                  showBarcodes={true} \n                  showAvatars={true} \n                  noDataMessagePadding={100}\n                  />\n              </CardText>\n            </GlassCard>\n          </Col>\n          <Col md={6}>\n            <GlassCard height=\"auto\">\n              {/* <CardTitle\n                title=\"Bundles\"\n              /> */}\n              <CardText>\n                <BundleDetail \n                  id='bundleDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  bundle={ this.data.selectedBundle }\n                  bundleId={ this.data.selectedBundleId }\n                />\n              </CardText>\n            </GlassCard>\n\n          </Col>\n        </FullPageCanvas>\n      </div>\n    );\n  }\n}\n\n\n\nReactMixin(BundlesPage.prototype, ReactMeteorData);\nexport default BundlesPage;"]}