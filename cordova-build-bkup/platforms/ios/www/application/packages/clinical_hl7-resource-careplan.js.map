{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/lib/CarePlans.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlanDesignerPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlanDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlanDetailPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlansPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-careplan/client/react/CarePlansTable.js"],"names":["SimpleSchema","module","link","v","CarePlan","BaseModel","extend","prototype","_collection","CarePlans","Package","Mongo","Collection","connection","_transform","document","CarePlanDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","ReferenceSchema","Code","allowedValues","PeriodSchema","Date","CodeableConceptSchema","Object","AnnotationSchema","Boolean","TimingSchema","QuantitySchema","CarePlanStu3","CarePlanSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","CarePlansPage","CarePlansTable","CarePlanDetail","CarePlanDesignerPage","CarePlanDetailPage","ConditionsTable","GoalsTable","MedicationsTable","Card","CardHeader","CardText","CardTitle","Dialog","FlatButton","RaisedButton","TextField","GlassCard","FullPageCanvas","Glass","DynamicSpacer","AccountCircle","ActivitiesTable","PatientTable","QuestionnaireTable","React","ReactMeteorData","ReactMixin","Meteor","Session","browserHistory","Col","Grid","Row","get","setDefault","props","getMeteorData","data","style","primaryContact","display","careplan","goal","selectedMeds","patientDialog","open","patient","reference","selectedPatient","color","background","filter","WebkitFilter","find","count","carePlanTemplate","fetch","author","blur","tab","darkroom","changeInput","variable","event","value","console","log","set","handleOpenPatients","handleClosePatients","selectCarePlan","carePlanId","render","inactiveIndexCard","opacity","width","paddingLeft","paddingRight","indexCard","cursor","indexCardPadding","position","patientActions","bind","patientPicklist","zIndex","textAlign","overflowY","patientId","Patients","findOne","id","paddingTop","top","authorCarePlan","currentUser","User","user","careplanData","template","subject","fullName","userId","description","medications","goals","deselectedActivities","process","env","NODE_ENV","newCarePlanId","insert","update","_id","$set","Component","CardActions","Bert","PropTypes","VerticalCanvas","defaultCarePlan","carePlan","selectedCarePlan","determineButtons","handleSaveButton","marginRight","handleDeleteButton","changeState","field","carePlanUpdate","asserter","clinicalStatus","code","coding","evidence","detail","resourceType","error","result","alert","reason","HipaaLogger","logEvent","eventType","userName","collectionName","recordId","handleCancelButton","remove","propTypes","hasUser","object","Tab","Tabs","borderBottom","borderRight","tabIndex","carePlanSearchFilter","currentCarePlan","params","appbar","handleTabChange","index","onNewTab","CardMedia","Toggle","Table","has","FaTags","FaCode","FaPuzzlePiece","FaLock","GoTrashcan","flattenCarePlan","plan","am","pm","activities","start","end","title","toString","createdAt","moment","period","format","activity","length","carePlanQuery","selected","careplans","forEach","push","map","removeRecord","showSecurityDialog","handleChange","row","key","source","state","setState","handleSelect","getDate","noChange","rowClick","onRowClick","renderBarcode","showBarcode","renderBarcodeHeader","renderToggleHeader","hideToggle","renderToggle","renderSubjectHeader","hideSubject","renderSubject","minWidth","renderActionIconsHeader","hideActionIcons","renderActionIcons","iconStyle","marginLeft","marginTop","fontSize","tableRows","i","rowStyle","array","query","func","paginationLimit","number","hideIdentifier","bool","enteredInError"],"mappings":"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","file":"/packages/clinical_hl7-resource-careplan.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nCarePlan = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nCarePlan.prototype._collection = CarePlans;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof CarePlans === 'undefined'){\n  if(Package['clinical:autopublish']){\n    CarePlans = new Mongo.Collection('CarePlans');\n  } else if(Package['clinical:desktop-publish']){\n    CarePlans = new Mongo.Collection('CarePlans');\n  } else {\n    CarePlans = new Mongo.Collection('CarePlans', {connection: null});\n  }\n}\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nCarePlans._transform = function (document) {\n  return new CarePlan(document);\n};\n\n\n// if (Meteor.isClient){\n//   Meteor.subscribe(\"CarePlans\");\n// }\n\n// if (Meteor.isServer){\n//   Meteor.publish(\"CarePlans\", function (argument){\n//     if (this.userId) {\n//       return CarePlans.find();\n//     } else {\n//       return [];\n//     }\n//   });\n// }\n\nCarePlanDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"CarePlan\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"status\" : {\n    type: Code,\n    allowedValues: ['proposed', 'draft', 'active', 'completed', 'cancelled']\n    },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"period\" : {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"author\" : {\n    optional: true,\n    type: Array\n    },\n  \"author.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n  \"modified\" : {\n    optional: true,\n    type: Date\n    },\n  \"category\" : {\n    optional: true,\n    type: Array\n    },\n  \"category.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n  \"description\" : {\n    optional: true,\n    type: String\n    },\n  \"addresses\" : {\n    optional: true,\n    type: Array\n    },\n  \"addresses.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n  \"support\" : {\n    optional: true,\n    type: Array\n    },    \n  \"support.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n\n  \"relatedPlan\" :  {\n    optional: true,\n    type: Array\n    },\n  \"relatedPlan.$\" :  {\n    optional: true,\n    type: Object\n    },          \n  \"relatedPlan.$.code\" :  {\n    optional: true,\n    type: Code,\n    allowedValues: ['includes', 'replaces', 'fulfills']\n    },\n  \"relatedPlan.$.plan\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"participant\" :  {\n    optional: true,\n    type: Array\n    },\n  \"participant.$\" :  {\n    optional: true,\n    type: Object\n    },          \n  \"participant.$.role\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"participant.$.member\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$\" :  {\n    optional: true,\n    type: Object\n    },      \n\n  \"activity.$.actionResulting\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.actionResulting.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.progress\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.progress.$\" :  {\n    optional: true,\n    type: AnnotationSchema \n    },    \n  \"activity.$.reference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"activity.$.detail\" :  {\n    optional: true,\n    type: Object\n    },\n\n  \"activity.$.detail.category\" :  {\n    optional: true,\n    type: CodeableConceptSchema,\n    allowedValues: ['diet', 'drug', 'encounter', 'observation', 'procedure', 'supply', 'other']\n    },\n  \"activity.$.detail.code\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.reasonCode\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonCode.$\" :  {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n\n  \"activity.$.detail.reasonReference\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonReference.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.status\" :  {\n    optional: true,\n    type: Code,\n    allowedValues: ['not-started', 'scheduled', 'in-progress', 'on-hold', 'completed', 'cancelled']\n    },\n  \"activity.$.detail.statusReason\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.prohibited\" :  {\n    type: Boolean,\n    defaultValue: false\n    },\n  \"activity.$.detail.scheduledTiming\" :  {\n    optional: true,\n    type: TimingSchema\n    },\n  \"activity.$.detail.scheduledPeriod\" :  {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"activity.$.detail.scheduledString\" :  {\n    optional: true,\n    type: String\n    },\n  \"activity.$.detail.location\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.performer\" : {\n    optional: true,\n    type:  Array\n    },\n  \"activity.$.detail.performer.$\" : {\n    optional: true,\n    type:  ReferenceSchema \n    },    \n  \"activity.$.detail.productCodeableConcept\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.productReference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.dailyAmount\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.quantity\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.description\" :  {\n    optional: true,\n    type: String\n    },\n  \"note\" :  {\n    optional: true,\n    type: AnnotationSchema\n    }\n});\n\n\n\n\n\nCarePlanStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"CarePlan\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"basedOn\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"replaces\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"partOf\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"status\" : {\n    type: Code,\n    allowedValues: ['draft', 'active', 'suspended', 'completed', 'entered-in-error', 'cancelled', 'unknown']\n    },\n  \"intent\" : {\n    type: Code,\n    allowedValues: ['proposal', 'plan', 'order', 'option']\n    },\n  \"category\" : {\n    optional: true,\n    type: Array\n    },\n  \"category.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n  \"title\" : {\n    optional: true,\n    type: String\n    },\n  \"description\" : {\n    optional: true,\n    type: String\n    },\n    \n  \"subject\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"context\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"period\" : {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"author\" : {\n    optional: true,\n    type: Array\n    },\n  \"author.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },  \n   \n  \"careTEam\" : {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"addresses\" : {\n    optional: true,\n    type: Array\n    },\n  \"addresses.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n  \"supportingInfo\" : {\n    optional: true,\n    type: Array\n    },    \n  \"supportingInfo.$\" : {\n    optional: true,\n    type: ReferenceSchema \n    },    \n\n  \"goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$\" :  {\n    optional: true,\n    type: Object\n    },      \n  \"activity.$.outcomeCodeableConcept\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.outcomeCodeableConcept.$\" :  {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n  \"activity.$.outcomeReference\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.outcomeReference.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.progress\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.progress.$\" :  {\n    optional: true,\n    type: AnnotationSchema \n    },    \n  \"activity.$.reference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n\n  \"activity.$.detail\" :  {\n    optional: true,\n    type: Object\n    },\n\n  \"activity.$.detail.category\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.definition\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },    \n  \"activity.$.detail.code\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.reasonCode\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonCode.$\" :  {\n    optional: true,\n    type: CodeableConceptSchema \n    },\n\n  \"activity.$.detail.reasonReference\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.reasonReference.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.goal\" :  {\n    optional: true,\n    type: Array\n    },\n  \"activity.$.detail.goal.$\" :  {\n    optional: true,\n    type: ReferenceSchema \n    },\n\n  \"activity.$.detail.status\" :  {\n    type: Code,\n    allowedValues: ['not-started', 'scheduled', 'in-progress', 'on-hold', 'completed', 'cancelled', 'unknown']\n    },\n  \"activity.$.detail.statusReason\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.prohibited\" :  {\n    type: Boolean,\n    defaultValue: false\n    },\n  \"activity.$.detail.scheduledTiming\" :  {\n    optional: true,\n    type: TimingSchema\n    },\n  \"activity.$.detail.scheduledPeriod\" :  {\n    optional: true,\n    type: PeriodSchema\n    },\n  \"activity.$.detail.scheduledString\" :  {\n    optional: true,\n    type: String\n    },\n  \"activity.$.detail.location\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.performer\" : {\n    optional: true,\n    type:  Array\n    },\n  \"activity.$.detail.performer.$\" : {\n    optional: true,\n    type:  ReferenceSchema \n    },    \n  \"activity.$.detail.productCodeableConcept\" :  {\n    optional: true,\n    type: CodeableConceptSchema\n    },\n  \"activity.$.detail.productReference\" :  {\n    optional: true,\n    type: ReferenceSchema\n    },\n  \"activity.$.detail.dailyAmount\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.quantity\" :  {\n    optional: true,\n    type: QuantitySchema\n    },\n  \"activity.$.detail.description\" :  {\n    optional: true,\n    type: String\n    },\n  \"note\" :  {\n    optional: true,\n    type: AnnotationSchema\n    }\n});\n\nCarePlanSchema = CarePlanStu3\n\nBaseSchema.extend(CarePlanSchema);\nDomainResourceSchema.extend(CarePlanSchema);\nCarePlans.attachSchema(CarePlanSchema);\n\nexport default { CarePlan, CarePlans, CarePlanSchema, CarePlanStu3, CarePlanDstu2 };","\n\nimport CarePlansPage from './client/react/CarePlansPage';\nimport CarePlansTable from './client/react/CarePlansTable';\nimport CarePlanDetail from './client/react/CarePlanDetail';\nimport CarePlanDesignerPage from './client/react/CarePlanDesignerPage';\nimport CarePlanDetailPage from './client/react/CarePlanDetailPage';\nimport { CarePlan, CarePlans, CarePlanSchema } from './lib/CarePlans';\n\nimport { ConditionsTable } from 'meteor/clinical:hl7-resource-condition';\nimport { GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\n\n\nvar DynamicRoutes = [{\n  'name': 'CarePlansPage',\n  'path': '/care-plans',\n  'component': CarePlansPage,\n  'requireAuth': true\n}, {\n  'name': 'Care Plan Designer',\n  'path': '/careplan-designer',\n  'component': CarePlanDesignerPage,\n  'requireAuth': true\n}, {\n  'name': 'CarePlanDetailPage',\n  'path': '/careplan/:id',\n  'component': CarePlanDetailPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Care Plans',\n  'to': '/care-plans',\n  'href': '/care-plans'\n}, {\n  'primaryText': 'CarePlan',\n  'to': '/careplan',\n  'href': '/careplan'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  CarePlansPage,\n  CarePlansTable,\n  CarePlanDetail,\n  CarePlanDesignerPage\n};\n\n\n","import { Card, CardHeader, CardText, CardTitle, Dialog, FlatButton, RaisedButton, TextField } from 'material-ui';\nimport { GlassCard, FullPageCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport AccountCircle from 'material-ui/svg-icons/action/account-circle';\n\nimport { ActivitiesTable, GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\nimport { PatientTable } from 'meteor/clinical:hl7-resource-patient'\nimport { QuestionnaireTable } from 'meteor/clinical:hl7-resource-questionnaire';\n\nimport { CarePlansTable } from './CarePlansTable';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { browserHistory } from 'react-router';\nimport { Col, Grid, Row } from 'react-bootstrap';\n\nimport { get } from 'lodash';\n\nSession.setDefault('patientDialogOpen', false);\nSession.setDefault('selectedPatient', false);\nSession.setDefault('selectedPatientId', false);\nSession.setDefault('selectedCarePlanId', false);\nexport class CarePlanDesignerPage extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getMeteorData() {\n\n    let data = {\n      style: {},\n      primaryContact: {\n        display: ''\n      },\n      careplan: {\n        goal: []\n      },\n      selectedMeds: [],\n      patientDialog: {\n        open: Session.get('patientDialogOpen'),\n        patient: {\n          display: '',\n          reference: ''\n        }\n      },\n      selectedPatient: Session.get('selectedPatient')\n    };\n    \n\n\n    // this should all be handled by props\n    // or a mixin!\n    if (Session.get('darkroomEnabled')) {\n      data.style.color = 'black';\n      data.style.background = 'white';\n    } else {\n      data.style.color = 'white';\n      data.style.background = 'black';\n    }\n\n    // this could be another mixin\n    if (Session.get('glassBlurEnabled')) {\n      data.style.filter = 'blur(3px)';\n      data.style.WebkitFilter = 'blur(3px)';\n    }\n\n    // the following assumes that we only have a single CarePlan record in the database\n    if (CarePlans.find({'identifier.value':'alcohol-treatment-template'}).count() > 0) {\n      let carePlanTemplate = CarePlans.find({'identifier.value':'alcohol-treatment-template'}).fetch()[0];\n      //console.log(\"carePlanTemplate\", carePlanTemplate);\n\n      if (carePlanTemplate ) {\n        data.primaryContact = carePlanTemplate.author[0];\n\n        data.careplan = carePlanTemplate;\n      }\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n  changeInput(variable, event, value){\n    console.log('changeInput', variable, event, value)\n    Session.set(variable, value);\n  }  \n  handleOpenPatients(){\n    console.log('handleOpenPatients.bind(this) ')\n    Session.set('patientDialogOpen', true);\n  }  \n  handleClosePatients(){\n    Session.set('patientDialogOpen', false);\n  }  \n  selectCarePlan(carePlanId){\n    console.log('selectCarePlan', carePlanId)\n    Session.set('selectedCarePlanId', carePlanId);\n    // browserHistory.push(get(Meteor, 'settings.public.defaults.routes.carePlanDesignerNext', '/'))\n  }\n  render() {\n    let style = {\n      inactiveIndexCard: {\n        opacity: .5,\n        width: '50%',\n        display: 'inline-block',\n        paddingLeft: '20px',\n        paddingRight: '20px'\n      },\n      indexCard: {\n        cursor: 'pointer'\n      },\n      indexCardPadding: {\n        width: '100%',\n        display: 'inline-block',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        position: 'relative'\n      }\n    };\n    const patientActions = [\n      <FlatButton\n        label=\"Clear\"\n        primary={true}\n        onClick={this.handleClosePatients.bind(this)}\n      />,\n      <FlatButton\n        label=\"Select\"\n        primary={true}\n        keyboardFocused={true}\n        onClick={this.handleClosePatients.bind(this)}\n      />\n    ];\n\n    let patientPicklist;\n\n    if(!this.data.selectedPatient){\n      patientPicklist = <section id=\"patientSection\" style={style.indexCardPadding} >\n      <GlassCard>\n        <CardTitle\n          title=\"Patient Pick List\"\n        />\n        <CardText>\n\n          <TextField\n            hintText=\"Jane Doe\"\n            errorText=\"Patient Search\"\n            onChange={this.changeInput.bind(this, 'patientSearch')}\n            value={this.data.patientDialog.patient.display}\n            fullWidth>\n              <FlatButton\n                label=\"Patients\"\n                id=\"patientSearchButton\"\n                className=\"patientsButton\"\n                primary={true}\n                onClick={this.handleOpenPatients.bind(this) }\n                icon={ <AccountCircle /> }\n                style={{float: 'right', cursor: 'pointer', zIndex: 200, width: '160px', textAlign: 'right'}}\n              />\n            </TextField>\n\n          <Dialog\n            title=\"Patient Search\"\n            actions={patientActions}\n            modal={false}\n            open={this.data.patientDialog.open}\n            onRequestClose={this.handleClosePatients.bind(this)}\n          >\n            <CardText style={{overflowY: \"auto\"}}>\n            <TextField\n              hintText=\"Jane Doe\"\n              errorText=\"Patient Search\"\n              onChange={this.changeInput.bind(this, 'description')}\n              value={this.data.patientDialog.patient.display}\n              fullWidth />\n              <PatientTable \n                hideToggle={true}\n                hideActions={true}\n                hideMaritalStatus={true}\n                hideLanguage={true}\n                onRowClick={function(patientId){\n                  console.log('CarePlanDesigner.PatientTable.onRowClick()')\n                  Session.set('selectedPatientId', patientId);\n                  Session.set('selectedPatient', Patients.findOne({id: patientId}));\n                  Session.set('patientDialogOpen', false);\n                }}\n              />\n            </CardText>\n          </Dialog>\n        </CardText>\n      </GlassCard>\n      <DynamicSpacer />\n    </section>\n    }\n    return (\n      <section id='carePlanDesignerPage' style={{paddingTop: \"20px\"}}>\n        <FullPageCanvas >\n\n          <Col md={6}>\n            { patientPicklist }\n\n            <section id=\"goalsSelection\" style={style.indexCardPadding} >\n              <GlassCard style={style.indexCard} >\n                <CardTitle\n                  title='Goals'\n                  subtitle='Select the goals for the patient treatment.'\n                />\n                <CardText>\n                  <GoalsTable hideIdentifier={true} />\n                </CardText>\n              </GlassCard>\n            </section>\n\n            <DynamicSpacer />          \n\n            <section id=\"medicationSection\" style={style.indexCardPadding} >\n              <GlassCard style={style.indexCard} >\n                <CardTitle\n                  title='Medications'\n                  subtitle='Select the medications the patient will receive.'\n                />\n                <CardText>\n                  <MedicationsTable hideIdentifier={true}  />\n                </CardText>\n              </GlassCard>\n            </section>\n\n            <DynamicSpacer />\n\n            <section id=\"activitiesSection\" style={style.indexCardPadding} >\n              <GlassCard style={style.indexCard} >\n                <CardTitle\n                  title='Activities'\n                  subtitle='Select the activities the patient ought to engage in.'\n                />\n                <CardText>\n                  <ActivitiesTable\n                    hideIdentifier={true} \n                    />\n                </CardText>\n              </GlassCard>\n            </section>\n            <DynamicSpacer />\n\n            <section id=\"questionnairesSection\" style={style.indexCardPadding} >\n              <GlassCard style={style.indexCard} >\n                <CardTitle\n                  title='Questionnaires'\n                  subtitle='The questionnaire that you need the patient to answer.'\n                />\n                <CardText>\n                  <QuestionnaireTable\n                    hideIdentifier={true} \n                    hideToggles={true} \n                    hideActions={true} \n                    />\n                </CardText>\n              </GlassCard>\n            </section>\n            <DynamicSpacer />\n\n            {/* <section  style={style.indexCardPadding}>\n              <RaisedButton\n                id='authorCarePlanButton'\n                label=\"Author CarePlan\"\n                fullWidth={true}\n                primary={true}\n                onClick={this.authorCarePlan.bind(this)}\n                style={{marginBottom: '60px'}}\n              />\n            </section>   */}\n      \n          </Col>\n          <Col md={6} style={{position: 'sticky', top: '0px'}}>\n            <CarePlansTable \n              onRowClick={this.selectCarePlan.bind(this) }\n            />\n          </Col>\n\n        </FullPageCanvas>\n      </section>\n    );\n  }\n  authorCarePlan(){\n    console.log('Authoring a CarePlan...')\n    //if(process.env.NODE_ENV === \"test\") console.log(\"authoring care plan...\");\n\n    var currentUser = new User(Meteor.user());\n\n    let careplanData = {\n      template: 'sample-template',\n      subject: {\n        display: Session.get('patientSearchFilter'),\n        reference: Session.get('selectedPatientId')\n      },\n      author: {\n        display: currentUser.fullName(),\n        reference: Meteor.userId()\n      },\n      description: 'Basic Treatment Plan',\n      medications: Session.get('selectedMedications'),\n      goals: Session.get('selectedGoals'),\n      deselectedActivities: Session.get('deselectedActivities')\n    };\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"careplanData\", careplanData);\n\n    let newCarePlanId = CarePlans.insert(careplanData);\n    // let newCarePlanId = authorCarePlan.call(careplanData);\n\n    Patients.update({_id: Session.get('selectedPatientId')}, {$set: {\n      'carePlanId': newCarePlanId\n    }});\n\n    Session.set('selectedMedications', []);\n    // browserHistory.push('/careplan-history');\n  }\n}\n\n\n\n\nReactMixin(CarePlanDesignerPage.prototype, ReactMeteorData);\n\nexport default CarePlanDesignerPage;","import { CardActions, CardText, CardTitle, RaisedButton } from 'material-ui';\n\nimport { Bert } from 'meteor/clinical:alert';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport PropTypes from 'prop-types';\nimport { Glass, GlassCard, VerticalCanvas, FullPageCanvas, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport { ConditionsTable } from 'meteor/clinical:hl7-resource-condition';\nimport { GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\n\nlet defaultCarePlan = {\n  \"resourceType\": \"CarePlan\",\n  \"patient\": {\n    \"reference\": \"\",\n    \"display\": \"\"\n  },\n  \"asserter\": {\n    \"reference\": \"\",\n    \"display\": \"\"\n  },\n  \"dateRecorded\": \"\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"\",\n        \"display\": \"\"\n      }\n    ]\n  },\n  \"clinicalStatus\": \"\",\n  \"verificationStatus\": \"confirmed\",\n  \"severity\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"\",\n        \"display\": \"\"\n      }\n    ]\n  },\n  \"onsetDateTime\": \"\",\n  \"evidence\": [\n    {\n      \"detail\": [\n        {\n          \"reference\": \"\",\n          \"display\": \"\"\n        }\n      ]\n    }\n  ]\n};\n\n\n\nSession.setDefault('carePlanUpsert', false);\nSession.setDefault('selectedCarePlan', false);\n\n\nexport class CarePlanDetail extends React.Component {\n  getMeteorData() {\n    let data = {\n      carePlanId: false,\n      carePlan: defaultCarePlan\n    };\n\n    if (Session.get('carePlanUpsert')) {\n      data.carePlan = Session.get('carePlanUpsert');\n    } else {\n      if (Session.get('selectedCarePlan')) {\n        data.carePlanId = Session.get('selectedCarePlan');\n        console.log(\"selectedCarePlan\", Session.get('selectedCarePlan'));\n\n        let selectedCarePlan = CarePlans.findOne({_id: Session.get('selectedCarePlan')});\n        console.log(\"selectedCarePlan\", selectedCarePlan);\n\n        if (selectedCarePlan) {\n          data.carePlan = selectedCarePlan;\n        }\n      } else {\n        data.carePlan = defaultCarePlan;\n      }\n\n    }\n\n    console.log('CarePlanDetail.data', data)\n    return data;\n  }\n\n  render() {\n    return (\n      <div id={this.props.id} className=\"carePlanDetail\">\n        <CardTitle title='Addresses' />\n        <ConditionsTable />\n        <DynamicSpacer />\n\n        <CardTitle title='Goals' />\n        <GoalsTable />\n        <DynamicSpacer />\n\n        <CardTitle title='Medications' />\n        <MedicationsTable />\n        <DynamicSpacer />\n\n        <CardActions>\n          { this.determineButtons(this.data.carePlanId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n\n  determineButtons(carePlanId){\n    if (carePlanId) {\n      return (\n        <div>\n          <RaisedButton id=\"saveCarePlanButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)}  style={{marginRight: '20px'}}  />\n          <RaisedButton id=\"deleteCarePlanButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveCarePlanButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n\n\n  // this could be a mixin\n  changeState(field, event, value){\n    let carePlanUpdate;\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"CarePlanDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new carePlan\n    if (Session.get('carePlanUpsert')) {\n      carePlanUpdate = Session.get('carePlanUpsert');\n    } else {\n      carePlanUpdate = defaultCarePlan;\n    }\n\n\n\n    // if there's an existing carePlan, use them\n    if (Session.get('selectedCarePlan')) {\n      carePlanUpdate = this.data.carePlan;\n    }\n\n    switch (field) {\n      case \"patientDisplay\":\n        carePlanUpdate.patient.display = value;\n        break;\n      case \"asserterDisplay\":\n        carePlanUpdate.asserter.display = value;\n        break;\n      case \"clinicalStatus\":\n        carePlanUpdate.clinicalStatus = value;\n        break;\n      case \"snomedCode\":\n        carePlanUpdate.code.coding[0].code = value;\n        break;\n      case \"snomedDisplay\":\n        carePlanUpdate.code.coding[0].display = value;\n        break;\n      case \"evidenceDisplay\":\n        carePlanUpdate.evidence[0].detail[0].display = value;\n        break;\n      default:\n\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"carePlanUpdate\", carePlanUpdate);\n    Session.set('carePlanUpsert', carePlanUpdate);\n  }\n\n  handleSaveButton(){\n    let carePlanUpdate = Session.get('carePlanUpsert', carePlanUpdate);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"carePlanUpdate\", carePlanUpdate);\n\n\n    if (Session.get('selectedCarePlan')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating carePlan...\");\n      delete carePlanUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      carePlanUpdate.resourceType = 'CarePlan';\n\n      CarePlans._collection.update(\n        {_id: Session.get('selectedCarePlan')}, {$set: carePlanUpdate }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"CarePlans\", recordId: Session.get('selectedCarePlan')});\n            Session.set('carePlanPageTabIndex', 1);\n            Session.set('selectedCarePlan', false);\n            Session.set('carePlanUpsert', false);\n            Bert.alert('CarePlan updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"create a new carePlan\", carePlanUpdate);\n\n      CarePlans._collection.insert(carePlanUpdate, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"CarePlans\", recordId: result});\n          Session.set('carePlanPageTabIndex', 1);\n          Session.set('selectedCarePlan', false);\n          Session.set('carePlanUpsert', false);\n          Bert.alert('CarePlan added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('carePlanPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    CarePlan._collection.remove({_id: Session.get('selectedCarePlan')}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"CarePlans\", recordId: Session.get('selectedCarePlan')});\n        Session.set('carePlanPageTabIndex', 1);\n        Session.set('selectedCarePlan', false);\n        Session.set('carePlanUpsert', false);\n        Bert.alert('CarePlan removed!', 'success');\n      }\n    });\n  }\n}\n\n\nCarePlanDetail.propTypes = {\n  hasUser: PropTypes.object\n};\nReactMixin(CarePlanDetail.prototype, ReactMeteorData);\nexport default CarePlanDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass, DynamicSpacer } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { get } from 'lodash';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nimport { ConditionsTable } from 'meteor/clinical:hl7-resource-condition';\nimport { GoalsTable } from 'meteor/clinical:hl7-resource-goal';\nimport { MedicationsTable } from 'meteor/clinical:hl7-resource-medication';\n\nexport class CarePlanDetailPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('carePlanPageTabIndex'),\n      carePlanSearchFilter: Session.get('carePlanSearchFilter'),\n      currentCarePlan: Session.get('selectedCarePlan')\n    };\n\n    if(this.props.params.id){\n      data.currentCarePlan = CarePlans.findOne({_id: this.props.params.id});\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    console.log('CarePlanDetailPage.data', data)\n    // console.log('CarePlanDetailPage.props', this.props)\n\n    return data;\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In CarePlanDetailPage render');\n    return (\n      <div id='carePlanDetailPage'>\n        <VerticalCanvas>\n\n          <GlassCard >\n            <CardTitle title='Conditions Addressed' />\n            <CardText>\n            <ConditionsTable />\n              {/* <ConditionsTable conditions={get(this, 'data.currentCarePlan.addresses')} /> */}\n            </CardText>\n          </GlassCard>\n          <DynamicSpacer />\n\n          <GlassCard >\n            <CardTitle title='Goals' />\n            <CardText>\n              <GoalsTable />\n            </CardText>\n          </GlassCard>\n          <DynamicSpacer />\n\n          <GlassCard >\n            <CardTitle title='Medications' />\n            <CardText>\n              <MedicationsTable />\n            </CardText>\n          </GlassCard>\n          <DynamicSpacer />\n\n\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(CarePlanDetailPage.prototype, ReactMeteorData);\n\nexport default CarePlanDetailPage;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport CarePlanDetail from './CarePlanDetail';\nimport CarePlansTable from './CarePlansTable';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nexport class CarePlansPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('carePlanPageTabIndex'),\n      carePlanSearchFilter: Session.get('carePlanSearchFilter'),\n      currentCarePlan: Session.get('selectedCarePlan')\n    };\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('carePlanPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedCarePlan', false);\n    Session.set('carePlanUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('In CarePlansPage render');\n    return (\n      <div id='carePlansPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='CarePlans' />\n            <CardText>\n              <CarePlansTable />\n\n              {/* <Tabs id=\"carePlansPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className=\"carePlanListTab\" label='CarePlans' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <CarePlansTable />\n               </Tab>\n               <Tab className=\"carePlanDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <CarePlanDetail id='carePlanDetails' />\n               </Tab>\n             </Tabs> */}\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(CarePlansPage.prototype, ReactMeteorData);\n\nexport default CarePlansPage;","import { Card, CardActions, CardMedia, CardText, CardTitle, Toggle } from 'material-ui';\n\nimport React from 'react';\nimport ReactMixin from 'react-mixin';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport { Table } from 'react-bootstrap';\nimport { get, has } from 'lodash';\n\nimport { browserHistory } from 'react-router';\nimport PropTypes from 'prop-types';\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\nimport { GoTrashcan } from 'react-icons/go'\n\n\nflattenCarePlan = function(plan){\n  // careplans: CarePlans.find({'subject.reference': Meteor.userId}).map(function(plan){\n  // todo: replace tertiary logic\n\n  // console.log('flattenCarePlan', plan)\n\n  let result = {\n    _id: plan._id,\n    subject: '',\n    author: '',\n    template: '',\n    am: '',\n    pm: '',\n    activities: '',\n    goals: '',\n    start: '',\n    end: '',\n    title: ''\n  };\n\n  if (plan.template) {\n    result.template = plan.template.toString();\n  }\n  if (plan.subject && plan.subject.display) {\n    result.subject = plan.subject.display;\n  }\n  if (plan.author && plan.author[0] && plan.author[0].display) {\n    result.author = plan.author[0].display;\n  }\n  if (plan.createdAt) {\n    result.createdAt = moment(plan.period.start).format(\"YYYY-MM-DD hh:mm a\");\n  }\n  if (plan.activity) {\n    result.activities = plan.activity.length;\n  }\n  if (plan.goal) {\n    result.goals = plan.goal.length;\n  }\n\n  if(!result.title){\n    result.title = get(plan, 'title', '')    \n  }\n  if(!result.title){\n    result.title = get(plan, 'description', '')    \n  }\n  if(!result.title){\n    result.title = get(plan, 'category[0].text', '')    \n  }\n  if(!result.title){\n    result.title = get(plan, 'category[0].coding[0].display', '')    \n  }\n\n  // if( plan.period ) {\n  //   if (plan.period.start) {\n  //     result.start = plan.period.start;\n  //   }\n  //   if (plan.period.end) {\n  //     result.end = plan.period.end;\n  //   }\n  // }\n\n  return result;\n}\nexport class CarePlansTable extends React.Component {\n  \n  getMeteorData() {\n\n    // default query is scoped to the logged in user\n    let carePlanQuery = {'subject.reference': Meteor.userId()};\n    if (get(Meteor.user(), 'roles[0]') === \"practitioner\") {\n      // practitioner query is open ended and returns everybody\n      carePlanQuery = {};\n    }\n\n    // this should all be handled by props\n    // or a mixin!\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      careplans: []\n    };\n\n\n    if(this.props.data){\n      this.props.data.forEach(function(plan){\n        data.careplans.push(flattenCarePlan(plan));\n      })\n    } else {\n      data.careplans = CarePlans.find(carePlanQuery).map(flattenCarePlan);\n    }\n\n    // if (Session.get('darkroomEnabled')) {\n    //   data.style.color = \"black\";\n    //   data.style.background = \"white\";\n    // } else {\n    //   data.style.color = \"white\";\n    //   data.style.background = \"black\";\n    // }\n\n    // // this could be another mixin\n    // if (Session.get('glassBlurEnabled')) {\n    //   data.style.filter = \"blur(3px)\";\n    //   data.style.WebkitFilter = \"blur(3px)\";\n    // }\n\n    // // this could be another mixin\n    // if (Session.get('backgroundBlurEnabled')) {\n    //   data.style.backdropFilter = \"blur(5px)\";\n    // }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"CarePlansTable[data]\", data);\n\n\n    return data;\n  }\n  removeRecord(_id){\n    console.log('Remove careplan ', _id)\n    CarePlans._collection.remove({_id: _id})\n  }\n  showSecurityDialog(carePlan){\n    console.log('showSecurityDialog', carePlan)\n\n    Session.set('securityDialogResourceJson', CarePlans.findOne(get(carePlan, '_id')));\n    Session.set('securityDialogResourceType', 'CarePlan');\n    Session.set('securityDialogResourceId', get(carePlan, '_id'));\n    Session.set('securityDialogOpen', true);\n  }\n  handleChange(row, key, value) {\n    const source = this.state.source;\n    source[row][key] = value;\n    this.setState({source});\n  }\n\n  handleSelect(selected) {\n    this.setState({selected});\n  }\n  getDate(){\n    return \"YYYY/MM/DD\";\n  }\n  noChange(){\n    return \"\";\n  }\n  rowClick(carePlanId){\n    if(typeof(this.props.onRowClick) === \"function\"){\n      this.props.onRowClick(carePlanId);\n    } else {\n      Session.set('selectedPatientId', carePlanId);\n      Session.set('selectedPatient', CarePlans.findOne(carePlanId));\n\n      browserHistory.push('/careplan/' + carePlanId);  \n    }\n  }\n  renderBarcode(_id){\n    if (this.props.showBarcode) {\n      return (\n        <td><span className=\"barcode\">{ _id }</span></td>\n      );\n    }\n  }\n  renderBarcodeHeader(){\n    if (this.props.showBarcode) {\n      return (<th>id</th>);\n    }\n  }\n  renderToggleHeader(){\n    if (!this.props.hideToggle) {\n      return (\n        <th className=\"toggle\" style={{width: '60px'}} >Toggle</th>\n      );\n    }\n  }\n  renderToggle(){\n    if (!this.props.hideToggle) {\n      return (\n        <td className=\"toggle\" style={{width: '60px'}}>\n            <Toggle\n              defaultToggled={true}\n            />\n          </td>\n      );\n    }\n  }\n  renderSubjectHeader(){\n    if (!this.props.hideSubject) {\n      return (\n        <th className='patientDisplay'>Patient</th>\n      );\n    }\n  }\n  renderSubject(subject ){\n    if (!this.props.hideSubject) {\n      return (\n        <td className='subject' style={{minWidth: '140px'}}>{ subject }</td>\n      );\n    }\n  }\n  renderActionIconsHeader(){\n    if (!this.props.hideActionIcons) {\n      return (\n        <th className='actionIcons' style={{minWidth: '120px'}}>Actions</th>\n      );\n    }\n  }\n  renderActionIcons(carePlan ){\n    if (!this.props.hideActionIcons) {\n      let iconStyle = {\n        marginLeft: '4px', \n        marginRight: '4px', \n        marginTop: '4px', \n        fontSize: '120%'\n      }\n\n      return (\n        <td className='actionIcons' style={{minWidth: '120px'}}>\n          <FaTags style={iconStyle} onClick={this.showSecurityDialog.bind(this, carePlan)} />\n          <GoTrashcan style={iconStyle} onClick={this.removeRecord.bind(this, carePlan._id)} />  \n        </td>\n      );\n    }\n  } \n  render () {\n    let tableRows = [];\n    for (var i = 0; i < this.data.careplans.length; i++) {\n\n      let rowStyle = {\n        cursor: 'pointer',\n        textAlign: 'left'\n      }\n      if(get(this.data.careplans[i], 'modifierExtension[0]')){\n        rowStyle.color = \"orange\";\n      }\n\n      tableRows.push(\n        <tr key={i} className=\"patientRow\" style={rowStyle} onClick={ this.rowClick.bind(this, this.data.careplans[i]._id)} >\n          { this.renderToggle(this.data.careplans[i]._id) }\n          { this.renderActionIcons(this.data.careplans[i]) }\n\n          <td>{this.data.careplans[i].title }</td>\n          {/* <td>{this.data.careplans[i].subject }</td> */}\n          { this.renderSubject( this.data.careplans[i].subject ) } \n          <td>{this.data.careplans[i].author }</td>\n        </tr>\n      );\n    }\n\n\n    return(\n      <Table hover >\n        <thead>\n          <tr>\n            { this.renderToggleHeader() }\n            { this.renderActionIconsHeader() }\n            <th>Title</th>\n            { this.renderSubjectHeader() }\n            {/* <th>Subject</th> */}\n            <th>Author</th>\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n\n    );\n  }\n}\n\n\nCarePlansTable.propTypes = {\n  data: PropTypes.array,\n  query: PropTypes.object,\n  onRowClick: PropTypes.func,\n  paginationLimit: PropTypes.number,\n  hideIdentifier: PropTypes.bool,\n  hideToggle: PropTypes.bool,\n  hideActionIcons: PropTypes.bool,\n  hideSubject: PropTypes.bool,\n  enteredInError: PropTypes.bool\n};\nReactMixin(CarePlansTable.prototype, ReactMeteorData);\nexport default CarePlansTable;"]}