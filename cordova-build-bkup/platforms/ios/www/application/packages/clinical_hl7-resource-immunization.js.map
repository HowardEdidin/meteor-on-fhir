{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/lib/Immunizations.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/client/ImmunizationDetail.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/client/ImmunizationsPage.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-immunization/client/ImmunizationsTable.js"],"names":["SimpleSchema","module","link","v","Immunization","BaseModel","extend","prototype","_collection","Immunizations","Package","Mongo","Collection","connection","_transform","document","ImmunizationDstu2","type","String","defaultValue","optional","Array","IdentifierSchema","allowedValues","Date","CodeableConceptSchema","ReferenceSchema","Boolean","QuantitySchema","AnnotationSchema","Object","Number","ImmunizationStu3","ImmunizationSchema","BaseSchema","DomainResourceSchema","attachSchema","exportDefault","export","SidebarElements","DynamicRoutes","ImmunizationsPage","ImmunizationsTable","ImmunizationDetail","CardActions","CardText","DatePicker","RaisedButton","React","ReactMeteorData","ReactMixin","TextField","browserHistory","get","set","PropTypes","Col","Row","Session","setDefault","props","state","immunizationId","immunization","resourceType","status","wasNotGiven","identifier","use","value","vaccineCode","text","date","patient","reference","display","form","patientDisplay","patientReference","performerDisplay","performerReference","reported","dehydrateFhirResource","formData","assign","shouldComponentUpdate","nextProps","process","env","NODE_ENV","console","log","shouldUpdate","setState","getMeteorData","data","showDatePicker","renderDatePicker","effectiveDateTime","moment","setHint","changeState","bind","showHints","render","id","determineButtons","handleSaveButton","marginRight","handleDeleteButton","updateFormData","field","textValue","updateImmunization","immunizationData","componentDidUpdate","event","self","fhirImmunizationData","immunizationValidator","newContext","validate","isValid","validationErrors","_id","update","$set","error","result","Bert","alert","reason","HipaaLogger","logEvent","eventType","userId","Meteor","userName","user","fullName","collectionName","recordId","insert","handleCancelButton","remove","Component","propTypes","string","fhirVersion","oneOfType","bool","object","showPatientInputs","onInsert","func","onUpdate","onRemove","onCancel","CardTitle","Tab","Tabs","GlassCard","VerticalCanvas","Glass","style","opacity","tab","borderBottom","borderRight","tabIndex","immunizationSearchFilter","selectedImmunizationId","selectedImmunization","findOne","blur","appbar","darkroom","handleTabChange","index","onNewTab","handleActive","Card","CardMedia","Toggle","Table","FaTags","FaCode","FaPuzzlePiece","FaLock","GoTrashcan","selected","immunizations","displayToggle","displayDates","displayToggles","find","$sort","count","fetch","displayOnMobile","width","includes","window","navigator","platform","renderToggleHeader","hideToggle","renderToggle","renderDateHeader","hideDate","renderDate","newDate","format","renderIdentifierHeader","hideIdentifier","renderIdentifier","renderStatusHeader","hideStatus","renderStatus","renderPatientHeader","hidePatient","renderPatient","renderPerformerHeader","hidePerformer","renderPerformer","rowClick","renderActionIconsHeader","hideActionIcons","minWidth","renderActionIcons","iconStyle","marginLeft","marginTop","fontSize","showSecurityDialog","removeRecord","tableRows","i","length","newRow","rowStyle","cursor","textAlign","color","push","limit","number","query","sort"],"mappings":"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","file":"/packages/clinical_hl7-resource-immunization.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\n// create the object using our BaseModel\nImmunization = BaseModel.extend();\n\n\n//Assign a collection so the object knows how to perform CRUD operations\nImmunization.prototype._collection = Immunizations;\n\n// // Create a persistent data store for addresses to be stored.\n// // HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Immunizations === 'undefined'){\n  if(Package['clinical:autopublish']){\n    Immunizations = new Mongo.Collection('Immunizations');\n  } else if(Package['clinical:desktop-publish']){    \n    Immunizations = new Mongo.Collection('Immunizations');\n  } else {\n    Immunizations = new Mongo.Collection('Immunizations', {connection: null});\n  }\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nImmunizations._transform = function (document) {\n  return new Immunization(document);\n};\n\n\n\nImmunizationDstu2 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Immunization\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    type: String,\n    allowedValues: ['in-progress', 'on-hold', 'completed', 'entered-in-error', 'stopped']\n  },\n  \"date\" : {\n    optional: true,\n    type: Date\n  },\n  \"vaccineCode\" : {\n    type: CodeableConceptSchema\n  },\n  \"patient\" : {\n    type: ReferenceSchema\n  },\n  \"wasNotGiven\" : {\n    type: Boolean\n  },\n  \"reported\" : {\n    type: Boolean\n  },\n  \"performer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"requester\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"manufacturer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"location\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"lotNumber\" : {\n    optional: true,\n    type: String\n  },\n  \"expirationDate\" : {\n    optional: true,\n    type: Date\n  },\n  \"site\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"route\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"doseQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"explanation\" : {\n    optional: true,\n    type: Object\n  },\n  \"explanation.reason\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reason.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"explanation.reasonNotGiven\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reasonNotGiven.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reaction\" : {\n    optional: true,\n    type:  Array\n    },\n  \"reaction.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"reaction.$.date\" : {\n    optional: true,\n    type: Date\n  },\n  \"reaction.$.detail\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"reaction.$.reported\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"vaccinationProtocol\" : {\n    optional: true,\n    type:  Array\n    },\n  \"vaccinationProtocol.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"vaccinationProtocol.$.doseSequence\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.authority\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"vaccinationProtocol.$.series\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.seriesDoses\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.targetDisease\" : {\n    optional: true,\n    type: Array\n  },\n  \"vaccinationProtocol.$.targetDisease.$\" : {\n    type: CodeableConceptSchema \n  },\n  \"vaccinationProtocol.$.doseStatus\" : {\n    type: CodeableConceptSchema\n  },\n  \"vaccinationProtocol.$.doseStatusReason\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }\n});\n\n\n\nImmunizationStu3 = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Immunization\"\n  },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"status\" : {\n    type: String,\n    allowedValues: ['completed', 'entered-in-error'],\n    defaultValue: 'completed'\n  },\n  \"notGiven\" : {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"vaccineCode\" : {\n    type: CodeableConceptSchema\n  },\n  \"patient\" : {\n    type: ReferenceSchema\n  },\n  \"encounter\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"date\" : {\n    optional: true,\n    type: Date\n  },\n  \"primarySource\" : {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"reportOrigin\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"location\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"manufacturer\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"lotNumber\" : {\n    optional: true,\n    type: String\n  },\n  \"expirationDate\" : {\n    optional: true,\n    type: Date\n  },\n  \"site\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"route\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"doseQuantity\" : {\n    optional: true,\n    type: QuantitySchema\n  },\n  \"practitioner\" : {\n    optional: true,\n    type: Array\n  },\n  \"practitioner.$\" : {\n    optional: true,\n    type: Object\n  },\n  \"practitioner.role\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  },\n  \"practitioner.actor\" : {\n    type: ReferenceSchema\n  },\n  \"note\" : {\n    optional: true,\n    type: Array\n  },\n  \"note.$\" : {\n    optional: true,\n    type: AnnotationSchema \n  },\n  \"explanation\" : {\n    optional: true,\n    type: Object\n  },\n  \"explanation.reason\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reason.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"explanation.reasonNotGiven\" : {\n    optional: true,\n    type: Array\n  },\n  \"explanation.reasonNotGiven.$\" : {\n    optional: true,\n    type: CodeableConceptSchema \n  },\n  \"reaction\" : {\n    optional: true,\n    type:  Array\n    },\n  \"reaction.$\" : {\n    optional: true,\n    type:  Object \n    },\n  \"reaction.$.date\" : {\n    optional: true,\n    type: Date\n  },\n  \"reaction.$.detail\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"reaction.$.reported\" : {\n    optional: true,\n    type: Boolean\n  },\n  \"vaccinationProtocol\" : {\n    optional: true,\n    type:  Array\n    },\n  \"vaccinationProtocol.$\" : {\n    optional: true,\n    type:  Object \n    },  \n  \"vaccinationProtocol.$.doseSequence\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.description\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.authority\" : {\n    optional: true,\n    type: ReferenceSchema\n  },\n  \"vaccinationProtocol.$.series\" : {\n    optional: true,\n    type: String\n  },\n  \"vaccinationProtocol.$.seriesDoses\" : {\n    optional: true,\n    type: Number\n  },\n  \"vaccinationProtocol.$.targetDisease\" : {\n    optional: true,\n    type: Array\n  },\n  \"vaccinationProtocol.$.targetDisease.$\" : {\n    type: CodeableConceptSchema \n  },\n  \"vaccinationProtocol.$.doseStatus\" : {\n    type: CodeableConceptSchema\n  },\n  \"vaccinationProtocol.$.doseStatusReason\" : {\n    optional: true,\n    type: CodeableConceptSchema\n  }\n});\n\n\n\nImmunizationSchema = ImmunizationDstu2;\n\n\nBaseSchema.extend(ImmunizationSchema);\nDomainResourceSchema.extend(ImmunizationSchema);\nImmunizations.attachSchema(ImmunizationSchema);\n\nexport default { Immunization, Immunizations, ImmunizationSchema, ImmunizationDstu2, ImmunizationStu3 };","\n\nimport ImmunizationsPage from './client/ImmunizationsPage';\nimport ImmunizationsTable from './client/ImmunizationsTable';\nimport ImmunizationDetail from './client/ImmunizationDetail';\nimport { Immunization, Immunizations, ImmunizationSchema } from './lib/Immunizations';\n\nvar DynamicRoutes = [{\n  'name': 'ImmunizationsPage',\n  'path': '/immunizations',\n  'component': ImmunizationsPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Immunizations',\n  'to': '/immunizations',\n  'href': '/immunizations'\n}];\n\nexport { \n  SidebarElements, \n  DynamicRoutes, \n\n  ImmunizationsPage,\n  ImmunizationsTable,\n  ImmunizationDetail\n};","import { CardActions, CardText } from 'material-ui/Card';\n\nimport DatePicker from 'material-ui/DatePicker';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport TextField from 'material-ui/TextField';\nimport { browserHistory } from 'react-router';\n\nimport { get, set } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { Col, Row } from 'react-bootstrap';\n\n\nSession.setDefault('selectedImmunization', false);\n\nexport class ImmunizationDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      immunizationId: false,\n      immunization: {\n        resourceType: \"Immunization\",\n        status: 'completed',\n        wasNotGiven: false,\n        identifier: [{\n          use: 'official',\n          value: ''\n        }],\n        vaccineCode: {\n          text: ''\n        },\n        date: null,\n        patient: {\n          reference: \"\",\n          display: \"\"\n        }\n      },\n      form: {\n        patientDisplay: '',\n        patientReference: '',\n        performerDisplay: '',\n        performerReference: '',\n        identifier: '',\n        status: '',\n        vaccineCode: '',\n        reported: true,\n        date: ''\n      }\n    }\n  }\n  dehydrateFhirResource(immunization) {\n    let formData = Object.assign({}, this.state.form);\n\n    formData.patientDisplay = get(immunization, 'patient.display')\n    formData.patientReference = get(immunization, 'patient.reference')\n    formData.performerDisplay = get(immunization, 'performer.display')    \n    formData.performerReference = get(immunization, 'performer.reference')    \n    formData.identifier = get(immunization, 'identifier[0].value')\n    formData.status = get(immunization, 'status')\n    formData.vaccineCode = get(immunization, 'vaccineCode.text')\n    formData.reported = get(immunization, 'reported')\n    formData.date = get(immunization, 'date')\n\n    return formData;\n  }\n  shouldComponentUpdate(nextProps){\n    process.env.NODE_ENV === \"test\" && console.log('ImmunizationDetail.shouldComponentUpdate()', nextProps, this.state)\n    let shouldUpdate = true;\n\n    // both false; don't take any more updates\n    if(nextProps.immunization === this.state.immunization){\n      shouldUpdate = false;\n    }\n\n    // received an allergie from the table; okay lets update again\n    if(nextProps.immunizationId !== this.state.immunizationId){\n      this.setState({immunizationId: nextProps.immunizationId})    \n      \n      if(nextProps.immunization){\n        this.setState({immunization: nextProps.immunization})     \n        this.setState({form: this.dehydrateFhirResource(nextProps.immunization)})       \n      }\n      shouldUpdate = true;\n    }\n \n    return shouldUpdate;\n  }\n  getMeteorData() {\n    let data = {\n      immunizationId: this.props.immunizationId,\n      immunization: false,\n      form: this.state.form,\n      showDatePicker: false\n    };\n\n    if(this.props.showDatePicker){\n      data.showDatePicker = this.props.showDatePicker\n    }\n\n    if(this.props.immunization){\n      data.immunization = this.props.immunization;\n      data.form = this.dehydrateFhirResource(this.props.immunization);\n    }\n\n    console.log('ImmunizationDetail[data]', data);\n    return data;\n  }\n  renderDatePicker(showDatePicker, effectiveDateTime){\n    if (typeof effectiveDateTime === \"string\"){\n      effectiveDateTime = moment(effectiveDateTime);\n    }\n    if (showDatePicker) {\n      return (\n        <DatePicker \n          name='datePicker'\n          hintText={this.setHint(\"Date of Administration\" )}\n          container=\"inline\" \n          mode=\"landscape\"\n          value={ effectiveDateTime ? effectiveDateTime : ''}    \n          onChange={ this.changeState.bind(this, 'date')}      \n          />\n      );\n    }\n  }\n  setHint(text){\n    if(this.props.showHints !== false){\n      return text;\n    } else {\n      return '';\n    }\n  }\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('ImmunizationDetail.render()', this.state)\n    let formData = this.data.form;\n\n    return (\n      <div id={this.props.id} className=\"immunizationDetail\">\n        <CardText>\n          <Row>\n            <Col md={6}>\n              <TextField\n                id='identifierInput'\n                ref='identifier'\n                name='identifier'\n                floatingLabelText='Identifier'\n                value={ get(formData, 'identifier', '') }\n                onChange={ this.changeState.bind(this, 'identifier')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('Measles, Mumps, and Rubella')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={2}>\n              <TextField\n                id='vaccineCodeInput'\n                ref='vaccineCode'\n                name='vaccineCode'ÃŸ\n                floatingLabelText='Vaccine Code'\n                value={ get(formData, 'vaccineCode', '') }\n                onChange={ this.changeState.bind(this, 'vaccineCode')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('MMR')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={4}>\n              <TextField\n                id='statusInput'\n                ref='status'\n                name='status'\n                floatingLabelText='Status'\n                value={ get(formData, 'status', '') }\n                onChange={ this.changeState.bind(this, 'status')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('in-progress | on-hold | completed')}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={3}>\n              <TextField\n                id='patientDisplayInput'\n                ref='patientDisplay'\n                name='patientDisplay'\n                floatingLabelText='Patient Name'\n                value={ get(formData, 'patientDisplay', '') }\n                onChange={ this.changeState.bind(this, 'patientDisplay')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('Jane Doe')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='patientReferenceInput'\n                ref='patientReference'\n                name='patientReference'\n                floatingLabelText='Patient Reference'\n                value={ get(formData, 'patientReference', '') }\n                onChange={ this.changeState.bind(this, 'patientReference')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('Patient/1234567890')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='performerDisplayInput'\n                ref='performerDisplay'\n                name='performerDisplay'\n                floatingLabelText='Performer Name'\n                value={ get(formData, 'performerDisplay', '') }\n                onChange={ this.changeState.bind(this, 'performerDisplay')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('Nurse Jackie')}\n                fullWidth\n                /><br/>\n            </Col>\n            <Col md={3}>\n              <TextField\n                id='performerReferenceInput'\n                ref='performerReference'\n                name='performerReference'\n                floatingLabelText='Performer Reference'\n                value={ get(formData, 'performerReference', '') }\n                onChange={ this.changeState.bind(this, 'performerReference')}\n                floatingLabelFixed={true}\n                hintText={this.setHint('Practitioner/555')}\n                fullWidth\n                /><br/>\n            </Col>\n          </Row>\n\n            <br/>\n            { this.renderDatePicker(this.data.showDatePicker, get(this, 'data.immunizationForm.datePicker') ) }\n            <br/>\n\n        </CardText>\n        <CardActions>\n          { this.determineButtons(this.data.immunizationId) }\n        </CardActions>\n      </div>\n    );\n  }\n\n  determineButtons(immunizationId){\n    if (immunizationId) {\n      return (\n        <div>\n          <RaisedButton id=\"updateImmunizationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton id=\"deleteImmunizationButton\" label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id=\"saveImmunizationButton\" label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  updateFormData(formData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationDetail.updateFormData\", formData, field, textValue);\n\n    switch (field) {\n      case \"patientDisplay\":\n        set(formData, 'patientDisplay', textValue)\n        break;\n      case \"patientReference\":\n        set(formData, 'patientReference', textValue)\n        break;\n      case \"performerDisplay\":\n        set(formData, 'performerDisplay', textValue)\n        break;        \n      case \"performerReference\":\n        set(formData, 'performerReference', textValue)\n        break;        \n      case \"identifier\":\n        set(formData, 'identifier', textValue)\n        break;\n      case \"status\":\n        set(formData, 'status', textValue)\n        break;\n      case \"vaccineCode\":\n        set(formData, 'vaccineCode', textValue)\n        break;\n      case \"reported\":\n        set(formData, 'reported', textValue)\n        break;\n      case \"date\":\n        set(formData, 'date', textValue)\n        break;\n      default:\n    }\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n    return formData;\n  }\n  updateImmunization(immunizationData, field, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationDetail.updateImmunization\", immunizationData, field, textValue);\n\n    switch (field) {\n      case \"patientDisplay\":\n        set(immunizationData, 'patient.display', textValue)\n        break;\n      case \"patientReference\":\n        set(immunizationData, 'patient.reference', textValue)\n        break;\n      case \"performerDisplay\":\n        set(immunizationData, 'performer.display', textValue)\n        break;        \n      case \"performerReference\":\n        set(immunizationData, 'performer.reference', textValue)\n        break;        \n      case \"identifier\":\n        set(immunizationData, 'identifier[0].value', textValue)\n        break;\n      case \"status\":\n        set(immunizationData, 'status', textValue)\n        break;\n      case \"vaccineCode\":\n        set(immunizationData, 'vaccineCode.text', textValue)\n        break;\n      case \"reported\":\n        set(immunizationData, 'reported', textValue)\n        break;\n      case \"date\":\n        set(immunizationData, 'date', textValue)\n        break;    \n    }\n    return immunizationData;\n  }\n  componentDidUpdate(props){\n    if(process.env.NODE_ENV === \"test\") console.log('ImmunizationDetail.componentDidUpdate()', props, this.state)\n  }\n\n  // this could be a mixin\n  changeState(field, event, textValue){\n    if(process.env.NODE_ENV === \"test\") console.log(\"   \");\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationDetail.changeState\", field, textValue);\n    if(process.env.NODE_ENV === \"test\") console.log(\"this.state\", this.state);\n\n    let formData = Object.assign({}, this.state.form);\n    let immunizationData = Object.assign({}, this.state.immunization);\n\n    formData = this.updateFormData(formData, field, textValue);\n    immunizationData = this.updateImmunization(immunizationData, field, textValue);\n\n    if(process.env.NODE_ENV === \"test\") console.log(\"immunizationData\", immunizationData);\n    if(process.env.NODE_ENV === \"test\") console.log(\"formData\", formData);\n\n    this.setState({immunization: immunizationData})\n    this.setState({form: formData})\n  }\n\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&&')\n    console.log('Saving a new Immunization...', this.state)\n\n    let self = this;\n    let fhirImmunizationData = Object.assign({}, this.state.immunization);\n\n    if(process.env.NODE_ENV === \"test\") console.log('fhirImmunizationData', fhirImmunizationData);\n\n\n    let immunizationValidator = ImmunizationSchema.newContext();\n    immunizationValidator.validate(fhirImmunizationData)\n\n    console.log('IsValid: ', immunizationValidator.isValid())\n    console.log('ValidationErrors: ', immunizationValidator.validationErrors());\n\n\n    if (this.props.immunizationId) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating immunization...\");\n      delete fhirImmunizationData._id;\n\n      Immunizations._collection.update(\n        {_id: this.props.immunizationId}, {$set: fhirImmunizationData }, function(error, result) {\n          if (error) {\n            console.log(\"error\", error);\n\n            Bert.alert(error.reason, 'danger');\n          }\n          if (result) {\n            HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Immunizations\", recordId: self.props.immunizationId});\n            Session.set('immunizationPageTabIndex', 1);\n            Session.set('selectedImmunization', false);\n            Session.set('immunizationUpsert', false);\n            Bert.alert('Immunization updated!', 'success');\n          }\n        });\n    } else {\n\n      if(process.env.NODE_ENV === \"test\") console.log(\"Create a new Immunization\", fhirImmunizationData);\n\n      // var fhirImmunizationData = {\n      //   \"resourceType\": \"Immunization\",\n      //   'notGiven': true,\n      //   'identifier': [],\n      //   'vaccineCode': {\n      //     'text': fhirImmunizationData.vaccineCode\n      //   }\n      // };\n\n      // fhirImmunizationData.identifier.push({\n      //   'use': 'official',\n      //   'type': {\n      //     'text': fhirImmunizationData.identifier\n      //   }\n      // });\n      // fhirImmunizationData.identifier.push({\n      //   'use': 'secondary',\n      //   'type': {\n      //     'text': fhirImmunizationData.vaccine\n      //   }\n      // });\n\n      Immunizations._collection.insert(fhirImmunizationData, function(error, result) {\n        if (error) {\n          console.log(\"error\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Immunizations\", recordId: result});\n          Session.set('immunizationPageTabIndex', 1);\n          Session.set('selectedImmunization', false);\n          Bert.alert('Immunization added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('immunizationPageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    let self = this;\n    Immunizations._collection.remove({_id: this.props.immunizationId}, function(error, result){\n      if (error) {\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Immunizations\", recordId: self.props.immunizationId});\n        Session.set('immunizationPageTabIndex', 1);\n        Session.set('selectedImmunization', false);\n        Bert.alert('Immunization removed!', 'success');\n      }\n    });\n  }\n}\n\nImmunizationDetail.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n  immunizationId: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  immunization: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n  showPatientInputs: PropTypes.bool,\n  showHints: PropTypes.bool,\n  onInsert: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onRemove: PropTypes.func,\n  onCancel: PropTypes.func\n};\n\nReactMixin(ImmunizationDetail.prototype, ReactMeteorData);\nexport default ImmunizationDetail;","import { CardText, CardTitle } from 'material-ui/Card';\nimport {Tab, Tabs} from 'material-ui/Tabs';\nimport { GlassCard, VerticalCanvas, Glass } from 'meteor/clinical:glass-ui';\n\nimport ImmunizationDetail from './ImmunizationDetail';\nimport ImmunizationsTable from './ImmunizationsTable';\n\nimport { Session } from 'meteor/session';\n\nimport React  from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin  from 'react-mixin';\n\nSession.setDefault('fhirVersion', 'v1.0.2');\n\nexport class ImmunizationsPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('immunizationPageTabIndex'),\n      immunizationSearchFilter: Session.get('immunizationSearchFilter'),\n      selectedImmunizationId: Session.get('selectedImmunizationId'),\n      fhirVersion: Session.get('fhirVersion'),\n      selectedImmunization: false\n    };\n\n    if (Session.get('selectedImmunizationId')){\n      data.selectedImmunization = Immunizations.findOne({_id: Session.get('selectedImmunizationId')});\n    } else {\n      data.selectedImmunization = false;\n    }\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    return data;\n  }\n\n  handleTabChange(index){\n    Session.set('immunizationPageTabIndex', index);\n  }\n\n  onNewTab(){\n    Session.set('selectedImmunizationId', false);\n    Session.set('immunizationUpsert', false);\n  }\n\n  render() {\n    if(process.env.NODE_ENV === \"test\") console.log('ImmunizationsPage.render()', this.data);\n    return (\n      <div id='immunizationsPage'>\n        <VerticalCanvas>\n          <GlassCard height='auto'>\n            <CardTitle title='Immunizations' />\n            <CardText>\n              <Tabs id=\"immunizationsPageTabs\" default value={this.data.tabIndex} onChange={this.handleTabChange} initialSelectedIndex={1}>\n               <Tab className='newImmunizationTab' label='New' style={this.data.style.tab} onActive={ this.onNewTab } value={0}>\n                 <ImmunizationDetail \n                  id='newImmunization' \n                  fhirVersion={ this.data.fhirVersion }\n                  immunizationId={ this.data.selectedImmunizationId } />  \n               </Tab>\n               <Tab className=\"immunizationListTab\" label='Immunizations' onActive={this.handleActive} style={this.data.style.tab} value={1}>\n                <ImmunizationsTable \n                  displayDates={true}\n                />\n               </Tab>\n               <Tab className=\"immunizationDetailsTab\" label='Detail' onActive={this.handleActive} style={this.data.style.tab} value={2}>\n                 <ImmunizationDetail \n                  id='immunizationDetails' \n                  fhirVersion={ this.data.fhirVersion }\n                  immunization={ this.data.selectedImmunization }\n                  immunizationId={ this.data.selectedImmunizationId }\n                  showDatePicker={true} \n                  />\n               </Tab>\n             </Tabs>\n            </CardText>\n          </GlassCard>\n        </VerticalCanvas>\n      </div>\n    );\n  }\n}\n\nReactMixin(ImmunizationsPage.prototype, ReactMeteorData);\n\nexport default ImmunizationsPage;","import { Card, CardActions, CardMedia, CardText, CardTitle, Toggle } from 'material-ui';\n\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { get } from 'lodash';\nimport PropTypes from 'prop-types';\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\nimport { GoTrashcan } from 'react-icons/go'\n\nexport class ImmunizationsTable extends React.Component {\n\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity')\n      },\n      selected: [],\n      immunizations: [],\n      displayToggle: false,\n      displayDates: false\n    }\n\n    if(this.props.displayToggles){\n      data.displayToggle = this.props.displayToggles;\n    }\n    if(this.props.displayDates){\n      data.displayDates = this.props.displayDates;\n    }\n    if(this.props.data){\n      data.immunizations = this.props.data;\n    } else {\n      if(Immunizations.find({}, {$sort: {'identifier.type.text': 1}}).count() > 0){\n        data.immunizations = Immunizations.find({}, {$sort: {'identifier.type.text': 1}}).fetch();\n      }\n    }\n    if(process.env.NODE_ENV === \"test\") console.log(\"ImmunizationsTable[data]\", data);\n\n    return data;\n  };\n\n  displayOnMobile(width){\n    let style = {};\n    if(['iPhone'].includes(window.navigator.platform)){\n      style.display = \"none\";\n    }\n    if(width){\n      style.width = width;\n    }\n    return style;\n  }\n  renderToggleHeader(){\n    if (!this.props.hideToggle) {\n      return (\n        <th className=\"toggle\" style={{width: '60px'}} >Toggle</th>\n      );\n    }\n  }\n  renderToggle(){\n    if (!this.props.hideToggle) {\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n            />\n          </td>\n      );\n    }\n  }\n  renderDateHeader(){\n    if (!this.props.hideDate) {\n      return (\n        <th className='date'>Date</th>\n      );\n    }\n  }\n  renderDate(newDate ){\n    if (!this.props.hideDate) {\n      return (\n        <td className='date'>{ moment(newDate).format('YYYY-MM-DD') }</td>\n      );\n    }\n  }\n\n  renderIdentifierHeader(){\n    if (!this.props.hideIdentifier) {\n      return (\n        <th className=\"identifier\">Identifier</th>\n      );\n    }\n  }\n  renderIdentifier(immunization){\n    if (!this.props.hideIdentifier) {\n      \n      return (\n        <td className='identifier'>{ get(immunization, 'identifier[0].value') }</td>       );\n    }\n  }\n  renderStatusHeader(){\n    if (!this.props.hideStatus) {\n      return (\n        <th className=\"status\">Status</th>\n      );\n    }\n  }\n  renderStatus(status){\n    if (!this.props.hideStatus) {\n      \n      return (\n        <td className='status'>{ status }</td>       );\n    }\n  }\n\n  renderPatientHeader(){\n    if (!this.props.hidePatient) {\n      return (\n        <th className=\"patient\">Patient</th>\n      );\n    }\n  }\n  renderPatient(immunization){\n    if (!this.props.hidePatient) {\n      \n      return (\n        <td className='patient'>{ get(immunization, 'patient.display') }</td>       );\n    }\n  }\n  renderPerformerHeader(){\n    if (!this.props.hidePerformer) {\n      return (\n        <th className=\"performer\">Performer</th>\n      );\n    }\n  }\n  renderPerformer(immunization){\n    if (!this.props.hidePerformer) {\n      \n      return (\n        <td className='performer'>{ get(immunization, 'performer.display') }</td>       );\n    }\n  }\n\n\n  rowClick(id){\n    Session.set('immunizationsUpsert', false);\n    Session.set('selectedImmunizationId', id);\n    Session.set('immunizationPageTabIndex', 2);\n  };\n  renderActionIconsHeader(){\n    if (!this.props.hideActionIcons) {\n      return (\n        <th className='actionIcons' style={{minWidth: '120px'}}>Actions</th>\n      );\n    }\n  }\n  renderActionIcons(immunization ){\n    if (!this.props.hideActionIcons) {\n      let iconStyle = {\n        marginLeft: '4px', \n        marginRight: '4px', \n        marginTop: '4px', \n        fontSize: '120%'\n      }\n\n      return (\n        <td className='actionIcons' style={{minWidth: '120px'}}>\n          <FaTags style={iconStyle} onClick={this.showSecurityDialog.bind(this, immunization)} />\n          <GoTrashcan style={iconStyle} onClick={this.removeRecord.bind(this, immunization._id)} />  \n        </td>\n      );\n    }\n  } \n  renderIdentifierHeader(){\n    if (!this.props.hideIdentifier) {\n      return (\n        <th className='identifier'>Identifier</th>\n      );\n    }\n  }\n  renderIdentifier(identifier ){\n    if (!this.props.hideIdentifier) {\n      return (\n        <td className='identifier'>{ identifier }</td>\n      );\n    }\n  } \n  removeRecord(_id){\n    console.log('Remove patient ', _id)\n    Immunizations._collection.remove({_id: _id})\n  }\n  showSecurityDialog(immunization){\n    console.log('showSecurityDialog', immunization)\n\n    Session.set('securityDialogResourceJson', Immunizations.findOne(get(immunization, '_id')));\n    Session.set('securityDialogResourceType', 'Immunization');\n    Session.set('securityDialogResourceId', get(immunization, '_id'));\n    Session.set('securityDialogOpen', true);\n  }\n  render () {\n    // console.log('this.data', this.data)\n\n    let tableRows = [];\n    for (var i = 0; i < this.data.immunizations.length; i++) {\n      let newRow = {\n        patientDisplay: get(this.data.immunizations[i], 'patient.display'),\n        patientReference: get(this.data.immunizations[i], 'patient.reference'),\n        performerDisplay: get(this.data.immunizations[i], 'performer.display'),\n        performerReference: get(this.data.immunizations[i], 'performer.reference'),\n        identifier: get(this.data.immunizations[i], 'identifier[0].value'),\n        status: get(this.data.immunizations[i], 'status'),\n        vaccineCode: get(this.data.immunizations[i], 'vaccineCode.text'),\n        reported: get(this.data.immunizations[i], 'reported'),\n        date: get(this.data.immunizations[i], 'date')\n      }\n\n      let rowStyle = {\n        cursor: 'pointer',\n        textAlign: 'left'\n      }\n      if(get(this.data.immunizations[i], 'modifierExtension[0]')){\n        rowStyle.color = \"orange\";\n      }\n\n      tableRows.push(\n        <tr key={i} className=\"immunizationRow\" style={rowStyle} onClick={ this.rowClick.bind('this', this.data.immunizations[i]._id)} >\n          { this.renderToggle() }\n          { this.renderActionIcons(this.data.immunizations[i]) }\n          { this.renderIdentifier( newRow.identifier ) }\n          <td className='vaccineCode'>{ newRow.vaccineCode }</td>\n\n          { this.renderStatus( newRow.status ) }\n          { this.renderPatient(this.data.immunizations[i]) }\n          { this.renderPerformer(this.data.immunizations[i]) }\n\n          {/* <td className='identifier' style={this.displayOnMobile()} >{ newRow.identifier }</td> */}\n          {/* <td className='status' style={this.displayOnMobile()}>{ newRow.status }</td>\n          <td className='patient' style={this.displayOnMobile()} >{ newRow.patientDisplay }</td>\n          <td className='performer' style={this.displayOnMobile()} >{ newRow.performerDisplay }</td> */}\n\n          { this.renderDate(newRow.date) }\n        </tr>\n      )\n    }\n\n    return(\n      <Table id='immunizationsTable' hover >\n        <thead>\n          <tr>\n            { this.renderToggleHeader() }\n            { this.renderActionIconsHeader() }\n            { this.renderIdentifierHeader() }\n            {/* <th className='identifier' style={this.displayOnMobile()} >identifier</th> */}\n\n            <th className='vaccineCode'>vaccineCode</th>\n\n            {/* <th className='status' style={this.displayOnMobile()} >status</th>\n            <th className='patient' style={this.displayOnMobile()} >patient</th>\n            <th className='performer' style={this.displayOnMobile()} >performer</th> */}\n\n            { this.renderStatusHeader() }\n            { this.renderPatientHeader() }\n            { this.renderPerformerHeader() }\n\n            { this.renderDateHeader() }\n          </tr>\n        </thead>\n        <tbody>\n          { tableRows }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nImmunizationsTable.propTypes = {\n  id: PropTypes.string,\n  fhirVersion: PropTypes.string,\n\n  hideToggle: PropTypes.bool,\n  hideIdentifier: PropTypes.bool,\n  hideDate: PropTypes.bool,\n  hideStatus: PropTypes.bool,\n  hidePatient: PropTypes.bool,\n  hidePerformer: PropTypes.bool,\n \n  limit: PropTypes.number,\n  query: PropTypes.object,\n  patient: PropTypes.string,\n  patientDisplay: PropTypes.string,\n  sort: PropTypes.string\n  // onPatientClick: PropTypes.func\n};\nReactMixin(ImmunizationsTable.prototype, ReactMeteorData);\nexport default ImmunizationsTable;"]}