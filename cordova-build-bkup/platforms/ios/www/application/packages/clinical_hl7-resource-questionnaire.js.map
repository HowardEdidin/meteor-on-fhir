{"version":3,"sources":["meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/lib/Questionnaires.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/lib/methods.js","meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/index.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/client/QuestionnaireDetail.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/client/QuestionnaireTable.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/client/QuestionnairesPage.jsx","meteor://ðŸ’»app/packages/clinical:hl7-resource-questionnaire/client/SortableQuestionnaire.jsx"],"names":["module","export","Questionnaire","Questionnaires","QuestionnaireSchema","BaseModel","link","v","Mongo","SimpleSchema","BaseSchema","DomainResourceSchema","HumanNameSchema","IdentifierSchema","ContactPointSchema","AddressSchema","ReferenceSchema","SignatureSchema","Package","console","log","extend","prototype","_collection","Collection","_transform","document","type","String","defaultValue","optional","Object","blackbox","Array","Date","Boolean","Number","GroupSchema","attachSchema","insertUnique","record","findOne","_id","collectionConfig","Meteor","isClient","validate","filter","questionnaireId","insert","get","methods","newQuestionnaire","call","check","title","error","result","find","forEach","questionnaire","remove","AdminSidebarElements","SidebarElements","DynamicRoutes","QuestionnairesPage","QuestionnaireTable","QuestionnaireDetail","CardActions","CardText","CardTitle","RaisedButton","TextField","uniq","compact","render","Bert","React","Component","ReactMeteorData","ReactMixin","PropTypes","Session","SortableContainer","SortableElement","arrayMove","defaultQuestionnaire","sortableItemStyle","fontSize","width","listStyleType","padding","margin","borderBottom","SortableItem","value","backgroundColor","borderRadius","SortableList","items","cursor","map","index","setDefault","props","state","currentQuestionnaire","onSortEnd","oldIndex","newIndex","setState","set","componentWillReceiveProps","nextProps","questionnaireItems","item","push","getMeteorData","data","questionnaireDocument","questions","determineButtons","handleSaveButton","bind","marginRight","handleDeleteButton","changeState","field","event","questionnaireUpdate","process","env","TRACE","name","text","gender","toLowerCase","birthDate","photo","url","identifier","NODE_ENV","resourceType","update","$set","alert","reason","HipaaLogger","logEvent","eventType","userId","userName","user","fullName","collectionName","recordId","handleCancelButton","propTypes","object","exportDefault","Avatar","FlatButton","HTTP","Table","has","TableNoData","Toggle","FaTags","FaCode","FaPuzzlePiece","FaLock","flattenQuestionnaire","date","moment","add","format","status","length","style","hideOnPhone","visibility","display","cellHideOnPhone","paddingTop","maxWidth","cell","avatar","userSelect","height","selected","questionnaires","query","options","limit","imgError","avatarId","refs","src","absoluteUrl","rowClick","id","renderRowAvatarHeader","showAvatars","renderRowAvatar","avatarStyle","renderSendButtonHeader","showSendButton","renderSendButton","onSend","i","httpEndpoint","post","selectQuestionnaireRow","onRowClick","renderTogglesHeader","hideToggle","toggleQuestionnaireStatus","toggle","newStatus","renderToggles","toggleValue","renderIdentifierHeader","hideIdentifier","renderIdentifier","classNames","barcodes","renderActionIconsHeader","hideActionIcons","minWidth","renderActionIcons","actionIcons","marginLeft","tableRows","footer","noDataPadding","array","fhirVersion","string","paginationLimit","number","bool","func","Tab","Tabs","Glass","GlassCard","VerticalCanvas","FullPageCanvas","DynamicSpacer","Select","MenuItem","SortableQuestionnaire","Grid","Col","Row","username","email","given","family","opacity","tab","borderRight","tabIndex","questionnaireSearchFilter","sortableItems","enabled","chatbotInstalled","blur","appbar","darkroom","enableQuestionnaire","handleTabChange","selectLanguage","onNewTab","addChoice","version","paddingLeft"],"mappings":"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","file":"/packages/clinical_hl7-resource-questionnaire.js","sourcesContent":["import { BaseModel } from 'meteor/clinical:base-model';\nimport { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\nimport { BaseSchema, DomainResourceSchema, HumanNameSchema, IdentifierSchema, ContactPointSchema, AddressSchema, ReferenceSchema, SignatureSchema } from 'meteor/clinical:hl7-resource-datatypes';\n\n\nif(Package['clinical:autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  Your app has the 'clinical-autopublish' package installed.\");\n  console.log(\"Any protected health information (PHI) stored in this app should be audited.\"); \n  console.log(\"Please consider writing secure publish/subscribe functions and uninstalling.\");  \n  console.log(\"\");  \n  console.log(\"meteor remove clinical:autopublish\");  \n  console.log(\"\");  \n}\nif(Package['autopublish']){\n  console.log(\"*****************************************************************************\")\n  console.log(\"HIPAA WARNING:  DO NOT STORE PROTECTED HEALTH INFORMATION IN THIS APP. \");  \n  console.log(\"Your application has the 'autopublish' package installed.  Please uninstall.\");\n  console.log(\"\");  \n  console.log(\"meteor remove autopublish\");  \n  console.log(\"meteor add clinical:autopublish\");  \n  console.log(\"\");  \n}\n\n\n\n\n\n\n// create the object using our BaseModel\nQuestionnaire = BaseModel.extend();\n\n//Assign a collection so the object knows how to perform CRUD operations\nQuestionnaire.prototype._collection = Questionnaires;\n\n// Create a persistent data store for addresses to be stored.\n// HL7.Resources.Patients = new Mongo.Collection('HL7.Resources.Patients');\n\nif(typeof Questionnaires === 'undefined'){\n  // if(Package['autopublish']){\n  //   Questionnaires = new Mongo.Collection('Questionnaires');\n  // } else if(Package['clinical:autopublish']){    \n  //   Questionnaires = new Mongo.Collection('Questionnaires');\n  // } else if(Package['clinical:desktop-publish']){    \n  //   Questionnaires = new Mongo.Collection('Questionnaires');\n  // } else {\n  //   Questionnaires = new Mongo.Collection('Questionnaires', {connection: null});\n  // }\n  Questionnaires = new Mongo.Collection('Questionnaires');\n}\n\n\n//Add the transform to the collection since Meteor.users is pre-defined by the accounts package\nQuestionnaires._transform = function (document) {\n  return new Questionnaire(document);\n};\n\n\n\nQuestionnaireSchema = new SimpleSchema({\n  \"resourceType\" : {\n    type: String,\n    defaultValue: \"Questionnaire\"\n    },\n  \"_id\" : {\n    optional: true,\n    type: String\n    },\n\n  \"id\" : {\n    optional: true,\n    type: String\n    },\n  \"text\" : {\n      optional: true,\n      type: Object,\n      blackbox: true\n      },\n  \"identifier\" : {\n    optional: true,\n    type:  Array\n    },\n  \"identifier.$\" : {\n    optional: true,\n    type:  IdentifierSchema \n    },\n  \"version\" : {\n    optional: true,\n    type: String\n    },\n  \"status\" : {\n    optional: true,\n    type: String\n    },\n  \"title\" : {\n    optional: true,\n    type: String\n    },\n  \"date\" : {\n    optional: true,\n    type: Date\n    },\n  \"publisher\" : {\n    optional: true,\n    type: String\n    },\n  \"telecom\" : {\n    optional: true,\n    type: Array\n    },\n  \"telecom.$\" : {\n    optional: true,\n    type: ContactPointSchema \n    },\n  \"subjectType\" : {\n    optional: true,\n    type: Array\n    },\n  \"subjectType.$\" : {\n    optional: true,\n    type: String \n    },\n  \"item\" : {\n    optional: true,\n    type: Array\n    },\n  \"item.$\" : {\n    optional: true,\n    type: Object,\n    blackbox: true\n    },\n  \"item.$.linkId\" : {\n    optional: true,\n    type: String \n    },\n  \"item.$.description\" : {\n    optional: true,\n    type: String \n    },\n  \"item.$.text\" : {\n    optional: true,\n    type: String \n    },\n  \"item.$.type\" : {\n    optional: true,\n    type: String \n    },\n  \"item.$.enableWhen\" : {\n    optional: true,\n    type: Array \n    },\n  \"item.$.enableWhen.$\" : {\n    optional: true,\n    blackbox: true,\n    type: Object \n    },\n  \"item.$.required\" : {\n    optional: true,\n    type: Boolean \n    },\n  \"item.$.readOnly\" : {\n    optional: true,\n    type: Boolean \n    },\n  \"item.$.maxLength\" : {\n      optional: true,\n      type: Number \n      },\n  \"item.$.answerOption\" : {\n    optional: true,\n    type: Array \n    },\n  \"item.$.answerOption.$\" : {\n    optional: true,\n    blackbox: true,\n    type: Object \n    },  \n  \"item.$.initial\" : {\n    optional: true,\n    type: Array \n    },\n  \"item.$.initial.$\" : {\n    optional: true,\n    blackbox: true,\n    type: Object \n    },      \n  \"group\" : {\n    blackbox: true,\n    optional: true,\n    type: GroupSchema\n    }\n});\n\nBaseSchema.extend(QuestionnaireSchema);\nDomainResourceSchema.extend(QuestionnaireSchema);\n\nQuestionnaires.attachSchema(QuestionnaireSchema);\n\n\nQuestionnaires.insertUnique = function (record) {\n  console.log(\"Questionnaires.insertUnique()\");\n  console.log(\"Questionnaires.findOne(record._id)\", Questionnaires.findOne(record._id));\n  if(!Questionnaires.findOne(record._id)){\n    let collectionConfig = {};\n    if(Meteor.isClient){\n      collectionConfig = { validate: false, filter: false }\n    }\n    let questionnaireId = Questionnaires.insert(record, collectionConfig);    \n    console.log('Questionnaire created: ' + questionnaireId);\n    return questionnaireId;\n  }\n};\n\n\n\nexport { Questionnaire, Questionnaires, QuestionnaireSchema };","import { get } from 'lodash';\n\nMeteor.methods({\n    'Questionnaire/initialize': function(){\n        console.log('Questionnaire/initialize')\n        var newQuestionnaire = {\n            \"resourceType\": \"Questionnaire\",\n            \"id\": \"3141\",\n            \"text\": {\n              \"status\": \"generated\",\n              \"div\": \"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n      <pre>\\n            1.Comorbidity?\\n              1.1 Cardial Comorbidity\\n                1.1.1 Angina?\\n                1.1.2 MI?\\n              1.2 Vascular Comorbidity?\\n              ...\\n            Histopathology\\n              Abdominal\\n                pT category?\\n              ...\\n          </pre>\\n    </div>\"\n            },\n            \"url\": \"http://hl7.org/fhir/Questionnaire/3141\",\n            \"title\": \"Cancer Quality Forum Questionnaire 2012\",\n            \"status\": \"draft\",\n            \"subjectType\": [\n              \"Patient\"\n            ],\n            \"date\": \"2012-01\",\n            \"item\": [\n              {\n                \"linkId\": \"1\",\n                \"code\": [\n                  {\n                    \"system\": \"http://example.org/system/code/sections\",\n                    \"code\": \"COMORBIDITY\"\n                  }\n                ],\n                \"type\": \"group\",\n                \"item\": [\n                  {\n                    \"linkId\": \"1.1\",\n                    \"code\": [\n                      {\n                        \"system\": \"http://example.org/system/code/questions\",\n                        \"code\": \"COMORB\"\n                      }\n                    ],\n                    \"prefix\": \"1\",\n                    \"type\": \"choice\",\n                    \"answerValueSet\": \"http://hl7.org/fhir/ValueSet/yesnodontknow\",\n                    \"item\": [\n                      {\n                        \"linkId\": \"1.1.1\",\n                        \"code\": [\n                          {\n                            \"system\": \"http://example.org/system/code/sections\",\n                            \"code\": \"CARDIAL\"\n                          }\n                        ],\n                        \"type\": \"group\",\n                        \"enableWhen\": [\n                          {\n                            \"question\": \"1.1\",\n                            \"operator\": \"=\",\n                            \"answerCoding\": {\n                              \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0136\",\n                              \"code\": \"Y\"\n                            }\n                          }\n                        ],\n                        \"item\": [\n                          {\n                            \"linkId\": \"1.1.1.1\",\n                            \"code\": [\n                              {\n                                \"system\": \"http://example.org/system/code/questions\",\n                                \"code\": \"COMORBCAR\"\n                              }\n                            ],\n                            \"prefix\": \"1.1\",\n                            \"type\": \"choice\",\n                            \"answerValueSet\": \"http://hl7.org/fhir/ValueSet/yesnodontknow\",\n                            \"item\": [\n                              {\n                                \"linkId\": \"1.1.1.1.1\",\n                                \"code\": [\n                                  {\n                                    \"system\": \"http://example.org/system/code/questions\",\n                                    \"code\": \"COMCAR00\",\n                                    \"display\": \"Angina Pectoris\"\n                                  },\n                                  {\n                                    \"system\": \"http://snomed.info/sct\",\n                                    \"code\": \"194828000\",\n                                    \"display\": \"Angina (disorder)\"\n                                  }\n                                ],\n                                \"prefix\": \"1.1.1\",\n                                \"type\": \"choice\",\n                                \"answerValueSet\": \"http://hl7.org/fhir/ValueSet/yesnodontknow\"\n                              },\n                              {\n                                \"linkId\": \"1.1.1.1.2\",\n                                \"code\": [\n                                  {\n                                    \"system\": \"http://snomed.info/sct\",\n                                    \"code\": \"22298006\",\n                                    \"display\": \"Myocardial infarction (disorder)\"\n                                  }\n                                ],\n                                \"prefix\": \"1.1.2\",\n                                \"type\": \"choice\",\n                                \"answerValueSet\": \"http://hl7.org/fhir/ValueSet/yesnodontknow\"\n                              }\n                            ]\n                          },\n                          {\n                            \"linkId\": \"1.1.1.2\",\n                            \"code\": [\n                              {\n                                \"system\": \"http://example.org/system/code/questions\",\n                                \"code\": \"COMORBVAS\"\n                              }\n                            ],\n                            \"prefix\": \"1.2\",\n                            \"type\": \"choice\",\n                            \"answerValueSet\": \"http://hl7.org/fhir/ValueSet/yesnodontknow\"\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"linkId\": \"2\",\n                \"code\": [\n                  {\n                    \"system\": \"http://example.org/system/code/sections\",\n                    \"code\": \"HISTOPATHOLOGY\"\n                  }\n                ],\n                \"type\": \"group\",\n                \"item\": [\n                  {\n                    \"linkId\": \"2.1\",\n                    \"code\": [\n                      {\n                        \"system\": \"http://example.org/system/code/sections\",\n                        \"code\": \"ABDOMINAL\"\n                      }\n                    ],\n                    \"type\": \"group\",\n                    \"item\": [\n                      {\n                        \"linkId\": \"2.1.2\",\n                        \"code\": [\n                          {\n                            \"system\": \"http://example.org/system/code/questions\",\n                            \"code\": \"STADPT\",\n                            \"display\": \"pT category\"\n                          }\n                        ],\n                        \"type\": \"choice\"\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          };\n        Meteor.call('Questionnaire/create', newQuestionnaire)\n    }, \n    'Questionnaire/create': function(newQuestionnaire){\n        console.log('Questionnaire/create');\n        // console.log('newQuestionnaire', newQuestionnaire);\n        check(newQuestionnaire, Object);\n        \n        if(!Questionnaires.findOne({title: newQuestionnaire.title})){\n          let collectionConfig = {};\n          if(Meteor.isClient){\n            collectionConfig = { validate: false, filter: false }\n          }\n          let questionnaireId = Questionnaires.insert(newQuestionnaire, collectionConfig, function(error, result){\n            if(error) console.log(error);  \n          });    \n          console.log('Questionnaire created: ' + questionnaireId);\n      }\n    }, \n    'Questionnaire/drop': function(){\n        console.log('Questionnaire/drop')\n        Questionnaires.find().forEach(function(questionnaire){\n          Questionnaires.remove({_id: questionnaire._id})\n        });\n    }\n})","\n\nimport QuestionnairesPage from './client/QuestionnairesPage';\nimport QuestionnaireTable from './client/QuestionnaireTable';\nimport QuestionnaireDetail from './client/QuestionnaireDetail';\n\nvar DynamicRoutes = [{\n  'name': 'QuestionnairePage',\n  'path': '/questionnaires',\n  'component': QuestionnairesPage,\n  'requireAuth': true\n}];\n\nvar SidebarElements = [{\n  'primaryText': 'Questionnaires',\n  'to': '/questionnaires',\n  'href': '/questionnaires'\n}];\nvar AdminSidebarElements = [{\n  'primaryText': 'Questionnaires',\n  'to': '/questionnaires',\n  'href': '/questionnaires'\n}];\n\nexport { \n  AdminSidebarElements,\n  SidebarElements, \n  DynamicRoutes, \n\n  QuestionnairesPage,\n  QuestionnaireTable,\n  QuestionnaireDetail\n};\n\n\n","import { CardActions, CardText, CardTitle, RaisedButton, TextField } from 'material-ui';\nimport { get, uniq, compact } from 'lodash';\nimport {render} from 'react-dom';\n\nimport { Bert } from 'meteor/clinical:alert';\nimport React, {Component} from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport PropTypes from 'prop-types';\n\nimport { Questionnaires } from '../lib/Questionnaires';\nimport { Session } from 'meteor/session';\nimport {\n  SortableContainer,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\n\n\nlet defaultQuestionnaire = {\n  \"resourceType\" : \"Questionnaire\"\n};\n\n\nlet sortableItemStyle = {\n  fontSize: '18px', \n  width: '100%',\n  listStyleType: 'none',\n  padding: '10px',\n  margin: '10px',\n  borderBottom: '1px solid lightgray'\n}\n\nconst SortableItem = SortableElement(function({value}){\n  // return <li style={sortableItemStyle}>\n  //   <p>{value}</p>\n  // </li>\n\n    switch (value) {\n      case 'choice':\n        result = <li style={{padding: '5px', backgroundColor: 'cornflowerblue', borderRadius: '3px'}}>\n          <p>{value}</p>\n        </li>\n        break;\n      case 'update':\n        result = <li style={{padding: '5px', backgroundColor: 'yellow', borderRadius: '3px'}}>\n          <p>{value}</p>\n        </li>\n        break;\n      case 'display':\n        result = <li style={{padding: '5px', backgroundColor: 'pink', borderRadius: '3px'}}>\n          <p>{value}</p>\n        </li>\n        break;\n      case 'decimal':\n        result = <li style={{padding: '5px', backgroundColor: 'lavender', borderRadius: '3px'}}>\n          <p>{value}</p>\n        </li>\n        break;\n      case 'response':\n        result = <li style={{padding: '5px', backgroundColor: 'lightgray', borderRadius: '3px'}}>\n          <p>{value}</p>\n        </li>\n        break;  \n      default:\n        result = <li style={sortableItemStyle}>\n          <p>{value}</p>\n        </li>\n        break;\n    }  \n  return result;\n});\n\n// const SortableItem = SortableElement(function(value){\n//   let result;\n//   switch (value) {\n//     case 'choice':\n//       result = <li style={{padding: '5px', backgroundColor: 'cornflowerblue', borderRadius: '3px'}}>\n//         <p>{value}</p>\n//       </li>\n//       break;\n//     case 'update':\n//       result = <li style={{padding: '5px', backgroundColor: 'yellow', borderRadius: '3px'}}>\n//         <p>{value}</p>\n//       </li>\n//       break;\n//     case 'display':\n//       result = <li style={{padding: '5px', backgroundColor: 'pink', borderRadius: '3px'}}>\n//         <p>{value}</p>\n//       </li>\n//       break;\n//     case 'decimal':\n//       result = <li style={{padding: '5px', backgroundColor: 'lavender', borderRadius: '3px'}}>\n//         <p>{value}</p>\n//       </li>\n//       break;\n//     case 'response':\n//       result = <li style={{padding: '5px', backgroundColor: 'lightgray', borderRadius: '3px'}}>\n//         <p>{value}</p>\n//       </li>\n//       break;  \n//     default:\n//       result = <li style={sortableItemStyle}>\n//         <p>{value}</p>\n//       </li>\n//       break;\n//   }  \n//   return result;\n// });\n\nconst SortableList = SortableContainer(({items}) => {\n  return (\n    <ul style={{cursor: 'pointer', listStyleType: 'none'}}>\n      {items.map((value, index) => (\n        <SortableItem key={`item-${index}`} index={index} value={value} />\n      ))}\n    </ul>\n  );\n});\n\n\n\n// export class SortableQuestionnaire extends React.Component {\n//     constructor(props) {\n//         super(props);\n//     }\n//     state = {\n//         items: ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5', 'Item 6'],\n//     };\n//     componentDidMount() {\n//       if(this.props.items){\n//         this.setState({items: this.props.items});\n//       }\n//     };\n//     onSortEnd = ({oldIndex, newIndex}) => {\n//         this.setState(({items}) => ({\n//           items: arrayMove(items, oldIndex, newIndex),\n//         }));\n//     };\n//     render() {\n//         console.log('SortableQuestionnaire', this.state)\n//         return <SortableList items={this.state.items} onSortEnd={this.onSortEnd} />;\n//     }\n// }\n\n\nSession.setDefault('questionnaireUpsert', false);\nSession.setDefault('selectedQuestionnaire', false);\nSession.setDefault('sortableItems', []);\n\nexport class QuestionnaireDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  state = {\n      items: ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5', 'Item 6'],\n      currentQuestionnaire: false\n  };\n  // componentDidMount() {\n  //   console.log('componentDidMount')\n  //   if(this.props.items){\n  //     let displayText = [];\n  //     this.props.items.forEach(function(item){\n  //       console.log('item', item)\n  //       displayText.push(get(item, 'text'));              \n  //     });\n\n  //     this.setState({items: uniq(displayText)});\n  //     console.log('this.state', this.state)\n  //   }\n  // };\n  componentWillReceiveProps(nextProps) {\n    // You don't have to do this check first, but it can help prevent an unneeded render\n    if (nextProps.currentQuestionnaire !== this.state.currentQuestionnaire) {\n      console.log('Received a questionnaire as a property.', nextProps.currentQuestionnaire)\n\n      let questionnaireItems = [];\n      if (get(nextProps, 'currentQuestionnaire.item')) {\n        console.log('Iterating through items...')\n        nextProps.currentQuestionnaire.item.forEach(function(item){\n          console.log('item', item)\n          if(get(item, 'text')){\n            questionnaireItems.push(get(item, 'text'));              \n          } else {\n            questionnaireItems.push(get(item, 'type'));              \n          }\n        });\n        console.log('uniq(questionnaireItems)', uniq(compact(questionnaireItems)))\n        this.state.items = uniq(questionnaireItems);\n        this.setState({ items: questionnaireItems });\n        this.setState({ currentQuestionnaire: nextProps.currentQuestionnaire });\n      }\n\n      console.log('this.state', this.state)\n    }\n  }\n  getMeteorData() {\n    let data = {\n      questionnaireId: false,\n      currentQuestionnaire: false,\n      //items: Session.get('sortableItems')\n    };\n\n    console.log(\"QuestionnaireDetail[data]\", data);\n    return data;\n  }\n  onSortEnd = ({oldIndex, newIndex}) => {\n    this.setState(({items}) => ({\n      items: arrayMove(items, oldIndex, newIndex),\n    }));\n\n    Session.set('editedQuestionnaire', {\n      questionnaireId: Session.get('selectedQuestionnaire'),\n      items: this.state.items\n    })\n  }\n  render() {\n\n    let questionnaireDocument;\n    let questions = [];\n\n\n    console.log('QuestionnaireDetail.state', this.state);\n    return (\n      <div id={ get(this, 'props.id', '')} className=\"questionnaireDetail\">\n        <div id='questionnaireDocument'>\n          <SortableList items={this.state.items} onSortEnd={this.onSortEnd} />\n        </div>\n      </div>\n    );\n  }\n  determineButtons(questionnaireId){\n    if (questionnaireId) {\n      return (\n        <div>\n          <RaisedButton id='saveQuestionnaireButton' className='saveQuestionnaireButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} style={{marginRight: '20px'}} />\n          <RaisedButton label=\"Delete\" onClick={this.handleDeleteButton.bind(this)} />\n        </div>\n      );\n    } else {\n      return(\n        <RaisedButton id='saveQuestionnaireButton'  className='saveQuestionnaireButton' label=\"Save\" primary={true} onClick={this.handleSaveButton.bind(this)} />\n      );\n    }\n  }\n\n  changeState(field, event, value){\n    let questionnaireUpdate;\n\n    if(process.env.TRACE) console.log(\"questionnaireDetail.changeState\", field, event, value);\n\n    // by default, assume there's no other data and we're creating a new questionnaire\n    if (Session.get('questionnaireUpsert')) {\n      questionnaireUpdate = Session.get('questionnaireUpsert');\n    } else {\n      questionnaireUpdate = defaultQuestionnaire;\n    }\n\n\n\n    // if there's an existing questionnaire, use them\n    if (Session.get('selectedQuestionnaire')) {\n      questionnaireUpdate = this.data.questionnaire;\n    }\n\n    switch (field) {\n      case \"name\":\n        questionnaireUpdate.name[0].text = value;\n        break;\n      case \"gender\":\n        questionnaireUpdate.gender = value.toLowerCase();\n        break;\n      case \"birthDate\":\n        questionnaireUpdate.birthDate = value;\n        break;\n      case \"photo\":\n        questionnaireUpdate.photo[0].url = value;\n        break;\n      case \"mrn\":\n        questionnaireUpdate.identifier[0].value = value;\n        break;\n      default:\n\n    }\n    // questionnaireUpdate[field] = value;\n    process.env.TRACE && console.log(\"questionnaireUpdate\", questionnaireUpdate);\n\n    Session.set('questionnaireUpsert', questionnaireUpdate);\n  }\n\n\n  // this could be a mixin\n  handleSaveButton(){\n    if(process.env.NODE_ENV === \"test\") console.log('handleSaveButton()');\n    let questionnaireUpdate = Session.get('questionnaireUpsert', questionnaireUpdate);\n\n\n    if (questionnaireUpdate.birthDate) {\n      questionnaireUpdate.birthDate = new Date(questionnaireUpdate.birthDate);\n    }\n    if(process.env.NODE_ENV === \"test\") console.log(\"questionnaireUpdate\", questionnaireUpdate);\n\n    if (Session.get('selectedQuestionnaire')) {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Updating questionnaire...\");\n\n      delete questionnaireUpdate._id;\n\n      // not sure why we're having to respecify this; fix for a bug elsewhere\n      questionnaireUpdate.resourceType = 'Questionnaire';\n\n      Questionnaires.update({_id: Session.get('selectedQuestionnaire')}, {$set: questionnaireUpdate }, function(error, result){\n        if (error) {\n          if(process.env.NODE_ENV === \"test\") console.log(\"Questionnaires.insert[error]\", error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"update\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Questionnaires\", recordId: Session.get('selectedQuestionnaire')});\n          // Session.set('questionnaireUpdate', defaultQuestionnaire);\n          Session.set('questionnaireUpsert', false);\n          Session.set('selectedQuestionnaire', false);\n          Session.set('questionnairePageTabIndex', 1);\n          Bert.alert('Questionnaire added!', 'success');\n        }\n      });\n    } else {\n      if(process.env.NODE_ENV === \"test\") console.log(\"Creating a new questionnaire...\", questionnaireUpdate);\n\n      Questionnaires.insert(questionnaireUpdate, function(error, result) {\n        if (error) {\n          if(process.env.NODE_ENV === \"test\")  console.log('Questionnaires.insert[error]', error);\n          Bert.alert(error.reason, 'danger');\n        }\n        if (result) {\n          HipaaLogger.logEvent({eventType: \"create\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Questionnaires\", recordId: result});\n          Session.set('questionnairePageTabIndex', 1);\n          Session.set('selectedQuestionnaire', false);\n          Session.set('questionnaireUpsert', false);\n          Bert.alert('Questionnaire added!', 'success');\n        }\n      });\n    }\n  }\n\n  handleCancelButton(){\n    Session.set('questionnairePageTabIndex', 1);\n  }\n\n  handleDeleteButton(){\n    Questionnaires.remove({_id: Session.get('selectedQuestionnaire')}, function(error, result){\n      if (error) {\n        if(process.env.NODE_ENV === \"test\") console.log('Questionnaires.insert[error]', error);\n        Bert.alert(error.reason, 'danger');\n      }\n      if (result) {\n        HipaaLogger.logEvent({eventType: \"delete\", userId: Meteor.userId(), userName: Meteor.user().fullName(), collectionName: \"Questionnaires\", recordId: Session.get('selectedQuestionnaire')});\n        // Session.set('questionnaireUpdate', defaultQuestionnaire);\n        Session.set('questionnaireUpsert', false);\n        Session.set('questionnairePageTabIndex', 1);\n        Session.set('selectedQuestionnaire', false);\n        Bert.alert('Questionnaire removed!', 'success');\n      }\n    });\n  }\n}\n\nQuestionnaireDetail.propTypes = {\n  currentQuestionnaire: PropTypes.object\n};\nReactMixin(QuestionnaireDetail.prototype, ReactMeteorData);\nexport default QuestionnaireDetail;","import Avatar from 'material-ui/Avatar';\nimport FlatButton from 'material-ui/FlatButton';\nimport { HTTP } from 'meteor/http';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Table } from 'react-bootstrap';\nimport { Session } from 'meteor/session';\nimport { has, get } from 'lodash';\nimport { TableNoData } from 'meteor/clinical:glass-ui'\nimport PropTypes from 'prop-types';\nimport Toggle from 'material-ui/Toggle';\n\nimport { FaTags, FaCode, FaPuzzlePiece, FaLock  } from 'react-icons/fa';\n\nflattenQuestionnaire = function(questionnaire){\n  let result = {\n    _id: questionnaire._id,\n    title: '',\n    state: '',\n    date: '',\n    items: 0\n  };\n\n  result.date = moment(questionnaire.date).add(1, 'days').format(\"YYYY-MM-DD\")\n  result.title = get(questionnaire, 'title', '');\n  result.status = get(questionnaire, 'status', '');\n  result.items = get(questionnaire, 'item', []).length;\n  \n  return result;\n}\n\nexport class QuestionnaireTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getMeteorData() {\n    let data = {\n      style: {\n        hideOnPhone: {\n          visibility: 'visible',\n          display: 'table'\n        },\n        cellHideOnPhone: {\n          visibility: 'visible',\n          display: 'table',\n          paddingTop: '16px',\n          maxWidth: '120px'\n        },\n        cell: {\n          paddingTop: '16px'\n        },\n        avatar: {\n          // color: rgb(255, 255, 255);\n          backgroundColor: 'rgb(188, 188, 188)',\n          userSelect: 'none',\n          borderRadius: '2px',\n          height: '40px',\n          width: '40px'\n        }\n      },\n      selected: [],\n      questionnaires: []\n    };\n\n    let query = {};\n    let options = {};\n\n    // number of items in the table should be set globally\n    if (get(Meteor, 'settings.public.defaults.paginationLimit')) {\n      options.limit = get(Meteor, 'settings.public.defaults.paginationLimit');\n    }\n    // but can be over-ridden by props being more explicit\n    if(this.props.limit){\n      options.limit = this.props.limit;      \n    }\n\n    if(this.props.data){\n      // console.log('this.props.data', this.props.data);\n\n      if(this.props.data.length > 0){              \n        this.props.data.forEach(function(questionnaire){\n          data.questionnaires.push(flattenQuestionnaire(questionnaire));\n        });  \n      }\n    } else {\n      data.questionnaires = Questionnaires.find().map(function(questionnaire){\n        return flattenQuestionnaire(questionnaire);\n      });\n    }\n\n\n    console.log(\"QuestionnaireTable[data]\", data);\n    return data;\n  }\n  imgError(avatarId) {\n    this.refs[avatarId].src = Meteor.absoluteUrl() + 'noAvatar.png';\n  }\n  rowClick(id){\n    Session.set('questionnairesUpsert', false);\n    Session.set('selectedQuestionnaire', id);\n    // Session.set('questionnairePageTabIndex', 2);\n  }\n  renderRowAvatarHeader(){\n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <th className='avatar'>photo</th>\n      );\n    }\n  }\n  renderRowAvatar(questionnaire, avatarStyle){\n    console.log('renderRowAvatar', questionnaire, avatarStyle)\n    if (get(Meteor, 'settings.public.defaults.avatars') && (this.props.showAvatars === true)) {\n      return (\n        <td className='avatar'>\n          <img src={questionnaire.photo} ref={questionnaire._id} onError={ this.imgError.bind(this, questionnaire._id) } style={avatarStyle}/>\n        </td>\n      );\n    }\n  }\n  renderSendButtonHeader(){\n    if (this.props.showSendButton === true) {\n      return (\n        <th className='sendButton' style={this.data.style.hideOnPhone}></th>\n      );\n    }\n  }\n  renderSendButton(questionnaire, avatarStyle){\n    if (this.props.showSendButton === true) {\n      return (\n        <td className='sendButton' style={this.data.style.hideOnPhone}>\n          <FlatButton label=\"send\" onClick={this.onSend.bind('this', this.data.questionnaires[i]._id)}/>\n        </td>\n      );\n    }\n  }\n  onSend(id){\n    let questionnaire = Questionnaires.findOne({_id: id});\n\n    console.log(\"QuestionnaireTable.onSend()\", questionnaire);\n\n    var httpEndpoint = \"http://localhost:8080\";\n    if (get(Meteor, 'settings.public.interfaces.default.channel.endpoint')) {\n      httpEndpoint = get(Meteor, 'settings.public.interfaces.default.channel.endpoint');\n    }\n    HTTP.post(httpEndpoint + '/Questionnaire', {\n      data: questionnaire\n    }, function(error, result){\n      if (error) {\n        console.log(\"error\", error);\n      }\n      if (result) {\n        console.log(\"result\", result);\n      }\n    });\n  }\n  selectQuestionnaireRow(questionnaireId){\n    if(typeof(this.props.onRowClick) === \"function\"){\n      this.props.onRowClick(questionnaireId);\n    }\n  }\n  renderTogglesHeader(){\n    if (!this.props.hideToggle) {\n      return (\n        <th className=\"toggle\">Toggle</th>\n      );\n    }\n  }\n  toggleQuestionnaireStatus(questionnaire, event, toggle){\n    console.log('toggleQuestionnaireStatus', questionnaire, toggle);\n    let newStatus = 'draft';\n\n    if(toggle){\n      newStatus = 'active';\n    } else {\n      newStatus = 'draft';\n    }\n\n    Questionnaires._collection.update({_id: questionnaire._id}, {$set: {\n      'status': newStatus\n    }}, function(error, result){\n      if(error){\n        console.error('Questionnaire Error', error);\n      }\n    });\n  }\n  renderToggles(questionnaires){\n    if (!this.props.hideToggle) {\n      let toggleValue = false;\n      if(get(questionnaires, 'status') === \"active\"){\n        toggleValue = true;\n      }\n      return (\n        <td className=\"toggle\">\n            <Toggle\n              defaultToggled={true}\n              value={toggleValue}\n              onToggle={this.toggleQuestionnaireStatus.bind(this, questionnaires)}\n            />\n          </td>\n      );\n    }\n  }\n  renderIdentifierHeader(){\n    if (!this.props.hideIdentifier) {\n      return (\n        <th className=\"identifier\">Identifier</th>\n      );\n    }\n  }\n  renderIdentifier(questionnaire ){\n    if (!this.props.hideIdentifier) {\n      let classNames = 'identifier';\n      if(this.props.barcodes){\n        classNames = 'barcode identifier'\n      }\n      return (\n        <td className={classNames}>{ get(questionnaire, 'identifier[0].value') }</td>       );\n    }\n  }\n  renderActionIconsHeader(){\n    if (!this.props.hideActionIcons) {\n      return (\n        <th className='actionIcons' style={{minWidth: '120px'}}>Actions</th>\n      );\n    }\n  }\n  renderActionIcons(actionIcons ){\n    if (!this.props.hideActionIcons) {\n      return (\n        <td className='actionIcons' style={{minWidth: '120px'}}>\n          <FaLock style={{marginLeft: '2px', marginRight: '2px'}} />\n          <FaTags style={{marginLeft: '2px', marginRight: '2px'}} />\n          <FaCode style={{marginLeft: '2px', marginRight: '2px'}} />\n          <FaPuzzlePiece style={{marginLeft: '2px', marginRight: '2px'}} />          \n        </td>\n      );\n    }\n  } \n\n  render () {\n    let tableRows = [];\n    let footer;\n\n    if(this.data.questionnaires.length === 0){\n      footer = <TableNoData noDataPadding={ this.props.noDataPadding } />\n    } else {\n      for (var i = 0; i < this.data.questionnaires.length; i++) {\n        tableRows.push(\n          <tr key={i} className=\"questionnaireRow\" style={{cursor: \"pointer\"}} onClick={this.selectQuestionnaireRow.bind(this, this.data.questionnaires[i].id )} >\n            { this.renderToggles(this.data.questionnaires[i]) }\n            { this.renderActionIcons(this.data.questionnaires[i]) }\n            <td className='title' onClick={ this.rowClick.bind('this', this.data.questionnaires[i]._id)} style={this.data.style.cell}>{this.data.questionnaires[i].title }</td>\n            <td className='status' onClick={ this.rowClick.bind('this', this.data.questionnaires[i]._id)} style={this.data.style.cell}>{this.data.questionnaires[i].status }</td>\n            <td className='date' onClick={ this.rowClick.bind('this', this.data.questionnaires[i]._id)} style={{minWidth: '100px', paddingTop: '16px'}}>{this.data.questionnaires[i].date }</td>\n            <td className='items' onClick={ this.rowClick.bind('this', this.data.questionnaires[i]._id)} style={this.data.style.cell}>{this.data.questionnaires[i].items }</td>\n            { this.renderIdentifier(this.data.questionnaires[i]) }\n          </tr>\n        );\n      }\n    }\n    \n\n\n    return(\n      <div>\n        <Table id='questionnairesTable' hover >\n          <thead>\n            <tr>\n            { this.renderTogglesHeader() }\n            { this.renderActionIconsHeader() }\n              <th className='title'>Title</th>\n              <th className='status'>Status</th>\n              <th className='date' style={{minWidth: '100px'}}>Date</th>\n              <th className='items'>Items</th>\n              { this.renderIdentifierHeader() }\n            </tr>\n          </thead>\n          <tbody>\n            { tableRows }\n          </tbody>\n        </Table>\n        { footer }\n      </div>\n    );\n  }\n}\n\nQuestionnaireTable.propTypes = {\n  data: PropTypes.array,\n  fhirVersion: PropTypes.string,\n  query: PropTypes.object,\n  paginationLimit: PropTypes.number,\n  hideIdentifier: PropTypes.bool,\n  hideToggle: PropTypes.bool,\n  hideActionIcons: PropTypes.bool,\n  onRowClick: PropTypes.func\n};\nReactMixin(QuestionnaireTable.prototype, ReactMeteorData);\nexport default QuestionnaireTable;","import { CardText, CardTitle, CardActions, Tab, Tabs, TextField, Toggle, RaisedButton } from 'material-ui';\nimport { Glass, GlassCard, VerticalCanvas, FullPageCanvas, DynamicSpacer } from 'meteor/clinical:glass-ui';\nimport { Select, MenuItem } from '@material-ui/core';\n\nimport QuestionnaireDetail from './QuestionnaireDetail';\nimport QuestionnaireTable from './QuestionnaireTable';\nimport SortableQuestionnaire from './SortableQuestionnaire';\n\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ReactMeteorData } from 'meteor/react-meteor-data';\nimport ReactMixin from 'react-mixin';\nimport { Grid, Col, Row } from 'react-bootstrap';\nimport { get } from 'lodash';\nimport { Session } from 'meteor/session';\n\n\n\nlet defaultQuestionnaire = {\n  index: 2,\n  id: '',\n  username: '',\n  email: '',\n  given: '',\n  family: '',\n  gender: ''\n};\nSession.setDefault('questionnaireFormData', defaultQuestionnaire);\nSession.setDefault('questionnaireSearchFilter', '');\n\n\nSession.setDefault('enableCurrentQuestionnaire', false);\nexport class QuestionnairesPage extends React.Component {\n  getMeteorData() {\n    let data = {\n      style: {\n        opacity: Session.get('globalOpacity'),\n        tab: {\n          borderBottom: '1px solid lightgray',\n          borderRight: 'none'\n        }\n      },\n      tabIndex: Session.get('questionnairePageTabIndex'),\n      questionnaire: defaultQuestionnaire,\n      questionnaireSearchFilter: '',\n      currentQuestionnaire: null,\n      questionnaireId: false,\n      sortableItems: ['Lorem ipsum?', 'Ipsum foo?', 'Dolar set et?'],\n      enabled: Session.get('enableCurrentQuestionnaire'),\n      chatbotInstalled: false\n    };\n\n    if (Session.get('questionnaireFormData')) {\n      data.questionnaire = Session.get('questionnaireFormData');\n    }\n    if (Session.get('questionnaireSearchFilter')) {\n      data.questionnaireSearchFilter = Session.get('questionnaireSearchFilter');\n    }\n    if (Session.get(\"selectedQuestionnaire\")) {\n      console.log(\"data.questionnaireId\", Session.get('data.questionnaireId'));\n\n        data.currentQuestionnaire = Questionnaires.findOne({_id: Session.get('selectedQuestionnaire')});\n        console.log(\"data.currentQuestionnaire\", data.currentQuestionnaire);\n\n        if (get(data, 'selectedQuestionnaire.item')) {\n          data.sortableItems = [];\n          data.currentQuestionnaire.item.forEach(function(item){\n            console.log('item', item)\n            data.sortableItems.push(get(item, 'text'));              \n          });\n        }\n    }\n\n\n    data.style = Glass.blur(data.style);\n    data.style.appbar = Glass.darkroom(data.style.appbar);\n    data.style.tab = Glass.darkroom(data.style.tab);\n\n    console.log(\"QuestionnairesPage[data]\", data);\n    return data;\n  }\n  enableQuestionnaire(){\n    Session.toggle('enableCurrentQuestionnaire');\n  }\n\n  handleTabChange(index){\n    Session.set('questionnairePageTabIndex', index);\n  }\n  selectLanguage(){\n    \n  }\n  onNewTab(){\n    Session.set('selectedQuestionnaire', false);\n    Session.set('questionnaireUpsert', false);\n  }\n  addChoice(){\n    console.log('addChoice')\n  }\n  render() {\n    console.log('React.version: ' + React.version);\n\n    return (\n      <div id=\"questionnairesPage\">\n        <FullPageCanvas>\n          <Col md={4}>\n            <GlassCard height=\"auto\">\n              <CardTitle\n                title=\"Questionnaires\"\n              />\n              <CardText>\n                <QuestionnaireTable />\n              </CardText>\n            </GlassCard>\n          </Col>\n          <Col md={4}>\n            <GlassCard >\n              <CardTitle \n                id='questionnaireTitleInput' \n                title={get(this, 'data.currentQuestionnaire.title')} \n                />\n              <CardText>\n                {/* <Select\n                  value={ currentSelectIndex }\n                  onChange={this.selectLanguage}\n                  style={{\n                    position: 'absolute',     \n                    right: '20px',\n                    top: '20px',\n                    marginRight: '20px',\n                    width: '240px',\n                    fontSize: '150%'\n                  }}\n                  inputProps={{\n                    name: 'age',\n                    id: 'age-simple',\n                  }}\n                >\n                  { menuItems }\n                </Select> */}\n              <Toggle\n                label=\"Enabled\"\n                toggled={ this.data.enabled }\n                onToggle={ this.enableQuestionnaire.bind(this) }\n              />\n              </CardText>\n            </GlassCard>\n            <DynamicSpacer />\n\n            <CardTitle \n                title='Add Questions' \n                />\n\n            <GlassCard >\n              <CardText>\n                <TextField\n                  hintText=\"Lorem ipsum...\"\n                  errorText=\"Question\"\n                  type='text'\n                  fullWidth />\n              </CardText>\n              <CardActions>\n\n              </CardActions>\n            </GlassCard>\n            <DynamicSpacer />\n\n            <GlassCard >\n              <CardText>\n                <TextField\n                  hintText=\"Lorem ipsum dolor set et...\"\n                  errorText=\"Multiline\"\n                  type='text'\n                  multiLine={true}         \n                  rows={3}         \n                  fullWidth />\n              </CardText>\n            </GlassCard>\n            <DynamicSpacer />\n\n            <GlassCard >\n              <CardText>\n              <TextField\n                  hintText=\"Lorem ipsum....\"\n                  errorText=\"Multiple Choice Question\"\n                  type='text'\n                  fullWidth />\n                <TextField\n                  hintText=\"Multiple Choice\"\n                  errorText=\"New Choice\"\n                  type='text'\n                  style={{paddingLeft: '20px'}}\n                  fullWidth />\n                  <DynamicSpacer />\n                <RaisedButton onClick={this.addChoice} style={{margin: '20px'}}>Add</RaisedButton>\n              </CardText>\n\n            </GlassCard>\n            <DynamicSpacer />\n            \n\n\n\n          </Col>\n          <Col md={4}>\n            <GlassCard height='auto' >\n              <CardText>\n                <QuestionnaireDetail id='questionnaireDetails' currentQuestionnaire={this.data.currentQuestionnaire}  />\n              </CardText>\n            </GlassCard>\n          </Col>\n          \n        </FullPageCanvas>\n      </div>\n    );\n  }\n}\n\n\nReactMixin(QuestionnairesPage.prototype, ReactMeteorData);\nexport default QuestionnairesPage;","import { CardActions, CardText, CardTitle, RaisedButton, TextField } from 'material-ui';\nimport React, {Component} from 'react';\nimport {render} from 'react-dom';\nimport {\n  SortableContainer,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\n \n\n\nconst SortableItem = SortableElement(({value}) => <li style={{listStyleType: 'none'}}>\n    <TextField value={value} />\n</li>);\n\nconst SortableList = SortableContainer(({items}) => {\n  return (\n    <ul style={{cursor: 'pointer', listStyleType: 'none'}}>\n      {items.map((value, index) => (\n        <SortableItem key={`item-${index}`} index={index} value={value} />\n      ))}\n    </ul>\n  );\n});\n\n\n\nexport class SortableQuestionnaire extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n    state = {\n        items: this.props.items\n    };\n    onSortEnd = ({oldIndex, newIndex}) => {\n        this.setState(({items}) => ({\n            items: arrayMove(items, oldIndex, newIndex),\n        }));\n    };\n    render() {\n        return <SortableList items={this.state.items} onSortEnd={this.onSortEnd} />;\n    }\n}\n\nexport default SortableQuestionnaire;\n"]}